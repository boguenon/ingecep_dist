IG$._IA7=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:500,height:400,callback:null,_IG0:function(){this.close()},_IFd:function(){var d=this,b=d.down("[name=outputtype]"),c=d.down("[name=p_page]"),e=d.down("[name=n_page]"),a=d.mresult;if(a&&a.rows>a.data.length){e.setValue("Partial page start "+(a.pagestart+1)+" to "+(a.pageend+1));c.show()}b.setValue("comma");d.l2()},l1:function(){var a=this;a.l2()},l2:function(){var w=this,a=w.down("[name=outputtype]"),g=w.down("[name=textoutput]"),f=w.down("[name=tableoutput]"),c=w.down("[name=btntableview]"),v=w.mresult,x=(v&&v.data&&v.data.length>0)?v.data:null,b=[],e=a.getValue(),q=$(f.body.dom),o,n,l,d,u=",",h=false,s="",m=false;if(x){switch(e){case"tab":u="\t";break;case"comma":s='"';break;case"rawcomma":h=true;break;case"rawtab":h=true;u="\t";break;case"table":m=true;break}if(m==false){c.setVisible(false);for(o=0;o<x.length;o++){l="";for(n=0;n<x[o].length;n++){d=s+((h==true)?(x[o][n].code||""):(x[o][n].text||x[o][n].code||""))+s;l=(n==0)?d:l+u+d}b.push(l)}}else{c.setVisible(true);c.setValue(false);b.push("<table>");for(o=0;o<x.length;o++){l="<tr>";for(n=0;n<x[o].length;n++){d="<td>"+(x[o][n].text||x[o][n].code||"&nbsp;")+"</td>";l+=d}b.push(l+"</tr>")}b.push("</table>");q.empty();q.html(b.join(""))}}g.setVisible(true);f.setVisible(false);g.setValue(b.join("\n"))},l3:function(){var d=this,b=d.down("[name=outputtype]"),c=d.down("[name=textoutput]"),e=d.down("[name=tableoutput]"),a=d.down("[name=btntableview]"),f=a.getValue();c.setVisible(!f);e.setVisible(f)},g1:function(){var c=this,b=c.sheetview,a=c.mresult,d;d=b._ILa._IJ1();c.setLoading(true);b._IK9._IKb.call(b._IK9,d,null,b.sheetindex,null,0,a.rows+10,new IG$._I3d(c,function(g){var e=this,f=e.down("[name=n_page]");e.setLoading(false);if(g&&!g.iserror&&g.mresults&&g.mresults.results.length){e.mresult=g.mresults.results[0];f.setValue("Data Fetched... "+(e.mresult.data.length)+" Rows");e.l2()}else{f.setValue("Error while fetching data from server..")}}),b._job,true,true)},initComponent:function(){var a=this;a.title=IRm$.r1("L_CLIPBOARD_COPY");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",bodyBorder:false,layout:{type:"vbox",align:"stretch"},items:[{name:"outputtype",xtype:"combobox",fieldLabel:"Output type",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"Tab separated",value:"tab"},{name:"Comma separated",value:"comma"},{name:"Raw data (Tab)",value:"rawtab"},{name:"Raw data (Comma)",value:"rawcomma"},{name:"HTML Table format",value:"table"}]},listeners:{change:function(e,b,d,c){a.l1.call(a)}}},{xtype:"fieldcontainer",name:"p_page",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"n_page",value:"-",flex:1},{xtype:"button",text:"Fetch All",handler:function(){this.g1()},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"displayfield",value:"Press Ctrl-A then Ctrl-C to copy this content to clipboard!",flex:1},{xtype:"checkbox",name:"btntableview",boxLabel:"Show HTML",hidden:true,flex:1,listeners:{change:function(d,e,c,b){a.l3.call(a)}}}]},{xtype:"textarea",name:"textoutput",flex:1},{html:"",collapsible:false,bodyStyle:"padding: 5px",name:"tableoutput",hidden:true,autoScroll:true,flex:1}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._IA7.superclass.initComponent.apply(this,arguments)}});IG$._IPc=IG$.x_c(IG$.pb,{uid:null,name:"sheet",layout:"card",autoScroll:false,bodyBorder:false,scroll:false,_IK2:null,_ILa:null,_ILb:null,activeView:-1,_IL5:false,layoutcomplete:false,border:0,m1:null,_IFf:function(c){var d=this,a=d._ILb,b,e=d,f=true;b=a.needPrompt.call(a);if(b&&b.length>0){e._IKd&&e._IKd.setVisible(true);e.showPrompt.call(e,b)}else{if(f==true){e._IKd&&e._IKd.setVisible(false)}}!c&&d._IK2&&d._IJ2()},_l1:function(b){var a=this;clearTimeout(a.__s1);a.__s1=setTimeout(function(){var c=b<20?0:b-20;a._IP7.call(a,c,c+200,true)},100)},Uc:function(b){var d=this,a=d._ILb,c;c=a?a.Uc.call(a,b):true;if(c){a.cubeuid=b}},__r1:function(g,n,m){var y=this,A,b,u,e,a=y._ILb,v,c=m?m.cell:null,d=m?m.row:null,t,q,o,l,f=y._IK2&&y._IK2.results.length?y._IK2.results[0]:null,z=f?f.data:null,x,s,w;y._IIf(true,true);y._IJf=true;y._IK1=true;y._IK1a=true;if(y._IK9&&y._IK9._IL8){u=y._IK9._IL8;e="<smsg><item uid='"+(y.uid||"")+"' option='pivot' active='"+y.sheetindex+"' pivotresult='T' jobid='"+(u||"")+"'>";e+="<option source='"+(m.source||"map")+"' zoom='"+m.zoom+"'>";if(m.bound){e+="<bound x1='"+m.bound.x1+"' y1='"+m.bound.y1+"' x2='"+m.bound.x2+"' y2='"+m.bound.y2+"'/>"}else{if(m.source=="hierarchy"){if(c.position==1){v=a.rows[c.index]}e+="<hierarchy uid='"+v.uid+"' depth='"+c.celltree.depth+"'>";if(f){e+="<headers n='"+f.rowfix+"' c='"+(f.cols-f.colfix)+"'>";for(t=f.colfix;t<f.cols;t++){e+="<col n='"+(t-f.colfix)+"'>";s="";for(q=0;q<f.rowfix;q++){x=f.data[q][t];w=(x.code||"")+"_"+(x.index)+"_"+x.position;s=(q==0)?w:s+":"+w}e+="<![CDATA["+s+"]]>";e+="</col>"}e+="</headers>"}e+="<values>";e+="<value type='D' depth='"+c.celltree.depth+"'>";e+="<code><![CDATA["+c.code+"]]></code>";e+="<text><![CDATA["+c.text+"]]></text>";e+="</value>";l=c.celltree.parent;while(l){e+="<value type='D' depth='"+l.celltree.depth+"'>";e+="<code><![CDATA["+l.code+"]]></code>";e+="<text><![CDATA["+l.text+"]]></text>";e+="</value>";l=l.celltree.parent}if(c.index>0){for(t=0;t<c.index;t++){for(q=0;q<d.length;q++){if(d[q].position==1&&d[q].index==t){o=d[q];e+="<value type='C' uid='"+a.rows[t].uid+"'>";e+="<code><![CDATA["+o.code+"]]></code>";e+="<text><![CDATA["+o.text+"]]></text>";e+="</value>"}}}}e+="</values>";e+="</hierarchy>"}}e+="</option>";e+="</item></smsg>";A="<smsg></smsg>";b=new IG$._I3e();b.init(y,{ack:"18",payload:e,mbody:A},y,function(h){y._IK9.r_IKb.call(y._IK9,h,[null,y.sheetindex,null,null,null,null,null,c])});b._l()}},CLS:{afterrender:function(){var a=this;a.layoutcomplete=true;a._IFd()},resize:function(b,j,g,c){var f=this,a=b.getWidth(),e=b.getHeight();if(a==0||e==0){var d=$(b.body.dom);a=b.width;e=b.height;if(d){IG$.x_10._w(d,a);IG$.x_10._h(d,e)}}if(a>0&&e>0){if(f.loadMask&&f.rendermask){f._IIf(true)}else{if(f.loadMask){f.setLoading(true)}}}}},_IFd:function(){var b=this,a;if(b.rst){a=b._ILb.viewmode;b._d(a,b.rst);if(IG$.__ep){if(a=="grid"){}}}else{if(b._IL5==true){b._IJ2()}}},_d:function(b,a){this._IJe(a)},_IOf:function(){var d=this,c=false,b,a;if(d.m1&&d.m1.length>0){b=d.m1.pop();switch(b.type){case"remove":b.target.splice(b.index,0,b.item);break;case"add":if(b.item){d._IP1(b.item)}break;case"measurelocation":d._ILb.measureposition=b.measureposition;d._ILb.measurelocation=b.measurelocation;break;case"move":if(b.item&&b.plocation&&b.pindex>-1){a=d._IP1(b.item);if(a){b.plocation.splice(b.pindex,0,a)}}break;case"property":b.item[b.name]=b.value;break}c=true}return c},_II9:function(b){var a=this,c;switch(b){case"chart":c=1;break;case"r":c=2;break;case"d":c=3;break;case"python":c=4;break;default:c=0;break}if(c==3){a.setActiveItem(0)}a._ILb.viewmode=(c==3?a._ILb.viewmode:b);a._cv(c)},_IP0:function(){var a="";return a},_IP1:function(f){var e=this,c,b=e._ILb,d=false,a=null;for(c=0;c<b.rows.length;c++){if(b.rows[c].uid==f.uid){d=true;a=b.rows[c];b.rows.splice(c,1);break}}if(d==false){for(c=0;c<b.cols.length;c++){if(b.cols[c].uid==f.uid){d=true;a=b.cols[c];b.cols.splice(c,1);break}}}if(d==false){for(c=0;c<b.measures.length;c++){if(b.measures[c].uid==f.uid){d=true;a=b.measures[c];b.measures.splice(c,1);break}}}return a},_IP2:function(a){var b=this;b.m1=(b.m1==null)?[]:b.m1;b.m1.push(a)},_IL7:function(a){var c=this,b="";if(c.activeView==0){b=c._IH6._IL7.call(c._IH6,a)}else{if(c.activeView==1){b=c._IH7._IL7.call(c._IH7,a)}else{if(c.activeView==2){b=c._IH8._IL7.call(c._IH8,a)}else{if(c.activeView==3){b=c._IH8a._IL7.call(c._IH8a,a)}}}}return b},_IP3:function(){var b=this,a=null;if(b.activeView==0){a=b._IH6._IP3.call(b._IH6)}return a},_IP4:function(c,a,e){var b=this,d;if(b.activeView==3){return}b._IIf(true,true);b._IJf=true;b._IK1=true;b._IK1a=true;if(b._job&&b._job.sid&&b._job.jid){if(!b._IK9){b._IK9=new IG$._IKa();b._IK9.ctrlsource="report";b._IK9.panel=b;b._IK9.uid=b.uid;b._IK9.sheet=null;b._IK9.chart=null}b._IK9._ILa=b._ILa}if(b._IK9&&(b._IK9._IL8||b._job)){d=b._ILa._IJ1();b._IK9._IKb.call(b._IK9,d,null,b.sheetindex,null,c,a,null,b._job,e)}else{b._IJ2()}},_IIf:function(g){if(g==true){var d=this,a,f,e,c,b=d._ILa;if(b&&b.ploader){d.fireEvent("_ld_",d)}else{e={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"};c=d.setLoading(e);f=$(d.rendermask);a=$("#m-mec-loader",f).bind("click",function(){d._IP5.call(d)})}}},_IP5:function(){var a=this,b=new IG$._I3e();if(a.jobid){b.init(a,{ack:"18",payload:"<smsg><item jobid='"+a.jobid+"' option='cancel'/></smsg>",mbody:"<smsg></smsg>"},a,a.r_IP5,null);b.showerror=false;b._l()}},r_IP5:function(a){var b=this,c=IG$._I18(a,"/smsg"),d=c?IG$._I1b(c,"status"):null;if(d=="S"){b.setLoading(false)}},getResultSet:function(){return this._IK2&&this._IK2.results?this._IK2.results:null},_IJe:function(d){var c=this,a=c._ILb,b=a?a.viewmode:"grid";c._job=d._job;if(c._ILa&&c._ILa.iscomposite==true){viewmode="grid";c._ILa._IK2=d}else{viewmode=c._ILb.viewmode;a._IK2=d}c._IK2=d;var e=c.activeView;c._IJf=true;c._IK0=true;c._IK1=true;c._IK1a=true;if(viewmode=="grid"){if(e!=0&&e!=3&&c._cv){if(c._IK3&&c._IK3._IK4){c._IK3._IK4.call(c._IK3)}c._cv.call(c,0)}else{c._IK5(c,c.sheetindex)}}else{if(viewmode=="chart"){if(e!=1&&e!=3&&c._cv){if(c._IK3&&c._IK3._IK6){c._IK3._IK6.call(c._IK3)}c._cv(1)}else{c._IP8(c,c.sheetindex)}}else{if(viewmode=="r"){if(e!=2&&e!=3&&c._cv){if(c._IK3){c._IK3._IK4.call(c._IK3);c._IK3._IK7.call(c._IK3,true)}c._cv(2)}else{c._IK8(c,c.sheetindex)}}else{if(viewmode=="python"){if(e!=3&&c._cv){if(c._IK3){c._IK3._IK4.call(c._IK3)}c._cv(4)}else{c._IK8a(c,c.sheetindex)}}}}}c.fireEvent("result_loaded",c);c._refresh_timer&&clearTimeout(c._refresh_timer);if(c._ILb&&c._ILb.autorefresh&&c._ILb.refresh_timer>1){c._refresh_timer=setTimeout(function(){c._IJ2(null,null,1)},c._ILb.refresh_timer*1000)}},_b1:function(){var a=this;if(a._ILb&&a._ILb.viewmode=="python"){if(a._IH8a){a._IH8a._do_edit(0)}}},_IJ2:function(b,g,n){var f=this,a,m,o,d,e,l,c,j=0;delete f.btabrun;clearTimeout(f._refresh_timer);f.__el=1;if(!n||(n&&f._ILa&&!f._ILa.phideloader)){j=1;f._IIf(true,true)}l=f.getWidth();c=f.getHeight();f._IJf=true;f._IK1=true;f._IK1a=true;if(!f._IK9){f._IK9=new IG$._IKa();f._IK9.ctrlsource="report";f._IK9.panel=f;f._IK9.uid=f.uid;f._IK9.sheet=null;f._IK9.chart=null}f._IK9._IL8=(b)?b:null;if(f._ILa){f._ILa._dfilter=f._dfilter;f._IK9._ILa=f._ILa;if(f._ILa.iscomposite==false){d=f._ILa.sheets[f.sheetindex];e=d.needPrompt.call(d)}if(g!==true&&e&&e.length>0){f.setLoading(false);f.showPrompt(e)}else{m=f._ILa._IJ1();o=f._ILb.viewmode;if(f._IK9&&f._IK9._IL8){f._IK9._IKb.call(f._IK9,m,null,f.sheetindex)}else{if(f._IK9){f._IK9._IJ0.call(f._IK9,m,o,f.sheetindex,f,null,!j)}}}}else{f.setLoading(false)}},showPrompt:function(a){var b=this;b._IKd.sheetindex=""+b.sheetindex;b._IKd._ILa=b._ILa;b._IKd.prompts=a;b._IKd._IFd.call(b._IKd);b._IKd.setVisible(true)},rs_showPrompt:function(){this._IJ2(null,true)},_IK5:function(b,e){var h=this,g,d,f,a,j,c;h.a1();if(h._IH6&&h._IK0==true&&h._IK2){c=h._IKe();h._IK0=false;h._IH6._IL0.call(h._IH6);h._IH6._IKc.call(h._IH6,b._IK2,b._IK9,b._ILa,b._ILb,c);if(IG$.__ep){j=h._IH6.G1._0x030;g=j.twidth+j.fixedColWidth;d=j.theight+j.fixedRowHeight;f=j.cwidth;a=j.cheight;if(g>0&&d>0&&(g>f||d>a)){h.fireEvent("cresized",h,{tw:g,th:d,cw:f,ch:a})}}}},_IKe:function(){var e=this,b=false,a=e._ILb,c=e.down("[name=pagepanel]"),d;if(a.usepaging=="T"&&e._IK2&&e._IK2.results&&e._IK2.results.length==1){d=e._IK2.results[0];if(d.pagestart>0||d.pageend<d.rows){b=true}}if(b==true){e._IKf()}else{c.setVisible(false)}return b},exportSheet:function(a){var b=this;b.fireEvent("export_sheet",b,{filetype:a})},_IP6:function(){var c=this,b=new IG$._I3e(),e=c._ILa.name+" "+(c._ILb.title||"sheet"),a="csv",d=c._IK9?c._IK9._IL8:"";e=e.replace(/\./g,"_");e=e.replace(/ /g,"");e=e+".csv";if(d){c.setLoading(true);b.init(c,{ack:"20",payload:"<smsg><item uid='"+c.uid+"' jobid='"+d+"' type='"+a+"' filename='"+e+"' option='instanceload'/></smsg>",mbody:"<smsg></smsg>"},c,c.r_IB3,null,e);b._l()}},_Ip7:function(){var b=this,c=b._IK9?b._IK9._IL8:"",a;if(c){if(IG$.bA_2){b._Ip7A.call(b,c)}else{a=ig$.scmap.igc9;IG$.x03(a,new IG$._I3d(this,function(){if(IG$.bA_2){b._Ip7A.call(b,c)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}}},_Ip7A:function(d){var b=this,a=new IG$._I3e(),c;c=new IG$.bA_2({jobid:d,fname:b._ILa.name+" "+(b._ILb.title||"sheet")});c.show()},r_IB3:function(a,e){var c=this,d=IG$._I18(a,"/smsg/info"),b,e;c.setLoading(false);if(IG$._I1b(d,"status")=="complete"){b=IG$._I1b(d,"downloadurl");e=IG$._I1b(d,"filename")||e;$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:b},{name:"mbody",value:e}],"POST")}},_IKf:function(){var y=this,g=y.down("[name=pagepanel]"),u=$("#idv-pgview",g.body.dom),f=y._IK2.results[0],s,q,h,b=y._ILb,n=b.rowperpage,t=b.pagestyle||"p10",v,j,m,z,e=f.pagestart,w,x=10,o=[],a,l;u.empty();if(t=="p10"){x=10}else{if(t=="p5"){x=5}}a=$("<div class='idv-pglist'></div>").appendTo(u);w=$("<ul></ul>").appendTo(a);h=f.rows-f.rowfix;q=Math.ceil(h/n);if(q>1&&b.usepaging=="T"){g.setVisible(true);j=Math.floor(e/n);l=$("<div class='idv-pg-dwn-csv' title='Download data in CSV'></div>").appendTo(u);l.bind("click",function(){y._IP6.call(y)});if(t=="button2"){if(j>0){var c=$("<li><span>&lt;&lt;</span></li>").appendTo(w);c.bind("click",function(){var A=(j-1)*n;y._IP7.call(y,A)})}$("<li><span>"+(j+1)+" / "+q+" pages</span></li>").appendTo(w);if(j+1<q){var d=$("<li><span>&gt;&gt;</span></li>").appendTo(w);d.bind("click",function(){var A=(j+1)*n;y._IP7.call(y,A)})}}else{z=Math.floor(j/x)*x;m=z+x;m=Math.min(q,m);if(z>0){var c=$("<li><span>&lt;&lt;</span></li>").appendTo(w);c.bind("click",function(){var A=(z-1)*n;y._IP7.call(y,A)})}for(s=z;s<m;s++){o.push(s)}$.each(o,function(C,D){var A=(D+1);var B=$("<li"+(D==j?" class='active'":"")+"><span>"+A+"</span></li>").appendTo(w);if(D!=j){B.bind("click",function(){var E=D*n;y._IP7.call(y,E)})}});if(m<q){var d=$("<li><span>&gt;&gt;</span></li>").appendTo(w);d.bind("click",function(){var A=m*n;y._IP7.call(y,A)})}}}else{g.setVisible(false)}},_IP7:function(b,a,e){var d=this,c;d._IP4(b,a,e)},r_ILd:function(a,b){},_IP8:function(b,g){var f=this,d,a,e,c=[],j;f.a1();if(f._IJf==true){j=f._IKe();f._IJf=false;if(f._IH7){f._IH7._IL0.call(f._IH7);f._IH7._IKc.call(f._IH7,b._IK2,b._IK9,b._ILa,b._ILb,j)}}},_IK8:function(a,c){var b=this;if(b._IK1==true){b._IKe();b._IK1=false;b.a1(true);b._IH8._IKc.call(b._IH8,a._IK2,a._IK9,a._ILa,a._ILb)}else{b.a1()}},_IK8a:function(a,c){var b=this;if(b._IK1a){b._IKe();b._IK1a=false;b.a1(true);b._IH8a._IKc.call(b._IH8a,a._IK2,a._IK9,a._ILa,a._ILb)}else{b.a1()}},a1:function(b){var e=this,a=b?true:false,d=e._ILb,f;if(!a&&e._IK2&&e._IK2.results.length>0&&((e._IK2.results.length==1&&e._IK2.results[0].m1==false)||e._IK2.results.length>1)){a=true}else{if(d&&d.mdf&&e._IK2&&e._IK2.results.length>0){for(var c in d.mdf){f=d.mdf[c];if(f&&f.op){a=true;break}}}}e.setActiveItem(a||e.activeView==3?0:1)},_cv:function(b){var e=this,d=e.a2_,a=d.getWidth(),c=d.getHeight();e.activeView=b;e.a1();switch(b){case 0:if(!e._IH6){e._IH6=new IG$.rp$R({layout:"fit",sheetobj:this,width:a,height:c,flex:1,html:"",_ILa:e._ILa,_ILb:e._ILb,listeners:{drillreport:function(f){var g=this;g.fireEvent("drillreport",g)},itemclick:function(f,h){var g=this;g.fireEvent("itemclick",g,h)},itemdblclick:function(f,h){var g=this;g.fireEvent("itemdblclick",g,h)},menu:function(f,g){var h=this;h.fireEvent("menu",h,g)},pivotchanged:function(f){var g=this;g.fireEvent("pivotchanged",g)},scroll_request:function(f,j){var h=this,g=j;g=(g-50)>0?g-50:g;h._l1.call(h,g)},request_data:function(g,f,h){var j=this;j.__r1.call(j,g,f,h)},hierarchy:function(f,g){var j=this,h={source:"hierarchy",cell:g.cell,row:g.row};j.__r1.call(j,f,null,h)},scope:this}});d.add(e._IH6)}break;case 1:if(!e._IH7){e._IH7=new IG$.rp$C({layout:"fit",flex:1,html:"",width:a,height:c,frame:false,margins:"0 0 0 0",cmargins:"0 0 0 0",_IPb:this,showtoolbar:true,listeners:{drillreport:function(f){var g=this;g.fireEvent("drillreport",g)},itemclick:function(f,h){var g=this;g.fireEvent("itemclick",g,h)},itemdblclick:function(f,h){var g=this;g.fireEvent("itemdblclick",g,h)},menu:function(f,g){var h=this;h.fireEvent("menu",h,g)},pivotchanged:function(f){var g=this;g.fireEvent("pivotchanged",g)},scroll_request:function(f,h){var g=this;g._l1.call(g,h)},request_data:function(g,f,h){var j=this;j.__r1.call(j,g,f,h)},hierarchy:function(g,f){var h=this;h.__r1.call(h,g,cview,option)},scope:this}});d.add(e._IH7)}break;case 2:if(!e._IH8){e._IH8=new IG$.rp$RR({layout:"fit",flex:1,width:a,height:c,sheetobj:this,_ILa:e._ILa,_ILb:e._ILb});d.add(e._IH8)}break;case 3:if(!e._IH9){e._IH9a=new IG$.pb({bodycls:"igc-peditor"});d.add(e._IH9a)}break;case 4:if(!e._IH8a){e._IH8a=new IG$.rp$RPa({layout:"fit",flex:1,width:a,height:c,sheetobj:this,_ILa:e._ILa,_ILb:e._ILb});d.add(e._IH8a)}break}e._IH6&&e._IH6.setVisible(b==0?true:false);e._IH7&&e._IH7.setVisible(b==1?true:false);e._IH8&&e._IH8.setVisible(b==2?true:false);e._IH9a&&e._IH9a.setVisible(b==3?true:false);e._IH8a&&e._IH8a.setVisible(b==4?true:false);if(e.activeView==0){e._IK0==true&&e._IK5(e)}else{if(e.activeView==1){e._IJf==true&&e._IP8(e)}else{if(e.activeView==2){e._IK1==true&&e._IK8(e)}else{if(e.activeView==4){e._IK1a==true&&e._IK8a(e)}}}}},_IP9:function(b,a){var c=this;c._ILa=b;c._ILb=a;c._IH6._IP9(b,a);c._IH7._IP9(b,a)},_IN0:function(){var b=this,d=b._IH6,c=b._IH8,a=b._IH8a;d&&d._IN0.call(d,b._ILa,b._ILb);c&&c._IN0.call(c,b._ILa,b._ILb);a&&a._IN0.call(a,b._ILa,b._ILb)},_ILd:function(a){},_ILc:function(g){var q=this,d,e,a,l,o,s,t,m,h,n,a,c,b=(q._ILb)?q._ILb._IL9:null;filter=(q._ILb)?q._ILb.filter:null;if(b){for(e in b){a=b[e];d=IG$._I13(a);l=IG$._I18(d,"/FilterData");if(l){s=IG$._I26(l);for(m=0;m<s.length;m++){t=IG$._I26(s[m]);for(h=0;h<t.length;h++){c=IG$._I1c(t[h]);n=g[c.name]=g[c.name]||{data:[],p:{}};a=IG$._I1a(t[h],"value")||IG$._I1a(t[h],"code")||"";if(a!=""&&!n.p[a]){n.data.push(a);n.p[a]=1}}}}}}if(filter){q._IPa(filter,g)}},_IPa:function(b,e){var n=this,l,h,g,d,c,m,a;if(b&&b.subConditions&&b.subConditions.length>0){for(l=0;l<b.subConditions.length;l++){d=b.subConditions[l];if(d&&d._d6&&d._d6.length>0){c=d._d6[0].name;m=e[c]=e[c]||{data:[],p:{}};if(d.values){for(h=0;h<d.values.length;h++){a=d.values[h].text||d.values[h].code||"";if(a!=""&&!m.p[a]){m.data.push(a);m.p[a]=1}}}}}}if(b&&b.subGroups&&b.subGroups.length>0){for(l=0;l<b.subGroups.length;l++){g=b.subGroups[l];n._IPa(g,e)}}},_IIe:function(){var a=this;a._IK0=true;a._IJf=true;a._IK1=true;a._IK1a=true;a.activeView=-1;a._IH6&&a._IH6.setVisible(false);a._IH7&&a._IH7.setVisible(false);a._IH8&&a._IH8.setVisible(false);a._IH9a&&a._IH9a.setVisible(false);a._IH8a&&a._IH8a.setVisible(false)},_ic:function(){var a=this;a.on("afterrender",function(){a.CLS.afterrender.call(a);var b=a.getWidth(),c=a.getHeight();a.rzone=a.down("[name=rzone]");a.a2_=a.down("[name=a2_]");a.a3=a.down("[name=noresultpanel]");a.setActiveItem(1)});IG$.apply(this,{items:[{xtype:"container",name:"rzone",deferredRender:false,layout:"fit",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,name:"a2_",layout:"fit",border:0},{xtype:"container",name:"pagepanel",html:"<div id='idv-pgview' class='idv-pgview'>Page view</div>",hidden:true,height:25}],region:"center",flex:1}]},{xtype:"container",name:"noresultpanel",deferredRender:false,html:"<div class='igc-no-results'><div class='no-result-msg'>"+(IRm$.r1("B_NO_DATA")||"No Results")+"</div></div>"}]});IG$._IPc.superclass._ic.call(this)}});IG$._Ibb=IG$._Ibb||{};$s.apply(IG$._Ibb,{_INf:function(a){var e=this,d=a,c=d.sheetindex,b;e._IO0(d);if(d._ILb.isdrillreport==true){return false}e._ine_t&&clearTimeout(e._ine_t);e._ine_t=setTimeout(function(){e._IL6.call(e,c,d)},500);return b},F:function(view,m,cl){var me=this;me._ine_t&&clearTimeout(me._ine_t);me._ine_t=setTimeout(function(){var drillfilter,dobj={titem:{enabled:false,item_map:{},items:[]},tparams:{enabled:false,item_map:{},items:[]},_dall:true},paux,auxfilter={},req,exportdata;drillfilter=view._IL7.call(view,dobj);if(drillfilter){paux=view._ILb._IL9;if(paux){for(var k in paux){auxfilter[k]=paux[k]}}auxfilter["report_"+view.sheetindex]=drillfilter;exportdata=["<smsg><item><auxfilter>"];for(var key in auxfilter){exportdata.push(auxfilter[key])}exportdata.push("</auxfilter></item></smsg>");view.setLoading.call(view,true,false);req=new IG$._I3e();req.init(me,{ack:"20",payload:"<smsg><item "+IG$._I20(m,"uid;type","s")+" option='LINK_FIELD'/></smsg>",mbody:exportdata.join("")},me,function(xdoc){view.setLoading.call(view,false);var tnode=IG$._I18(xdoc,"/smsg/item"),act=(tnode?IG$._I1b(tnode,"action"):null),dnode,fileuid,fileext,fname,dview,durl;if(act=="DOC"){dnode=IG$._I18(tnode,"info");if(dnode){fileuid=IG$._I1b(dnode,"downloadurl");fileext=IG$._I1b(dnode,"fileext");fname=IG$._I1b(dnode,"filename");fname=(fname?fname:m.name)+"."+fileext;$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:fileuid},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:fname}],"POST")}}else{if(act=="DRILL"){dnode=IG$._I18(tnode,"target");if(dnode){dview=IG$._I1c(dnode);me._INd(view,dview,drillfilter)}}else{if(act=="EXTERNAL"){dnode=IG$._I18(tnode,"url");if(dnode){dview=IG$._I1b(dnode,"target");durl=IG$._I24(dnode);if(durl){if(durl.substring(0,"javascript:".length)=="javascript:"){try{durl=durl.substring("javascript:".length);eval(durl)}catch(e){IG$._I52("ERROR on External Call."+durl+e,me)}}else{var ownd=null,MSG_POPUPS_BLOCKED=window.popups_blocked||"A window was blocked by pop-up blocker.\nTo run Administrator, pop-up windows must be allowed.\nPlease configure your blocker software to allow pop-ups for this site.";ownd=window.open(durl);if(ownd==null||typeof(ownd)=="undefined"){alert(MSG_POPUPS_BLOCKED)}}}}}}}},function(xdoc){view.setLoading.call(view,false)});req._l()}},500)},J3:function(j,n){var g=this,a=1,e,o=g.dzone,l,q=j?j._ILb.docid:null,b,c,h,d,f=[];for(e=0;e<o.items.length;e++){d=o.items[e];l=o.items[e].view;if((n||d.visible!==false)&&l&&l._ILb){c=l._ILb;h=c.pff1a;if(c.objtype=="FILTER"&&d.docid!=q&&!h.showbutton&&h.f_b_evt=="T"){b=l.l5m.call(l,1,f);if(!b){a=0}else{if(a){g._IO1(l,1);$.each(f,function(m,s){l.cc1.call(l,s,undefined)})}}}else{if(c.objtype=="RPT_VIEW"){if(l.irpt&&l.irpt.dzone){b=l.irpt.J3.call(l.irpt,null,n);if(!b){a=0}}}}}}return a},_IL6:function(b,e){var H=this,B,h,C=(H.sheets[b]._IK9)?H.sheets[b]._IK9._IL8:null,j,c=false,F,D=e._ILb,w=D?D.edrill:false,a=(D&&D.drilltarget?D.drilltarget:null),s=new IG$._dpca(a),o,x,v=H.dzone,m,A,y,q,n,E,l,d=false,G=H.dzone.docitems||{},u,g,f=false,t;if(C){c=false;for(B=0;B<H.sheets.length;B++){h=H.sheets[B];o=s._2("sheet_"+B);t=h._ILb;if((t.drillreport==true||w||(o&&o.isdrill))&&h.sheetindex!=b){if(!w&&s._e&&(!o||(o&&!o.isdrill))){continue}j=t._IL9;if(c==true){for(F in j){if(F.indexOf("report_")>-1){delete j[F]}}}x=t._IL9;if(x){for(var z in x){j[z]=x[z]}}l=e._IL7.call(e,o);if(l&&l.length>0){f=true;j["report_"+b]=l;m=v._IIb.call(v,h.renderBox);d=true;if(m&&m.parent&&m.parent.objtype=="TAB"){A=m.parent.view;d=A.active==h.renderBox}if(d==true){h._IJ2.call(h,null)}else{h.btabrun=true}}}}for(z in G){u=G[z].lt.ubody;g=u.view;if(u.objtype=="RPT_VIEW"){if(g){if(g.irpt){for(B=0;B<g.irpt.sheets.length;B++){h=g.irpt.sheets[B];rop=h._ILa;sop=h._ILb;o=rop?s._2(rop.uid+"_sheet_"+B):null;if((sop.drillreport==true||w||(o&&o.isdrill))){if(!w&&s._e&&(!o||(o&&!o.isdrill))){continue}j=sop._IL9;if(c==true){for(F in j){if(F.indexOf("report_")>-1){delete j[F]}}}x=D._IL9;if(x){for(var z in x){j[z]=x[z]}}l=e._IL7.call(e,o);if(l&&l.length>0){f=true;j["report_"+b]=l;m=v._IIb.call(v,h.renderBox);d=true;if(m&&m.parent&&m.parent.objtype=="TAB"){A=m.parent.view;d=A.active==h.renderBox}if(d==true){h._IJ2.call(h,null)}else{h.btabrun=true}if(u.visible&&!H._i0){g._vf=false}}}}}else{}}}}H._IJ4()}return f},_IIa2:function(a){var c=this,b;for(b=0;b<c.sheets.length;b++){c.sheets[b]._dfilter=a}},_IIa:function(c){var m=this,a,d,l,q,o,h,e,n;if(c&&c.length>0){a=new IG$._IEb(null);a.name="____systemfilter____";d=new IG$._IEb(null);a.subGroups.push(d);for(h=0;h<c.length;h++){q=c[h];l=new IG$._IE9(null);l.operator=IG$._IE1._d3(q.operator);o=new IG$._IE8();o.uid=q.uid;o.type=q.type;o.nodepath=q.nodepath;o.name=q.name;l._d6.push(o);l.delimiter="$%^";for(e=0;e<q.value.length;e++){n={code:q.value[e].code||q.value[e],text:q.value[e].text||q.value[e].code||q.value[e]};l.values.push(n)}d.subConditions.push(l)}}if(a){for(h=0;h<m.sheets.length;h++){var b=false,g=m.sheets[h]._ILb.filter,s;while(g&&g.subGroups.length>0){g=g.subGroups[0]}if(g){g.subGroups.push(a)}}}},_IB3:function(f,e,c){var g=this,h=new IG$._I3e(),b=g._ILa.name,j,d=g._ILa.exportOption,a;b=b.replace(/\./g,"_");b=b.replace(/ /g,"");if(f.substring(0,"JASPER_".length)=="JASPER_"){f=f.substring("JASPER_".length).toLowerCase();g._t$.call(g,"cmd_export_jasper",f);return}else{if(f.substring(0,"OFFICE_".length)=="OFFICE_"){a=Number(f.substring("OFFICE_".length));if(isNaN(a)==false&&a>-1&&d&&d.otmpl[a]){g._t$.call(g,"cmd_export_office",d.otmpl[a])}return}}switch(f){case"EXCEL":b+=".xls";break;case"PNG":b+=".png";break;case"PDF":b+=".pdf";break;case"SVG":b+=".svg";break;case"HTML":b+=".html";break;case"ODT":case"ODS":case"ODP":b+="."+f.toLowerCase();break;case"TMPL":b+="."+f.toLowerCase();break}g.setLoading(true);j=g._IB4(d,f,e,false,null,c);h.init(g,{ack:"20",payload:"<smsg><item uid='"+g.uid+"' type='"+f+"' filename='"+b+"' fonttype='"+(d&&d.fonttype?d.fonttype:"")+"' isinstance='"+(e?"T":"F")+"'/></smsg>",mbody:j},g,function(l){g.r_IB3.call(g,l,b,f)},null);h._l()},r_IB3:function(f,d,h){var j=this,c=IG$._I18(f,"/smsg/info"),e,g,d;j.setLoading(false);if(IG$._I1b(c,"status")=="complete"){e=IG$._I1b(c,"downloadurl");g=IG$._I1b(c,"isinstance")=="T";d=IG$._I1b(c,"filename")||d;if(!g){if(h=="HTML"){var b=IG$._I83.jS1.mts_name,a="./htmlview.jsp?mts="+(b||"")+"&p1=export&p2="+e,l=window.open(a,"name","height=500,width=800");if(window.focus){l.focus()}}else{$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:e},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:d}],"POST")}}else{var b=IG$._I83.jS1.mts_name,a="./print.jsp?mts="+(b||"")+"#p1=export&p2="+e,l=window.open(a,"name","height=500,width=800");if(window.focus){l.focus()}}}},_IB4:function(l,G,a,f,E,b){var H=this,s=[],B,A,q=H.dzone,e,u,D,c=H.sheets,C,w,t=0,o=0,F=0,d,g,h,x,v={},z,y,n,m;n=function(j){s.push(j)};if(a){n("<smsg><item>");n("<export filetype='"+G+"'>");n(l.TX.call(l));n("<sheets>");for(B=0;B<q.items.length;B++){e=q.items[B];if(e.objtype=="SHEET"){C=e.view;u=C.renderBox;if(C.jobid){n("<sheet docid='"+u+"' jobid='"+C.jobid+"'>");n("</sheet>")}}}n("</sheets>");n("</export>");n("</item>");n("</smsg>")}else{if(f){n("<report uid='"+H.uid+"' name='"+E+"'><options>")}else{n("<smsg><Export layout='"+(l.layout||"portrait")+"'>");n("<options>");n(l.TX.call(l))}n("<sheets>");if(b){u=b.renderBox;if(b.jobid){n("<sheet docid='"+u+"' jobid='"+b.jobid+"'>");n("</sheet>")}}else{for(B=0;B<q.items.length;B++){e=q.items[B];if(e.objtype=="SHEET"){C=e.view;u=C.renderBox;n("<sheet docid='"+u+"' jobid='"+(C.jobid||"")+"'>");n("<title><![CDATA["+(e.title||"")+"]]></title>");n("</sheet>");v["SHEET_"+B]=e.title||""}else{if(e.objtype=="FILTER"&&e.view){h=e.view;h._uu1.call(h,v)}}}}n("</sheets>");n("<LayoutInfo type='bubble'><![CDATA["+(q.l10a.call(q)||"")+"]]></LayoutInfo>");n("<params>");n("<param name='REPORT_NAME'><![CDATA["+(H._ILa.name||"")+"]]></param>");for(x in v){n("<param name='"+x+"'><![CDATA["+(v[x]||"")+"]]></param>")}n("</params>");n("</options>");if(H._ILa.name){n("<item type='label' x='"+t+"' y='"+o+"' sheet_title='T'>");n("<text><![CDATA["+H._ILa.name+"]]></text>");n("</item>");F=30;o+=F}for(B=0;B<q.items.length;B++){e=q.items[B];d="0";g="0";C=null;if(e){if(!b){t=e.lt.x;o=e.lt.y+F}d=e.lt.w;g=e.lt.h;if(e.visible==false){continue}}if(e.objtype=="SHEET"){C=e.view;if(b&&b!=C){continue}if(C&&C._ILb){u=C.renderBox;if(!b&&C._ILb.name){n("<item type='label' x='"+t+"' y='"+o+"' d_width='"+d+"' d_height='"+g+"' docid='"+e.docid+"' doc_title='T'>");n("<text><![CDATA["+C._ILb.name+"]]></text>");n("</item>");o+=20}if(l.filterdesc&&C._IK2&&C._IK2.results){z=C._IK2.results;y=z&&z.length?z[0].f_:null;if(y){n("<item type='label' x='"+t+"' y='"+o+"' sheet_title='T'>");n("<text><![CDATA["+y+"]]></text>");n("</item>");F=30;o+=F;g=g>30?g-30:g}}if(C.activeView==0){w=C._IH6&&C._IH6._IB4.call(C._IH6,l);if(w){n("<item type='datagrid' x='"+t+"' y='"+(o+20)+"' d_width='"+d+"' d_height='"+g+"' docid='"+e.docid+"' sheetindex='"+C.sheetindex+"'>");n(w);n("</item>")}}else{if(C.activeView==1){w=C._IH7&&C._IH7._IB4.call(C._IH7,l,t,o+20,e.docid,d,g);if(w){n(w)}}else{if(C.activeView==2){w=C._IH8&&C._IH8._IB4.call(C._IH8,l,t,o+20,G,e.docid,d,g);if(w){n(w)}}else{w=C._IH6&&C._IH6._IB4.call(C._IH6,l);if(w){n("<item type='datagrid' x='"+t+"' y='"+(o+20)+"' d_width='"+d+"' d_height='"+g+"'  docid='"+e.docid+"'>");n(w);n("</item>")}w=C._IH7&&C._IH7._IB4.call(C._IH7);if(w){n("<item type='chart' x='"+t+"' y='"+(o+20)+"' d_width='"+d+"' d_height='"+g+"' width='"+C._IH7.body.getWidth()+"' height='"+C._IH7.body.getHeight()+"' docid='"+e.docid+"'>");n(w);n("</item>")}}}}}}else{if(e.objtype=="FILTER"&&!b){C=e.view;w=C._IB4&&C._IB4.call(C,t,o,e.docid,d,g);if(w){n(w)}}}}if(f){n("</report>")}else{n("</Export></smsg>")}}D=s.join("");return D},_IJ4:function(){var b,e=this,g=e.sheets,f=e.dzone,a,c={},d=f.items;for(b=0;b<d.length;b++){a=d[b].view;if(a&&a._ILc){a._ILc.call(a,c)}}for(b=0;b<d.length;b++){a=d[b].view;if(a&&a._ILd){a._ILd.call(a,c)}}},_INe:function(g,d){var e=this,a=g.sheetindex,c=g._ILb,h,f,j=d?d.cl:null,b,l;if(j){l=j.title;if(c&&l==9){h=j.index;f=j.position;b=c.g1(h,f);if(b){e.F.call(e,g,b,j)}}else{if(l>2){e._INf.call(e,g)}}}},_INc:function(o,c){var B=this,a=o._ILb,b=c.menu.cell,y,w,z,q,x=false,v,D,C,d,j=(a)?a.sortoption:null,e,s,u;if(a){e=a.mdf=a.mdf||{}}if(b){u=b.position;if(u==1){z=a.rows}else{if(u==2){z=a.cols}else{if(u==3){z=a.measures}}}q=(z&&z.length>b.index)?z[b.index]:null}switch(c.cmd){case"CMD_REMOVE":if(b.position==4){v=a.Xsf;if(v){for(y=0;y<v.length;y++){if(v[y].fid=="formula_"+b.index){w=v.splice(y,1);s={type:"remove",item:w[0],index:y,target:v};o._IP2(s);x=true;break}}}}else{if(z&&a.rows.length+a.cols.length+a.measures.length>1){w=z.splice(b.index,1);s={type:"remove",item:w[0],index:b.index,target:z};o._IP2(s);x=true}}break;case"CMD_FILTER":B._t$("cmd_filter",q);break;case"CMD_ASC":if(q.sortorder!="asc"){w=q.sortorder;q.sortorder="asc";x=true;s={type:"property",item:q,name:"sortorder",value:w};o._IP2(s)}break;case"CMD_DESC":if(q.sortorder!="desc"){w=q.sortorder;q.sortorder="desc";x=true;s={type:"property",item:q,name:"sortorder",value:w};o._IP2(s)}break;case"CMD_TOP5":D="top";C=5;d=q.uid;break;case"CMD_TOP10":D="top";C=10;d=q.uid;break;case"CMD_BTM5":D="bottom";C=5;d=q.uid;break;case"CMD_BTM10":D="bottom";C=10;d=q.uid;break;case"CMD_SHOWALL":D="normal";C=0;d=null;break;case"CMD_UNDO":x=o._IOf.call(o);break;case"CMD_CLIPBOARD":var A=o._IP0();IG$._I49(A);break;case"CMD_RUN_FILTER":if(e){x=true;if(c.menu.mdf){e[b.c]=c.menu.mdf}else{delete e[b.c]}}break;case"T_SUM":case"T_AVG":case"T_MIN":case"T_MAX":case"T_RANK":case"T_POT":case"T_CUMUL":case"T_INCR":case"T_DIFF":case"CL_FM":case"R_FMT":if(e){B._IN2(o,q,c.cmd)}break;default:if(c.cmd.substring(0,7)=="detail:"){var g=c.cmd.substring(7),f,m,n,l;for(y=0;y<a.dff1.length;y++){if(a.dff1[y].uid==g){f=a.dff1[y];break}}if(f){m={titem:{enabled:false,items:[],item_map:{}},tparams:{enabled:false,items:[],item_map:{}}};n=m.titem;l=m.tparams;if(f.titem){n.items=f.titem.split("_");for(y=0;y<n.items.length;y++){if(n.items[y]){n.item_map[n.items[y]]=1}}if(n.items.length){n.enabled=true}}if(f.tparams){l.items=f.tparams.split("_");for(y=0;y<l.items.length;y++){if(l.items[y]){l.item_map[l.items[y]]=1}}if(l.items.length){l.enabled=true}}var h=o._IL7.call(o,m);if(h&&h.length>0){B._INd(o,f,h)}}}break}if(D!=j.sortmethod||C!=j.sortcount||d!=j.sortmeasure){x=true;j.sortmethod=D;j.sortcount=C;j.sortmeasure=d}if(x==true){B._ILb_=true;o._IP4.call(o)}},_ILf:function(b){var d,c="<smsg><item "+IG$._I20(b,"type","s")+">";c+="<objinfo/>";if(b&&b.cubeobj){d=b.cubeobj;c+="<sel_cube default='"+d.uid+"'>";c+="<item "+IG$._I20(d,"uid;name;type;nodepath;requirepwd","s")+"/>";c+="</sel_cube>"}c+="</item></smsg>";var a=IG$._I13(c);return a},_IG7:function(v,l){var w=this,s,h=v.cubeobj,g=h?h.uid:null,t=v.reporttype,q,a=l,e,f=w._ILa,n,b,j=w.dzone,d=w.sheets,o,x,c=0,m,u;if(!w._ILa){c=1;q=w.itemtype||"Report";xdoc=w._ILf({type:q,cubeobj:h,cubeuid:g,reportmode:t});w._IM9(xdoc,false);f=w._ILa}if(w.reportlayout){w.reportlayout=null}x=f.__cs;if(g&&(!x.m[g]||c)){if(!x.m[g]){m={uid:g,name:h.name,nodepath:h.nodepath,type:h.type};x.m[g]=m;x.l.push(m)}if(f.sheets.length==0){e=new IG$._IEf(null,f.itemtype,false);e.cubeuid=x.d;f.sheets.push(e);if(!d.length){n=w.aB();j._IIc.call(j,n);b=w._IMd(0,e,n);e.layoutinfo.docid=n.docid;n.setTitle.call(n,e.name||"");n.view=b;n.objtype="SHEET";n.m1.call(n);n.setReportOption.call(n,e);w.sheets.push(b)}o=w.sheets[0];o._ILa=f;o._ILb=e;o._IN0.call(o);j._IM5.call(j)}if(a){a._IGd.call(a,w._ILa.sheets[w._IJa],w._ILa)}w._IGb();w._IN3()}},_II9:function(c){var a=this,b=a.sheets[a._IJa];a._i0&&a._aa(false);c=="chart"&&a._IK6();c!="chart"&&a._IK4();a._IK7(c=="r");a._IK7p(c=="python");a._IL3(c=="chart"?false:true);a._IL4(c=="r"?false:true);b._II9.call(b,c)},_t$:function(L,a,D,J,N){var m=this,K=m.dzone,x,c,O=m.sheets[m._IJa],G=m.down("[name=tbsch]"),C,b;switch(L){case"cmd_sheetview":m._II9("grid");break;case"cmd_chartview":m._II9("chart");break;case"cmd_rview":if(IG$._I83.jS1.l3=="L1"){IG$._I52("R Viewer is not allowed for license limitation. Please contact ingecep.com for Enterprise license.",m)}else{m._II9("r")}break;case"cmd_pythonview":if(IG$._I83.jS1.l3=="L1"){IG$._I52("Python Viewer is not allowed for license limitation. Please contact ingecep.com for Enterprise license.",m)}else{m._II9("python")}break;case"cmd_run":if(m._cld){IG$._I55(ig$.appname,IRm$.r1("L_C_SCH"),function(n){if(n=="yes"){G&&G.hide();m._cld=0;m._t$.call(m,L,a,D,J,N)}})}else{m._i0&&m._ab();if(D){m._IIa(D)}if(J){m._IIa2(J)}m._i0&&m._aa(false);m._IJa=0;O=m.sheets[m._IJa];if(O){x=K._IIb.call(K,O._ILb?O._ILb.layoutinfo.docid:null);K._IIc.call(K,x)}m._IId();m._params=null;m._K();var f=[],q,h,M=0,g={};q=function(ac,ab){var V,Z=this,aa,X,n,S=false,ae=Z.dzone,R=Z.dzone.docitems||{},Q,U,T,Y,W,P,ad=true,X;for(V=0;V<Z.sheets.length;V++){aa=Z.sheets[V];aa.__el=0;aa._IIe&&aa._IIe.call(aa);aa._b1.call(aa);n=aa._ILb;if(n&&(!N||n.openload==true)){S=ac==1?true:((ab&&ab[V]==1)?true:false);if(S){aa._IIf.call(aa,true,true);if(aa._IK9){aa._IK9._ILa._dfilter=aa._dfilter;X=aa._IK9._ILa._IJ1.call(aa._IK9._ILa);aa._IK9._IJ0(X,"mode",aa.sheetindex,aa)}else{aa._IJ2.call(aa)}}}}for(U in R){T=R[U];Q=T.lt.ubody;if(Q.objtype=="RPT_VIEW"){if(T.parent&&T.parent.loc=="inner"&&T.parent.node&&T.parent.node.objtype=="TAB"){if(T.parent.node.active!=Q.docid){Q.visible=false}else{Q.visible=true}}else{Q.visible=true}if(Q.visible==true&&Q.view&&!Q.view._v1d){Q.view._df1=Q.view._df1||{};Q.view._v2=true;if(ad){P=Q.view._df1;for(o in P){if(o.indexOf("report_")>-1||o.indexOf("filter_")>-1){delete P[o]}}}Q.view.l3.call(Q.view,ac==1);continue}if(Q.view){if(Q.view.irpt){for(V=0;V<Q.view.irpt.sheets.length;V++){Y=Q.view.irpt.sheets[V];W=Y._ILb;if(ad){P=W._IL9;for(o in P){if(o.indexOf("report_")>-1||o.indexOf("filter_")>-1){delete P[o]}}}if(Q.visible==true&&ac==1){Y._b1.call(Y);if(Y._IK9){X=Y._IK9._ILa._IJ1.call(Y._IK9._ILa);Y._IK9._IJ0(X,"mode",V,Y)}else{if(W){Y._IJ2.call(Y)}}}else{Q.view._v2=true}}}else{Q.view._df1=Q.view._df1||{};Q.view._v2=true;if(ad){P=Q.view._df1;for(o in P){if(o.indexOf("report_")>-1||o.indexOf("filter_")>-1){delete P[o]}}}}}}}};for(i=0;i<K.items.length;i++){c=K.items[i].view;if(c&&c._IJ3){c._i10=null;f.push(c)}}if(f.length>0){h=function(aa,ac){M++;var Y=this,U=aa.l7.call(aa),V,W=Y.sheets,S=aa._ILb.pff1a.showbutton,Q=aa._ILb.pff1a.edrill,ab=aa._ILb.pff1a.drilltarget,Z=new IG$._dpca(ab),R=Y.dzone.docitems||{},P="filter_"+Y.dzone._dzid+"_"+aa._ILb.docid,n,T,X=[];n=aa.l5m.call(aa,1,X);if(!S){for(V=0;V<W.length;V++){sheet=W[V];j=sheet._ILb;docid=(j.layoutinfo?j.layoutinfo.docid:null);ditem=R[docid];T=Z._2("sheet_"+V);if(!Q&&Z._e&&!T){continue}j._IL9[P]=U;if(ditem&&ditem.visible==false){continue}g[V]=typeof(g[V])=="undefined"?1:g[V];g[V]=(n&&g[V]==1)?1:0}}aa._i10=null;if(M==f.length){q.call(Y,2,g)}};$.each(f,function(Q,P){P._i10={p:m,f:h};P._IJ3.call(P,null,1)})}else{q.call(m,1)}m._IJ4()}break;case"cmd_save":m._i0&&m._ab();if(m._ILa){m._i0&&m._aa(false);var H=IG$._Ibb._IJ7.call(m),d=H.uid;if(!d){m._IJ5(false)}else{var B=m._ILa._IJ1.call(m._ILa);m._IJ6(d,B,a)}}break;case"cmd_saveas":m._i0&&m._ab();IG$._Ibb._IJ7.call(m);m._IJ5(false);break;case"cmd_showpivot":m._i0=m._i0||false;m._aa(!m._i0);break;case"cmd_chartwizard":C=new IG$._Ia3({_ILa:m._ILa,_ILb:m._ILa.sheets[m._IJa],callback:new IG$._I3d(m,m._IJ9)});IG$._I_5(this,C);break;case"cmd_r_summary":case"cmd_r_script":O._IH8._IJ8.call(O._IH8,L);break;case"cmd_r_simage_png":m._IB3("PNG");break;case"cmd_r_simage_svg":m._IB3("SVG");break;case"cmd_r_wizard":C=new IG$._If3({dc:O._IH8.f5u.call(O._IH8),callback:new IG$._I3d(m,m._INa)});C.show(m);break;case"cmd_py_edit":var u=O._IH8a;u&&u._do_edit.call(u,true);break;case"cmd_export_excel":m._IB3("EXCEL");break;case"cmd_export_html":m._IB3("HTML");break;case"cmd_export_pdf":m._IB3("PDF");break;case"cmd_export_csv":O._IP6.call(O);break;case"cmd_export_tmpl":m._IB3("TMPL");break;case"cmd_export_prt":m._IB3("PDF",true);break;case"cmd_clipboard":m._IB2();break;case"cmd_export_office":var t=m._ILa,v=t.exportOption,o=t.name,E=new IG$._I3e(),e,z=a.name,A,I,y="TMPL_OC",l="TMPL",F;o=o.replace(/\./g,"_");o=o.replace(/ /g,"");I=z.lastIndexOf(".");if(I>0){A=z.substring(I+1);if(A=="docx"||A=="doc"){y="TMPL_T";if(a.export_type){F=a.export_type;o+="."+(F=="field"?"fields.xml":F)}else{o+="."+A}}}e=m._IB4(v,"office");m.setLoading(true);E.init(m,{ack:"20",payload:IG$._I2d({uid:m.uid,type:y,filename:o,utemplate:"T",tmpluid:a.uid,tmplname:a.name,tmpltype:a.type,outputformat:F},"uid;type;filename;fonttype;utemplate;tmpluid;tmplname;tmpltype;outputformat"),mbody:e},m,m.r_IB3,null,o);E._l();break;case"cmd_export_jasper":var t=m._ILa,v=t.exportOption,o=t.name,E=new IG$._I3e(),e,l="TMPL";o=o.replace(/\./g,"_");o=o.replace(/ /g,"");o+="."+(a.toLowerCase()=="excel"?"xls":a);e=m._IB4(v,"jasper");m.setLoading(true);E.init(m,{ack:"20",payload:IG$._I2d({uid:m.uid,type:l,filename:o,fonttype:(v&&v.fonttype?v.fonttype:""),utemplate:"T",tmplpage:v.jasper&&v.jasper.jasper_template,tmpluid:v.jasper&&v.jasper.jasper_tmpl_uid,jasper_filetype:a},"uid;type;filename;fonttype;utemplate;tmplpage;tmpluid;jasper_filetype"),mbody:e},m,m.r_IB3,null,o);E._l();break;case"cmd_export_option":C=new IG$._Ia2({_ILa:m._ILa,_ILb:O?O._ILb:null,dzone:m.dzone,callback:new IG$._I3d(m,m._IJb)});IG$._I_5(this,C);break;case"cmd_filter":C=new IG$._Ia1({_ILa:m._ILa,_ILb:O._ILb,targetitem:a,callback:new IG$._I3d(m,m._IJd)});IG$._I_5(this,C);break;case"cmd_edit_data":C=new IG$._If7({_ILa:m._ILa,_ILb:O._ILb,callback:new IG$._I3d(m,m._IJc)});IG$._I_5(this,C);break;case"cmd_prompt":var j=O._ILb,w=j.needPrompt.call(j);O.showPrompt.call(O,w);break;case"cmd_view_sql":if(O){C=new IG$.mA$_b({_ILa:m._ILa,_ILb:O._ILb,uid:m.uid,_IJa:m._IJa});IG$._I_5(this,C)}break;case"cmd_change_type":m._IB5();break;case"cmd_add_sheet":C=new IG$._If1({dzone:m.dzone,sheets:m.sheets,_ILa:m._ILa,_l1:true,objtype:a||"SHEET",callback:new IG$._I3d(m,m.addSheet)});IG$._I_5(this,C);break;case"cmd_dock_panel":m.dzone.editmode=m.dzone.editmode?false:true;m.dzone._IM5.call(m.dzone);break;case"cmd_edit_sql":C=new IG$._Ib1({_ILa:m._ILa,_ILb:O._ILb,uid:m.uid,_IJa:m._IJa,callback:new IG$._I3d(m,m._IN7)});IG$._I_5(this,C);break;case"cmd_sort_option":C=new IG$._If0({_ILa:m._ILa,_ILb:O._ILb,callback:new IG$._I3d(m,m._IO3)});IG$._I_5(this,C);break;case"cmd_statistics":C=new IG$._Ief({_IK2:O._IK2});C.show(m);break;case"cmd_layout":C=new IG$._Ibd({callback:new IG$._I3d(m,m._IN8,false)});C.show(m);break;case"cmd_loption":m._IM7();break;case"cmd_schedule":if(m.uid){var s=m._IN6();IG$._I50(m,m.uid,m.itemtype,s,m._ILa)}break;case"cmd_favorites":if(m.uid){var E=new IG$._I3e();E.init(m,{ack:"11",payload:IG$._I2d({uid:m.uid}),mbody:IG$._I2e({option:"addfavorites"})},m,m.rs_i1_2,null,null);E._l()}break;case"cmd_share":if(m.uid){m._s1()}break}},_s1:function(){var g=this,h=$("#igc_msr"),a=$("#igc_msr_s",h),f=$("#m_done",a),c=$("#m_close",a),d=$("#m_lnk",a),m=$("#m_msg",a),o=function(){a.hide();h.fadeOut()},j=ig$.applink||"",l="{objid}",b,e=$("#m_em",a);if(h&&h.length){a.show();h.show();b=j.indexOf(l);if(b>-1){j=j.substr(0,b)+g.uid+j.substr(b+l.length)}d.val(j);m.val("");f.unbind("click");f.bind("click",function(){var n=e.val(),s=m.val();if(n){var q=new IG$._I3e(),t="<smsg><item><recipient><![CDATA["+n+"]]></recipient><params><param name='message'><![CDATA["+s+"]]></param><param name='uid'><![CDATA["+(g.uid||"")+"]]></param><param name='linkurl'><![CDATA["+j+"]]></param></params></item></smsg>";q.init(g,{ack:"76",payload:IG$._I2d({uid:g.uid,mtype:"share_item"},"uid;mtype"),mbody:t},g,function(u){o()});q._l()}else{o()}});c.unbind("click");c.bind("click",function(){o()})}},_IJ7:function(){var e=this,c,b,a,f=e.dzone,d;if(e.sheets.length>1){for(b=0;b<e.sheets.length;b++){a=e.sheets[b];a._ILb.layoutinfo={docid:a.renderBox,collapsed:a.collapsed,headerposition:a.headerPosition,region:a.region,width:a.getWidth(),height:a.getHeight()}}}c=e._ILa.uid;e._ILa.savelayoutinfo=f.l10a.call(f);d={uid:c};return d},_INd:function(m,a,e){var l=this;var d={},c=m._ILb._IL9,n,b,g;for(n in c){b=n.replace(/report/,"pageRPT");b=b.replace(/filter/,"pageFLT");g=a.uid+"_"+b;if(n=="report_"+m.sheetindex){d[g]=e}else{d[g]=c[n]}}d[a.uid+"_pageRPT_"+m.sheetindex]=e;if(a.showintab&&IG$._I7d){var f=IG$._I7d,h={auxfilter:d};f.m1$7.call(f,a.uid,a.type||"report",a.name,a.nodepath,true,null,null,h)}else{var j=new IG$._Ibc({viewinfo:a,auxfilter:d});IG$._I_5(this,j)}},_IJ5:function(a){var b=this,c=new IG$._I96({mode:"newitem",initpath:b.nodepath});c.callback=new IG$._I3d(b,b._IO4,a);IG$._I_5(this,c)},_IO4:function(e,b){var d=this,a=d._ILa,f=a._IJ1.call(a),c=new IG$._I3e();c.init(d,{ack:"31",payload:"<smsg><item address='"+e.nodepath+"/"+e.name+"' name='"+e.name+"' type='"+(d.itemtype?d.itemtype:"Report")+"' pid='"+e.uid+"' description=''/></smsg>",mbody:f},d,d._IO5,d._IO6,[e.name,b,e.nodepath,e.uid,f]);c.showerror=false;c._l()},_IO6:function(e,b){var g=this,f=b[0],j=b[1],c=b[2],h=b[3],d=b[4],a=IG$._I27(e);if(a=="0x12e0"){IG$._I55(ig$.appname,f+" already exist on the server. Would you overwrite existing item with this copy?",function(m){if(m=="yes"){var l=new IG$._I3e();l.init(g,{ack:"31",payload:"<smsg><item address='"+c+"/"+f+"' name='"+f+"' type='"+(g.itemtype?g.itemtype:"Report")+"' pid='"+h+"' description='' overwrite='T'/></smsg>",mbody:d},g,g._IO5,null,[f,j,c]);l._l()}},g,g)}else{IG$._I51(e,g)}},_IO5:function(f,b){var h=this,d,g=b[0],j=b[1],e=h._ILa,c=IG$._I18(f,"/smsg/item"),a=IG$._I1b(c,"name");if(j==true){h.ignoreclose=true;h.close();return}h._ILb_=false;h.uid=IG$._I1b(c,"uid");for(d=0;d<h.sheets.length;d++){if(h.sheets[d]._IK9){h.sheets[d]._IK9.uid=h.uid}}e.uid=h.uid;e.name=a;h.setTitle(a)},_IO3:function(){this._t$("cmd_run")},_IId:function(){var c=this,b,a,d=c.sheets;if(d&&d.length>0){for(b=0;b<d.length;b++){a=d[b];auxfilter=a._ILb._IL9;for(fname in auxfilter){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete auxfilter[fname]}}}}},_IGa:function(j){var m=this,d=m._IJa,e=d>-1?m.sheets[d]:null,c=m.down("[name=tbrescount]"),a=m.down("[name=tbcache]"),o="",b=0,l="",f=false,h=m.sheets,g;if(e){if(e._IK2&&e._IK2.results&&e._IK2.results.length>0){o="(Row: "+e._IK2.results[0].rows+", Cols: "+e._IK2.results[0].cols+")";b=e._IK2.results[0].cache;l=e._IK2.results[0].u_cache_time}}if(j){for(g=0;g<h.length;g++){if(h[g].__el==1){f=true;break}}if(!f){m._d1.call(m)}}c&&c.setText(o);if(a){a.setVisible(b);a.setTooltip("DATA ON : "+l+"\nClick to refresh data!")}},_IGb:function(){var g=this,b=g.down("[name=tbcubepath]"),h=g.sheets[g._IJa],a=g._ILa.__cs,c=h?h._ILb.cubeuid:null,f=new IG$._I3e(),e,d;b.setText("");b.hide();a.m[c]&&g._IMf(a.m[c])},aB:function(a){var c=this,e,d=c.dzone,f=d._root,b={objtype:"SHEET",docid:null,_direction:0,parent:f,width:100,height:100};f.children.push(b);e=d._IMc.call(d,null,{width:(b.width?parseInt(b.width):null),height:(b.height?parseInt(b.height):null),draggable:d.draggable},a||"SHEET");b.docid=e.docid;e.objtype=b.objtype;b.lt={pos:{x:0,y:0,w:0,h:0},ubody:e};e._pc=b;e.m1.call(e);return e},_ILf_:function(b){var m=this,f,e,l,j,h=m.sheets,c=m._3,o=$(c.body),q=m.dzone,g=q._root,n=m._IM4,d,a;if(!b){for(f=0;f<m._ILa.sheets.length;f++){j=m._ILa.sheets[f];if(h.length>f){l=h[f];d=q._IIb.call(q,j.layoutinfo.docid)}else{d=m.aB();j.layoutinfo.docid=d.docid;l=m._IMd(f,m._ILb,d);l._ILa=m._ILa;d.view=l;d.objtype="SHEET";d.m1.call(d);d.setReportOption.call(d,j);m.sheets.push(l);if(m._i0&&n){setTimeout(function(){l._II9.call(l,"d");l.Uc.call(l,n.cubeuid)},100)}}if(d){d.setTitle.call(d,j.name||"");d.showTitle.call(d,!j.hidetitle)}h[f]._ILb=j;h[f]._IN0.call(h[f])}}else{for(f=0;f<m.sheets.length;f++){j=m._ILa.sheets[f];h[f]._ILb=j;h[f]._IN0.call(h[f])}}},_IJb:function(){var l=this,c=l._ILa,g=c.exportOption||{},h=g?g.jasper:null,o=l.down("[name=jasper]"),d=l.down("[name=office]"),a=false,b=0;if(!l._2){return}$.each(["xls","pdf","html","csv"],function(q,t){var s=l.down("[name=ig_r_"+t+"]");s&&s.setVisible(g["u_"+(t=="xls"?"excel":t)]&&!ig$.fm["ig_r_"+t])});if(g.u_office&&g.otmpl&&g.otmpl.length){d.show();d.menu.removeAll();$.each(g.otmpl,function(n,q){d.menu.add({xtype:"menuitem",text:q.description||q.name,handler:function(){l._t$.call(l,"cmd_export_office",q)}})})}else{d.hide()}if(h&&h.jasper_template&&g.u_jasper){a=true;o.menu.removeAll();l.dft_jasp_exp=null;$.each(["pdf","rtf","ppt","csv","excel","xlsx","docx","html","xml"],function(q,n){if(h[n+"_output"]=="T"){if(b==0){l.dft_jasp_exp=n}o.menu.add({xtype:"menuitem",text:h[n+"_label"]||n,handler:function(){l._t$.call(l,"cmd_export_jasper",n)}});b++}})}l.down("[name=jasper]").setVisible(a&&g.u_jasper&&!ig$.fm.ig_r_jasper);if(window.IExport){var l=this,e,j,m=false,f=l._2;for(e in window.IExport){if(window.IExport[e].toolbar){j=f.down("[name="+window.IExport[e].name+"]");m=window.IExport[e].toolbarShow(l);j.setVisible(m)}}}},_IN2:function(n,o,h){var m=this,d,g,e,a,s,f=n._ILb,l=f.Xsf,u,q,b,c=0,j;if(o){a=[];if(h.toLowerCase()=="cl_fm"){for(d=l.length-1;d>=0;d--){if(l[d].baseuid==o.uid){l.splice(d,1);c=1}}}else{if(h.toLowerCase()=="r_fmt"){j=new IG$._IEF({pR:m,pS:n,pF:l,pI:o,callback:new IG$._I3d(m,function(w){var t,v=l;for(t=v.length-1;t>=0;t--){if(v[t].baseuid==o.uid){v.splice(t,1)}}for(t=0;t<w.length;t++){v.push(w[t])}m._ILb_=true;m._IO2.call(m,m._IJa)})});j.show()}else{for(d=0;d<l.length;d++){if(l[d].baseuid==o.uid){if(l[d].expression==h.toUpperCase()){return}a.push(l[d])}}if(a.length>0){s=a[0]}else{s=new IG$._IF0(null);l.push(s)}c=1;s.baseuid=o.uid;s.direction="vertical";s.formatstring="";s.stylename=null;s.type=null;s.separatecolumn=true;s.subtotalbase=null;s.usecolumnformat=true;s.showtoprow="F";s.groupresults="F";s.fid="formula_"+f.si;f.si++;b=IG$._IEFc[h.toLowerCase()];if(b){u=b.title;q=b.expr;if(typeof(b.usecolumnformat)!="undefined"){s.usecolumnformat=b.usecolumnformat}if(typeof(b.formatstring)!="undefined"){s.formatstring=b.formatstring}s.title=u;s.expression=q}}}if(c){m._ILb_=true;m._IO2(m._IJa)}}},_IN6:function(){var j=this,a=[],f,m=j.dzone,l;var b,e,c,h,d,g;for(f=0;f<m.items.length;f++){l=m.items[f].view;if(l&&l._IIe){d=l._ILa;if(d&&d.poolname&&IG$.dbp[d.poolname]){h=IG$.dbp[d.poolname]}c="18";g=d.reportmode=="rolap"?"run":d.reportmode=="sql"?"sqlrun":"run",e="<smsg><item "+IG$._I21({uid:this.uid,option:g,active:""+l.sheetindex,pivotresult:"T",pwd:(h?h:null)})+"/></smsg>";b=a.length==0?l._ILa._IJ1():"";a.push({ack:c,payload:e,mbody:b,jobkey:""+l.sheetindex})}}return a},_INb:function(a,f){var d=this,e=d.dzone,c,g=e._root,b;g.children=g.children||[];if(!f){b={objtype:a.objtype,docid:null,_direction:0,parent:g,width:100,height:100};g.children.push(b);f=e._IMc.call(e,null,{width:(b.width?parseInt(b.width):null),height:(b.height?parseInt(b.height):null),draggable:e.draggable},a.objtype);b.docid=f.docid;f.objtype=b.objtype;b.lt={pos:{x:0,y:0,w:0,h:0},ubody:f};f._pc=b;f.m1.call(f)}a.docid=f.docid;switch(a.objtype){case"NAVI":c=new IG$._IA3(f.b3,a,d._ILa,d);break;case"FILTER":c=new IG$._Ied(f.b3,a,d);c.callback=new IG$._I3d(d,d._IO1);break;case"TEXT":c=new IG$._IA2(f.b3,a);break;case"PANEL":c=new IG$._IA4(f.b3,a);break;case"TAB":c=new IG$._IA5(f.b3,a,d.dzone);break;case"RPT_VIEW":c=new IG$._IA5r(f.b3,a,d);break}f.view=c;f.objtype=a.objtype;f.m1.call(f);f.setReportOption.call(f,a);if(a.objtype=="FILTER"&&c._IFd){setTimeout(function(){c._IFd.call(c)},100)}return f},__l1:function(g,j){var l=this,h=l.dzone.items,d,e=g._ILb,q=(e.layoutinfo?e.layoutinfo.docid:null),b,c,a,n,m,o,f;for(d=0;d<h.length;d++){if(h[d].docid==q){b=h[d];break}}if(b){n=b.b1.offset();m=b.b3.offset();o=m.left-n.left;f=m.top-n.top;c=IG$.x_10._w(b.b3);a=IG$.x_10._h(b.b3);c=Math.max(c,j.cw);a=Math.max(a,j.ch);b.fw=(j.tw>c);b.fh=(j.th>a);b.width=(b.fw)?j.tw+o:b.width;b.height=(b.fh)?j.th+f:b.height;l.dzone._IM5.call(l.dzone,true)}},_K:function(m){var j=this,l=m?m._IK2:null,g,n=j.dzone,e=j.dzone.docitems,c,b,h,f,d,a;g=j._params=j._params||{};if(l&&l.results){for(h=0;h<l.results.length;h++){b=l.results[h];c=b._params;if(c){for(f in c){g[f]=c[f]}}}}for(f in e){d=e[f].lt.ubody;a=d.view;d._param=g;d.applyFlt.call(d)}},_IMd:function(d,n,e,l){var a=this,h,c,g=$("<div class='igc-sheet-cntbox'></div>").appendTo(e.b3),b=$("<div></div>").appendTo(e.b3),m=e.b2,j=IG$.x_10._w(e.b3),f=IG$.x_10._h(e.b3);IG$.x_10._w(g,j);IG$.x_10._h(g,f);b.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide();h=new IG$._IPc({width:(n&&n.layoutinfo)?(n.layoutinfo.width||IG$.x_10._w(g)):null,height:(n&&n.layoutinfo)?(n.layoutinfo.height||IG$.x_10._h(g)):null,renderTo:g[0],rendermask:b,renderBox:e.docid,_ILa:a._ILa,_ILb:n,uid:a.uid,sheetindex:d,region:(d==0)?"center":((n)?n.region:null)||"east",collapsible:false,minSize:100,_IK3:a,floatable:false,bindheaderevent:false,rst:l,rX:function(){this.removeAll();m.unbind("click")},listeners:{drillreport:function(o){a._INf.call(a,o)},itemclick:function(o,q){a._ILc.call(a,e);if(o.activeView==0){a._INe.call(a,o,q)}else{if(o._ILb.isdrillreport!==true){a._INf.call(a,o)}}},itemdblclick:function(o,s){var q=a._INf.call(a,o);a._ILc.call(a,e);return},menu:function(o,q){a._INc.call(a,o,q)},pivotchanged:function(o){a._ILb_=true},cresized:function(o,q){a.__l1.call(a,o,q)},result_loaded:function(o){o.__el=0;a._K.call(a,o);a._IGa.call(a,true)},export_sheet:function(o,q){a._IB3.call(a,q.filetype.toUpperCase(),false,o)},destroy:function(o,q){o.__dx=true},afterrender:function(o){e.view=o;var q=$(o.body.dom);q.bind("click",function(){a._ILc.call(a,e)});setTimeout(function(){e.b3.trigger("i_ready")},10)},_ld_:function(o){a.dzone._IIf.call(a.dzone,true,o)},_ldx_:function(o){a.dzone._slx.call(a.dzone,o)},scope:this}});m.bind("click",function(){a._ILc.call(a,e)});h.setSize(IG$.x_10._w(g),IG$.x_10._h(g));return h},applyOption:function(g){var c=this,d=g.auxfilter,f,e,b,a=false;if(d){for(e=0;e<c._ILa.sheets.length;e++){b=c._ILa.sheets[e];for(f in b._IL9){delete b._IL9[f]}for(f in d){b._IL9[f]=d[f]}}a=true}if(a){this._t$("cmd_run")}},_IO0:function(j){var h=this,c=j,a=c.sheetindex,e=h.down("[name=tbresult]"),b=c._IP3.call(c),f="",d,g=0;if(b&&b.length>1){for(d=0;d<b.length;d++){if(b[d].position==3){g=g+parseFloat(b[d].code)}}if(IG$._I37(g)){f="SUM: "+g.format("0,000.00")}}e&&e.setText(f)},_IO1:function(n,h){var B=this,e=B.sheets,d,a,m,u,w,o,t,z="filter_"+B.dzone._dzid+"_"+n._ILb.docid,C=B.dzone.docitems||{},q,y=n._ILb.pff1a.drilltarget,s=n._ILb.pff1a.edrill=="T",l=new IG$._dpca(y),A=n._ILb.pff1a.f_b_clear=="T",v,x=n._fr,g,c,b,j=n.__dloaded,f=B.down("[name=tbsch]");if(B._cld){IG$._I55(ig$.appname,IRm$.r1("L_C_SCH"),function(D){if(D=="yes"){f&&f.hide();B._cld=0;B._IO1.call(B,n)}});return}B._params=null;B._K();o=n.l7.call(n);for(w=0;w<e.length;w++){d=e[w];a=d._ILb;t=(a.layoutinfo?a.layoutinfo.docid:null);q=C[t];b=l._2("sheet_"+w);if(!s&&(l._e&&(!b||(b&&!b.isdrill)))){if(x&&a&&a.openload){delete d.btabrun;if(d._IK9){u=d._IK9._ILa._IJ1.call(d._IK9._ILa);!h&&d._IK9._IJ0(u,"mode",w,d)}else{if(a){!h&&d._IJ2.call(d)}}}continue}if(A){g=a._IL9;for(fname in g){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete g[fname]}}}a._IL9[z]=o;if(q&&q.lt&&q.lt.ubody&&!q.lt.ubody.visible){d.btabrun=true;continue}if(x&&a&&!a.openload){d.btabrun=true;continue}if(!B._i0){delete d.btabrun;if(d._IK9){u=d._IK9._ILa._IJ1.call(d._IK9._ILa);!h&&d._IK9._IJ0(u,"mode",w,d)}else{if(a){!h&&d._IJ2.call(d)}}}}for(v in C){q=C[v].lt.ubody;c=q.view;if(q.objtype=="RPT_VIEW"){if(c){if(c.irpt){for(w=0;w<c.irpt.sheets.length;w++){d=c.irpt.sheets[w];m=d._ILa;a=d._ILb;b=m?l._2(m.uid+"_sheet_"+w):null;if(!s&&(l._e&&(!b||(b&&!b.isdrill)))){if(x&&a&&a.openload){delete d.btabrun;if(d._IK9){u=d._IK9._ILa._IJ1.call(d._IK9._ILa);!h&&d._IK9._IJ0(u,"mode",w,d)}else{if(a){!h&&d._IJ2.call(d)}}}continue}if(A){g=a._IL9;for(fname in g){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete g[fname]}}}a._IL9[z]=o;if(q.visible&&!B._i0){c._v2=false;if(x&&a&&!a.openload){continue}if(d._IK9){u=d._IK9._ILa._IJ1.call(d._IK9._ILa);!h&&d._IK9._IJ0(u,"mode",w,d)}else{if(a){!h&&d._IJ2.call(d)}}}else{c._v2=true}}if(q.visible&&!B._i0){c._vf=false}}else{}}}}B._IJ4()},_IO2:function(d){var c=this,f=c.sheets,b=f[d],a,e;b.setLoading.call(b,true,true);a=b._ILb;if(b._IK9){e=b._IK9._ILa._IJ1.call(b._IK9._ILa);b._IK9._IJ0(e,"mode",d,b)}else{if(a){b._IJ2.call(b)}}c._IJ4()},rs_showPrompt:function(){this._t$("cmd_run")},_IJd:function(){var a=this;a._ILe_(true);a._t$("cmd_run")},_IJc:function(){this._t$("cmd_run")},_aa:function(e){var f=this,c=f._IM4,b=f.down("[name=pivoteditor]"),d=f._a.t_pivot,g=f.b_edpanel,a;if(!g){g=f.b_edpanel=f.down("[name=b_edpanel]")}d.toggle(e);f.dzone.editmode=e;g.toggle(f.dzone.editmode);f._i0=e;c.setVisible.call(c,f._i0);b&&b.setVisible(f._i0);if(f._i0&&f.loadPivotOption){f.loadPivotOption(f._IJa,c.cubeuid)}else{if(!f._i0&&f.confirmPivotOption){f.confirmPivotOption()}}f._i0&&c._IGd.call(c,f._ILa.sheets[f._IJa],f._ILa);$.each(this.sheets,function(j,h){h._II9.call(h,(f._i0?"d":h._ILb.viewmode));if(!f._i0){h._IFf.call(h)}})},_ab:function(){var a=this;$.each(this.sheets,function(c,b){b._IFf.call(b,1)})},_IB2:function(){var b=this,c=b.sheets[b._IJa],a=(c&&c._IH6)?c._IH6.G1.mresult:null;if(a){var d=new IG$._IA7({sheetview:c,mresult:a});d.show(b)}},_IB5:function(c,a){var b=this,d=new IG$._I3e();if(c){d.init(b,{ack:"11",payload:IG$._I2d({uid:c}),mbody:IG$._I2e({option:"translate"})},b,function(f){var j=IG$._I18(f,"/smsg/item"),h,g;if(j){h=IG$._I1c(j);g=IG$.xAM(h.type);b._IG7({cubeobj:h,reporttype:g})}},false);d._l()}else{if(IG$._IB6){var e=new IG$._IB6({modal:true,_ILa:b._ILa,callback:new IG$._I3d(b,function(f){b._IG7(f,a)})});e.show()}}},_IJ9:function(){var d=this,a=d.sheets[d._IJa],b,c=a._IK2;if(c&&c.results){for(b=0;b<c.results.length;b++){c.results[b].__bands=null}}a._IJf=true;a._IP8.call(a,a)},_ai:function(e){var c=this,d,a,b=c._par;c.dzone=new IG$.dz(e,c),c.dzone.cmode=c.cmode||0;if(b){b._dzseq=b._dzseq||0}c._dzid=b?b._dzid+"_"+(b._dzseq++):"root";c.dzone._dzid=c._dzid;c.dzone._IM6={f:c._IM6,s:c};c.dzone.b1.bind({config_doc:function(g,f){c._IM7.call(c,f)},config_pivot:function(g,f){c._IM7a.call(c,f)}});if(IG$.__ep){c.dzone.b1.bind("boxresized",function(){var h=c.getWidth(),n=c.getHeight(),j=borderpanel.getWidth(),f=borderpanel.getHeight(),g=c.dzone.b1.offset(),o=IG$.x_10._w(c.dzone.b1),l=IG$.x_10._h(c.dzone.b1),q,m;if(j<o||f<l){q=h-j;m=n-f;c.setSize(Math.max(o+q,h),Math.max(l+m,n))}})}c._IFd(c.vmode==1?true:null)},_IFd:function(c){var a=this,d,b=a.uid;a._IN1();if(b&&b.length>0){a.issheet=(a.itemtype=="Sheet")?true:false;a._IJa=0;if(a.isnewitem){}else{if(a.pivot){setTimeout(function(){var e=IG$._I13(a.pivot);a.pivot=null;a._IM9(e)},10)}else{if(a.writable){IG$._I56(a,function(e){if(e!="unlock"){a.writable=false;a.down("[name=t_save]").hide()}})}d=new IG$._I3e();d.init(a,{ack:"5",payload:IG$._I2d({uid:b,revision:a.revision}),mbody:IG$._I2e({option:a.hiddentoolbar?"":"diagnostics"})},a,a._IM9,false,c);d._l()}}}else{if(a.__jid&&a.__sid){a._ILd.call(a,a.__sid,a.__jid)}else{a.setLoading(false);a._d1.call(a);if(a.vmode!=1){setTimeout(function(){a._IB5.call(a,a.cubeuid)},400)}}}},_d1:function(b){var a=this.execallback;a&&a.execute(b)},_IM9:function(m,n){var b=this,e=b.auxfilter,d=IG$._I18(m,"/smsg/item"),j,o,l,c,g,a,f,h={};c=(d)?IG$._I1c(d):null;if(c&&c.type=="Export"){g=IG$._I18(m,"/smsg/item/export/report_content/reportxml");b._ILa=new IG$._IEe(g);g=IG$._I18(m,"/smsg/item/export/sheets");if(g){a=IG$._I26(g);for(j=0;j<a.length;j++){f=IG$._I18(a[j],"gridresult");if(f){h[IG$._I1b(a[j],"docid")]=new IG$._IF2(null,f)}}}b._IMb(h);b.fireEvent("_lc0",b)}else{b._ILa=new IG$._IEe(m);b._IMb(null,n);if(e){for(j=0;j<b._ILa.sheets.length;j++){l=b._ILa.sheets[j];for(o in e){l._IL9[o]=e[o]}}}b.fireEvent("_lc0",b)}},cL:function(){},_IMf:function(e){var c=this,a=c.down("[name=tbcubepath]"),d=c.sheets[c._IJa],b=c._ILa;a.show();a.setText(e.name);if(d&&d._ILb.cubeuid==e.uid){d._ILb.cubeitem=e}if(b.cubeuid==e.uid){b.cubeitem=e}a.setTooltip("Goto: "+e.nodepath)},_ILc:function(n,b){var o=this,l=n.view.sheetindex,s=o._IM4,m=o.down("[name=tbreportname]"),u=o.dzone,d,g,t,j,f;if(b||l!=o._IJa){j=o._IJa=(o.itemtype=="Sheet")?0:l;d=o.sheets[j];t=(d&&d._ILb?d._ILb.viewmode:null);if(o._2){var e=o.down("[name=t_grid]"),q=o.down("[name=t_chart]"),c=o.down("[name=t_r]"),h=o.down("[name=t_python]"),a=0;switch(t){case"chart":a=1;break;case"r":a=2;break;case"python":a=3;break}e.toggle(a==0,a==0);q.toggle(a==1,a==1);c.toggle(a==2,a==2);h.toggle(a==3,a==3);a==1&&o._IK6();a!=1&&o._IK4();o._IK7(a==2);o._IL3(a!=1);o._IL4(a!=2);o._IK7p(a==3)}g=u._IIb.call(u,d._ILb.layoutinfo.docid);g.setTitle.call(g,d._ILb.name||"");u._IIc.call(u,g);o._ILe_(false);if(m){m.setText(o._ILa.name||"");o._IGb();o._IN4()}o._IGa(false);if(o._i0){if(s){s._IGd.call(s,o._ILa.sheets[j],o._ILa)}f=o.loadPivotOption;f&&f.call(o,j,s?s.cubeuid:null)}}},_IMb:function(w,B){var y,d,c,n=this,C=n,h=n.down("[name=tbreportname]"),t=n.dzone,j,o,z=(B?false:true),a=n.issheet,g=n._ILa,e=g.sheets,c,v,x,f,A,u,b,m,s,q;n._IJb();t._IN9.call(t);n.sheets=[];j=g.layoutinfo;n.ctrls=g.ctrls;n._IN3();h&&h.setText(g.name||"");if(!a){if(j.type=="bubble"){j=t.tLayout(j)}else{if(j.type=="mondrian"){}}t.m1.call(t,n,j,n.ctrls)}if(g.requirepwd&&!IG$.dbp[g.poolname]){z=false;var l=new IG$._Ice({poolname:g.poolname,callback:new IG$._I3d(n,n.r_IMa,g.poolname)});IG$._I_5(this,l)}if(e.length>0){d=e[0];m=d.layoutinfo;if(a&&n.sheetindex!=0){}else{v=m.docid;if(!v){u=t.items;for(y=0;y<u.length;y++){b=u[y];if(b.objtype=="SHEET"&&!b.view){v=m.docid=b.docid;break}}}ubody=t._IIb.call(t,v);if(ubody==null&&!v){ubody=C.aB();v=m.docid=ubody.docid}if(ubody){ubody.setTitle.call(ubody,d.name||"");t._IIc.call(t,ubody);x=w?w[v]:null;c=n._IMd(0,d,ubody,x);ubody.view=c;ubody.objtype="SHEET";ubody.m1.call(ubody);ubody.setReportOption.call(ubody,d);n.sheets.push(c);A=n.sheets[0];A.sheetindex=0;A._ILb=d;A._ILa=g;A._IN0.call(A)}}}s=t.items;if(z&&s){$.each(s,function(D,E){if(E.objtype=="FILTER"){z=false}})}if(g.b_sc_load=="T"){z=false;t.cmode=1;n._cld=1}if(e.length>1){for(y=e.length-1;y>=0;y--){sop=e[y];m=sop.layoutinfo;v=m.docid;ubody=t._IIb.call(t,v);if(!ubody){if(a){if(n.sheetindex==y){ubody=C.aB(sop.objtype);m.docid=ubody.docid}}else{e.splice(y,1);n.sheets.splice(y,y)}}}for(y=1;y<e.length;y++){d=e[y];m=d.layoutinfo;if(a&&n.sheetindex!=y){continue}v=m.docid;ubody=t._IIb.call(t,v);if(ubody){x=w?w[v]:null;c=n._IMd(y,d,ubody,x);ubody.view=c;ubody.objtype="SHEET";ubody.setReportOption.call(ubody,d);ubody.m1.call(ubody);n.sheets.push(c);if(d.openload){c.sheetindex=y;c._ILb=d;c._ILa=g;c._IN0.call(c);z=true}ubody.setTitle.call(ubody,d.name||"")}}}if(!IG$.__ep&&g.__cs.l.length==0){if(n.vmode!=1){setTimeout(function(){n._IB5.call(n)},200)}}if(!IG$.__ep){f=e.length>0?t._IIb.call(t,e[0].layoutinfo.docid):null;f&&n._ILc(f,true);if(n._2){n._IGb()}n._IJ4();n._ILe_(true)}n._ILf_(true);if(!z){n._d1()}n.__ld=true;n.__d_c&&n.__d_c.execute();if(typeof window.callPhantom==="function"){window.callPhantom({_proc:"S"})}if(g.b_sc_load=="T"){setTimeout(function(){var D=new IG$._I3e();D.init(n,{ack:"22",payload:IG$._I2d({uid:n.uid,action:"latestjob"},"uid;action"),mbody:IG$._I2e({})},n,function(E){var H=IG$._I18(E,"/smsg/job"),F=this,G;if(H){G=IG$._I1c(H);G.sid&&G.jid&&F._ILd.call(F,G.sid,G.jid)}},null);D._l()},10)}},r_IMa:function(d,a){var b=this,c=b.sheets;IG$.dbp[a]=d;if(c&&c.length>0){c[0]._IJ2.call(c[0])}},regbody:function(a,c){var b=this;b.__dreg=b.__dreg||{};b.__dreg[a]={b_init:false,docid:a,fobj:c}},cCC:function(){var a=this,c=new IG$._I3e(),b=a.uid;if(b){c.init(a,{ack:"11",payload:IG$._I2d({uid:b},"uid"),mbody:IG$._I2e({option:"clear_cache"})},a,function(d){var f=this,e=f.down("[name=tbcache]");if(e){e.hide()}});c._l()}}});IG$._ILd=function(a,b){var d=this,c=new IG$._I3e(),e;if(b){d.setLoading(true);e={sid:a,jid:b,action:"jobresult"};c.init(d,{ack:"22",payload:IG$._I2d(e,"sid;jid;action"),mbody:IG$._I2e({})},d,d.r_ILd,null,e);c._l()}};IG$.r_ILd=function(x,j){var y=this,g=y.down("[name=tbsch]"),f=IG$._I18(x,"/smsg"),d=(f?IG$._I26(f):null),u,z,a,q=[],s,c,b,h,l,v,w,n,o,m,e=y.sheets;y.setLoading(false);if(d){for(u=0;u<d.length;u++){m=d[u];s=parseInt(IG$._I1b(m,"jobseq"));c=IG$._I1b(m,"key");h=IG$._I1b(m,"crdate");l=IG$._I1b(m,"srdate");b=(c?parseInt(c):s);a=IG$._I19(m,"info");if(a){v=IG$._I1a(a,"crdate");w=IG$._I1a(a,"srdate")}a=IG$._I19(m,"resultxml");if(a){o=IG$._I25(a);o=o?IG$._I13(o):null;n={jobseq:b,crdate:h,srdate:l,crdate_fmt:v,srdate_fmt:w,content:o};q.push(n)}}if(q.length){for(u=0;u<q.length;u++){jobres=q[u];s=jobres.jobseq;h=jobres.crdate;v=jobres.crdate_fmt;l=jobres.srdate;w=jobres.srdate_fmt;if(jobres.content){z=new IG$._IF2(jobres.content);z.srdate=l;z.crdate=h;z.srdate_fmt=w;z.crdate_fmt=v;if(j){z._job={sid:j.sid,jid:j.jid,jobid:z._IL8}}if(e[s]){e[s]._IJe.call(e[s],z)}}}if(g){g.show();g.setText(w||"-")}}}};IG$._IBe=$s.extend(IG$._I57,{uid:null,layout:"fit",closable:true,sheets:[],ctrls:{},_IJa:0,_IM0:[],_IM1:[],_ILb_:false,isnewitem:false,ignoreclose:false,_IM2:{},_c:["t_save","t_save_as","t_run","t_exp","t_tool","t_grid","t_chart","t_r","t_python","toolbarprompt","t_sql_edit","t_sql_view","t_sheet","t_chart_wizard","t_chart_type","t_r_summary","t_r_script","t_r_saveimage","t_r_wizard","t_editdata","t_py_edit"],initComponent:function(){var d=this,c,b,a;if(d._iv=="dashboard"){d.hiddenstatusbar=true;d.hiddentoolbar=true}if(IG$.__ep_m<1){c={xtype:"toolbar",name:"_1",hidden:d.hiddenstatusbar||false,items:[{xtype:"button",text:"",name:"tbreportname",tooltipType:"title",tooltip:"Search in navigation",handler:function(){var f=d._ILa,e=IG$._IM3;if(f&&f.nodepath&&IG$._I7d&&e){if(e.vmode!="tree"){IG$._I7e(1)}e._IHd.call(e,{name:f.name,nodepath:f.nodepath,uid:f.uid})}},scope:d},"-",{xtype:"button",text:"",name:"tbcubepath",tooltipType:"title",hidden:true,handler:function(){var f=this,h=f.sheets[f._IJa],g=h._ILb.cubeuid?h._ILb.cubeitem:f._ILa.cubeitem;if(g&&IG$._IM3&&IG$._IM3.rendered){var e=IG$._IM3;if(e.vmode!="tree"){IG$._I7e(1)}e._IHd.call(e,g)}},scope:d},"->",{xtype:"tbtext",text:"",hidden:true,name:"tbsch"},{xtype:"tbtext",text:"",name:"tbresult"},"-",{xtype:"tbtext",name:"tbrescount",text:""},"-",{xtype:"tbtext",text:"Ready",name:"tbstatus"},{xtype:"button",iconCls:"igc-cached",hidden:true,tooltipType:"title",name:"tbcache",tooltip:"",handler:function(){this.cCC()},scope:d}]};b={xtype:"toolbar",name:"_2",hidden:d.hiddentoolbar||(ig$.fm&&ig$.fm.ig_r_tbar)||false,items:[{iconCls:"icon-toolbar-runreport",tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this._t$("cmd_run")},scope:d}]}}a=[{xtype:"panel",border:0,layout:"border",items:[{xtype:"panel",name:"mainpanel",border:0,region:"center",layout:"border",flex:1,defaults:{collapsible:true,split:false,bodyPadding:0,border:true},items:[{name:"_3",html:"Please wait while loading...",region:"center",layout:"fit",border:0,collapsible:false}],listeners:{resize:function(e,l,j,h){var f=this,g=f.dzone;if(g){IG$.x_10._w(g.b0,l);IG$.x_10._h(g.b0,j);g._IM5.call(g,true)}},scope:d}}]}];$s.apply(d,{tbar:b,bbar:c,items:a});IG$._IBe.superclass.initComponent.call(this)},loadPivotOption:function(a,d){var f=this,c=f.down("[name=pivoteditor]"),b,d,e=true;if(c&&f._i0){f.confirmPivotOption();c.setVisible(true);b=f._ILa.sheets[a];c._IJa=a,c._ILa=f._ILa;c._ILb=b;if(!d){d=b?b.cubeuid:null}if(d){e=b?b.Uc.call(b,d):true;if(e){b.cubeuid=d}}c.cubeuid=b?b.cubeuid:null;c.Uc.call(c,d,e);setTimeout(function(){c._IL1.call(c);c._c=1},20)}},confirmPivotOption:function(){var b=this,a=b.down("[name=pivoteditor]");if(a&&a._c){a._IFf.call(a);a._c=0}},listeners:{afterrender:function(){var b=this,a=b.down("[name=_3]"),d=$(a.body.dom),c=b.down("[name=_1]");_2=b.down("[name=_2]");b._1=c;b._2=_2;b.__loaded=1;b._IM4=b.down("[name=p1]");b._3=a;d.empty();b._ai(d)},resize:function(a,f,e,b){var c=this,d=c.dzone;if(f>0&&e>0){d._IM5.call(d,true)}},close:function(a,d){var c=this,f=c.sheets,e=c.dzone,b;if(f&&f.length){for(b=0;b<f.length;b++){f[b].close()}c.sheets=null}if(e&&e.items&&e.items.length){for(b=0;b<e.items.length;b++){if(e.items[b].objtype!="SHEET"&&e.items[b].view){e.items[b].view.__dx=true}}}},beforeclose:function(c,g){var f=this,e=true,a=[],d,h=f.sheets;if(f.dlg_pivot){f.dlg_pivot.close()}for(d=0;d<h.length;d++){if(h[d].jobid){a.push(h[d].jobid)}if(h[d]._refresh_timer){clearTimeout(h[d]._refresh_timer)}}if(c.ignoreclose){e=true}else{if(c._ILb_&&(f.writable||!f.uid)){IG$._I55(null,null,c._IM8,c,c);e=false}else{if(f.writable&&f.uid){var b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"lock",detail:"close",rcs:a.join(";")})},c,function(j){},false);b._l()}else{if(a.length>0){var b=new IG$._I3e();b.init(c,{ack:"18",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"clearjob",rcs:a.join(";")})},c,function(j){},false);b._l()}}}}return e}},_IM8:function(c){var b=this;if(c=="no"){if(b.uid){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){b.ignoreclose=true;b.close()},false);a._l()}else{b.ignoreclose=true;b.close()}}else{if(c=="yes"){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){b._t$("cmd_save",true)},false);a._l()}}},_IM6:function(n){var g=this,l=g.dzone,b=g._ILa,m=l._IIb.call(l,n),h=(m?m.view:null),d,c,e=g.sheets,f,a=false;g._ILb_=true;if(h){switch(m.objtype){case"SHEET":for(d=0;d<e.length;d++){f=e[d];if(f==h){e.splice(d,1);if(f._ILb&&f._ILb.objtype=="SHEET"&&b.sheets.length>d){b.sheets.splice(d,1)}a=true;break}}break;default:if(g.ctrls[n]){h.__dx=true;delete g.ctrls[n]}a=true;break}}else{if(g.ctrls[n]){delete g.ctrls[n]}a=true}return a},_IM7:function(l){var f=this,h=f.dzone,j=(l?h._IIb.call(h,l):null),g=(j?j.view:null),c,d=f.sheets,e,a=false,b;if(g){b=g.sheetindex;f._IG9.call(f,b,g)}},_IM7a:function(n){var h=this,l=h.dzone,m=(n?l._IIb.call(l,n):null),j=(m?m.view:null),d,e=h.sheets,f,a=false,b,c;if(j){c=m.objtype=="FILTER";b=j.sheetindex;if(h.dlg_pivot){if(h.dlg_pivot.docid==n){return}h.dlg_pivot.close();h.dlg_pivot=null}var g=new IG$.dlg_pivot({report_ptr:h,_ILa:h._ILa,sheetindex:b,objtype:m.objtype,docid:n});IG$._I_5(h,g)}},r_IMa:IG$._Ibb.r_IMa,regbody:IG$._Ibb.regbody,_IMb:IG$._Ibb._IMb,_ILd:IG$._ILd,r_ILd:IG$.r_ILd,_IL6:IG$._Ibb._IL6,_s1:IG$._Ibb._s1,_K:IG$._Ibb._K,_ILc:IG$._Ibb._ILc,_IGa:IG$._Ibb._IGa,_IG9:function(d,c){c.sheetindex=d;var b=this,a=new IG$._If1({dzone:b.dzone,sheets:b.sheets,_ILb:c._ILb,sheetindex:d,_ILa:b._ILa,callback:new IG$._I3d(b,b.r_IG9,c)});IG$._I_5(this,a)},r_IG9:function(o,g){var q=this,l=q._ILa.sheets,d=q._ILa,m=g._ILb,u=q.dzone,v,n,b,a=g.sheetindex,e,f,t,c;v=(m.objtype=="SHEET")?m.layoutinfo.docid:m.docid;e=u._IIb.call(u,v);if(e){q._ILb_=true;c=d.sheets;if(m.changetype){q._IJa=0;if(m.changetype=="SHEET"){for(f=0;f<c.length;f++){if(c[f]==m){c.splice(f,1);break}}for(f=0;f<q.sheets.length;f++){if(q.sheets[f]==g){q.sheets.splice(f,1);break}}for(f=0;f<q.sheets.length;f++){q.sheets[f].sheetindex=f}}if(e.view){e.view.rX.call(e.view);e.b3.empty()}if(m.objtype=="SHEET"){n=new IG$._IEf(null,q.itemtype,false);n.layoutinfo.docid=v;c.push(n);b=q._IMd(a,n,e);e.view=b;q.sheets.push(b);b.sheetindex=q.sheets.length-1}else{if(m.changetype=="SHEET"){t=new IG$._IFc(null);t.objtype=m.objtype;t.close=m.close;t.name=m.name}q._INb(m,e);n=e.view;if(m.changetype=="SHEET"){q.ctrls[e.docid]=t}var s=IG$.x_10._w(n.container),j=IG$.x_10._h(n.container);n.setSize(s,j)}q._ILf_(false)}if(m.objtype=="FILTER"||m.objtype=="TEXT"||m.objtype=="NAVI"||m.objtype=="RPT_VIEW"){if(m.objtype=="FILTER"){e.view.l3.call(e.view,null,false,false,true)}else{e.view.l3.call(e.view)}}e.setTitle.call(e,m.name);e.showTitle.call(e,!m.hidetitle);e.fw=m.fw;e.fh=m.fh;e.setReportOption.call(e,m);e.m1.call(e)}u._IM5.call(u,true)},_IGb:IG$._Ibb._IGb,_IMf:IG$._Ibb._IMf,_ILf_:IG$._Ibb._ILf_,_IJb:IG$._Ibb._IJb,aB:IG$._Ibb.aB,_IN1:function(){var f,c=this,b=c._2,a=[],e,g;if(!b){return}b.suspendLayout=true;b.removeAll();for(e=0;e<IG$._I32.length;e++){g={text:IG$._I32[e].label,charttype:IG$._I32[e].charttype,subtype:IG$._I32[e].subtype,handler:function(){c._IN5.call(c,this)}};a.push(g)}f=[{iconCls:"icon-toolbar-save",name:"t_save",cls:"ig_r_save",tooltip:IRm$.r1("L_SAVE_REPORT"),hidden:true,handler:function(){this._t$("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",cls:"ig_r_saveas",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),hidden:true,handler:function(){this._t$("cmd_saveas")},scope:this},"-",{iconCls:"icon-toolbar-runreport",name:"t_run",cls:"ig_r_run",hidden:true,tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this._t$("cmd_run")},scope:this},"-",{xtype:"button",iconCls:"icon-toolbar-addsheet",name:"t_sheet",cls:"ig_r_adpanel",hidden:true,text:IRm$.r1("L_ADD_VIEW"),menu:{xtype:"menu",items:[{text:IRm$.r1("L_NEW_SHEET"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","SHEET")},scope:this},{text:IRm$.r1("L_NEW_FILTER"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","FILTER")},scope:this},{text:IRm$.r1("L_NEW_TEXTAREA"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","TEXT")},scope:this},"-",{text:IRm$.r1("L_NEW_TABPANEL"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","TAB")},scope:this},{text:IRm$.r1("L_NEW_PANEL"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","PANEL")},scope:this},{text:IRm$.r1("L_NEW_RPT_VIEWER"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","RPT_VIEW")},scope:this}]}},{iconCls:"icon-toolbar-layout",tooltip:"Edit Docking Panel",cls:"ig_r_edpanel",name:"b_edpanel",enableToggle:true,text:IRm$.r1("L_PIVOT_REPORT"),handler:function(){this._ILb_=true;this._t$("cmd_dock_panel")},listeners:{afterrender:function(h){IG$.r___.a(h,"edit_dock_panel")}},scope:this},"-",{iconCls:"icon-toolbar-grid",cls:"ig_r_grid",name:"t_grid",hidden:true,toggleGroup:"vm",tooltip:IRm$.r1("L_VIEW_GRID"),handler:function(){this._ILb_=true;this._t$("cmd_sheetview")},scope:this},{iconCls:"icon-toolbar-chart",name:"t_chart",cls:"ig_r_chart",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_CHART"),handler:function(){this._ILb_=true;this._t$("cmd_chartview")},scope:this},{iconCls:"icon-toolbar-r",name:"t_r",cls:"ig_r_r",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_RSTAT"),handler:function(){this._ILb_=true;this._t$("cmd_rview")},scope:this},{iconCls:"icon-toolbar-python",name:"t_python",cls:"ig_r_python",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_PYTHON"),handler:function(){this._ILb_=true;this._t$("cmd_pythonview")},scope:this},"-",{iconCls:"icon-toolbar-editdata",name:"t_editdata",hidden:true,tooltip:IRm$.r1("L_EDIT_DATA"),handler:function(){this._ILb_=true;this._t$("cmd_edit_data")},scope:this},{iconCls:"icon-toolbar-prompt",name:"toolbarprompt",hidden:true,tooltip:"Prompt",handler:function(){this._ILb_=true;this._t$("cmd_prompt")},scope:this},{iconCls:"icon-sql",name:"t_sql_edit",hidden:true,tooltip:IRm$.r1("L_EDIT_SQL"),handler:function(){this._t$("cmd_edit_sql")},scope:this},{iconCls:"icon-toolbar-export",name:"t_exp",cls:"ig_r_exp",hidden:true,tooltip:IRm$.r1("L_EXPORT"),xtype:"button",menu:[{text:IRm$.r1("L_EXPORT_EXCEL"),name:"ig_r_xls",iconCls:"icon-toolbar-excel",handler:function(){this._t$("cmd_export_excel")},scope:this},{text:IRm$.r1("L_EXPORT_PDF"),name:"ig_r_pdf",iconCls:"icon-toolbar-pdf",handler:function(){this._t$("cmd_export_pdf")},scope:this},{text:IRm$.r1("L_EXPORT_CSV"),name:"ig_r_csv",handler:function(){this._t$("cmd_export_csv")},scope:this},{text:IRm$.r1("L_EXPORT_HTML"),name:"ig_r_html",iconCls:"icon-toolbar-html",handler:function(){this._t$("cmd_export_html")},scope:this},{name:"office",cls:"ig_r_office",text:IRm$.r1("L_EXPORT_OFFICE"),menu:{xtype:"menu",items:[]}},{name:"jasper",cls:"ig_r_jasper",text:IRm$.r1("L_EXPORT_JASPER"),menu:{xtype:"menu",items:[]},handler:function(){if(this.dft_jasp_exp){me._t$.call(me,"cmd_export_jasper",this.dft_jasp_exp)}}},{text:IRm$.r1("L_CLIPBOARD_COPY"),cls:"ig_r_clb",iconCls:"icon-toolbar-clipboard",handler:function(){this._t$("cmd_clipboard")},scope:this}]}];if(window.IExport){var d;for(d in window.IExport){if(window.IExport[d].toolbar){window.IExport[d].toolbar.scope=this;f.push(window.IExport[d].toolbar)}}}f.push({tooltip:IRm$.r1("L_EXPORT_OPTION"),iconCls:"icon-toolbar-popt",cls:"ig_r_eopt",handler:function(){this._ILb_=true;this._t$("cmd_export_option")},scope:this},"-",{iconCls:"icon-sql",text:IRm$.r1("L_VIEW_SQL"),cls:"ig_r_sv",name:"t_sql_view",hidden:true,handler:function(){this._t$("cmd_view_sql")},scope:this},{iconCls:"icon-toolbar-tools",name:"t_tool",cls:"ig_r_tools",hidden:true,tooltip:IRm$.r1("L_REPORT_TOOLS"),xtype:"button",menu:[{text:IRm$.r1("L_STATISTICS"),cls:"ig_r_stat",handler:function(){this._ILb_=true;this._t$("cmd_statistics")},scope:this}]},"-",{text:IRm$.r1("B_WIZARD"),name:"t_chart_wizard",cls:"ig_r_cwz",dtype:"chart",hidden:true,handler:function(){var h=this;this._ILb_=true;h._t$.call(h,"cmd_chartwizard")},scope:this},{text:IRm$.r1("L_CHART_TYPE"),name:"t_chart_type",cls:"ig_r_ct",hidden:true,dtype:"chart",menu:a},{text:IRm$.r1("L_R_SUMMARY"),tooltip:IRm$.r1("L_R_SUMMARY"),name:"t_r_summary",cls:"ig_r_rsum",iconCls:"icon-toolbar-rsummary",dtype:"r",hidden:true,handler:function(){var h=this;this._ILb_=true;h._t$.call(h,"cmd_r_summary")},scope:this},{text:IRm$.r1("L_R_SCRIPT"),tooltip:IRm$.r1("L_R_SCRIPT"),iconCls:"icon-toolbar-rscript",name:"t_r_script",cls:"ig_r_rsce",dtype:"r",hidden:true,handler:function(){var h=this;this._ILb_=true;h._t$.call(h,"cmd_r_script")},scope:this},{text:IRm$.r1("L_R_WIZARD"),tooltip:IRm$.r1("L_R_WIZARD"),iconCls:"icon-toolbar-rwizard",name:"t_r_wizard",cls:"ig_r_rwzd",dtype:"r",hidden:true,handler:function(){var h=this;this._ILb_=true;h._t$.call(h,"cmd_r_wizard")},scope:this},{text:IRm$.r1("L_PY_EDIT"),tooltip:IRm$.r1("L_PY_EDIT"),iconCls:"icon-toolbar-pyedit",name:"t_py_edit",cls:"ig_py_edit",dtype:"py",hidden:true,handler:function(){var h=this;this._ILb_=true;h._t$.call(h,"cmd_py_edit")},scope:this},{text:IRm$.r1("T_SAVE_IMAGE"),tooltip:IRm$.r1("L_SAVE_IMAGE"),iconCls:"icon-toolbar-saveimage",name:"t_r_saveimage",cls:"ig_r_rimg",xtype:"button",dtype:"r",hidden:true,menu:[{text:"PNG File",handler:function(){var h=this;h._t$.call(h,"cmd_r_simage_png")},scope:this},{text:"SVG File",handler:function(){var h=this;h._t$.call(h,"cmd_r_simage_svg")},scope:this}]},"->",{iconCls:"icon-toolbar-schedule",cls:"ig_r_sch",tooltip:IRm$.r1("B_SCHEDULE"),hidden:ig$.features&&!ig$.features.enable_scheduler?true:false,handler:function(){this._t$.call(this,"cmd_schedule")},scope:this},{iconCls:"icon-email",cls:"ig_r_email",tooltip:IRm$.r1("B_SHARE"),handler:function(){this._t$.call(this,"cmd_share")},scope:this},{iconCls:"icon-toolbar-favorites",cls:"ig_r_fav",tooltip:IRm$.r1("B_FAVORITES"),handler:function(){this._t$.call(this,"cmd_favorites")},scope:this},{iconCls:"icon-toolbar-svn",hidden:true,tooltip:IRm$.r1("B_SVN"),handler:function(){this._t$.call(this,"cmd_svn")},scope:this},{iconCls:"icon-toolbar-userdoc",tooltip:IRm$.r1("B_USER_DOC"),cls:"ig_r_inst",handler:function(){IG$._I63(this.uid,true,"report")},scope:this});b.add(f);b.suspendLayout=false;b.doLayout()},_IN2:IG$._Ibb._IN2,_b:function(){var d=this,a=d._2,c=d._c,b=d._a;if(!a){return}if(!b){b=d._a={};for(i=0;i<c.length;i++){b[c[i]]=a.down("[name="+c[i]+"]")}}return b},_IN3:function(){var f=this,a=f._2,e=f._a,d=f._c,c,b,g=[];if(!a){return}a.suspendLayout=true;e=f._b();for(c=0;c<d.length;c++){e[d[c]].hide()}if(f.writable||f.uid==""){g.push("t_save")}g.push("t_save_as");g.push(["t_run","t_tool","t_exp","t_grid","t_chart","t_sheet"]);if(IG$._I83.jS1.l3.charAt(0)!="P"){g.push("t_r");g.push("t_python")}f._IN4();f._IJb();for(c=0;c<g.length;c++){if(typeof(g[c])=="string"){if(!ig$.fm[e[g[c]].cls]){e[g[c]].show()}}else{for(b=0;b<g[c].length;b++){if(!ig$.fm[e[g[c][b]].cls]){e[g[c][b]].show()}}}}a.suspendLayout=false;a.doLayout()},_IN4:function(){var d=this,b=d._b(),a=d._ILa.__cs,e=d.sheets[d._IJa],c=e?e._ILb.cubeuid:null,f;b.t_editdata.hide();b.t_sql_edit.hide();b.t_sql_view.hide();if(c&&a.m[c]){f=a.m[c].type;f=f?f.toLowerCase():null}if(f=="cube"||f=="mcube"||f=="datacube"||f=="nosql"||f=="mdbcube"||f=="sqlcube"){if(d.writable&&f=="mcube"&&!ig$.fm[b.t_editdata.cls]){b.t_editdata.show()}}else{if(f=="sqlcube"&&!ig$.fm[b.t_sql_edit.cls]){b.t_sql_edit.show()}}if((f=="cube"||f=="sqlcube")&&!ig$.fm[b.t_sql_view.cls]){b.t_sql_view.show()}},_ILe_:function(f){var c=this,a=null,b,e=c.down("[name=toolbarprompt]"),d=c.sheets[c._IJa];if(e){e.hide()}if(e&&d&&c._ILa&&c._ILa.sheets.length>c._IJa){a=c._ILa.sheets[c._IJa];b=a.needPrompt.call(a);if(b&&b.length>0){e.show();if(f){d._IKd&&d._IKd.show();d.showPrompt.call(d,b)}}else{if(f){d._IKd&&d._IKd.hide()}}}},_IK6:function(){var b=this,a=b._b();if(a){$.each(["t_chart_wizard","t_chart_type"],function(d,c){!ig$.fm[a[c].cls]&&a[c].show()})}},_IK4:function(){var b=this,a=b._b();if(!a){return}a.t_chart_wizard.hide();a.t_chart_type.hide()},_IK7:function(c){var b=this,a=b._a;if(!a){return}$.each(["t_r_summary","t_r_script","t_r_saveimage","t_r_wizard"],function(e,d){a[d]&&a[d][!ig$.fm[a[d].cls]&&c?"show":"hide"]()})},_IK7p:function(c){var b=this,a=b._a;if(!a){return}$.each(["t_py_edit"],function(e,d){a[d]&&a[d][!ig$.fm[a[d].cls]&&c?"show":"hide"]()})},_IN5:function(g){var d=this,e=g.charttype,a=g.subtype,c=d.sheets[d._IJa],b=c?c._ILb:null,f;if(b){f=b.cco;f.charttype=e;f.subtype=a;d._IJ9()}},_IL3:function(a){var c=this,b;for(b=0;b<c._IM0.length;b++){if(a){c._2.remove(c._IM0[b])}else{c._2.add(c._IM0[b])}}},_IL4:function(a){var b,c=this;for(b=0;b<c._IM1.length;b++){if(a){c._2.remove(c._IM1[b])}else{c._2.add(c._IM1[b])}}},_IIa:IG$._Ibb._IIa,_IIa2:IG$._Ibb._IIa2,_II9:IG$._Ibb._II9,_t$:IG$._Ibb._t$,rs_i1_2:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED_FAV"),null,null,0,"success")},_IN6:IG$._Ibb._IN6,_IN7:function(){var a=this;a._ILe_(true)},_IId:IG$._Ibb._IId,_INa:function(a){var c=this,d=c.sheets[c._IJa],b=d._IH8;if(a){d._ILb.rro.s3=a.vcontent;b.F2a.call(b);b.F3.call(b)}},addSheet:function(g){var d=this,b=g._ILb,e=d.dzone,c=d.sheets.length,a=this,f;b.objtype=g.objtype;b.drillreport=g.drillreport;b.drilltarget=g.drilltarget;b.close=g.closable;b.hidetitle=g.hidetitle;b.isdistinct=g.isdistinct;b.name=g.reportname;b.openload=g.openload;b.columnfill=g.columnfill;switch(g.objtype){case"SHEET":a._ILa.sheets.push(b);break;default:f=a._INb(b);a.ctrls[f.docid]=b;f.setReportOption.call(f,b);break}a._ILf_(false);e._IM5.call(e,true)},_INb:IG$._Ibb._INb,__l1:IG$._Ibb.__l1,_IMd:IG$._Ibb._IMd,_INc:IG$._Ibb._INc,_INd:IG$._Ibb._INd,applyOption:IG$._Ibb.applyOption,_INe:IG$._Ibb._INe,_INf:IG$._Ibb._INf,_IJ4:IG$._Ibb._IJ4,_IO0:IG$._Ibb._IO0,_IO2:IG$._Ibb._IO2,_IO1:IG$._Ibb._IO1,rs_showPrompt:IG$._Ibb.rs_showPrompt,_IJd:IG$._Ibb._IJd,_IJc:IG$._Ibb._IJc,_aa:IG$._Ibb._aa,_ab:IG$._Ibb._ab,_IO3:IG$._Ibb._IO3,_IJ9:IG$._Ibb._IJ9,F:IG$._Ibb.F,J3:IG$._Ibb.J3,_IJ6:function(c,b,d){var a=this;var e=new IG$._I3e();e.init(a,{ack:"31",payload:IG$._I2d({uid:c}),mbody:b},a,a.r_IJ6,null,[d]);e._l()},r_IJ6:function(a,b){var d=this,c=(b?b[0]:false);if(c){d.ignoreclose=true;d.close()}else{d._ILb_=false;IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}},_IJ5:IG$._Ibb._IJ5,_IO4:IG$._Ibb._IO4,_IO6:IG$._Ibb._IO6,_IO5:IG$._Ibb._IO5,_IB2:IG$._Ibb._IB2,_IB3:IG$._Ibb._IB3,_IB4:IG$._Ibb._IB4,r_IB3:IG$._Ibb.r_IB3,_IB5:IG$._Ibb._IB5,_ILf:IG$._Ibb._ILf,_IG7:IG$._Ibb._IG7,_ai:IG$._Ibb._ai,_IFd:IG$._Ibb._IFd,_d1:IG$._Ibb._d1,_IM9:IG$._Ibb._IM9,cL:IG$._Ibb.cL,cCC:IG$._Ibb.cCC,Uc:function(a){var b=this,c=b.sheets;$.each(c,function(e,d){d.Uc.call(d,a)})}});IG$._Ie7=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:500,height:440,seq:0,callback:null,_IG0:function(){var a=this;a.callback&&a.callback.execute();a.close()},_IFf:function(){var a=this;a.l2();a._IG0()},_IFd:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"1",payload:IG$._I2d({address:"ReportStyle"}),mbody:IG$._I2e()},a,function(n){var q=this,g=q._piobj.hloption,m,c=[],l,h,f=q.down("[name=grdhl]"),e=IG$._I18(n,"/smsg/item/themes/Styles"),s,d,o=[];for(l=0;l<g.length;l++){m=g[l];m.seq=q.m1();c.push(m.g1.call(m))}f.store.loadData(c);if(e){s=IG$._I18(e,"Custom");if(s){d=IG$._I26(s);for(h=0;h<d.length;h++){o.push({name:IG$._I1b(d[h],"name")})}}}q.__global_cs=o},null);b._l()},l2:function(){var e=this,f=e._piobj.hloption,g=e.down("[name=grdhl]"),a=g.store,d,c,h,b=[];for(d=0;d<a.data.items.length;d++){h=a.data.items[d];for(c=0;c<f.length;c++){if(f[c].seq==h.get("seq")){b.push(f[c]);break}}}e._piobj.hloption=b},o1:function(a){var b=this,a=a,c=new IG$._IAf({_piobj:b._piobj,__global_cs:b.__global_cs,hlobj:a,callback:new IG$._I3d(b,b.rs_o1)});IG$._I_5(b,c)},rs_o1:function(c){var b=this,e=b.down("[name=grdhl]"),a,f,d;if(c.isnew==true){c.isnew=false;b._piobj.hloption.push(c);e.store.add(c.g1())}else{for(a=0;a<e.store.data.items.length;a++){d=e.store.data.items[a];if(d.get("seq")==c.seq){f=d;break}}if(f){f.set("name",c.name);f.set("delimiter",c.delimiter);f.set("itemname",c.itemname);f.set("uid",c.uid);f.set("operator",c.operator);f.set("stylename",c.stylename);f.set("styleuid",c.styleuid);f.set("apprange",c.apprange);f.set("appset",c.appset);f.set("values",c.values)}}},m1:function(){var a=this;a.seq++;return"seq_"+a.seq},initComponent:function(){var a=this;a.title=IRm$.r1("T_HL_OPT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_HL_DESC"),flex:1},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var c=this,b=new IG$._Ie4(null);b.isnew=true;b.seq=c.m1();c.o1(b)},scope:this}]},{xtype:"gridpanel",name:"grdhl",flex:1,store:{xtype:"store",fields:["name","delimiter","itemname","uid","operator","stylename","styleuid","apprange","appset","seq","values"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},tbar:[{iconCls:"icon-toolbar-moveup",text:"Move Up",handler:function(){var d=this.down("[name=grdhl]"),f=d.getSelectionModel(),c=f.getSelection(),e,b;if(c&&c.length==1){e=c[0];b=d.store.indexOf(e);if(b>0){d.store.remove(e);d.store.insert(b-1,e);f.select(e,true)}}},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",text:"Move Down",handler:function(){var d=this.down("[name=grdhl]"),f=d.getSelectionModel(),c=f.getSelection(),e,b;if(c&&c.length==1){e=c[0];b=d.store.indexOf(e);if(b+1<d.store.data.items.length){d.store.remove(e);d.store.insert(b+1,e);f.select(e,true)}}},scope:this}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"itemname",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_ST_NAME"),dataIndex:"stylename",flex:1},{xtype:"gridcolumn",text:IRm$.r1("L_CONDITION"),dataIndex:"operator",width:60},{xtype:"gridcolumn",text:IRm$.r1("B_VALUE"),dataIndex:"values",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE"),handler:function(e,g,c){var f=this,d,b;rec=e.store.getAt(g);for(d=0;d<f._piobj.hloption.length;d++){if(f._piobj.hloption[d].seq==rec.get("seq")){b=f._piobj.hloption[d];f._piobj.hloption.splice(d,1);break}}if(b){e.store.removeAt(g)}},scope:this}]}],listeners:{cellclick:function(b,d,o,h,n,q,j,l){var m=this,f=b.store.getAt(q),c,g;if(o<3&&o>0){for(g=0;g<m._piobj.hloption.length;g++){if(m._piobj.hloption[g].seq==f.get("seq")){c=m._piobj.hloption[g];break}}if(c){m.o1(c)}}},scope:this}}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._Ie7.superclass.initComponent.apply(this,arguments)}});IG$._IAf=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:450,height:400,callback:null,_IG0:function(){var a=this;a.callback&&a.callback.execute(a.hlobj);a.close()},_IFf:function(){var a=this;a.l2();a._IG0()},_IFd:function(){var l=this,g=l._piobj,e=l.hlobj,c=g.defaultstyle,o=g.customstyle,d=[],m,b,q=[],j=l.down("[name=dsitem]"),n=l.down("[name=stylename]"),f,h,a=l.__global_cs;if(a){for(f=0;f<a.length;f++){q.push({name:a[f].name,value:a[f].name})}}$.each([c,o],function(t,u){var t,s;for(t=0;t<u.length;t++){s={name:u[t].name,value:u[t].name};q.push(s)}});n.store.loadData(q);for(f=0;f<g.dataview.store.data.items.length;f++){b=g.dataview.store.data.items[f];if(b.get("uid")){m={uid:b.get("uid"),name:b.get("name")};d.push(m)}}h=e.appset||"";h=h.split(";");for(f=0;f<h.length;f++){switch(h[f]){case"bg":l.down("[name=aset_1]").setValue(true);break;case"fs":l.down("[name=aset_2]").setValue(true);break;case"format":l.down("[name=aset_3]").setValue(true);break;case"tmpl":l.down("[name=aset_4]").setValue(true);break}}l.dsitemuid=e.uid;j.setValue(e.name);l.down("[name=delimiter]").setValue(e.delimiter||";");l.down("[name=operator]").setValue(e.operator||"EQ");l.down("[name=stylename]").setValue(e.stylename);l.down("[name=apprange]").setValue(e.apprange||"CELL");l.down("[name=values]").setValue(e.values)},l2:function(){var e=this,a=e.hlobj,c=e.down("[name=dsitem]"),b,f,d=[];$.each([{fname:"aset_1",code:"bg"},{fname:"aset_2",code:"fs"},{fname:"aset_3",code:"format"},{fname:"aset_4",code:"tmpl"}],function(g,h){if(e.down("[name="+h.fname+"]").getValue()==true){d.push(h.code)}});a.appset=d.join(";");a.uid=e.dsitemuid;a.itemname=c.getValue();a.name=a.itemname;a.delimiter=e.down("[name=delimiter]").getValue();a.operator=e.down("[name=operator]").getValue();a.stylename=e.down("[name=stylename]").getValue();a.apprange=e.down("[name=apprange]").getValue();a.values=e.down("[name=values]").getValue()},P2C:function(){var a=this,b=new IG$._I96({visibleItems:"workspace;folder;metric;tabdimension;measuregroupdimension;groupfield;formulameasure",u5x:{cubebrowse:true,rootuid:a._piobj.uid}});b.callback=new IG$._I3d(a,a.rs_P2C);IG$._I_5(a,b)},rs_P2C:function(b){var a=this;a.dsitemuid=b.uid;a.down("[name=dsitem]").setValue(b.name)},initComponent:function(){var a=this;a.title=IRm$.r1("T_HL_OPT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dsitem",readOnly:true,fieldLabel:IRm$.r1("B_NAME")},{xtype:"button",text:"..",handler:function(){this.P2C()},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_CONDITION"),name:"operator",valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_F_EQ"),value:"EQ"},{name:IRm$.r1("L_F_LT"),value:"LT"},{name:IRm$.r1("L_F_LE"),value:"LTE"},{name:IRm$.r1("L_F_GT"),value:"GT"},{name:IRm$.r1("L_F_GE"),value:"GTE"},{name:IRm$.r1("L_F_BETWEEN"),value:"BTW"},{name:IRm$.r1("L_F_LIKE"),value:"LIKE"},{name:IRm$.r1("L_F_IN"),value:"IN"}]},listeners:{change:function(b){var d=this,c=d.down("[name=delimiter]"),e=b.getValue();c.setVisible(e=="IN"||e=="BTW")},scope:this}},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"values"},{xtype:"textfield",hidden:true,fieldLabel:IRm$.r1("B_DELIMITER"),name:"delimiter"}]}]},{xtype:"fieldset",title:IRm$.r1("L_STYLE_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_ST_NAME"),name:"stylename",valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"apprange",fieldLabel:IRm$.r1("L_HL_RANGE"),valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_HL_CELL"),value:"CELL"},{name:IRm$.r1("L_HL_ROW"),value:"ROW"},{name:IRm$.r1("L_HL_COL"),value:"COL"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_APPL_R"),layout:"anchor",items:[{xtype:"checkbox",name:"aset_1",boxLabel:IRm$.r1("L_BG_COL")},{xtype:"checkbox",name:"aset_2",boxLabel:IRm$.r1("L_FONT_ST")},{xtype:"checkbox",name:"aset_3",boxLabel:IRm$.r1("L_F_STR")},{xtype:"checkbox",name:"aset_4",boxLabel:IRm$.r1("L_F_TMPL")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._IAf.superclass.initComponent.apply(this,arguments)}});IG$._Ibc=$s.extend($s.window,{xtype:"window",modal:true,region:"center",layout:"fit",closable:true,resizable:true,maximizable:true,width:700,height:500,callback:null,poolname:null,defaults:{bodyStyle:"padding:10px"},c1:function(){var a=this},initComponent:function(){var d=this,b,f,e,g=$(document),a=g.width()||700,c=g.height()||600;$s.apply(d,{width:a-80,height:c-80,title:IRm$.r1("L_DET_VIEW")+" ("+(d.viewinfo.title||d.viewinfo.name)+")",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,name:"mpanel",border:0,layout:"fit",items:[]}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._Ibc.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){var c=this,b=c.down("[name=mpanel]"),e,d;if(c.viewinfo){e="report";d=IG$._I61(c.viewinfo.uid,e,c.viewinfo.name,c.viewinfo.nodepath,false,{closable:false,hiddentoolbar:true,auxfilter:c.auxfilter,header:false});b.add(d)}}}});IG$.cM4=function(b,c){var a=this;a.html=$("<div class='dummyctrl'></div>");a.layout=b;a.pctrl=c;a._1()};IG$.cM4.prototype={appendTo:function(a){this.html.appendTo(a)},_1:function(){var a=this,b;a.html.bind("click",function(c){c.stopPropagation();c.preventDefault();a._2.call(a,"click")});a.html.resizable({resize:function(h,f){var g=f.position,c=f.size,d=a.layout;d.position.width=c.width;d.position.height=c.height;a._2.call(a,"resize")}});a.html.draggable({stop:function(g,d){var f=d.position,c=a.layout;c.position.top=f.top;c.position.left=f.left;a._2.call(a,"resize")}});b=IG$.getControl.call(a,a.layout.type);a.ctrl=b},_2:function(b){var a=this;a.html.trigger("e_"+b)}};IG$.__global=IG$.__global||{};IG$.$d={applyOption:function(a){var c=this,b;if(a.bt){b=IG$._I13(a.bt.content);c.rs_M1(b)}else{if(a._ipcnt){c.iC();c.M7a(c._9._l21.onload)}}c.bt=null},M1:function(){var j=this,d=j.uid,f=$(".dashboard_cnt",j.body.dom),c=$(".dashboardview",j.body.dom),a,e,g,b=window.bowser;if(d&&d.length>0){a=j._emode?j.getWidth():j.body.getWidth();e=j._emode?j.getHeight():j.body.getHeight();j.initialized=true;$(c).empty();if(b.msie&&a>0&&e>0){IG$.x_10._w(c,a);IG$.x_10._h(c,e)}if(j.bt&&j.bt.content){j.applyOption({bt:j.bt})}else{g=new IG$._I3e();g.init(j,{ack:"5",payload:IG$._I2d({uid:d}),mbody:IG$._I2e()},j,j.rs_M1,null);g._l()}}},rs_M1:function(c){var e=this,l,j,b,a,d,f,h,g;e.setLoading(false);e._9=new IG$.cdxml(c);e._9.parseContent.call(e._9,e);l=e._9.item;if(l&&l.uid){e.uid=l.uid}e.M2(c);e.M3();e.M3a(c);e.iC();e.M7a(e._9._l21.onload)},showDummyInfo:function(f){var d=this,a=[{name:"Name",value:f.name},{name:"Type",value:f.type}],g=$("<ul class='dm-info'></ul>"),b;d.dummyInfo.empty();if(f.item){a.push({name:"Bind",value:f.item.name})}for(b=0;b<a.length;b++){g.append($("<li><span class='dm-title'>"+a[b].name+": </span><span>"+a[b].value+"</span></li>"))}var e=f.dummy.html.offset(),h=$(d.body.dom),c=h.offset();d.dummyInfo.css({left:(e.left-c.left+5),top:(e.top-c.top+5)});d.dummyInfo.show()},iC:function(){var e=this,a,h,c,g,d,f,b;if(e._ipcnt){a=IG$._I13(e._ipcnt);h=IG$._I18(a,"/smsg/params");if(h){c=e._9.page_param_map;g=IG$._I26(h);for(d=0;d<g.length;d++){f=IG$._I1b(g[d],"name");b=IG$._I24(g[d]);if(c[f]){c[f].set(b)}}}}e._ipcnt=null},M2:function(f){var h=this,e,d,b,m,g,c,l,a=IG$._I18(f,"/smsg/item/actevents");h.P1={};h.P1a={onload:null,ontimer:null};if(a!=null&&a.hasChildNodes()==true){b=IG$._I26(a);for(e=0;e<b.length;e++){m=IG$._I1b(b[e],"name");g=IG$._I26(b[e]);c=[];for(d=0;d<g.length;d++){l=new IG$._ICe(g[d]);c.push(l)}h.P1[m]=c}}a=IG$._I18(f,"/smsg/item/appl_acts");if(a){b=IG$._I26(a);for(e=0;e<b.length;e++){var n=IG$._I1b(b[e],"name");h.P1a[n]=IG$._I24(b[e])}}},M3:function(o){var m=this,j=$(".dashboard_cnt",m.body.dom),l=$(".dashboardview",m.body.dom),d,b,f=l,c,e,a,n,g;if(o){m._9=o}c=m._9;if(m.P3){$.each(m.P3,function(h,q){var s=q.P9;if(s&&s.destroy){s.destroy.call(s)}})}m.P3=[];m.P2={};m.P3r=[];l.empty();if(m.dsmode){m.dummyInfo=$("<div class='dummyinfo'></div>");m.dummyInfo.appendTo(f);m.dummyInfo.hide();m.dummyInfo.bind("click",function(){m.dummyInfo.fadeOut(1000)})}e=IG$.x_10._w(j);a=IG$.x_10._h(j);b={x:0,y:0,w:e,h:a};m.M4(c.layout,l,b,null,m.P3r);if(!m.dsmode){$.each(m.P3,function(h,q){var s=q.P9;if(s){s.__ivp_=1;s.__ivp&&s.__ivp.call(s)}})}m.Mm11("",b.w,b.h,null)},cL:function(b){var a=this,c=b.P10;a.Mmlla(b,b.layouts,c.x,c.y,c.w,c.h)},M3a:function(a){var d=this,f=IG$._I18(a,"/smsg/item/ActiveScript"),e,b={},c;for(c=0;c<d.P3.length;c++){b[d.P3[c].P6]=d.P3[c].P9}d.m_d$$mj=d._9.m_d$$mj;d.m_d$$mj._l6.call(d.m_d$$mj,b,d);f=IG$._I18(a,"/smsg/item/ConditionScript");if(f){e=$.trim(IG$._I24(f));if(e!=""){e=Base64.decode(e);d.c_d$$mj=new IG$.d$$mj("clc_"+d.uid.replace("-","_"));d.c_d$$mj._l5.call(d.c_d$$mj,e);d.c_d$$mj._l6.call(d.c_d$$mj,b)}}},M4:function(g,a,f,d,c){var e=this,b;if(g&&g.length){for(b=0;b<g.length;b++){var h=e.M5(g[b],a,f,d);h.layouts=[];if(g[b].layout.length){e.M4(g[b].layout,h.P9.html,h.P10,h,h.layouts)}c.push(h)}}},M5:function(c,h,a,m){var g=this,b=new IG$._ICc(c,m,g.dsmode),d,n,f={},j,e;b.dashboard=g;b.P1=g;g.P3.push(b);g.P2[b.P6.toLowerCase()]=b;b.P11(m,a.x,a.y,a.w,a.h);var l=$("<div id='"+b.P6+"'>");for(d=0;d<b.P9.p.length;d++){f[b.P9.p[d].name]=b.P9.p[d]}for(n in b.P7){if(f[n]){j=b.P7[n];switch(f[n].datatype){case"boolean":b.P7[n]=(j=="true"||j==true)?true:false;break;case"number":b.P7[n]=Number(j);break}}}var o=b.P9.html;o.appendTo(h).css({position:"absolute"});if(b.P9!=null&&b.P9.html!=null){b.P9.layout=c;b.P9.initDrawing()}if(b.P9){b.P9.pe=g.M6;b.P9.invalidate.call(b.P9)}if(g.dsmode){e=b.i9.call(b,c);e&&e.bind({e_resize:function(q){q.stopPropagation();q.stopImmediatePropagation();g._dE._1.call(g._dE,c)},e_click:function(q){q.stopPropagation();q.stopImmediatePropagation();g._dE._2.call(g._dE,c)}})}return b},M6:function(g,d){var h=this,c=h.ctrl.dashboard,j;switch(g){case"magnifire":var b=d.ctrl,l=IG$.x_10._w(b.P9.html),f=IG$.x_10._h(b.P9.html);j=b.P10;if(j.w==l&&j.h==f){var e=$(".dashboardview",c.body.dom);b.P9.html.css({top:0,left:0,width:e.clientWidth,height:e.clientHeight,zIndex:99});var a=b.P9;a.zoom=true;a.invalidate.call(a)}else{b.P9.html.css({position:"absolute",top:j.y+j._py,left:j.x+j._py,height:j.h,width:j.w,zIndex:""});b.P9.zoom=false;b.P9.invalidate.call(b.P9)}break}},M7a:function(b){var e=this,m=[],g,f,d,c,h,l=arguments;if(e.P1&&b&&b.length>0){for(d=0;d<b.length;d++){g=b[d];if(e.P1[g.uid]){f=e.P1[g.uid];for(c=0;c<f.length;c++){h=f[c];m.push(h)}}}l=Array.prototype.slice.call(l,1);l.unshift(m);e.M7.apply(e,l)}},M7:function(b){var c=this,a=arguments;a=Array.prototype.slice.call(a,1);if(c.executeEvents&&c.executeEvents.length>0){IG$._I52("Currently processing another job. Please wait while complete!");return}c._IIf(true);clearTimeout(c.eX);c.eX=setTimeout(function(){c.executeEvents=[];for(i=0;i<b.length;i++){b[i].args=a;c.executeEvents.push(b[i])}$.each(c.P2,function(d,e){if(e&&e.P9&&e.P9._c1){e.P9._c1.call(e.P9)}});c.M8.call(c,c)},100)},_IIf:function(f){var c=this,a,e,d,b;if(f==true){d={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"};b=c.setLoading(d);e=$(c.rendermask);a=$("#m-mec-loader",e).bind("click",function(){c._IP5.call(c)})}else{c.setLoading(false)}},_IP5:function(){var a=this;a.executeEvents=null;a.setLoading(false)},M8:function(b){if(b.executeEvents.length>0){var a=b.executeEvents.shift();try{b.M10.call(b,a)}catch(c){IG$._I52(IRm$.r1("E_D_EVNT",a.name));setTimeout(function(){b.executeEvents=null;b._IIf.call(b,false);b.setLoading(false)},10)}}else{setTimeout(function(){b._IIf.call(b,false);b.setLoading(false)},10)}},M9:function(f){var h=this,g,e,d,j,a=h._9.page_param_map;f.filtervalue=null;if(f.operator){g=f.valuemode;if(g=="control"){var b=h.P2[f.valuefield.toLowerCase()];if(b){e=b.P12.call(b,f.valuefield);if(e!=null){f.filtervalue=e}}}else{if(g=="value"){e=[{code:f.valuetext}];f.filtervalue=e}}if(e&&e.length>0){for(d=0;d<e.length;d++){j=e[d].code;if(j&&j.charAt(0)=="{"&&j.charAt(j.length-1)=="}"){j=j.substring(1,j.length-1);if(a[j]){j=a[j].get();e[d].code=j}}}}}},_g1:function(d,c,f){var b=null,j=this,h=j._9,a,l,e=f?f.r1:null,g=e?e[d.name]:null;if(d.map_type=="var"){a=h.page_param_map[d.map_param];if(c){b=(a?a.get():null)}else{if(g){a.set(g.t=="dataset"?g:g.v)}}}else{if(d.map_type=="ctrl"){a=j.P2[d.map_param.toLowerCase()];if(c){if(a&&a.P9&&a.P9.P12){l=a.P9.P12.call(a.P9,d);if(l&&l.length>0){b=l[0].code}}else{if(a&&a.P9){b=a.P9.get("text")}}}else{if(g){if(g.t=="dataset"){a.P9._ds&&a.P9._ds.call(a.P9,g)}else{a.P9.set("text",g.v)}}}}}return b},_a:function(d){var b="<params>",a,c=this;for(a in d.iparams){b+="<param name='"+a+"'><![CDATA[";r=c._g1(d.iparams[a],true);b+=(r||"");b+="]]></param>"}b+="</params>";return b},M10:function(w){var E=this,y,h=false,o=-1,C,c=w.args;switch(w.purpose.toLowerCase()){case"onlinereport":var j,l,d=(w.item?w.item.uid:null)||null,x;for(y=0;y<E.P3.length;y++){l=E.P3[y];if(l.P3&&l.P6==d){j=l;break}}var z="<smsg><filters source='dashboard'>";z+="<Filter>";z+=w.__sfilter.TX.call(w.__sfilter);z+="</Filter>";z+="<HavingFilter>";z+=w.__shavingfilter.TX.call(w.__shavingfilter);z+="</HavingFilter>";z+="</filters>";z+=E._a(w);z+="</smsg>";if(j){var a=j.P9,v=j.P7;h=false;x=new IG$._I3d(E,function(s,G){var t=this;if(G!=true){}});a.eRun&&a.eRun.call(a,x,z)}else{o=1}break;case"valuelist":if(w.item&&w.item.uid){var b=new IG$._I3e();b.init(E,{ack:"18",payload:"<smsg><item uid='"+w.item.uid+"' option='valuelist'/></smsg>",mbody:"<smsg></smsg>"},E,function(t){var G=this,s=new IG$._ICd(t,w.item.uid);$.each(w.oparams,function(H,J){if(J.map_type=="ctrl"&&J.map_param){var I=G._9.controls[J.map_param.toLowerCase()];rctrl=G.P2[J.map_param.toLowerCase()];rctrl=(rctrl?rctrl.P9:null);if(I&&rctrl){rctrl.loadData&&rctrl.loadData.call(rctrl,s)}}});G.M8(G)},null);b._l();return}else{o=1}break;case"execute_script":if(E.m_d$$mj){if(w.script){c.unshift(w.script);var m=E.m_d$$mj._l7.apply(E.m_d$$mj,c);if(E.m_d$$mj.lastError){IG$._I52(E.m_d$$mj.lastError);o=3}else{if(m===2){h=true}else{if(m==false){E.executeEvents=null;E._IIf.call(E,false);E.setLoading(false);h=true}}}}}else{o=2}break;case"export":if(w.exp_tmpl&&w.exp_out){var A=E._m();var D=E._9.item?E._9.item.name:"",b=new IG$._I3e(),B,B="TMPL",f;switch(w.exp_out){case"excel":f="xls";break;case"word":f="doc";break;default:f=w.exp_out;break}D=D||"unnamed";D=D.replace(/\./g,"_");D=D.replace(/ /g,"");D+="."+f;b.init(E,{ack:"20",payload:IG$._I2d({uid:E.uid,type:B,filename:D,fonttype:"",utemplate:"T",tmplpage:w.exp_tmpl,jasper_filetype:w.exp_out},"uid;type;filename;fonttype;utemplate;tmplpage;jasper_filetype"),mbody:A},E,E.r_IB3,null,D);b._l()}else{o=2}break;case"servercall":if(w.jmodule&&w.jmethod){h=true;var b=new IG$._I3e(),u="<smsg>",q,n;u+=E._a(w);u+="</smsg>";b.init(E,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:E.uid,option:"exec",jmodule:w.jmodule,jmethod:w.jmethod})+"/></smsg>",mbody:u},E,function(s){var H=this,t,G;G=new IG$._maa(s);for(t in w.oparams){H._g1(w.oparams[t],false,G)}H._1_p(s,j)},function(){this.executeEvents=null;E._IIf(false)},j);b._l()}else{o=4}break;case"open_win":var g=w.item&&w.item.uid,F,e="<smsg>";F=w.iparams&&w.iparams.target_window?w.iparams.target_window:null;if(F&&F.map_param&&F.map_type){g=E._g1(w.iparams.target_window,true)}if(g){h=true;e+=E._a(w);e+="</smsg>";var b=new IG$._I3e();b.init(E,{ack:"11",payload:IG$._I2d({uid:g}),mbody:IG$._I2e({option:"translate"})},E,function(s){var H=IG$._I18(s,"/smsg/item"),G=H?IG$._I1c(H):null;if(G.type=="Dashboard"&&w.ispopup==true){var I=new IG$._I3e();I.init(E,{ack:"5",payload:IG$._I2d({uid:w.item.uid}),mbody:IG$._I2e({option:"diagnostics"})},E,function(K){var J=new IG$.cdxml(K),L=new IG$._IBf({bt:{content:IG$._I25(K)},uid:w.item.uid,closable:true,header:false,_ipcnt:e,border:0});J.parseContent.call(J,null);var M=new IG$._IBF({uid:w.item.uid,dmain:L,title:J.item.name,width:J.width,height:J.height,callback:new IG$._I3d(E,function(N){E._1_p(null,null)})});L.on("close_win",function(){M.close()});IG$._I_5(this,M)},false);I._l()}else{var t=IG$._I7d;t&&t.m1$7.call(t,G.uid,G.type.toLowerCase(),G.name,G.nodepath,false,G.writable,null,{_ipcnt:e});E._1_p.call(E)}},false);b._l()}else{o=5}break;case"open_dlg":h=true;switch(w.btntype){case"yesno":IG$._I55(w.dlgtitle,w.dlgmsg,function(s){E._1_p.call(E)},null,null,6);break;case"yesnocancel":IG$._I55(w.dlgtitle,w.dlgmsg,function(s){E._1_p.call(E)},null,null,14);break;default:IG$._I54(w.dlgtitle,w.dlgmsg,function(){E._1_p.call(E)},null,2);break}break;case"close":this.fireEvent("close_win");break;case"update_params":break;case"upload_file":break;case"sql":if(w.dsource&&w.sqlsyntax){h=true;var b=new IG$._I3e(),u="<smsg>",q,n;u+=E._a(w);u+=w.getXML();u+="</smsg>";b.init(E,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:E.uid,option:"run_sql"})+"/></smsg>",mbody:u},E,function(s){var H=this,t,G,J,I;if(w.rmode=="list"){J=IG$._I18(s,"/smsg/item");I=(J?IG$._I1b(J,"resultid"):null);if(I){var K=0;for(t in w.oparams){K++}if(K>0){$.each(w.oparams,function(M,Q){var L=new IG$._I3e(),O,P,N=true;if(Q.map_type=="ctrl"){O=H._9.controls[Q.map_param.toLowerCase()];P=H.P2[Q.map_param.toLowerCase()];P=(P?P.P9:null);if(O&&P){L.init(H,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:H.uid,option:"gridresult",resultid:I})+"/></smsg>",mbody:"<smsg>"+O.getXML()+"</smsg>"},H,function(S){var R=new IG$._IF2(S);P.loadData&&P.loadData.call(P,R);K--;if(K==0){H._1_p.call(H,S,O)}},function(R){H.executeEvents=null;H._IIf(false)});L._l();N=false}}if(N==true){K--;if(K==0){H._1_p.call(H,s,O)}}})}else{H._1_p(s,j)}}else{H._1_p(s,j)}}else{G=new IG$._maa(s);for(t in w.oparams){H._g1(w.oparams[t],false,G)}H._1_p(s,j)}},null,j);b._l()}else{o=5}break}if(h==false&&o<0){E.M8(E)}else{if(o>-1){switch(o){case 1:C="Item not found";break;case 2:C="Script not loaded";break;case 3:C="Error on script execution";break;case 4:C="Service not found";break;case 5:C="Service parameter not configured correctly";break}E.executeEvents=null;E._IIf.call(E,false);E.setLoading(false);if(C){IG$._I52(C)}}}},_1_p:function(a,c){var b=this;b.M8(b)},M8_:function(){var a=this;a.executeEvents=null;a._IIf.call(a,false);a.setLoading(false)},_m:function(){var b=this,a="<smsg><dashboard>";$.each(b.P3,function(d,e){var f=e.P9,g={},c;if(f){c=f.ctrl.P6||"";switch(f.type){case"olapreport":if(f.viewer){a+=f.viewer._IB4.call(f.viewer,g,"jasper",false,true,c)}break;case"dashboard":if(f.viewer){a+="<dashboard name='"+c+"'>"+f.viewer._m.call(f.viewer)+"</dashboard>"}break;case"label":a+="<text name='"+c+"'><![CDATA["+(f.get("text")||"")+"]]></text>";break}}});a+="</dashboard></smsg>";return a},Mm11:function(b,n,g,d){var l=this,f,j=$(".dashboard_cnt",l.body.dom),m=$(".dashboardview",l.body.dom),e,a,n,g,c=l._9;e=IG$.x_10._w(j);a=IG$.x_10._h(j);if(c){n=(c.autowidth==false&&c.width>0)?c.width:(c.minwidth>e)?c.minwidth:e;g=(c.autoheight==false&&c.height>0)?c.height:(c.minheight>a)?c.minheight:a}IG$.x_10._w(m,n);IG$.x_10._h(m,g);j.css({overflowX:c&&c.hscroll?"auto":"hidden",overflowY:c&&c.vscroll?"auto":"hidden"});l.Mmlla(null,l.P3r,0,0,n,g)},Mmlla:function(l,n,e,d,f,h){var t,y=this,a={t:0,b:0,l:0,r:0},o=0,w={},j=0,g,o,q,c;if(l!=null&&l.P4=="panel"){q=l.P7.padding||0;a={t:q,b:q,l:q,r:q}}f=f-a.l-a.r;h=h-a.t-a.b;if(l!=null&&l.P4=="panel"&&l.P7.layout=="border"){for(t=0;t<n.length;t++){g=n[t];w[g.P7.region]=g;g.P11(l,e,d,f,h)}j=0;$.each(["north","south","east","west","center"],function(C,G){var E=w[G],z,F,H,D,b,B,A;if(E){z=E.P10;switch(G){case"north":z.x=0;z.y=j;z.w=f;z.h-=j;break;case"south":z.x=0;z.y=h-j-z.h;z.w=f;z.h-=j;break;case"east":z.x=f-z.w;z.y=j;z.h=h-j;if(w.north){z.y=j+w.north.P10.h;z.h-=w.north.P10.h}if(w.south){z.h-=w.south.P10.h}break;case"west":z.x=0;z.y=j;z.h=h-j;if(w.north){z.y=j+w.north.P10.h;z.h-=w.north.P10.h}if(w.south){z.h-=w.south.P10.h}break;case"center":z.x=0;z.y=j;z.w=f;z.h=h-j;if(w.north){z.y=j+w.north.P10.h;z.h-=w.north.P10.h}if(w.south){z.h-=w.south.P10.h}if(w.west){z.x=w.west.P10.w;z.w-=w.west.P10.w}if(w.east){z.w-=w.east.P10.w}break}F=E.P9.html;H=F.css({position:"absolute",top:z.y+a.t,left:z.x+a.l,height:z.h-a.t-a.b,width:z.w-a.l-a.r});if(E.P9!=null){E.P9.invalidate.call(E.P9)}if(E.layouts&&E.layouts.length>0){B=E.P10.x;A=E.P10.y;D=E.P10.w;b=E.P10.h;if(E.P4=="panel"){b-=E.P9.titleheight}y.Mmlla.call(y,E,E.layouts,B,A,D,b)}}})}else{if(l!=null&&l.P4=="panel"&&(l.P7.layout=="hbox"||l.P7.layout=="vbox")){var v=l.P7.layout,s=0,m=0,u=0,x=0;th=0;for(t=0;t<n.length;t++){g=n[t];p=g.P5;g.P11(l,e,d,f,h);if(p.percentwidth!=null){m+=p.percentwidth}else{if(p.width!=null){x+=p.width}}if(p.percentheight!=null){u+=p.percentheight}else{if(p.height!=null){th+=p.height}}}for(t=0;t<n.length;t++){g=n[t];p=g.P5;c=g.P10;if(v=="hbox"){c.x=s;c.y=0;c.w=(p.width!=null)?p.width:(p.percentwidth!=null)?(f-x)*p.percentwidth/m:c.w;s+=c.w}else{if(v=="vbox"){c.x=0;c.y=s;c.h=(p.height!=null)?p.height:(p.percentheight!=null)?(h-th)*p.percentheight/u:c.h;s+=c.h}}if(l!=null&&l.P4=="panel"){c.y+=l.P9.titleheight}cstr=g.P9.html;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(g.P9!=null){g.P9.invalidate.call(g.P9)}if(g.layouts&&g.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;if(g!=null&&g.P4=="panel"){plh-=g.P9.titleheight}y.Mmlla(g,g.layouts,plx,ply,plw,plh)}}}else{if(l!=null&&l.P4=="tabpanel"){l.P9.loadHeader.call(l.P9,n);o=l.P9.getTabHeight.call(l.P9);for(t=0;t<n.length;t++){var g=n[t];g.P10={x:0,y:0,w:f,h:h,_px:e,_py:d};c=g.P10;c.y+=o;c.h-=o;cstr=g.P9.html;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(g.P9!=null){g.P9.invalidate.call(g.P9)}if(g.layouts&&g.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;y.Mmlla(g,g.layouts,plx,ply,plw,plh)}if(t==l.P9.activeIndex){g.P9.html.show()}else{g.P9.html.hide()}}}else{for(t=0;t<n.length;t++){g=n[t];g.P11(l,e,d,f,h);if(l!=null&&l.P4=="panel"){g.P10.y+=l.P9.titleheight}cstr=g.P9.html;c=g.P10;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(g.P9!=null){g.P9.invalidate.call(g.P9)}if(g.layouts&&g.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;if(g!=null&&g.P4=="panel"){plh-=g.P9.titleheight}y.Mmlla(g,g.layouts,plx,ply,plw,plh)}}}}}},disposeContent:function(c){var b=$(".dashboardview",c.body.dom);if(c.P3){for(var a=c.P3.length-1;a>=0;a--){if(c.P3[a]){c.P3[a].disposeContent(c.P3[a]);delete c.P3[a]}}c.P3=null}if(b){$(b).empty()}},afterrender:function(b){var a=b;if(a.initialized==false&&a.uid&&a.uid.length>0){a.M1()}},resize:function(c,e,b,a,d){c.Mm11.call(c,e,b,null)}};if(window.Ext){IG$._IBf=$s.extend(IG$._I57,{iconCls:"icon-dashboard",layout:{type:"vbox",align:"stretch"},defaults:{flex:1},entryLogin:function(a){a.M1.call(a)},commitCode:function(){var a=this;return true},refreshCode:function(){var a=this;a._dE.refreshControl.call(a._dE);a.M3()},initComponent:function(){var a=this;a.hiddenPkgs=[];a.addEvents("close_win");$s.apply(this,{P1:{},P2:{},P3:[],P3r:[],initialized:false,refreshmode:"F",closable:true,autoScroll:true,collapseFirst:false,items:[{html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}]});IG$._IBf.superclass.initComponent.call(this)},applyOption:IG$.$d.applyOption,M1:IG$.$d.M1,rs_M1:IG$.$d.rs_M1,showDummyInfo:IG$.$d.showDummyInfo,iC:IG$.$d.iC,M2:IG$.$d.M2,M3:IG$.$d.M3,cL:IG$.$d.cL,M3a:IG$.$d.M3a,M4:IG$.$d.M4,M5:IG$.$d.M5,M6:IG$.$d.M6,M7a:IG$.$d.M7a,M7:IG$.$d.M7,_IIf:IG$.$d._IIf,_IP5:IG$.$d._IP5,M8:IG$.$d.M8,M9:IG$.$d.M9,_g1:IG$.$d._g1,_a:IG$.$d._a,M10:IG$.$d.M10,r_IB3:IG$._Ibb.r_IB3,_1_p:IG$.$d._1_p,M8_:IG$.$d.M8_,_m:IG$.$d._m,Mm11:IG$.$d.Mm11,Mmlla:IG$.$d.Mmlla,disposeContent:IG$.$d.disposeContent,listeners:{afterrender:IG$.$d.afterrender,resize:IG$.$d.resize}})}else{IG$._IBf=IG$.x_c(IG$.pb,{layout:"fit",entryLogin:function(a){a.M1.call(a)},commitCode:function(){var a=this;return true},refreshCode:function(){var a=this;a._dE.refreshControl.call(a._dE);a.M3()},_ic:function(){var a=this;a.hiddenPkgs=[];a._emode=1;IG$.apply(this,{P1:{},P2:{},P3:[],P3r:[],initialized:false,refreshmode:"F",closable:true,autoScroll:true,collapseFirst:false,items:[{xtype:"container",html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}]});IG$._IBf.superclass._ic.call(this)},applyOption:IG$.$d.applyOption,M1:IG$.$d.M1,rs_M1:IG$.$d.rs_M1,showDummyInfo:IG$.$d.showDummyInfo,iC:IG$.$d.iC,M2:IG$.$d.M2,M3:IG$.$d.M3,cL:IG$.$d.cL,M3a:IG$.$d.M3a,M4:IG$.$d.M4,M5:IG$.$d.M5,M6:IG$.$d.M6,M7a:IG$.$d.M7a,M7:IG$.$d.M7,_IIf:IG$.$d._IIf,_IP5:IG$.$d._IP5,M8:IG$.$d.M8,M9:IG$.$d.M9,_g1:IG$.$d._g1,_a:IG$.$d._a,M10:IG$.$d.M10,r_IB3:IG$._Ibb.r_IB3,_1_p:IG$.$d._1_p,M8_:IG$.$d.M8_,_m:IG$.$d._m,Mm11:IG$.$d.Mm11,Mmlla:IG$.$d.Mmlla,listeners:{afterrender:IG$.$d.afterrender,resize:IG$.$d.resize}})}if(window.Ext){IG$._IBF=$s.extend($s.window,{modal:true,layout:{type:"fit",align:"stretch"},closable:true,resizable:false,width:600,height:500,m1$9:function(){var a=this;a.callback&&a.callback.execute(["ok",a]);a.close()},initComponent:function(){var a=this;$s.apply(this,{items:[a.dmain]});IG$._IBF.superclass.initComponent.apply(this,arguments)}})}else{IG$._IBF=IG$.x_c(IG$.pbW,{modal:true,layout:"fit",closable:true,resizable:false,width:600,height:500,m1$9:function(){var a=this;a.callback&&a.callback.execute(["ok",a]);a.close()},_ic:function(){var a=this;IG$.apply(this,{items:[a.dmain]});IG$._IBF.superclass._ic.apply(this,arguments)}})}
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 3.1.11
*
* Requires: jQuery 1.2.2+
*/
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var f=c.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var n=l.length;n;){this.addEventListener(l[--n],m,false)}}else{this.onmousewheel=m}c.data(this,"mousewheel-line-height",f.getLineHeight(this));c.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var n=l.length;n;){this.removeEventListener(l[--n],m,false)}}else{this.onmousewheel=null}c.removeData(this,"mousewheel-line-height");c.removeData(this,"mousewheel-page-height")},getLineHeight:function(n){var o=c(n)["offsetParent" in c.fn?"offsetParent":"parent"]();if(!o.length){o=c("body")}return parseInt(o.css("fontSize"),10)},getPageHeight:function(n){return c(n).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};c.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}});function m(n){var s=n||window.event,y=h.call(arguments,1),A=0,u=0,t=0,x=0,w=0,v=0;n=c.event.fix(s);n.type="mousewheel";if("detail" in s){t=s.detail*-1}if("wheelDelta" in s){t=s.wheelDelta}if("wheelDeltaY" in s){t=s.wheelDeltaY}if("wheelDeltaX" in s){u=s.wheelDeltaX*-1}if("axis" in s&&s.axis===s.HORIZONTAL_AXIS){u=t*-1;t=0}A=t===0?u:t;if("deltaY" in s){t=s.deltaY*-1;A=t}if("deltaX" in s){u=s.deltaX;if(t===0){A=u*-1}}if(t===0&&u===0){return}if(s.deltaMode===1){var z=c.data(this,"mousewheel-line-height");A*=z;t*=z;u*=z}else{if(s.deltaMode===2){var q=c.data(this,"mousewheel-page-height");A*=q;t*=q;u*=q}}x=Math.max(Math.abs(t),Math.abs(u));if(!b||x<b){b=x;if(a(s,x)){b/=40}}if(a(s,x)){A/=40;u/=40;t/=40}A=Math[A>=1?"floor":"ceil"](A/b);u=Math[u>=1?"floor":"ceil"](u/b);t=Math[t>=1?"floor":"ceil"](t/b);if(f.settings.normalizeOffset&&this.getBoundingClientRect){var o=this.getBoundingClientRect();w=n.clientX-o.left;v=n.clientY-o.top}n.deltaX=u;n.deltaY=t;n.deltaFactor=b;n.offsetX=w;n.offsetY=v;n.deltaMode=0;y.unshift(n,A,u,t);if(j){clearTimeout(j)}j=setTimeout(g,200);return(c.event.dispatch||c.event.handle).apply(this,y)}function g(){b=null}function a(o,n){return f.settings.adjustOldDeltas&&o.type==="mousewheel"&&n%120===0}}));window.IG$=window.IG$||{};function RBar(a){this.D_(a)}RBar.prototype={D_:function(a){var b=this;b.owner=a;b.html=$("<div class='m-datagrid-rhandle'></div>").appendTo(a.ctx).bind("mousedown",function(c){b.ms={x:c.pageX,y:c.pageY};b.sp=b.html.offset();b.spo=b.owner.ctx.offset();b.owner.resizeCol=true;b.regG.call(b,c)});b.col=-1},regG:function(d){var c=this,e=$("body");function b(j){var h=c.html[0],f={x:j.pageX,y:j.pageY},g=c.ms,l=(c.sp.left-c.spo.left)+(f.x-g.x);h.style.left=""+(l-2)+"px"}function a(f){c.unRegG.call(c);c.ts={x:f.pageX,y:f.pageY};c.moveCol.call(c,c.ts.x-c.ms.x,c.ts.y-c.ms.y);c.ms=null;c.owner.resizeCol=false}c.mouseMove=b;c.mouseUp=a;e.bind("mousemove",b);e.bind("mouseup",a)},moveCol:function(d,c){var b=this,a=b.owner;if(b.col>-1){a.moveCol.call(a,b.col,d,c)}},unRegG:function(){var a=this,b=$("body");b.unbind("mousemove",a.mouseMove);b.unbind("mouseup",a.mouseUp)}};IG$._IE3={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4};IG$.cMa=function(a){var b=this,c;b._browser=b.browser();c=IG$._ccache=IG$._ccache||{};c.colorcode=c.colorcode||{};c.tmeasure=c.tmeasure||{};b.D_(a)};IG$.cMa.prototype={merge:function(c,a){var b;for(b in a){c[b]=a[b]}},D_:function(a){var b=this;b.mv=false;b._1=0;b._2=0;b._3=0;b._4=0;b._5=-1;b._6=-1;b._7=0;b._8=0;b._9=0;b._a=0;b._b=0;b._c=0;b._d=0;b._e=0;b.timer=0;b.interval=10;b.delay=250;b.styles={};b.cellcharts=[];b._n=[];b.U_=[];b.V_=[];b.font="sans";b.size=13;b.regv=false;b.regh=false;b._v=13;b.selcolor="#f8a084";b.mmax=0;b.width=0;b.height=0;b.selectedItems=[];b.selectedRows=[];b._w=false;b._x=false;b._y=false;b._f=false;b._g=-1;b._h=-1;b._i=-1;b._nh=0;b.buttondown=false;b._j=-1;b._k=-1;b._l=0;b._m=0;b._o=-1;b._p=-1;b.mouseAction=0;b.mouseMode="select";b.columnfill=false;b.treeIndent=20;b.dtm=-1;b._z=false;b._q=true;b.selectionmode="cell";b._L=-1;b._Z=true;b._r=true;b._s=false;b._t=1;b._u=1;if(a){b.merge(b,a)}},onRender:function(){var a=this},_d1:function(){var e=this,d={menu:e.context},c=e._dfc.__af,b=e.context.cell,a=0;if(e._dfc.f_opt.val()=="between"){if(e._dfc.sval1.val()){e._dfc.sval2.focus()}else{a=1}}else{if(e._dfc.sval1.val()){a=1}}if(a){c[b.c]={op:e._dfc.f_opt.val(),val1:e._dfc.sval1.val(),val2:e._dfc.sval2.val()}}else{delete c[b.c]}d.cmd="cmd_run_filter".toUpperCase();d.menu.mdf=c[b.c];e.l_.call(e,"menu",d);e._df.hide()},initialize:function(a){var j=this,b,o,c,f,l,g;clearTimeout(j.timer);j.rhdls=[];j.owner=a;if(j.ctx==null){j.ctx=$('<div class="m-datagrid-container"></div>').appendTo(a);j.H_=$('<div class="m-datagrid-data"></div>').appendTo(j.ctx);j.H_[0].uid="H_/*regdata_og*/";j.I_=$('<div class="m-datagrid-data-bg"></div>').appendTo(j.H_);j.I_[0].uid="I_/*regdata*/";j._G=$('<div class="m-datagrid-scroll m-datagrid-hscroll"></div>').css({height:j._v}).hide().appendTo(j.ctx);b=$('<div class="m-datagrid-track m-datagrid-track-h"></div>').appendTo(j._G);j._Gt=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h"></div>').css({height:(j._v),width:20}).appendTo(b);c=$('<div class="m-datagrid-end m-datagrid-end-h">').css({height:(j._v),width:5}).appendTo(j._Gt);j._F=$('<div class="m-datagrid-scroll m-datagrid-vscroll"></div>').hide().appendTo(j.ctx);o=$('<div class="m-datagrid-track m-datagrid-track-v"></div>').css({width:j._v}).appendTo(j._F);j._Ft=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-v"></div>').css({width:(j._v),height:20}).appendTo(o);f=$('<div class="m-datagrid-end m-datagrid-end-v">').css({width:(j._v),height:5}).appendTo(j._Ft);j.measurediv=$('<div class="m-datagrid-cell-measure"></div>').appendTo($("body"));j.editor=$("<div class='m-datagrid-editor'></div>").appendTo(j.ctx).hide();j.contextmenu=$("<ul class='contextMenu'></ul>").appendTo(j.ctx);j.context={menu:j.contextmenu};if($(a).contextMenu&&j.enablecontextmenu!=false){$(a).contextMenu(j.context,new IG$._I3d(j,j._X))}}if(!j._M){j._M=$("<div class='m-datagrid-loading-mask'><div class='m-datagrid-loading'><div class='m-datagrid-loading-indicator'></div></div></div>").appendTo(j.ctx).hide()}j._s=j.is_s(j.owner);var n,e;if(j._s==false){var h=$(j.owner).clone();h.css({visibility:"hidden",width:"",height:"",maxWidth:"",maxHeight:""});$("body").append(h);n=h.outerWidth();e=h.outerHeight();h.remove()}else{n=IG$.x_10._w(j.ctx);e=IG$.x_10._h(j.ctx)}if(n>0&&e>0){j._d=n;j._e=e}j._1=0;j._2=0;j.rows=[];j.cols=[];j.W_=0;j.X_=0;if(!j.U_){j.U_=[]}j.pad=new IG$.cMa.padding(2);j.cellcharts=[];j._n=[];j.ctx.bind({touchstart:function(m){var q=j;q._A.call(q,j,m);return false},touchend:function(m){var q=j;q._B.call(q,j,m);return false},touchmove:function(m){var q=j;q._C.call(q,j,m);return false},mousedown:function(m){var q=j;return q.e_.call(q,j,m)},dblclick:function(m){var q=j;return q._D.call(q,j,m)},mousewheel:function(m,s){m.stopPropagation();m.preventDefault();var q=j;return q._E.call(q,j,m,s)},selectstart:function(){return false}});j._F.bind({click:function(m){var q=j;if(q.mv==false){q._J.call(q,j,m,"v")}return false}});j._G.bind({click:function(m){var q=j;if(q.mv==false){q._J.call(q,j,m,"h")}return false}});j._Ft[0].eventtarget="vertical";j._Ft.bind({mousedown:function(m){var q=j;q.mv=true;m.stopPropagation();q._H.call(q,this,m,"v");return false},mouseup:function(m){var q=j;q._I.call(q,this,m,"v");return}});j._Gt[0].eventtarget="horizontal";j._Gt.bind({mousedown:function(m){var q=j;q.mv=true;q._H.call(q,this,m,"h")},mouseup:function(m){var q=j;q._I.call(q,this,m,"h")}});j._df="<div class='igc-dfilter-m'><div class='igc-dfilter-bg'></div><div class='igc-dfilter'><div class='flt-line flt-sep' id='cmd_filter'>"+IRm$.r1("B_SET_FILTER")+"</div><div class='flt-line' id='cmd_asc'>"+IRm$.r1("B_ORDER_ASC")+"</div><div class='flt-line' id='cmd_desc'>"+IRm$.r1("B_ORDER_DSC")+"</div><div class='flt-line flt-sep' id='cmd_sort'>"+IRm$.r1("L_SORT_OPTION")+"</div>";if(window.ig$&&window.ig$.features&&window.ig$.features.gfilter){j._df+="<div class='flt-line' id='b_filter'><span>"+IRm$.r1("L_FILTER_OPTION")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_filter'><div class='flt-line-g'><span id='cl_flt'>Clear Filter</span><span id='r_flt'>Apply</span></div><div class='flt-line' id='c_filter'></div></div>"}j._df+="<div class='flt-line' id='b_fm'><span>"+IRm$.r1("L_FORMULA")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_fm'><div class='flt-line-g'><span id='cl_fm'>Clear Formula</span><span id='r_fmt'>More</span></div><div id='c_fm'><ul><li class='flt-line' id='t_sum'>"+IRm$.r1("F_STOT")+"</li><li class='flt-line' id='t_avg'>"+IRm$.r1("F_AVG")+"</li><li class='flt-line' id='t_min'>"+IRm$.r1("F_MIN")+"</li><li class='flt-line' id='t_max'>"+IRm$.r1("F_MAX")+"</li><li class='flt-line' id='t_rank'>"+IRm$.r1("F_RNK")+"</li><li class='flt-line' id='t_pot'>"+IRm$.r1("F_P_TOT")+"</li><li class='flt-line' id='t_cumul'>"+IRm$.r1("F_P_CUM")+"</li><li class='flt-line' id='t_incr'>"+IRm$.r1("F_INC")+"</li><li class='flt-line' id='t_diff'>"+IRm$.r1("F_DIFF")+"</li></ul></div></div>";j._df+="<div class='flt-line' id='b_rank'><span>"+IRm$.r1("L_RANK_OPTION")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_rank'><div class='flt-line' id='cmd_showall'>"+IRm$.r1("B_SHOW_ALL")+"</div><div class='flt-line' id='cmd_top5'>"+(IRm$.r1("B_TOP")+" 5")+"</div><div class='flt-line' id='cmd_top10'>"+(IRm$.r1("B_TOP")+" 10")+"</div><div class='flt-line' id='cmd_btm5'>"+(IRm$.r1("B_BOTTOM")+" 5")+"</div><div class='flt-line' id='cmd_btm10'>"+(IRm$.r1("B_BOTTOM")+" 10")+"</div></div><div class='flt-line flt-sep-top' id='cmd_remove'>"+IRm$.r1("B_REMOVE_PIVOT")+"</div></div></div>";j._df=$(j._df).appendTo(j.ctx).hide();g=$(".igc-dfilter",j._df);j._dfc={dmain:g,t_sum:$("#t_sum",g),t_avg:$("#t_avg",g),t_min:$("#t_min",g),t_max:$("#t_max",g),t_rank:$("#t_rank",g),t_pot:$("#t_pot",g),t_cumul:$("#t_cumul",g),t_incr:$("#t_incr",g),t_diff:$("#t_diff",g),b_rank:$("#b_rank",g),d_rank:$("#d_rank",g),b_filter:$("#b_filter",g),d_filter:$("#d_filter",g),c_filter:$("#c_filter",g),cmd_filter:$("#cmd_filter",g),cmd_asc:$("#cmd_asc",g),cmd_desc:$("#cmd_desc",g),cmd_sort:$("#cmd_sort",g),cmd_top5:$("#cmd_top5",g),cmd_top10:$("#cmd_top10",g),cmd_btm5:$("#cmd_btm5",g),cmd_btm10:$("#cmd_btm10",g),cmd_showall:$("#cmd_showall",g),cmd_remove:$("#cmd_remove",g),r_flt:$("#r_flt",g),cl_flt:$("#cl_flt",g),cl_fm:$("#cl_fm",g),b_fm:$("#b_fm",g),d_fm:$("#d_fm",g),r_fmt:$("#r_fmt",g)};var d=$("<div><div class='igc-c-filter-op'><select id='f_opt'><option value='_like_'>"+IRm$.r1("L_F_LIKE")+"</option><option value='between'>"+IRm$.r1("L_F_BETWEEN")+"</option><option value='gt'>"+IRm$.r1("L_F_GT")+"</option><option value='lt'>"+IRm$.r1("L_F_LT")+"</option></select></div><div class='igc-c-filter-inp'><input type='text' name='sval1'></input><input type='text' name='sval2' style='display: none;'></input></div></div>").appendTo(j._dfc.c_filter);if(!window.Ext){j._dfc.cmd_filter.hide()}j._dfc.f_opt=$("#f_opt",g);j._dfc.sval1=$("[name=sval1]",g);j._dfc.sval2=$("[name=sval2]",g);j._dfc.d_fm.hide();j._dfc.f_opt=$("#f_opt",g).bind("change",function(q){var m=$(this).val();j._dfc.sval2[m=="between"?"show":"hide"]()});j._dfc.sval1.bind("keyup",function(q){var m=q.which;if(m==13){j._d1.call(j)}});j._dfc.sval2.bind("keyup",function(q){var m=q.which;if(m==13){j._d1.call(j)}});$.each(["cmd_asc","cmd_desc","cmd_sort","cmd_top5","cmd_top10","cmd_btm5","cmd_btm10","cmd_showall","cmd_remove","cmd_filter","r_flt","cl_flt","cl_fm","r_fmt","t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(s,q){j._dfc[q]&&j._dfc[q].length&&j._dfc[q].bind("click",function(){var v={cmd:q.toUpperCase(),menu:j.context},u=j._dfc.__af,t=j.context.cell,m=1;if(q=="r_flt"){if(j._dfc.f_opt.val()=="between"){if(!j._dfc.sval1.val()||!j._dfc.sval2.val()){m=0}}else{if(!j._dfc.sval1.val()){m=0}}if(m){u[t.c]={op:j._dfc.f_opt.val(),val1:j._dfc.sval1.val(),val2:j._dfc.sval2.val()}}else{return}v.cmd="cmd_run_filter".toUpperCase()}else{if(q=="cl_flt"){delete u[t.c];v.cmd="cmd_run_filter".toUpperCase()}}v.menu.mdf=u[t.c];j.l_.call(j,"menu",v);j._df.hide()})});j._dfc.b_filter.bind("click",function(){j._dfc.d_filter.toggle()});j._dfc.b_rank.bind("click",function(){j._dfc.d_rank.toggle()});j._dfc.b_fm.bind("click",function(){j._dfc.d_fm.toggle()});j._dfc.dmain.bind({click:function(m){m.stopPropagation()},mousedown:function(m){m.stopPropagation()},mouseup:function(m){m.stopPropagation()}});j._df.bind({click:function(m){m.stopPropagation();$(this).hide()},mousedown:function(m){m.stopPropagation();$(this).hide()},mouseup:function(m){m.stopPropagation();$(this).hide()}})},moveCol:function(e,b,a){var d=this,c=d.cols[e];c.width=Math.max(c.width+b,50);d.redraw()},setLoading:function(b){var a=this;if(a._L>-1){clearTimeout(a._L);a._L=-1}if(b==true){a._M.show()}else{a._L=setTimeout(function(){a._M.fadeOut()},500)}},_N:function(a){},initializeDragDrop:function(a){},_O:function(e){var a=this;var d=function(f){a._P.call(a,f,e);return false};var c=function(f){f.stopPropagation();a.mv=true;a._Q.call(a,f,e);return false};var b=function(f){f.stopPropagation();a.mv=true;a._R.call(a,f,e);$(document).unbind({mousedown:d,mousemove:c,mouseup:b});return false};this.ge={mousedown:d,mousemove:c,mouseup:b};$(document).bind({mousedown:d,mousemove:c,mouseup:b})},_P:function(a,b){},_Q:function(b,c){var a=this;b.preventDefault();b.stopImmediatePropagation();if(a){a._S.call(a,{x:b.pageX,y:b.pageY},c)}},_R:function(b,c){var a=this;a._x=false;a._y=false;a.ge=null;setTimeout(function(){a.mv=false},50)},_S:function(t,h){var a=this,g=this,o=g._F,n=g._G,c=g._Ft,q=g._Gt,m=t.x-a._g,l=t.y-a._h,f=a._1,e=a._2,j=(a._c-a._e)/(a._e-a._7),b=(a._b-a._d)/(a._d-a._8),d,s;if(g.__scr){return}if(h=="v"){s=IG$.x_10._h(o);e=Math.min(s-g.thumbvheight,Math.max(0,a.sy+l))}else{d=IG$.x_10._w(n);f=Math.min(d-g.thumbhwidth,Math.max(0,a.sx+m))}if(a._1!=f||a._2!=e){a._1=f;a._2=e;a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},30)}},cR:function(){var c,b,a,e=this,d,f;if(this._5>-1){if(this._5>-1){e._c=0;for(c=0;c<e.treeData.length;c++){a=e.treeData[c][e._5];b=a.parent;d=e.rows[c];f=true;while(b){if(b.treeinfo&&b.treeinfo.opened!==true){f=false;break}b=b.parent}if(f==true){e._c+=d.height+e._u}}}if(this._6>-1){}e.H_.css({height:e._e})}},_T:function(m,o,l,n,e,f){var j=this,g=$("<div></div>").appendTo(f).css({position:"absolute",margin:0,padding:0,left:0,top:0,width:n,height:e}).show();var a={defaultPixelsPerValue:parseInt(n/m.chartData.elementdata.length)},b=m.chartData,d=b.seriesdata;if(d&&d.length>0&&d[0].data.length>0){a.type="line";IG$.D_1(b,a);a.defaultPixelsPerValue=parseInt(n/(d[0].data.length));if(a.defaultPixelsPerValue-d[0].data.length>2){a.barWidth=a.defaultPixelsPerValue-d[0].data.length}a.width=parseInt(n);a.height=parseInt(e);a.tooltipFormat="{{offset:offset}} {{y:val}}";a.tooltipValueLookups={offset:d[0].element};a.xvalues=b.element}g.sparkline((d&&d.length>0)?d[0].data:[],a);j.cellcharts.push(g);return g},_U:function(){var b,c=this,d=c.cellcharts,a;for(b=d.length-1;b>=0;b--){a=d.pop();a.hide();c._n.push(a)}},_V:function(a){var c=0,b={};if(a.title==1){if(a.position==1||a.position==2){if(window.Ext){b.cmd_filter=1}b.cmd_asc=1;b.cmd_desc=1;b.cmd_sort=1;b.b_filter=1;c=1}if(a.position==3){b.b_rank=1;b.b_filter=2;c=1}b.cmd_remove=1}return{active:c,items:b}},_W:function(d){var b=this,a,c=b.contextmenu;c.html("");for(a=0;a<d.length;a++){c.append($("<li"+(d[a]["class"]?" class='"+d[a]["class"]+"'":"")+"><a href='#"+d[a].name+"'>"+d[a].disp+"</a></li>"))}},_X:function(a){var b=this;b.l_("menu",a)},setDataProvider:function(x,d,q){var B,A,m,o,a=null,l,g,c,v,F=this,t,E,u,z,C,y,D,e,h,f,w;F._Y=x;if(F.__tpstart==0){F._1=0;F._2=0}else{z=false}F._Z=true;F._N();F.oY=F._Y;if(this._5>-1||this._6>-1){F.stT();F._9=F.treeData.length}else{F._9=F.oY.length}if(F._9>0){F._a=F.oY[0].length}if(F._9<F.rows.length){F.rows.splice(F._9,F.rows.length-F._9);for(B=0;B<F.rows.length;B++){F.rows[B].init()}}else{for(B=0;B<F.rows.length;B++){F.rows[B].init()}for(B=F.rows.length;B<F._9;B++){F.rows.push(new IG$.cMa.DimInfo(B))}}if(F._a<F.cols.length){F.cols.splice(F._a,F.cols.length-F._a);for(B=0;B<F.cols.length;B++){F.cols[B].init()}}else{if(F.cols.length==F._a&&z===false){}else{for(B=0;B<F.cols.length;B++){F.cols[B].init()}for(B=F.cols.length;B<F._a;B++){F.cols.push(new IG$.cMa.DimInfo(B))}}}F.hidden_columns=q;F._nh=0;if(q&&q.length){for(B=0;B<q.length;B++){if(F.cols[q[B]]){if(q[B]<F._4){F._nh++}F.cols[q[B]].visible=false}}}F._7=0;F._c=0;l=F.pad.paddingLeft+F.pad.paddingRight;g=F.pad.paddingTop+F.pad.paddingBottom;c={};var b;for(B=0;B<F._9;B++){if(F._5>-1||F._6>-1){b=F.treeData[B]}else{b=F.oY[B]}b&&b.length&&F.J_(F.rows[B],b,c)}c=null;if(d!==false){F.t_.call(F);F.redraw(z)}F.__scr=0},J_:function(a,b,l){var m=this,d,o,n,g,q,e,f,h,c;for(d=0;d<m._a;d++){o=b[d];if(!o){continue}o.menus=m._V(o);text=o.text;if(o.chart&&o.chart.chartData){q={width:o.chart.chartData.w||40,height:o.chart.chartData.h||30};n=q.width;g=q.height}else{e=(o.stylename?m.styles[o.stylename]:null);if(o.position!=9&&l[text]){q=l[text]}else{q=m.u_(m.font,m.size,text,e);q.width=Math.max(q.width,o.position==9?20:80);l[text]={width:q.width,height:q.height}}n=q.width;g=q.height;if(!q.fw){c=o.treeinfo;if(m._5>-1&&d==m._5){n+=16+(c&&c.depth&&!c.nd?c.depth*m.treeIndent:0)}else{if(m._6>-1&&o.haschild===true){n+=16}else{if(c){c.depth=c.depth||0;n+=16+(c.nd?0:c.depth*m.treeIndent)}}}}}if(!q.fw&&o.menus&&o.menus.active){n+=16}if(e){f=e.padleft+e.padright;h=e.padtop+e.padbottom}else{f=m.pad.paddingLeft+m.pad.paddingRight;h=m.pad.paddingTop+m.pad.paddingBottom}o.tex_b=n;o.tex_c=g;m.cols[d].width=q.fw?q.fw_:(m.cols[d].fw?m.cols[d].width:Math.max(m.cols[d].width,n+f));m.cols[d].fw=(q.fw)?1:m.cols[d].fw;a.height=Math.max(a.height,g+h)}},K_:function(){var a=this,c=a._1,b=a._2;a.setDataProvider(a._Y,false,a.hidden_columns);a._1=c;a._2=b;a.redraw(false)},redraw:function(c){var d=this,b,e,f,a;if(d.__tpstart>0||d.__trow>d._9){for(b=0;b<d._3;b++){d._7+=d.rows[b].height;d._c+=d.rows[b].height+d._u}d._tsh=(d.rows.length>d._3)?d.rows[d._3].height+d._u:21;e=(d._tsh)*(d.__trow-d._3);d._c+=e}else{for(b=0;b<d._9;b++){if(b<d._3){d._7+=d.rows[b].height}if(d.rows[b].vcr!=false){d._c+=d.rows[b].height+d._u;if(d.template&&d.oY[b][0].expanded==true&&d.oY[b][0].template){a=IG$.x_10._h(d.oY[b][0].template);d._c+=a}}}}if(c!==false){d._F.hide();d._G.hide();d.regv=false;d.regh=false}d.N_();d.cR();d.L_(c===false?true:undefined);d.draw()},plog:function(c,d){var a=d?new Date().getTime():this.m_t,b=new Date().getTime();this.m_t=d?a:this.m_t;console.log(c+">> "+(b-a))},L_:function(f){var d,h=0,a=0,g=this,b,e=0,j=0;g.sh=1,g.sv=1;if(g._browser<8&&g._d>0&&g._e>0){g.ctx.width(g._d).height(g._e)}for(b=0;b<g.cols.length;b++){if(g.cols[b].visible!==false){j++}}if(g._b<g._d&&g.columnfill==true&&j>0){if(g.showlnum){if(j>1){e=(g._d-g._b-(f==true?g._v:0))/(j-1)}}else{e=(g._d-g._b-(f==true?g._v:0))/j}for(b=0;b<g._a;b++){if(g.showlnum&&b==0){}else{g.cols[b]._d=e}}}else{for(b=0;b<g._a;b++){g.cols[b]._d=0}}for(b=0;b<Math.min(g._4,g._a);b++){if(g.cols[b].visible!==false){h+=g.cols[b].width+g.cols[b]._d+2}}for(b=0;b<g._3;b++){a+=g.rows[b].height+1}g._7=a;g._8=h;if(h>g._d){g._8=h=0;g._4=0}g.M_()},M_:function(){var a=this;a.H_.css({left:0,top:0,width:a._d,height:a._e})},resize:function(a,b){var c=this;if(a>0&&b>0){c._d=a;c._e=b;c._F.hide();c.regv=false;c.L_(false);c.draw()}},draw:function(){var b=this,a;if(b.dtm>-1){clearTimeout(b.dtm)}b.P_();a=b.Qc();b.__scr=(a.r==2?1:0);b.dtm=setTimeout(function(){b.dtm=-1;b.Q_.call(b,a)},5)},cS:function(j,c){var h=this,e=h._5,g=h._6,f,a=1,d,b=false;d=h.treeData.length;for(f=0;f<j.length;f++){j[f].dr=d}h.treeData.push(j);if(j[e].children&&j[e].children.length>0){for(f=0;f<j[e].children.length;f++){a+=h.cS(j[e].children[f],c)}}return a},stT:function(){var d=this,a,c,b;if(this._5>-1||this._6>-1){a=0;d.treeData=[];if(d.oY){for(c=0;c<d.oY.length;c++){a+=d.cS(d.oY[c],c)}}}},N_:function(){var b=this,a;b._b=0;b._8=0;for(a=0;a<b._a;a++){if(b.cols[a].visible!==false){if(a<b._4){b._8+=b.cols[a].width+b.cols[a]._d+2}b._b+=b.cols[a].width+b._t+2}}},O_:function(){var f=this,e,d,g=f._4,h=f._3,m,c,a;m=f.treeData[f._3-1];for(e=1;e<h;e++){f.rows[e].visible=false}for(d=g;d<f._a;d++){c=false;a=m[d].parent;while(a){if(a.treeinfo.opened!==true){c=true;break}a=a.parent}if(m[d].haschild===true&&m[d].depth>-1&&m[d].treeinfo.opened===true&&m[d].depth<f._3&&c==false){f.rows[m[d].depth+1].visible=true}f.cols[d].visible=!c}var b=0,l=0;f.sh=1;f.sv=1;f.N_();for(e=0;e<f._3;e++){if(f.rows[e].visible!==false){l+=f.rows[e].height}}if(l!=f._7){f._c=f._c-f._7+l;f._7=l}b=f._8;if(b>f._d){f._8=b=0;f._4=0}f.M_();f.P_();_2=f._2/f.sv;_1=f._1/f.sh},P_:function(){var f=this,e,c=0,b=0,a=0,d;for(e=0;e<f._a;e++){if(f.cols[e].visible!==false){if(e<f._4){b+=f.cols[e].width+f.cols[e]._d+2}c+=f.cols[e].width+f.cols[e]._d+2;a+=f.cols[e]._d}}d=(f._meas_rect)?f._meas_rect.call(f,a,f._c):false;if(d){return}f.sh=a>0?1:(f._d-b)/(c-b);f.sv=(f._e-f._7)/(f._c-f._7);if(f.sh<1){f.sv=(f._e-f._7-f._v)/(f._c-f._7)}if(f.sv<1){f.sh=(f._d-b-(a-f._v>0?0:f._v))/(c-b)}},Qc:function(){var c=this,b=0,a,e,d=c._2/c.sv;if(c.__tpstart>0||c.__trow>c._9){if(c.__tpstart>0&&c.__scr&&c.__scr_a){d=c.__scr_a._2}e=Math.ceil(d/c._tsh);a=e+Math.ceil((c._e-c._7)/c._tsh);if((c.__tpstart>0&&c.__tpstart>e)||(c.__trow>c.__tpend&&c.__tpend<a)){if(c.__tpstart<c.__tpend||(c.__scr_a&&c.__scr_a.nrow!=e)){b=2}else{b=1}}}return{r:b,nrow:e}},Q_:function(c){var ak,ai,g,d,I,F,m,l,B=0,y=0,e,Z,q=-1,f=-1,t=0,o=0,ae,R,E,X,Y,ab,U,z,al,w,S,x=this,G,J,Q,W,ag,ac,V,A,b,C,L,aj,a,O,M,K,H=c.nrow,v=0;x.R_();G=x._2/x.sv;J=x._1/x.sh;x.W_=x.X_=0;x.measurediv.show();x._U();x.c_();if(c.r==2){x.__scr_a={nrow:H,_2:G};x.l_("scroll_request",H);return}if(x.__tpstart>0){G-=x._tsh*x.__tpstart}g=0;d=0;F=0;m=0;l=0;X=0;if(x._6>-1){x.O_()}x.mmax=0;for(ak=0;ak<x.V_.length;ak++){x.V_[ak].hide()}z=x._9;if(x._5>-1){z=x.treeData.length}w=x.pad.paddingTop+x.pad.paddingBottom;for(ak=0;ak<z;ak++){g=0;I=0;m=0;B=0;if(x._5>-1){U=x.treeData[ak]}else{U=x.oY[ak]}if(ak<x._3){e=true;if(x.rows[ak].visible===false){e=false}else{Z=x.rows[ak].height}}else{e=true;if(x._5>-1){x.rows[ak]._5a=false;S=U[x._5];Q=S.parent;while(Q){if(Q.treeinfo&&Q.treeinfo.opened!==true){e=false;break}Q=Q.parent}x.rows[ak]._5a=!e}if(U&&U.length&&U[0].mcelltree&&U[0].mcelltree.length>0){for(ag=0;ag<U[0].mcelltree.length;ag++){ac=U[0].mcelltree[ag];if(U[ac].celltree&&U[ac].celltree.parent){V=U[ac].celltree.parent;while(V&&e==true){if(V.celltree.opened==false){e=false}V=V.celltree.parent}}if(e==false){break}}}if(e==true&&G>0&&F+x.rows[ak].height+x._u<G){e=false;F+=x.rows[ak].height+x._u;Z=0;X++}else{if(e==true&&G>0&&F<G){l=(x.rows[ak].height-(G-F));F+=x.rows[ak].height;Z=l;if(Z>0){e=true}else{e=false;X++}}else{if(e==true){e=true;Z=x.rows[ak].height}}}}if(e==true){if(q<0||q<x._3){q=x._3}f=-1;t=0;v=0;d+=x._u;for(ai=0;ai<x._a;ai++){if(!U[ai]){continue}if(x.cols[ai].visible===false){v++;continue}var aa=U[v].merged;if(J>0&&I<J&&(f<0||f<(x._4-x._nh))){f=v}if(ak>x._3&&(ak-X)==q&&(aa&8)){aa|=1}else{if((v==0||(v-x._4+x._nh>0&&(v-x._4+x._nh)==f))&&(aa&4)){aa|=2}}ae=x.rows[ak].height;R=x.cols[v].width+x.cols[v]._d+x._t;y=l;E=false;C=U[v].fvisible;L=U[v].flborder;if(aa&1){for(k=ak+1;k<z;k++){al=x[(x._5>-1||x._6>-1)?"treeData":"_Y"][k];if(!(al[v].merged&8)){break}else{if(x.rows[k].vcr==true){if(al.length>v+1){al[v+1].flborder=(aa&2)?true:false}ae+=x.rows[k].height+x._u;if(y>0){y+=x.rows[k].height+x._u}}}if(ae+d>x._e){break}}if(aa&2){for(k=v+1;k<x._a;k++){if(!(U[k].merged&4)){break}else{U[k].text="";U[k].fvisible=true}}}}else{if(aa&2){for(k=v+1;k<x._a;k++){if(!(U[k].merged&4)){break}else{if(x.cols[k].visible!==false){R+=x.cols[k].width+x.cols[k]._d+x._t+1}}}if(R>x._d-g){R=x._d-g;E=true}else{E=false}}}if(v<x._4){if(aa==0||(aa&1)||(aa&2)){x.b_(g,d,ak,v,B,y,ae,R,t,o,U,true,aa,L);t++}else{x.b_(g,d,ak,v,B,y,ae,R,t,o,U,false,aa,L);t++}g+=x.cols[v].width+x.cols[v]._d+x._t+1}else{if(J>0&&I+x.cols[v].width+x.cols[v]._d<J){I+=x.cols[v].width+x.cols[v]._d;f=-1}else{if(J>0&&I<J){m=(x.cols[v].width+x.cols[v]._d-(J-I));if(E==false){B=(R-(J-I))}else{if(aa&2){B=0}}if(aa==0||(aa&1)||(aa&2)||C==true){x.b_(g,d,ak,v,B,y,ae,R,t,o,U,true,aa,L);t++}else{x.b_(g,d,ak,v,B,y,ae,R,t,o,U,false,aa,L);t++}I+=x.cols[v].width+x.cols[v]._d+x._t+1;g+=m;m=0;B=0}else{if(aa==0||(aa&1)||(aa&2)||C==true){x.b_(g,d,ak,v,0,y,ae,R,t,o,U,true,aa,L);t++}else{x.b_(g,d,ak,v,0,y,ae,R,t,o,U,false,aa,L);t++}g+=x.cols[v].width+x.cols[v]._d+x._t+1}}}v++;if(g>x._d){break}}l=0;d+=Z;if(x.template&&U[0].expanded==true&&U[0].template){U[0].template.css({top:d});U[0].template.show();d+=IG$.x_10._h(U[0].template)}if(x.U_.length>o&&x.U_[o]){for(ai=t;ai<x.U_[o].length;ai++){if(x.U_[o][ai].v!==false){x.U_[o][ai].hide();x.U_[o][ai].v=false}}}o++;if(d>x._e){break}}}for(ak=o;ak<x.U_.length;ak++){for(ai=0;ai<x.U_[ak].length;ai++){if(x.U_[ak][ai].v!==false){x.U_[ak][ai].hide();x.U_[ak][ai].v=false}}}if(x.sh<1){Y={left:x._8};Y.width=x._d-x._8-(x.sv<1?x._v:0);x.thumbhwidth=Y.width*x.sh;A=Math.max(30,Y.width*x.sh);x._G.css(Y);x._G.show();aj=IG$.x_10._w(x._G);x._Gt.css({left:Math.min(x._1,aj-A),width:A});x.regh=true}else{x.regh=false;x._G.hide()}if(x.sv<1){Y={top:x._7};Y.height=x._e-x._7-(x.sh<1?x._v:0);x.thumbvheight=Y.height*x.sv;A=Math.max(30,Y.height*x.sv);a=Y.height;x._Ft.css({top:Math.min(x._2,a-A),height:A});x._F.css(Y);if(!x.regv&&x._b<x._d&&x.columnfill==true&&x.cols.length>0){x._F.show();x.regv=true;x.L_(true);x.draw();return}else{x._F.show();x.regv=true}}else{if(x.regv&&x._b<x._d&&x.columnfill==true&&x.cols.length>0){x.regv=false;x._F.hide();x.L_(false);x.draw();return}else{x.regv=false;x._F.hide()}}x.measurediv.hide();x.I_.width(x.W_+x._t).height(x.X_+x._u);var am,D=x.rhdls;if(x._r==true&&x._3>0&&x.U_.length>x._3-1){var T,ad,h,ah=x._3-1,u=x._7,af=x.cols.length,P=0,N=0;for(ak=0;ak<af;ak++){if(!x.U_[ah][ak]){continue}ad=x.U_[ah][ak].p;if(D.length>ak){am=D[ak];T=am.html[0]}else{am=new RBar(x);D.push(am);T=am.html[0]}am.col=ak;P=ad[2];N=0;if(x._3>1){N=0;for(ai=0;ai<x._3-1;ai++){if(x.U_[ai][ak].v===false||x.U_[ai][ak].cl.merged==2){h=x.U_[ai][ak].p;N+=h[3]-h[1]}}}T.style.left=""+(P-2)+"px";T.style.top=""+N+"px";T.style.height=""+(u-N)+"px";am.html.show()}if(af<D.length){for(ak=af;ak<D.length;ak++){D[ak].html.hide()}}}else{if(D&&D.length>0){for(ak=0;ak<D.length;ak++){D[ak].html.hide()}}}},R_:function(){var e=this,f,d,c,b,a;if(e._Z==false){return}if(e._5>-1){f=e.treeData}else{f=e.oY}if(f){for(c=0;c<f.length;c++){d=f[c];if(c<e._3){a=true}else{a=true;if(d&&d.length>0&&d[0].mcelltree&&d[0].mcelltree.length>0){for(cmi=0;cmi<d[0].mcelltree.length;cmi++){cmo=d[0].mcelltree[cmi];if(d[cmo].celltree&&d[cmo].celltree.parent){cmop=d[cmo].celltree.parent;while(cmop&&a==true){if(cmop.celltree.opened==false){a=false}cmop=cmop.celltree.parent}}}}}e.rows[c].vcr=a}e._Z=false}},a_:function(){var d,c,f,a,e,g=this,h,l,b;for(d=0;d<g.U_.length;d++){for(c=0;c<g.U_[d].length;c++){f=g.U_[d][c];h=f.cl;b=h.selected;if(g.selectionmode=="row"&&g.rows[f.rowIndex].selected==true){b=true}if(b==true){f.cssobj.background=this.selcolor;f.css({background:this.selcolor});f.addClass("m-datagrid-cell-selected")}else{l=f.cbg;a=(l)?l:"rgb(255, 255, 255)";f.cssobj.background=a;f.css({background:a});f.removeClass("m-datagrid-cell-selected")}}}},b_:function(l,e,af,ad,u,t,R,V,x,v,P,F,U,H){var B=this,O=P[ad],Q,N=O.text,ag=O.stylename,Y=O.tex_b,W=O.tex_c,ai=B.styles[ag],ae={},X={},G,E={},ac=l,ab=e,K=0,I=0,d=V,A=R,ah=(t>0)?t:R,T=(u>0)?u:V,g=(t>0)?R-t:0,o=(u>0)?V-u:0,S=null,n=null,D,M,aj,y,ak,m=((B._3<af+1&&B._5>-1&&ad==B._5&&O.treeinfo)||(B._3>af&&B._6>-1&&O.haschild===true))?true:false,al=(m==true&&((O.children&&O.children.length>0)||O.haschild===true))?true:false,f=null,s,aa=null,C=null,q,b=O.isdirty,z,a,am,c,L,J,Z=(af-B._3)%2==1;O.r=af;O.c=ad;E.paddingLeft=B.pad.paddingLeft;E.paddingTop=B.pad.paddingTop;nparent=B.I_;if(B.U_.length>v){if(B.U_[v].length>x){S=B.U_[v][x]}else{S=$('<div class="m-datagrid-cell"></div>').appendTo(nparent);B.U_[v].push(S)}}else{S=$('<div class="m-datagrid-cell"></div>').appendTo(nparent);B.U_.push([]);B.U_[v]=[];B.U_[v].push(S)}S.rowIndex=af;S.colIndex=ad;Q=S.cl;S.cl=O;S.p=[ac,ab,ac+T,ab+ah];q=(O.type||B.cols[ad].type);if(F==false){S.hide();S.v=false}else{if(S.v!==true){S.show();S.v=true}}S._cn&&S.removeClass(S._cn);if(!Q||(Q&&Q.celltype!=q)){S.dobj=null;S.html("")}E.paddingRight=B.pad.paddingRight;E.paddingLeft=(ai?ai.padleft:B.pad.paddingLeft)+(m==true?B.treeIndent*((!O.treeinfo.nd?O.treeinfo.depth:0)||0):0);E.paddingLeft+=(O.celltree&&!O.celltree.nd?B.treeIndent*O.celltree.depth:0);S._cn=null;if(ai!=null){J=ai.cssname;z=parseInt(ai.textalign);switch(z){case 1:case 4:case 7:ae.textAlign="left";break;case 2:case 5:case 8:ae.textAlign="center";break;case 3:case 6:case 9:ae.textAlign="right";E.paddingLeft=0;break}switch(z){case 1:case 2:case 3:E.paddingTop=-g;break;case 4:case 5:case 6:E.paddingTop=((A-W)/2)-g;break;case 7:case 8:case 9:E.paddingTop+=(A-W-B.pad.paddingBottom)-g;break}ak="#f1f1f1";if((!Z&&ai.backcolor1)||(Z&&ai.str_backcolor1)){ak=B.x_(Z&&ai.str_backcolor1?Number(ai.str_backcolor1):Number(ai.backcolor1))}else{if(ai.backcolor1){ak=B.x_(Number(ai.backcolor1))}}ae.background=ak;ae.fontSize=Number(ai.fontsize)+"px";if(ai.color&&ai.color!=""){ak=B.x_(Number(ai.color));ae.color=ak}else{ae.color=0}ai.fontstyle=Number(ai.fontstyle);ae.fontWeight="normal";ae.fontStyle="normal";ae.textDecoration="none";if(isNaN(ai.fontstyle)==false){ae.fontWeight=(ai.fontstyle&IG$._IE3.P_BOLD)?"bold":"normal";ae.fontStyle=(ai.fontstyle&IG$._IE3.P_ITALIC)?"italic":"normal";ae.textDecoration=(ai.fontstyle&IG$._IE3.P_UNDERLINE)?"underline":"none"}}ae.left=(ac-K)+"px";ae.top=(ab-I)+"px";ae.width=T;ae.height=ah;if(B._browser>0&&B._browser<8){ae.width-=1;ae.height-=1}ae.width+="px";ae.height+="px";if(f){}else{if(m==true){}else{if(O.celltree){}}}if(P[ad].chart!=null){B._T(P[ad].chart,l,e,V,R,S)}else{switch(q){case"checkbox":case"boolean":if(S.dobj){n=S.dobj}else{if(N=="true"||N=="false"){O.checked=(N=="true")?true:false;O.text=N=""}n=S.dobj=$("<input type='checkbox' value='"+(N||"&nbsp")+"'>"+(N||"&nbsp")+"</input>");S.append(n)}n.attr("checked",O.checked);n.bind("click",function(h){h.stopPropagation();O.checked=n.attr("checked")});break;case"radio":if(S.dobj){n=S.dobj}else{n=S.dobj=$("<input type='radio' value='"+(N||"&nbsp")+"'>"+(N||"&nbsp")+"</input>");S.append(n)}n.attr("checked",O.checked);break;case"action":if(B.columns&&B.columns[ad].items){for(am=0;am<B.columns[ad].items.length;am++){B.b_a(B.columns[ad].items[am],S)}}break;default:if(S.dobj){n=S.dobj;D=n.tcss}else{n=S.dobj=n=$("<div class='m-cell-text'></div>");S.append(n)}a=E.paddingLeft||0;if((m==true&&al==true)||(O.celltree&&O.celltree.haschild==true)){E.paddingLeft=0}M={marginLeft:(E.paddingLeft||0)+"px",marginTop:(E.paddingTop||0)+"px",marginRight:(E.paddingRight||0)+"px",marginBottom:(E.paddingBottom||0)+"px"};if(N&&N.charAt(0)=="<"&&N.charAt(N.length-1)==">"){}else{N=(N?N:"").replace(" ","&nbsp;")}J=J?J.replace("${value}",N):null;n.html(N||" ");n.tcss=M;for(D in M){n[0].style[D]=M[D]}break}}if(J){S._cn=J;S.addClass(J)}if(O.title==3||O.title==5){S.addClass("igc-i-link");S._3=1}else{if(S._3){S.removeClass("igc-i-link");S._3=0}}if(O.title==4||O.title==5){aj=S._drm;if(!aj){aj=$("<div class='igc-dgs-drill'></div>").appendTo(S);S._drm=aj}aj.css({position:"absolute",left:ae.textAlign=="right"?0:"initial",right:ae.textAlign=="right"?"initial":0});aj.unbind("mouseover");aj.unbind("mouseout");aj.unbind("mousedown");aj.unbind("mouseup");aj.bind({mousedown:function(h){},mouseup:function(h){}})}else{if(S._drm){S._drm.remove();S._drm=null}}if((m==true&&al==true)||(O.celltree&&O.celltree.haschild==true)){if(S.treeicon){aa=S.treeicon;C=$("#treetext",aa);f=$("#treeicon",aa)}else{S.treeicon=aa=$("<div class='m-datagrid-tree-box'><div id='treeicon' class='m-datagrid-tree-icon'></div><div id='treetext' class='m-datagrid-tree-text'></div></div>");f=$("#treeicon",S.treeicon);C=$("#treetext",S.treeicon);S.append(aa)}C.html(n.html());n.hide()}else{if(S.treeicon){S.treeicon.remove();S.treeicon=null;n.show()}}if((m==true&&al==true)||(O.celltree&&O.celltree.haschild==true)){if(O.celltree){s=(O.celltree.opened===true)?true:false;aa.css({left:B.pad.paddingLeft+(O.celltree.nd?0:B.treeIndent*O.celltree.depth),top:B.pad.paddingTop});f.unbind("click");f.bind("click",function(){O.celltree.opened=!O.celltree.opened;B._Z=true;B.R_();B._c=0;B.redraw.call(B);if(O.celltree.opened&&O.celltree.h){B.l_("hierarchy",{cell:O,row:P})}return false})}else{s=(O.treeinfo.opened===true)?true:false;aa.css({left:B.pad.paddingLeft+B.treeIndent*(O.treeinfo.nd?0:O.treeinfo.depth),top:B.pad.paddingTop});f.unbind("click");f.bind("click",function(){O.treeinfo.opened=!O.treeinfo.opened;B.cR();B._Z=true;B.draw.call(B);return false})}f.removeClass("m-datagrid-treeplus").removeClass("m-datagrid-treeminus").addClass((s==false)?"m-datagrid-treeplus":"m-datagrid-treeminus")}if(O.menus&&O.menus.active&&!B.hidemenu){if(!S.menuobj){aj=$("<div class='m-datagrid-menu'></div>").appendTo(S);S.menuobj=aj;aj.css({position:"absolute",right:E.paddingRight,top:E.paddingTop})}else{aj=S.menuobj;aj.unbind("mouseover");aj.unbind("mouseout");aj.unbind("mousedown");aj.unbind("mouseup")}aj.bind({mouseover:function(j){var h=$(this);h.addClass("m-datagrid-menu-focus");return false},mouseout:function(j){var h=$(this);h.removeClass("m-datagrid-menu-focus");return false},mousedown:function(h){h.stopPropagation();return false},mouseup:function(h){var j=B.owner,ao=$(this).offset(),an=$(j).offset(),ap=B._df,w=B._dfc,au=ao.left-an.left,ar=ao.top-an.top+$(this).height(),aq,at;aq=w.__af=w.__af||{};if(B.enablecontextmenu==false){return false}h.stopPropagation();$.each(["cmd_asc","cmd_desc","cmd_sort","b_rank","b_filter","cmd_remove","cmd_filter"],function(ax,av){var aw=0;if(O.menus.items[av]){aw=1}w[av][aw?"show":"hide"]()});w.d_rank.hide();if(aq[O.c]){w.d_filter.show()}else{w.d_filter.hide()}at=aq[O.c]=aq[O.c]||{};w.f_opt&&w.f_opt.val(at.op||(O.position==3?"between":"_like_"));w.sval1&&w.sval1.val(at.val1||"");w.sval2&&w.sval2.val(at.val2||"");w.sval2[w.f_opt.val()=="between"?"show":"hide"]();$.each(["t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(aw,av){var ax=w[av];if(O.position==1||O.position==2){ax[/(t_sum|t_avg|t_min|t_max)/.test(av)?"show":"hide"]()}else{if(O.position==3){ax[/(t_min|t_max)/.test(av)?"hide":"show"]()}}});ap.show();if(au+w.dmain.width()>$(j).width()){au=$(j).width()-w.dmain.width()}B.context.cell=O;w.dmain.css({top:ar,left:au});return false}})}else{if(S.menuobj){S.menuobj.remove();S.menuobj=null}}if(af==(B._3-1)&&B.__gflt&&B.__gflt[ad]){if(!S.ficon){y=$("<div class='m-datagrid-filter'></div>").appendTo(S);S.ficon=y;y.css({position:"absolute",right:E.paddingRight+(S.menuobj?16:0),top:E.paddingTop})}else{y=S.ficon}}else{if(S.ficon){S.ficon.remove();S.ficon=null}}S.cbg=ae.background;if(B.selectionmode=="row"&&B.rows[af].selected==true){L=true}else{L=O.selected}if(L==true){ae.background=B.selcolor}X=S.cssobj;S.cssobj=ae;for(D in ae){S[0].style[D]=ae[D]}B.W_=Math.max(B.W_,ac+T);B.X_=Math.max(B.X_,ab+ah);return S},b_a:function(c,d){var b=this,a;switch(c.type){default:a=$("<button>"+c.name+"</button>").appendTo(d).bind("click",function(){if(c.action){c.action(b,d)}return false});break}},c_:function(){},d_:function(n,m){var u,t,s,y=this,q,g=null,z=y.ctx.offset(),d=n-z.left,b=m-z.top,l=(y.cols.length>(y._4-y._nh)?(y._4-y._nh):0),h,c,a,w,v,o=y._2/y.sv,x=y._1/y.sh,e=null,f=false;if(y.U_.length>0){for(u=0;u<y.U_.length;u++){if(y.U_[u].length>l&&l>-1){q=y.U_[u][l];h=q.p;c=h[1];a=h[3];if(q&&q.v!==false&&c>-1&&c<b&&b<a){for(t=0;t<y.U_[u].length;t++){q=y.U_[u][t];h=q.p;w=h[0];v=h[2];if(w>-1&&w<d&&d<v){f=true;if(!q.v&&q.cl.merged==8){for(s=u;s>=y._3;s--){if(y.U_[s][t]&&(y.U_[s][t].cl.merged==0||y.U_[s][t].cl.merged==1)){e=y.U_[s][t];break}}}else{if(q.v!==false){e=q}}break}}}}if(e||f){break}}}return e},_A:function(d,c){var a=this,b=c.originalEvent,e;if(c){c.stopPropagation();if(b.touches.length==2&&(a.regv||a.regh)){e=b.touches[0];a._f=true;a.sx=a._1;a.sy=a._2;a._x=true;a._g=e.pageX;a._h=e.pageY}else{if(b.touches.length>0){e=b.touches[0];a._f=false;a.h_.call(a,e.pageX,e.pageY)}else{a._f=false;a.j_.call(a,c.pageX,c.pageY,false,false)}}}},_B:function(c,b){var a=this;if(b){b.stopPropagation();if(!a._f){a.j_.call(a,b.pageX,b.pageY,false,false)}a._f=false}},_C:function(b,h){var a=this,f=h.originalEvent,c,m,e,l,j,g;if(f&&f.touches.length>0){h.stopPropagation();c=f.touches[0];if(a._f&&a._g>-1&&a._h>-1){m={x:a._g,y:a._h};e={x:c.pageX,y:c.pageY};if(a.regv&&a.regh){l=Math.abs(e.x-m.x);j=Math.abs(e.y-m.y);if(l>j){g="h"}else{g="v"}}else{if(a.regv){g="v"}else{if(a.regh){g="h"}}}a._S.call(a,e,g)}else{a.i_.call(a,c.pageX,c.pageY)}}},e_:function(d,n){var l=this,c=l.owner,q,m,b,g,j,a=false;if(n&&!l.resizeCol){var f=(window.Ext&&Ext.dd.DragDropManager.dragCurrent&&Ext.dd.DragDropManager.dragCurrent.dragging==true)?true:false;if(l._x==false&&l._y==false&&f!==true){if(n.which==1){if(l.editing){j=l.d_(n.pageX,n.pageY);if(j==l.editing){a=true}else{n.stopPropagation()}}else{n.stopPropagation()}l.h_.call(l,n.pageX,n.pageY);function h(s){l.f_.call(l,d,s);return false}function o(s){l.g_.call(l,d,s);$(document).unbind("mousemove",h).unbind("mouseup",o);return false}$(document).bind("mousemove",h).bind("mouseup",o)}else{if(n.which==3){if(l.enablecontextmenu==false){return}var e=$(c).offset();n.stopPropagation();q=n.pageX-e.left;m=n.pageY-e.top;b=[];if(l.selectedItems&&l.selectedItems.length<2){j=l.d_(n.pageX,n.pageY);if(j){l.p_();cl=j.cl;cl.selected=true;l.rows[j.rowIndex].selected=true;l.selectedRows.push(l.rows[j.rowIndex]);l.selectedItems.push(cl);l.a_()}}if(l.selectedItems&&l.selectedItems.length>0){if((l._browser>0&&l._browser<8)||$.zclip){b.push({disp:IRm$.r1("B_CLIPBOARD"),name:"CMD_CLIPBOARD","class":(b.length>0?"separator":null)})}if(l._ILb&&l._ILb.dff1.length>0){j=l.d_(n.pageX,n.pageY);if(j){for(g=0;g<l._ILb.dff1.length;g++){if(l._ILb.mL(l._ILb.dff1[g],j)){b.push({disp:l._ILb.dff1[g].name,name:"detail:"+l._ILb.dff1[g].uid})}}}}}if(b.length>0){l._W(b);l.context.cell=null;if($(c).showContextMenu){$(c).showContextMenu.call($(c),l.context,q,m)}}}}}}return a},f_:function(d,c){var a=this;if(c&&!a.resizeCol){var b=(window.Ext&&Ext.dd.DragDropManager.dragCurrent&&Ext.dd.DragDropManager.dragCurrent.dragging==true)?true:false;if(a._x==false&&a._y==false&&b!==true){c.stopPropagation();a.i_.call(a,c.pageX,c.pageY)}}},g_:function(c,b){var a=this;if(b&&!a.resizeCol){a.j_.call(a,b.pageX,b.pageY,b.which,b.ctrlKey,b.shiftKey)}},_D:function(c,b){var a=this;if(b&&!a.resizeCol){a.k_.call(a,b.pageX,b.pageY,b.which,b.ctrlKey,b.shiftKey)}},h_:function(b,a){var d=this;if(d._x==true){return}if(d._y==true){return}if(d.resizeCol==true){return}d._l=d._1;d._m=d._2;d.buttondown=true;d._j=b;d._k=a;d.prevRenderer=d.d_(b,a);d.startRenderer=d.prevRenderer;d.mouseAction=0;var e=new Date().getTime();d.doubletap=false;if(d._o&&e-d._o<800){d.doubletap=true}d._o=e},i_:function(o,m){var s,n,l=this,b=false,e,d,f=l.startRenderer,q;if(l._x==true){return}if(l._y==true){return}if(l.mouseMode=="scroll"){if(l.mouseAction==0&&l.buttondown==true&&(l._b>l._d||l._c>l._e)){s=o-l._j;n=m-l._k;l.v_(l,s,n,o,m)}}else{if(l.mouseMode=="select"&&(Math.abs(l._j-o)>5||Math.abs(l._k-m)>5)){if(l.mouseAction==0&&l.buttondown==true){renderer=l.d_(o,m);if(renderer!=null&&f!=null){q=renderer.cl;if(renderer==f&&(l.selectedItems.length!=1||(l.selectedItems.length==1&&l.selectedItems[0]!=q))){l.p_();q.selected=true;l.rows[renderer.rowIndex].selected=true;l.selectedRows.push(l.rows[renderer.rowIndex]);l.selectedItems.push(q);b=true}else{if(l.prevRenderer!=renderer){var a=Math.min(f.rowIndex,renderer.rowIndex),h=Math.min(f.colIndex,renderer.colIndex),g=Math.max(f.rowIndex,renderer.rowIndex),c=Math.max(f.colIndex,renderer.colIndex);l.p_();for(e=a;e<=g;e++){if(l.rows[e].visible!==false&&l.rows[e]._5a!==true){for(d=h;d<=c;d++){if(l.cols[d].visible!==false){l[(this._5>-1||this._6>-1)?"treeData":"_Y"][e][d].selected=true;l.selectedItems.push(l[(this._5>-1||this._6>-1)?"treeData":"_Y"][e][d])}}l.selectedRows.push(l.rows[e])}}b=true}}if(b==true){l.a_()}l.prevRenderer=renderer}}}}},j_:function(l,j,m,b,h){var g=new Date().getTime(),e,a=0,f=this,d,n;if(f._x==true){return}if(f._y==true){return}if(f.mouseMode=="scroll"){if(f.mouseAction==0&&(g-f._o)<500&&Math.abs(f._j-l)<10&&Math.abs(f._k-j)<10){e=f.d_(l,j);if(e){n=e.cl;f.p_();n.selected=true;f.selectedItems.push(n);f.rows[e.rowIndex].selected=true;f.selectedRows.push(f.rows[e.rowIndex]);f.a_()}}}else{if(f.mouseMode=="select"){e=f.d_(l,j);if(e){if(f.editing!=e){f._N.call(f)}if(m==3){}else{if(f._p>-1&&g-f._p<500&&f.mouseUpRenderer&&f.mouseUpRenderer==e){}else{if(g-f._o<500){a=1;if(f.itemClick(e)!==false){f.l_("itemclick",e)}}}n=e.cl;if(b&&a==1){n.selected=!n.selected;f.rows[e.rowIndex].selected=!f.rows[e.rowIndex].selected;if(n.selected==true){f.selectedItems.push(n);f.selectedRows.push(f.rows[e.rowIndex])}else{for(d=0;d<f.selectedItems.length;d++){if(f.selectedItems[d]==n){f.selectedItems.splice(d,1);break}}if(f.selectionmode=="row"){for(d=0;d<f.selectedRows.length;d++){if(f.selectedRows[d]==f.rows[e.rowIndex]){f.selectedRows.splice(d,1);break}}}}f.a_()}if(a>0){if(a>1||!b){f.p_()}n.selected=true;f.selectedItems.push(n);f.rows[e.rowIndex].selected=true;f.selectedRows.push(f.rows[e.rowIndex]);f.a_()}else{if(f.selectedItems.length>0){f.l_("selectionchanged")}}}}else{f._N.call(f)}f.mouseUpRenderer=e;f._p=g}}f.buttondown=false;f._j=-1;f._k=-1},k_:function(d,b,a,g,c){var e=this,f=e.d_(d,b);e._p=-1;if(e.m_(f)!==false){e.l_("itemdblclick",f)}},l_:function(a,b){this.ctx.trigger(a,[b])},_E:function(e,d,h){if(typeof(h)=="undefined"){h=d.originalEvent?d.originalEvent.deltaY*-0.1:0}var c=this,g=c._1,f=c._2,a=h>0?"Up":"Down",b=Math.abs(h);if(c.__scr){return}b=(b>15)?b*1.5:18+1;b=(h>0)?-b:b;c._N.call(c);if(c._c>c._e){c.v_(c,0,undefined,0,0,b>0?10:-10)}},m_:function(b){var a=this;if(a._z&&a.cols[b.colIndex]._z!==false){a.n_(b)}},n_:function(a){},o_:function(){},itemClick:function(a){},p_:function(){var a,b=this,d=b.selectedItems,c=b.selectedRows;for(a=d.length-1;a>=0;a--){d[a].selected=false}for(a=c.length-1;a>=0;a--){c[a].selected=false}b.selectedItems=d=[];b.selectedRows=[]},_H:function(c,b,d){var a=this;if(b){b.preventDefault();b.stopImmediatePropagation();a.dt1=new Date().getTime();a._f=true;a._g=b.pageX;a._h=b.pageY;a.sx=a._1;a.sy=a._2;a._x=true;a.scrolltarget=c.eventtarget;a._O(d)}return false},_I:function(d,m,q){var j=this,a=j,l=new Date().getTime();if(m&&j.dt1&&j.dt1>-1&&l-j.dt1<200){var n=$(d),e=n.offset(),s=m.pageX-e.left,o=m.pageY-e.top,t=IG$.x_10._w(n),f=IG$.x_10._h(n),h=j._1,g=j._2,b,c;j.dt1=-1;event.stopPropagation();if(j.ge){$(document).unbind(j.ge);j.ge=null}j._R.call(j,m,q);a._f=false;a._g=-1;a._h=-1;if(q=="v"){c=(o>f/2)?0.1:-0.1;b=Math.min(a._c-a._e,(a._e-a._7)*0.1);g=g+b*c;g=(g<0)?0:Math.min(g,a._c-a._e)}else{if(q=="h"){c=(s>t/2)?0.1:-0.1;b=b=Math.min(a._b-a._d,(a._d-a._8)*0.1);h=h+b*c;h=(h<0)?0:Math.min(h,a._b-a._d)}}if(a._1!=h||a._2!=g){a._1=h;a._2=g;a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},50)}}},q_:function(b){var a=this;a._N();a.on_i.call(a)},r_:function(a){var d=this,b,e=Math.min(a+d._3,d.rows.length),c=0;for(b=d._3;b<e;b++){c+=d.rows[b].height}d.q_(c*d.sv)},s_:function(){var a=this,b=(a._c-a._7-a._e)*a.sv+1;a.q_(b)},_K:function(e,d,f){var c=this,b,a;d.stopPropagation();if(f=="v"){a=$(e).scrollTop();a=a*c.sv;c._2=a}else{if(f=="h"){a=$(e).scrollLeft();a=a*c.sh;c._1=a}}if(c._i>-1){clearTimeout(c._i)}c._N();c._i=setTimeout(function(){c.on_i.call(c)},10)},_J:function(d,j,l){var a=this;j.stopPropagation();a._N.call(a);var h=a._1,g=a._2,c=0,b,e,m,f=(l=="v")?a._Ft.offset():a._Gt.offset();if(l=="v"){c=(f.top>j.pageY)?-1:1;b=a.thumbvheight;g+=b*c;m=IG$.x_10._h(a._F);g=Math.min(m-a.thumbvheight,Math.max(0,g));if(a._2==g){return}a._2=g}else{c=(f.left>j.pageX)?-1:1;b=a.thumbhwidth;h+=b*c;e=IG$.x_10._w(a._G);h=Math.min(e-a.thumbhwidth,Math.max(0,h));if(a._1==h){return}a._1=h}a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},10)},on_i:function(){this._i=-1;var a=this,b=a._2/a.sv;if(b>(a._c-a._7-a._e)){a.l_("scrollend",null)}this.draw()},t_:function(){var d=this,c=30,e,b,f,a;e=IG$.x_10._w(d._G);b=IG$.x_10._h(d._F);f=IG$.x_10._w(d._Gt);a=IG$.x_10._h(d._Ft);d._Gt.css({left:Math.min(d._1,e-f)});d._Ft.css({top:Math.min(d._2,b-a)})},v_:function(a,o,m,h,g,e){var l=this,j=a._1,f=a._2,c,t,s=l._F,b,d,q=j,n=f;if(a.sh<1&&Math.abs(o)>5){c=IG$.x_10._w(a._G);q=Math.min(c-a.thumbhwidth,Math.max(0,j+o))}if(a._c>a._e&&typeof(m)=="undefined"){b=IG$.x_10._h(s);d=b-l.thumbvheight;t=e*a.sv*21;n=Math.min(d,a._2+t);if(n<0){n=0}}else{if(a._c>a._e&&Math.abs(m)>5){t=IG$.x_10._h(a._F);n=Math.min(t-a.thumbvheight,Math.max(0,f+m))}}if(q!=j||n!=f){a._1=q;a._2=n;a.t_.call(a);a.draw()}},u_:function(b,n,l,e){var h=this,m=new IG$.cMa.CSize(0,0),f=window.bowser,g={},d,j=IG$._ccache.tmeasure,c,a=0;l=l||"&nbsp;";if(e){g.fontSize=Number(e.fontsize);if(e.autowidth=="F"&&e.columnwidth){d=Number(e.columnwidth);a=isNaN(d)?0:1}}else{g.fontSize=n}c=l+":"+g.fontSize+":"+(a?d:"");if(j[c]){return j[c]}h.measurediv.show();h.measurediv.css(g);h.measurediv.html(l);m.height=IG$.x_10._h(h.measurediv);m.width=IG$.x_10._w(h.measurediv);if(a){m.fw=1;m.fw_=d}else{if(e){m.width+=e.padright+e.padleft+8}}j[c]=m;return m},w_:function(e){var b=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),c=Math.floor(e/16),a=e-c*16,d=b[a];return d},x_:function(f){var d=this,c=new Array(),b=0,a,e=IG$._ccache.colorcode;if(e[f]){return e[f]}if(f<16){fcolor="#00000"+d.w_(f)}else{while(f>15){c[b]=d.w_(f);f=Math.floor(f/16);b+=1}c[b]=d.w_(f);fcolor="#";for(b=0;b<6;b++){a=c[5-b];fcolor+=(a?a:"0")}}e[f]=fcolor;return fcolor},y_:function(e,b){var d=this,c=null,a=d.oY;if(a&&a.length>e&&a[e].length>b){c=a[e][b]}return c},z_:function(e,b,d){var c=this,a=c.oY;if(a&&a.length>e&&a[e].length>b){a[e][b].text=d}},S_:function(){var f=this,h=f.oY,g,e=[],a=[],d=h.length,c,b={};f._N();f._Z=true;f._c=0;g=new IG$.cMa.DimInfo(d);f.rows.push(g);for(c=0;c<f._a;c++){e.push("")}f.T_(e,a);h.push(a);f.J_(g,a,b);this._9=h.length;f.t_.call(f);f.redraw()},A_:function(b){var a=this,c=a.oY;a._N();a._Z=true;c.splice(b,1);a.rows.splice(b,1);this._9=c.length;a.t_.call(a);a.redraw()},T_:function(a,f){var e=this,d=e.columns,c,b;for(b=0;b<d.length;b++){cell={text:a[d[b].field]||null,mrow:0,mcol:0,merged:0,stylename:d[b].stylename||"normal",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1};if(cell.stylename&&e.styles[cell.stylename]){st=e.styles[cell.stylename];if(d[b].type=="numeric"&&st.formatstring){cell.code=cell.text;cell.text=e.formatString(cell.code,st.formatstring)}}f.push(cell)}},C_:function(e,f){var d=this,c=d.columns,b,a;for(b=0;b<e.length;b++){row=[];d.T_(e[b],row);f.push(row)}},is_s:function(a){var c=$(a)[0];if((c.nodeType!=1)||(c==document.body)){return true}if(c.currentStyle&&c.currentStyle.display!="none"&&c.currentStyle.visibility!="hidden"){return this.is_s(c.parentNode)}else{if(window.getComputedStyle){var b=document.defaultView.getComputedStyle(c,null);if(b.getPropertyValue("display")!="none"&&b.getPropertyValue("visibility")!="hidden"){return this.is_s(c.parentNode)}}}return false},check_s:function(a){var d=$(a)[0];var c=a;if((d.nodeType!=1)||(d==document.body)){return null}if(d.currentStyle&&(d.currentStyle.display=="none"||d.currentStyle.visibility=="hidden")){return c}else{if(window.getComputedStyle){var b=document.defaultView.getComputedStyle(d,null);if(b.getPropertyValue("display")=="none"||b.getPropertyValue("visibility")=="hidden"){return c}}else{c=this.check_s(d.parentNode);if(c){return c}}}return c},browser:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}};IG$.cMa.padding=function(b){var a=this;a.paddingTop=b;a.paddingBottom=b;a.paddingLeft=b;a.paddingRight=b};IG$.cMa.DimInfo=function(a){var b=this;b.index=a;b.width=0;b.height=0;b._d=0};IG$.cMa.DimInfo.prototype={w:function(){var a=this;return a.width+(a._d?a._d:0)},h:function(){var a=this;return a.height+(a._e?a._e:0)},init:function(){var a=this;a._d=0;a._e=0;a.width=0;a.height=0;a.visible=true;a.fw=undefined;a.fw_=undefined}};IG$.cMa.CSize=function(b,a){var c=this;c.width=b;c.height=a};if(window.Ext){IG$.DmU=Ext.extend(Ext.dd.DragZone,{dtimer:-1,spoint:null,constructor:function(b,a){this.callParent([b,a])},destroy:function(){this.callParent()}})}IG$.cMa.prototype.initializeDragDrop=function(b){var a=this;this.DF=$('<div class="m-datagrid-feedback"></div>');this.DF.appendTo(this.owner);this.DF.hide()};IG$.cMa.prototype.isAllowedType=function(c){var b=false,a=this.getTypeName(c);if(a=="d"||a=="m"){b=true}return b};IG$.cMa.prototype.getTypeName=function(b){var a="";if(b=="measure"||b=="formulameasure"||b=="measuregroup"){a="m"}else{if(b=="metric"||b=="custommetric"||b=="tabdimension"||b=="measuregroupdimension"){a="d"}}return a};if(!window.Ext){window.Ext=null}qigridview.prototype=new IG$.cMa();qigridview.prototype.constructor=qigridview;qigridview.prototype.parent=IG$.cMa.prototype;function qigridview(a){this.createComponent();this.editable=true;this.enablecontextmenu=false;this.scrollbar="image";this.drawmode=(a?a.drawmode||"req":"req");this.columnfill=(a&&a.columnfill==true?true:false);this.processRowFunction=a?a.processRowFunction:null;this.initStyles();if(a){this.merge(a)}}qigridview.prototype.initStyles=function(){var a;this.styles={normal:{name:"normal",fontsize:11,color:0,backcolor1:16777215,padtop:4,padbottom:4,padright:2,padleft:2,formatstring:null,textalign:"4"}};a=this.addStyle("fixedrow");a.padtop=2;a.padbottom=2;a.textalign="5";a.backcolor1=874901;a.color=16777215;a=this.addStyle("fixedcolumn");a=this.addStyle("numeric");a.formatstring="#,###";a.textalign="6";a=this.addStyle("boolean");a.textalign="5";a=this.addStyle("grandtotal","numeric");a.backcolor1=16645822;a=this.addStyle("subtotal","numeric");a.backcolor1=16645822;a=this.addStyle("grandtotallabel");a.backcolor1=16645822;a=this.addStyle("subtotallabel");a.backcolor1=16645822};qigridview.prototype.addStyle=function(f,e){var c=this,d=c.styles[e],b,a;if(!d){d=c.styles.normal}b={name:f};for(a in d){if(a!="name"){b[a]=d[a]}}c.styles[b.name]=b;return b};qigridview.prototype.merge=function(b){var a,c=this,d=b;for(a in d){if(typeof(c[a])!="undefined"){c[a]=d[a]}}};qigridview.prototype.setColumns=function(b,l,m){var g=this,f,d,c=[],h=[],e,n,a;g.subtotal=l;g.template=m;if(b){g.columns=b;a=g.calculateDepth(b,h,0,0,null);e=a.depth;for(f=0;f<e+1;f++){n=[];for(d=0;d<h.length;d++){n.push(null)}c.push(n)}g.makeHeaderData(c,b,0,0);g.colcount=(c&&c.length>0)?c[0].length:0;g.rowcount=c.length;g.fixedRow=c.length;g.setDataProvider(c)}g.columns=h;return h};qigridview.prototype.calculateDepth=function(d,j,f,b,e){var g,m,l,h={depth:0,cols:0},a,c=0;for(g=0;g<d.length;g++){if(d[g].columns&&d[g].columns.length>0){a=this.calculateDepth(d[g].columns,j,f+1,g,d[g].defaults||e);f=a.depth;h.cols+=a.cols;c+=a.cols;b+=a.cols}else{if(e){for(l in e){d[g][l]=e[l]}}if(d[g].type=="numeric"){d[g].stylename=d[g].stylename||"numeric"}else{if(d[g].type=="boolean"){d[g].stylename=d[g].stylename||"boolean"}}if(d[g].formatstring){m=this.addStyle("column_"+(g+b),(d[g].stylename||"normal"));m.formatstring=d[g].formatstring;d[g].stylename=m.name}j.push(d[g]);h.cols++;c++}}h.depth=f;return h};qigridview.prototype.makeHeaderData=function(d,c,f,b){var h=this,g,e,m,a=0,l;for(g=0;g<c.length;g++){m={text:c[g].name||c[g].field,mrow:0,mcol:0,merged:0,stylename:c[g].headerstyle||"fixedrow",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1};if(c[g].columns&&c[g].columns.length>0){for(e=0;e<c[g].columns.length;e++){m=h.ocopy(m);m.merged=(e==0)?2:4;d[f][a+e+b]=m}l=h.makeHeaderData(d,c[g].columns,f+1,a);a+=l}else{for(e=f;e<d.length;e++){m=h.ocopy(m);m.merged=(e==f)?1:3;m.type="string";d[e][a+b]=m}a++}}return a};qigridview.prototype.ocopy=function(c){var b={},a;for(a in c){b[a]=c[a]}return b};qigridview.prototype.setDataProvider=function(d,e){if(!d){return}var c=this,b=c.columns,a;qigridview.prototype.parent.setDataProvider.call(c,d,false);for(a=0;a<b.length;a++){if(b[a].minwidth){c.cols[a].width=Math.max(c.cols[a].width,b[a].minwidth)}if(b[a].maxwidth){c.cols[a].width=Math.min(c.cols[a].width,b[a].maxwidth)}c.cols[a].type=b[a].type}if(e!==false){c.redraw()}};qigridview.prototype.loadData=function(e){var g=this,c=g.dataProvider,f,d,h,b=g.columns,m,l,a;if(c.length>g.fixedRow){c.splice(g.fixedRow,c.length-g.fixedRow)}if(e){g.getRowData(e,c);a=g.updateSubtotal(c);c=(a?a:c);g.updateMerge(c)}g.setDataProvider(c)};qigridview.prototype.formatString=function(a,b){a=this.format(Number(a),b);return a};qigridview.prototype.format=function(q,o){if(typeof(o)!="string"){return""}var b=-1<o.indexOf(","),a=this.j5(o).split("."),h=q;if(1<a.length){h=h.toFixed(a[1].length)}else{if(2<a.length){throw ("NumberFormatException: invalid format, formats should have no more than 1 period: "+o)}else{h=h.toFixed(0)}}var s=h.toString();if(b){a=s.split(".");var l=a[0],e=[],f=l.length,d=Math.floor(f/3),c=l.length%3||3;for(var g=0;g<f;g+=c){if(g!=0){c=3}e[e.length]=l.substr(g,c);d-=1}s=e.join(",");if(a[1]){s+="."+a[1]}}return o.replace(/[\d,?,#\.?,#]+/,s)};qigridview.prototype.j5=function(d){d+="";var b=/^\d|\.|\#|-$/;var a="";for(var c=0;c<d.length;c++){if(b.test(d.charAt(c))){if(!((d.charAt(c)=="."&&a.indexOf(".")!=-1)||(d.charAt(c)=="-"&&a.length!=0))){a+=d.charAt(c)}}}return a};qigridview.prototype.loadAjaxData=function(a){var b=this;if(a){a.datatype=a.datatype||"json";b.setLoading(true);$.ajax({type:a.method||"GET",url:a.url,dataType:a.datatype||"json",data:a.data,timeout:10000,success:function(c){if(a.success){a.success.call(a.scope||b,c)}b.processAjaxData.call(b,a,c,"load")},error:function(f,c,d){b.setLoading(false)}})}};qigridview.prototype.appendAjaxData=function(a){var b=this;if(a){a.datatype=a.datatype||"json";b.setLoading(true);$.ajax({type:a.method||"GET",url:a.url,dataType:a.datatype||"json",data:a.data,timeout:10000,success:function(c){b.processAjaxData.call(b,a,c,"append")},error:function(f,c,d){b.setLoading(false)}})}};qigridview.prototype.processAjaxData=function(g,o,h){var n=this;n.setLoading(false);var f,e,d=[],m=n.dataProvider;if(g.datatype=="xml"){var b=n.L7(o,g.rootnode),l,s,c,a;if(b){l=n.L14(b);for(f=0;f<l.length;f++){if(n.processRowFunction){s=n.processRowFunction.call(n,n,l[f])}else{s=n.L10(l[f])}if(s){d.push(s);if(l[f].hasChildNodes()==true){a=this.L14(l[f]);for(e=0;e<a.length;e++){s[this.L17(a[e])]=this.L12(a[e])}}}}}}else{if(g.datatype=="json"){var q=g.rootnode.split("/"),b,l,s,c;if(q.length>0){for(f=0;f<q.length;f++){if(f==0){b=o}else{b=b[q[f]]}if(!b){}}if(b){l=b;for(f=0;f<l.length;f++){if(n.processRowFunction){s=n.processRowFunction.call(n,n,l[f])}else{s=l[f]}if(s){d.push(s)}}}}}}if(h=="load"){n.dataFullLoaded=false;n.loadData(d)}else{if(h=="append"){if(d.length==0){n.dataFullLoaded=true}else{n.getRowData(d,m);c=n.updateSubtotal(m);n.dataProvider=m=c?c:m;n.updateMerge(m);n.refreshData()}}}};qigridview.prototype.updateSubtotal=function(l){var v=this,d=v.columns,n,m,g,q=false,e=l||v.dataProvider,w,t,u,o={},a;for(n=0;n<d.length;n++){o[d[n].field]=n}if(v.subtotal&&v.subtotal.length>0){for(n=0;n<v.subtotal.length;n++){t=v.subtotal[n];t.colindex=-1;if(t.field&&typeof(o[t.field])!="undefined"&&t.datafields&&t.datafields.length>0){t.colindex=o[t.field];t.pvalue=null;t.fcalc=[];t.topposition=-1;for(m=0;m<t.datafields.length;m++){if(typeof(o[t.datafields[m]])!="undefined"){t.fcalc.push({field:t.datafields[m],colindex:o[t.datafields[m]],sum:null,mbody:null})}}}}for(n=e.length-1;n>=v.fixedRow;n--){if(e[n][0].issubtotal==true){e.splice(n,1)}}var c=[],b,h,s;for(n=0;n<v.fixedRow;n++){c.push(e[n])}for(n=v.fixedRow;n<e.length;n++){b=e[n];c.push(b);for(m=0;m<v.subtotal.length;m++){t=v.subtotal[m];if(t.colindex>-1){a=t.toplocate||false;for(g=0;g<t.fcalc.length;g++){u=Number(b[t.fcalc[g].colindex].code||b[t.fcalc[g].colindex].text);if(isNaN(u)==false){t.fcalc[g].sum=(t.fcalc[g].sum==null)?u:t.fcalc[g].sum+u}}if(t.isgrandtotal==true){if(a!=true&&n==e.length-1){h=v.addSubTotalRow(t,null);c.push(h)}else{if(a==true&&n==v.fixedRow){h=v.addSubTotalRow(t,null);t.srow=h;c.splice(c.length-1,0,h)}else{if(a==true&&n==e.length-1){v.updateSubTotalRow(t,null)}}}}else{s=(n+1<e.length?e[n+1][t.colindex].text:null);if(e[n][t.colindex].text!=s){h=v.addSubTotalRow(t,b[t.colindex]);if(a==true){if(t.topposition<0){t.topposition=v.fixedRow}c.splice(t.topposition,0,h);t.srow=h;v.updateSubTotalRow(t,b[t.colindex]);t.topposition=c.length}else{c.push(h)}for(g=0;g<t.fcalc.length;g++){t.fcalc[g].sum=null;t.fcalc[g].cnt=null}}}t.pvalue=e[n][t.colindex].text}}}return c}return null};qigridview.prototype.addSubTotalRow=function(h,g){var e,j=this,c=j.columns,b=[],a,m,l,d;for(e=0;e<c.length;e++){l={text:null,mrow:0,mcol:0,merged:0,stylename:null,chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1,issubtotal:true,type:"string"};if(e==h.colindex){l.text=(h.isgrandtotal==true)?h.name:g.text;l.stylename=h.labelstylename||(h.isgrandtotal?"grandtotallabel":"subtotallabel")}else{if(h.isgrandtotal!=true&&e==h.colindex+1){l.text=h.name;l.stylename=h.labelstylename||(h.isgrandtotal?"grandtotallabel":"subtotallabel")}}b.push(l)}for(e=0;e<h.fcalc.length;e++){m=h.fcalc[e].colindex;a=c[m];l=b[m];l.code=h.fcalc[e].sum;l.text=l.code;l.stylename=h.stylename||(h.isgrandtotal==true?"grandtotal":"subtotal");if(h.stylename&&j.styles[h.stylename]){st=j.styles[h.stylename];d=st.formatstring}else{if(a.stylename&&j.styles[a.stylename]){st=j.styles[a.stylename];d=st.formatstring}}if(d){l.text=j.formatString(l.code,d)}}return b};qigridview.prototype.updateSubTotalRow=function(h,g){var e,j=this,c=j.columns,b=[],a,m,l,d,b=h.srow;if(b){for(e=0;e<h.fcalc.length;e++){m=h.fcalc[e].colindex;a=c[m];l=b[m];l.code=h.fcalc[e].sum;l.text=l.code;l.stylename=h.stylename||(h.isgrandtotal==true?"grandtotal":"subtotal");if(h.stylename&&j.styles[h.stylename]){st=j.styles[h.stylename];d=st.formatstring}else{if(a.stylename&&j.styles[a.stylename]){st=j.styles[a.stylename];d=st.formatstring}}if(d){l.text=j.formatString(l.code,d)}}}return b};qigridview.prototype.updateMerge=function(c){var v=this,a=v.columns,h=[],f=[],s,q,w=false,d,x,o,u,y,l,b,e,t,m=c||v.dataProvider,n,g;for(s=0;s<a.length;s++){if(a[s].merged==1){w=true;h.push(s);f.push(null)}}if(w==true){for(s=v.fixedRow;s<m.length;s++){d=m[s];x=(s>v.fixedRow)?m[s-1]:null;o=(s+1<m.length)?m[s+1]:null;for(q=0;q<h.length;q++){y=h[q];u=(q>0&&h[q-1]==y-1)?h[q-1]:-1;l=(q+1<h.length&&h[q+1]==y+1)?h[q+1]:-1;b=(o)?o[y].text:null;t=d[y].text;e=(x)?x[y].text:null;g=(x)?x[y].merged:0;n=(u>-1)?d[u].merged:3;if(e!=t&&b==t){d[y].merged=1}else{if(e==t&&n>1){d[y].merged=3}else{if(b==t){d[y].merged=(n>1&&g>0)?3:1}}}}}}};qigridview.prototype.L7=function(e,d){var a=null;var c=d.split("/");var g=0;var b=e;if(c[0]==""){b=e.getElementsByTagName(c[1])[0];g=2}var f=null;for(i=g;i<c.length;i++){b=this.L8(b,c[i]);if(b==null||b==undefined){break}}f=b;return f};qigridview.prototype.L8=function(d,c){var e=null,a=null,b;if(d!=null&&d.hasChildNodes()==true){a=this.L14(d);for(b=0;b<a.length;b++){if(a[b].nodeName==c){e=a[b];break}}}return e};qigridview.prototype.L9=function(b,a){var c="";c=b.getAttribute(a);return c};qigridview.prototype.L10=function(c){var d={},a=window.bowser;for(var b=0;b<c.attributes.length;b++){d[(a.msie?c.attributes[b].nodeName:c.attributes[b].localName)]=c.attributes[b].value}return d};qigridview.prototype.L14=function(d,b){var a=[];if(d!=null&&d.hasChildNodes()==true){for(var c=0;c<d.childNodes.length;c++){if(d.childNodes[c].nodeType=="1"){if(!(b&&b!=this.L17(d.childNodes[c]))){a.push(d.childNodes[c])}}}}return a};qigridview.prototype.L12=function(b){var a=window.bowser;if(a.msie){if(b){return b.text||b.textContent||""}}else{if(b!=null&&typeof b.textContent!="undefined"){return b.textContent}}return""};qigridview.prototype.L17=function(a){return a.nodeName};qigridview.prototype.expandTemplate=function(e,b){var c=this,d=this.dataProvider[e],a=false;if(c.template){d[0].expanded=b;if(!d[0].template){d[0].template=$("<div></div>").css({position:"absolute"}).appendTo(c.regdata);d[0].template.append($(c.template));c.trenderers.push(d[0].template);a=true}if(b){c.theight+=d[0].template.height();d[0].template.fadeIn(500)}else{if(a==false){c.theight-=d[0].template.height()}d[0].template.fadeOut(500)}c.refreshData()}};qigridview.prototype.createEditor=function(b){var f=this,g,c,e,a,d;if(b&&b.editor){switch(b.editor.type){case"select":case"combobox":g=$("<select></select>");if(b.editor.data){for(c=0;c<b.editor.data.length;c++){d=b.editor.data[c];e=d[b.editor.codename||"value"];a=d[b.editor.displayname||"label"]||e;$("<option value='"+e+"'>"+a+"</option>").appendTo(g)}}break;default:g=$("<input type='text'></input>");g.bind("keyup",function(h){if(h.keyCode==13){f.endEdit.call(f,"enter")}return false});break}}else{g=qigridview.prototype.parent.createEditor.call(f)}return g};qigridview.prototype.beginEdit=function(h){var j=this,f=j.ctx.offset(),d,a,m,e=j.columns,c=j.cols[h.colIndex],l=e[h.colIndex],b,n,g=false;if(j.editable==true&&j.cols[h.colIndex].editable!==false){d=h.offset();a={left:0,top:0};if(false==true&&j.drawmode=="dom"){if(h.rname=="fixcolumn"){a=j.regfixcolumn.offset();m=j.regfixcolumn.region.offset()}else{if(h.rname=="fixheader"){a=j.regfixheader.offset();m=j.regfixheader.region.offset()}else{if(h.rname=="data"){a=j.regdata.offset();m=j.regdata.region.offset()}}}}n=h.cl;j.editing=h;j.editor.empty();if(l.editor&&l.editor.type){switch(l.editor.type){case"combobox":case"select":b=l.editrenderer=j.createEditor(l);j.editor.append(b);j.editor.css({left:(d.left-f.left),top:(d.top-f.top),overflow:"visible"});j.editor.ceditor=b;b.width(h.width());j.editor.width(h.width()).height(h.height());j.editor.show();g=true;break}}if(g==false){qigridview.prototype.parent.beginEdit.call(j,h)}}};var qigridinstances={instance:0};function qigridpages(a){this.container=a.container;this.template=a.template||"totalcounter";this.totalcount=a.totalcount;this.pagecount=a.pagecount;this.datagrid=a.datagrid;this.prevlabel=a.prevlabel||"Previous";this.nextlabel=a.nextlabel||"Next";this.instance=qigridinstances.instance;qigridinstances.instance++;this.init()}qigridpages.prototype={init:function(){var c=this,a,b;c.pageindex=0;c.container.empty();switch(c.template){case"totalcounter":a="<div class='m-datagrid-totalcounter'><div class='m-datagrid-pageinfo-1'><span><b>{START_LABEL}</b> - <b>{END_LABEL}</b> of <b>{TOTAL_LABEL}</b><span></div><div class='m-datagrid-page-btngrp'>{BUTTON_PREV}{BUTTON_NEXT}</div></div>";break;case"pageindex":a="<div class='m-datagrid-pageindex'><div class='m-datagrid-pageinfo-2'><div class='m-datagrid-page-btn-prev10'>{BUTTON_PREV10}</div><div class='m-datagrid-page-indexlist'>{PAGE_INDEX_10}</div><div class='m-datagrid-page-btn-next10'>{BUTTON_NEXT10}</div></div></div>";break}c.tmpl=a},updatePage:function(n){var e,j=this,l=j.tmpl,f=j.pagecount,c=n*f,d=(n+1)*f,h=Math.floor(n/10)*10,b=Math.ceil(j.totalcount/j.pagecount),a="",g,o,m;j.pageindex=n;j.container.empty();if(l){m=j.instance;d=Math.min(d,j.totalcount);l=l.replace("{START_LABEL}",c+1);l=l.replace("{END_LABEL}",d+1);l=l.replace("{TOTAL_LABEL}",qigridview.prototype.formatString(j.totalcount,"#,###"));l=l.replace("{BUTTON_PREV}","<div class='m-datagrid-prevpage"+(n==0?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev_"+m+"'>"+(j.prevlabel||"")+"</div>");l=l.replace("{BUTTON_NEXT}","<div class='m-datagrid-nextpage"+(n==Math.ceil(j.totalcount/j.pagecount)?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next_"+m+"'>"+(j.nextlabel||"")+"</div>");l=l.replace("{BUTTON_PREV10}","<div class='m-datagrid-prevpage"+(h==0?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev10_"+m+"'>"+(j.prevlabel||"")+"</div>");l=l.replace("{BUTTON_NEXT10}","<div class='m-datagrid-nextpage"+(h+10>=b?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next10_"+m+"'>"+(j.nextlabel||"")+"</div>");for(e=h;e<Math.min(h+10,b);e++){a+="<div class='m-datagrid-jumppage"+(e==n?" m-datagrid-currentpage":"")+"' name='qipages_btn_jump_"+m+"'>"+(e+1)+"</div>"}l=l.replace("{PAGE_INDEX_10}",a);g=$(l);j.container.append(g);$("#qipages_btn_next_"+m).bind("click",function(){j.changePage.call(j,++j.pageindex)});$("#qipages_btn_prev_"+m).bind("click",function(){if(j.pageindex>0){j.changePage.call(j,--j.pageindex)}});$("#qipages_btn_next10_"+m).bind("click",function(){if(b>h+10){j.changePage.call(j,h+10)}});$("#qipages_btn_prev10_"+m).bind("click",function(){if(h>0){j.changePage.call(j,h-1)}});o=g.find("[name='qipages_btn_jump_"+m+"']");o.bind("click",function(q){var s=$(q.target).text();if(s){s=parseInt(s);if(s-1!=j.pageindex){j.changePage.call(j,s-1)}}})}},changePage:function(c){var b=this,a=b.container;a.trigger("changepage",[b,c])}};IG$._I6e=$s.extend($s.window,{modal:true,layout:"fit",closable:false,resizable:false,width:300,autoHeight:true,parentnodepath:null,itemtype:null,parentuid:null,callback:null,viewmode:"newitem",i1:function(){var e=this,d=e.itemtype.split(";");if(d.length>1){e.itemtype=d[0];e.t1=d;var c=e.down("[name=txttitle]"),a=e.down("[name=txtedittitle]"),f=e.down("[name=selitemtype]"),g=[],b;c.setVisible(false);a.setVisible(false);f.setVisible(true);g.push({name:IRm$.r1("L_CR_TP_SEL"),value:""});for(b=0;b<d.length;b++){g.push({name:IRm$.r1("D_"+d[b].toUpperCase()),value:d[b]})}f.store.loadData(g);f.setValue("")}},$f3:function(){var l=this,a=this,f=this.down("[name=fitemname]"),j=this.down("[name=fitemname]").getValue(),g=this.down("[name=fdesc]").getValue(),b=this.down("[name=fhelpuid]").getValue()||null,e=this.down("[name=selitemtype]"),m=this.down("[name=group_dim_name]"),d=this.down("[name=groupid]").getValue();f.clearInvalid();if(!j){f.markInvalid([f.blankText]);return}if(a.itemtype=="Help"&&b==null){return}if(l.t1&&l.t1.length>1){l.itemtype=e.getValue();if(!l.itemtype){return}}if(j.indexOf("/")>-1){j=j.split("/");j=j.join("&#x2044;")}if(a.itemtype=="MeasureGroup"&&!m.getValue()){m.markInvalid([m.blankText]);return}if(a.doUpdate==false){if(a.callback){a.callback.execute()}return}var n=new IG$._I3e(),c="31",o=IG$._I2d({address:(this.parentnodepath=="/")?this.parentnodepath+j:this.parentnodepath+"/"+j,name:j,type:this.itemtype,pid:(this.parentuid=="/")?"":this.parentuid,memo:b||null,dimname:m.getValue(),description:g},"address;name;type;pid;description;memo;dimname"),h=IG$._I2e();if(this.itemtype=="Group"){c="28";o=IG$._I2d({address:"/usergroup/"+j,action:"create",pid:this.parentuid,description:g,groupid:d},"address;action;pid;description;groupid");h="<smsg><item><usergroup "+IG$._I30({pid:this.parentuid,description:g,groupid:d})+"/></item></smsg>"}else{if(this.itemtype=="Auth"){c="28";o=IG$._I2d({address:"/Auth/"+j,action:"create",pid:this.parentuid,description:g},"address;action;pid;description");h=IG$._I2e({option:"create",name:j,description:g})}else{if(this.itemtype=="tenant"){c="28";o=IG$._I2d({address:"/tenants/"+j,action:"create",pid:this.parentuid,description:g},"address;action;pid;description");h=IG$._I2e({})}}}n.init(a,{ack:c,payload:o,mbody:h},a,a._IO5,null);n._l()},_IO5:function(a){var b=this,c=this.down("[name=fitemname]").getValue();b._IG0.call(b);if(b.callback){b.callback.execute()}},_IG0:function(){this.close()},initComponent:function(){var b=this;b.title=IRm$.r1("L_MAKEITEM_G");b.__c=false;var c=new IG$._I57({layout:"anchor",border:0,defaults:{anchor:"100%",labelWidth:80},items:[{name:"selitemtype",hidden:true,xtype:"combobox",fieldLabel:IRm$.r1("L_CR_TP_SEL"),queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"]}},{xtype:"textfield",fieldLabel:IRm$.r1("L_ITEMNAME"),name:"fitemname",value:"",allowBlank:true,blankText:"Item name is required!",enableKeyEvents:true,listeners:{keyup:function(d,f){if(f.keyCode==13){this.$f3.call(this)}},scope:this}},{xtype:"textfield",fieldLabel:"HELPID",name:"fhelpuid",hidden:(this.itemtype=="Help")?false:true,value:"",allowBlank:false,blankText:"HELP_ID is required!"},{xtype:"textfield",fieldLabel:"Group ID",name:"groupid",hidden:(this.itemtype=="Group")?false:true,allowBlank:true},{xtype:"textfield",fieldLabel:"Dimension",name:"group_dim_name",blankText:"Item is required!",hidden:(this.itemtype=="MeasureGroup")?false:true},{fieldLabel:IRm$.r1("L_DESCRIPTION"),xtype:"textarea",height:50,name:"fdesc",value:""}]});var a=IRm$.r1("D_"+this.itemtype.toUpperCase());$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"container",defaults:{bodyStyle:"padding:10px"},layout:{type:"vbox",align:"stretch"},items:[{html:IRm$.r1("L_MAKEITEM",a),name:"txttitle",hidden:(this.viewmode!="newitem"),height:30,border:0},{html:IRm$.r1("L_RENAME_ITEM",this.itemname||""),name:"txtedittitle",height:30,hidden:(this.viewmode!="edititem"),border:0},c]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){if(this.__c==false){this.__c=true;this.$f3()}},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(d){d.i1()},show:function(d){this.down("[name=fitemname]").focus()}}});IG$._I6e.superclass.initComponent.apply(this,arguments)}});IG$._Icd=$s.extend(IG$._I6e,{viewmode:"edititem",$f3:function(){var h=this,a=this,l=this.down("[name=fitemname]"),g=l.getValue(),f=this.down("[name=fdesc]").getValue(),c=this.down("[name=fhelpuid]").getValue(),e=this.down("[name=selitemtype]"),n="31",m,j,d=this.down("[name=groupid]").getValue(),b="rename";if(h.t1&&h.t1.length>1){e.clearInvalid();h.itemtype=e.getValue();if(!h.itemtype){e.markInvalid(IG$.mX);return}}l.clearInvalid();if(!g){l.markInvalid(IG$.mX);return}m=IG$._I2d({uid:this.uid,name:g,itemtype:this.itemtype,pid:this.parentuid,description:f,memo:(this.itemtype=="Help")?c:null},"uid;name;itemtype;pid;description;memo");switch(this.itemtype){case"Group":n="28";b="update";m=IG$._I2d({address:"/usergroup/"+g,action:"update",gid:this.uid,description:f,groupid:d},"address;gid;description;action;groupid");break}j=new IG$._I3e();j.init(a,{ack:n,payload:m,mbody:IG$._I2e({option:b})},a,a._IO5,null);j._l()},initComponent:function(){this.title=IRm$.r1("T_RENAME_ITEM");this.on("afterrender",function(){var f=this.down("[name=fitemname]"),e=this.down("[name=fdesc]"),a=this.down("[name=fhelpuid]"),d=this.down("[name=txttitle]"),c=this.down("[name=txtedittitle]"),b=this.down("[name=groupid]");d.setVisible(false);c.setVisible(true);f.setValue(this.itemname||"");e.setValue(this.description||"");a.setValue(this.memo||"");b.setValue(this.groupid||"")},this);IG$._Icd.superclass.initComponent.apply(this,arguments);this.setTitle(IRm$.r1("T_RENAME_ITEM",this.itemname))}});IG$._Ic1=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:490,height:520,_ILb:null,callback:null,defaults:{bodyStyle:"padding:5px"},_IG0:function(){this.close()},_IFf:function(){var l=this,n=l.item||null,e=l.record||null;if(n&&e){var h=l.down("[name=cb_sortdir]"),g=h.getGroupValue(),m=l.down("[name=cb_sorttype]"),a=l.down("[name=cb_sorttype]").getGroupValue(),d,c,b=l.item.itemtype,f=(l._ILb)?l._ILb.Xsf:null;e.set("sortorder",(g=="")?null:g);e.set("memo",(a=="")?null:a);e.set("aggrfunc",l.down("[name=aggrfunc]").getValue());e.set("disp_title",l.down("[name=disp_title]").getValue());e.set("hidecolumn",l.down("[name=hidecolumn]").getValue()?"T":"F");e.set("timeformat",l.down("[name=timeformat]").getValue());if(b=="Measure"||b=="FormulaMeasure"||b=="MeasureGroup"){e.set("activeformula",null)}}if(l.callback){l.callback.execute()}l._IG0()},_IFd:function(){var n=this;n.formulas=[];if(n.item){var l=n.item.sortorder||"",m=n.down("[name=optsortdir]"),a=n.item.memo||"",g=n.down("[name=optsorttype]"),e=n.down("[name=aggrfunc]"),h=n.down("[name=disp_title]"),b=n.down("[name=timeformat]"),d=n.down("[name=hidecolumn]"),f,j,c=n.item.itemtype;m.setValue({cb_sortdir:[l]});g.setValue({cb_sorttype:[a]});e.setValue(n.item.aggrfunc||"");h.setValue(n.item.disp_title||"");b.setValue(n.item.timeformat||"");d.setValue(n.item.hidecolumn=="T");if(n._ILb&&n._ILb.Xsf){j=n._ILb.Xsf;for(f=0;f<j.length;f++){if(j[f].baseuid==n.item.uid){n.formulas.push(j[f])}}n.down("[name=grd_formula]").store.loadData(n.formulas)}}},m1$20:function(e){var c=this,a=c._ILb.Xsf,b=c.item,d=new IG$._IEF({pR:c,pS:c._ILb,pF:a,pI:b,pCC:e,callback:new IG$._I3d(c,function(l){var g,h=this,j=a;for(g=j.length-1;g>=0;g--){if(j[g].baseuid==b.uid){j.splice(g,1)}}for(g=0;g<l.length;g++){j.push(l[g])}h.down("[name=grd_formula]").store.loadData(l)})});d.show()},initComponent:function(){var c=this,a,d=c.item,b=(d)?d.itemtype:null;$s.apply(this,{title:IRm$.r1("T_METRIC_SETTING"),items:[{xtype:"panel",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SORT_SEL"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:IRm$.r1("L_SORT_ORD"),plain:true,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sortdir",inputValue:"",checked:true},{boxLabel:IRm$.r1("B_ASC"),name:"cb_sortdir",inputValue:"asc"},{boxLabel:IRm$.r1("B_DSC"),name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:IRm$.r1("L_SORT_TP"),plain:true,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sorttype",inputValue:"",checked:true},{boxLabel:IRm$.r1("B_STRING"),name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:IRm$.r1("B_NUMERIC"),name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),layout:"anchor",$w:400,defaults:{anchor:"100%",$w:400},items:[{xtype:"textfield",name:"disp_title",fieldLabel:IRm$.r1("L_DISP_TITLE")},{xtype:"checkbox",name:"hidecolumn",fieldLabel:IRm$.r1("L_COL_VIS"),boxLabel:IRm$.r1("B_HIDE")},{xtype:"textfield",name:"timeformat",fieldLabel:IRm$.r1("L_TIME_FMT")},{xtype:"displayfield",value:IRm$.r1("L_TIME_FMT_DSC")}]},{xtype:"fieldset",title:IRm$.r1("L_AGGR"),layout:"anchor",hidden:c.item.type=="Metric"&&c.loc=="mea"?false:true,defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"aggrfunc",fieldLabel:IRm$.r1("L_FUNC"),displayField:"name",valueField:"value",queryMode:"local",editable:false,store:{xtype:"store",fields:["name","value"],data:[{name:"Not Use",value:""},{name:"Sum values",value:"SUM"},{name:"Count rows",value:"COUNT"},{name:"Distinct count",value:"COUNT_DISTINCT"},{name:"Minimum",value:"MIN"},{name:"Maximum",value:"MAX"},{name:"Average",value:"AVG"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_FORMULA"),layout:"fit",height:160,items:[{xtype:"gridpanel",border:0,name:"grd_formula",bbar:[{text:"Config Formula",handler:function(){this.m1$20()},scope:this}],store:{xtype:"store",fields:["title","expression","baseuid","fid"]},columns:[{text:"Name",flex:1,dataIndex:"title"},{text:"Expression",flex:1,dataIndex:"expression"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(g,j,f){var e=g.store,h=e.getAt(j);this.m1$20(h)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,l,n){var m=e.store,g=m.getAt(l),j=c._ILb.Xsf,h,o=g.get("baseuid"),f=g.get("fid");m.removeAt(l);for(h=0;h<j.length;h++){if(j[h].baseuid==o&&j[h].fid==f){j.splice(h,1);break}}}}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._IFd()}}});IG$._Ic1.superclass.initComponent.apply(this,arguments)}});IG$._Ic4=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:480,height:430,callback:null,_IG0:function(){this.close()},_IFf:function(){var o=this;if(o.item){var g,n=o.down("[name=cb_sortdir]"),l=n.getGroupValue(),q=o.down("[name=cb_sorttype]"),b=o.down("[name=cb_sorttype]").getGroupValue(),f=o.down("[name=optstyle]"),m=o.down("[name=optremoveblank]"),a=o.down("[name=isdatetype]"),s=o.down("[name=dateformat]"),e=IG$._I4c,j={},h="",d,c;o.item.sortorder=(l=="")?null:l;o.item.sorttype=(b=="")?null:b;o.item.removeblank=m.getValue();o.item.itemstyle=f.getValue();o.item.isdatetype=a.getValue();o.item.dateformat=s.getValue();for(g=0;g<e.length;g++){if(o.down("[name=datediv_"+e[g].name+"]").getValue()==true){h=(h=="")?e[g].name:h+";"+e[g]}}o.item.dateitems=h;o.item.datecustom=o.down("[name=customdatetype]").getValue()}o.callback&&o.callback.execute(o.item);o._IG0()},_IFd:function(){var a=this;a.formulas=[];if(a.item){a.a1()}},a1:function(){var m=this,g,h=m.item.sortorder||"",l=m.down("[name=optsortdir]"),b=m.item.sorttype||"",f=m.down("[name=optsorttype]"),e=m.down("[name=optstyle]"),j=m.down("[name=optremoveblank]"),a=m.down("[name=isdatetype]"),n=m.down("[name=dateformat]"),d=IG$._I4c,c;l.setValue({cb_sortdir:[h]});f.setValue({cb_sorttype:[b]});j.setValue(m.item.removeblank||false);a.setValue(m.item.isdatetype||false);n.setValue(m.item.dateformat||"");if(m.item.itemstyle){e.setValue(m.item.itemstyle)}else{e.setValue("")}if(m.item.dateitems){c=m.item.dateitems.split(";");for(g=0;g<c.length;g++){m.down("[name=datediv_"+c[g]+"]").setValue(true)}}m.down("[name=customdatetype]").setValue(m.item.datecustom||"")},cdt:function(){var c=this,a=c.down("[name=dateformat]"),b="";a.setValue(b)},initComponent:function(){var a,c=this,b=[];c.title=IRm$.r1("T_METRIC_SETTING");b.push({name:"-Item Default-",value:""});if(c.styles&&c.styles.length>0){for(a=0;a<c.styles.length;a++){b.push({name:c.styles[a].name,value:c.styles[a].name})}}$s.apply(c,{bodyStyle:"padding:5px; background: #ffffff",border:0,items:[{xtype:"panel",layout:"anchor",padding:"5 5",border:0,autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:"Sorting",layout:"anchor",padding:"0 5",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:"Sort Direction",padding:"0 5",plain:true,items:[{boxLabel:"Default",name:"cb_sortdir",inputValue:"",checked:true},{boxLabel:"Ascending",name:"cb_sortdir",inputValue:"asc"},{boxLabel:"Descending",name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:"Sort Type",padding:"0 5",plain:true,items:[{boxLabel:"Default",name:"cb_sorttype",inputValue:"",checked:true},{boxLabel:"String",name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:"Numeric",name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:"Style",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"optstyle",fieldLabel:"Base style",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:b}}]},{xtype:"fieldset",title:"Other options",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"checkbox",name:"optremoveblank",boxLabel:"Ignore blank value"},{xtype:"checkbox",name:"isdatetype",boxLabel:"Date type field",listeners:{change:function(m,g,n,j){var l=this,e=m.getValue(),d=l.down("[name=datedivision]"),h=l.down("[name=customdatetypecontainer]"),f=l.down("[name=datediv_CUSTOM]");d.setVisible(e);if(e==true&&f.getValue()==true){h.setVisible(true)}else{h.setVisible(false)}},scope:this}},{xtype:"fieldcontainer",fieldLabel:"Date format",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dateformat",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}}]}}]}]},{fieldLabel:IRm$.r1("L_GROUP_LEVEL"),name:"datedivision",hidden:true,xtype:"checkboxgroup",columns:3,plain:true,items:[{boxLabel:IRm$.r1("B_YEAR"),name:"datediv_YYYY",inputValue:"YYYY"},{boxLabel:IRm$.r1("B_QUARTER"),name:"datediv_QUARTER",inputValue:"QUARTER"},{boxLabel:IRm$.r1("B_MONTH"),name:"datediv_MM",inputValue:"MM"},{boxLabel:IRm$.r1("B_DAY"),name:"datediv_DD",inputValue:"DD"},{boxLabel:IRm$.r1("B_WEEKMONTH"),name:"datediv_WM",inputValue:"WM"},{boxLabel:IRm$.r1("B_WEEK"),name:"datediv_WEEK",inputValue:"WEEK"},{boxLabel:IRm$.r1("B_AMPM"),name:"datediv_AMPM",inputValue:"AMPM"},{boxLabel:IRm$.r1("B_HOUR"),name:"datediv_HH",inputValue:"HH"},{boxLabel:IRm$.r1("B_MINUTE"),name:"datediv_MI",inputValue:"MI"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"datediv_CUSTOM",inputValue:"CUSTOM",listeners:{change:function(h,j,g,d){var f=h.getValue(),e=this.down("[name=customdatetypecontainer]");e.setVisible((f==true?true:false))},scope:this}}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_CUSTOM"),name:"customdatetypecontainer",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"customdatetype",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}}]}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._IFd()}}});IG$._Ic4.superclass.initComponent.apply(this,arguments)}});