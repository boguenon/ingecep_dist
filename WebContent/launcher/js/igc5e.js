IG$._IA7=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:500,height:400,callback:null,_IG0:function(){this.close()},_IFd:function(){var d=this,b=d.down("[name=outputtype]"),c=d.down("[name=p_page]"),e=d.down("[name=n_page]"),a=d.mresult;if(a&&a.rows>a.data.length){e.setValue("Partial page start "+(a.pagestart+1)+" to "+(a.pageend+1));c.show()}b.setValue("comma");d.l2()},l1:function(){var a=this;a.l2()},l2:function(){var x=this,a=x.down("[name=outputtype]"),h=x.down("[name=textoutput]"),g=x.down("[name=tableoutput]"),c=x.down("[name=btntableview]"),w=x.mresult,y=(w&&w.data&&w.data.length>0)?w.data:null,b=[],e=a.getValue(),s=$(g.body.dom),q,o,m,d,v=",",l=false,u="",n=false;if(y){switch(e){case"tab":v="\t";break;case"comma":u='"';break;case"rawcomma":l=true;break;case"rawtab":l=true;v="\t";break;case"table":n=true;break}if(n==false){c.setVisible(false);for(q=0;q<y.length;q++){m="";for(o=0;o<y[q].length;o++){d=u+((l==true)?(y[q][o].code||""):(y[q][o].text||y[q][o].code||""))+u;m=(o==0)?d:m+v+d}b.push(m)}}else{c.setVisible(true);c.setValue(false);b.push("<table>");for(q=0;q<y.length;q++){m="<tr>";for(o=0;o<y[q].length;o++){d="<td>"+(y[q][o].text||y[q][o].code||"&nbsp;")+"</td>";m+=d}b.push(m+"</tr>")}b.push("</table>");s.empty();s.html(b.join(""))}}h.setVisible(true);g.setVisible(false);h.setValue(b.join("\n"))},l3:function(){var d=this,b=d.down("[name=outputtype]"),c=d.down("[name=textoutput]"),e=d.down("[name=tableoutput]"),a=d.down("[name=btntableview]"),g=a.getValue();c.setVisible(!g);e.setVisible(g)},g1:function(){var c=this,b=c.sheetview,a=c.mresult,d;d=b._ILa._IJ1();c.setLoading(true);b._IK9._IKb.call(b._IK9,d,null,b.sheetindex,null,0,a.rows+10,new IG$._I3d(c,function(h){var e=this,g=e.down("[name=n_page]");e.setLoading(false);if(h&&!h.iserror&&h.mresults&&h.mresults.results.length){e.mresult=h.mresults.results[0];g.setValue("Data Fetched... "+(e.mresult.data.length)+" Rows");e.l2()}else{g.setValue("Error while fetching data from server..")}}),b._job,true,true)},initComponent:function(){var a=this;a.title=IRm$.r1("L_CLIPBOARD_COPY");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",bodyBorder:false,layout:{type:"vbox",align:"stretch"},items:[{name:"outputtype",xtype:"combobox",fieldLabel:"Output type",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"Tab separated",value:"tab"},{name:"Comma separated",value:"comma"},{name:"Raw data (Tab)",value:"rawtab"},{name:"Raw data (Comma)",value:"rawcomma"},{name:"HTML Table format",value:"table"}]},listeners:{change:function(e,b,d,c){a.l1.call(a)}}},{xtype:"fieldcontainer",name:"p_page",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"n_page",value:"-",flex:1},{xtype:"button",text:"Fetch All",handler:function(){this.g1()},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"displayfield",value:"Press Ctrl-A then Ctrl-C to copy this content to clipboard!",flex:1},{xtype:"checkbox",name:"btntableview",boxLabel:"Show HTML",hidden:true,flex:1,listeners:{change:function(d,e,c,b){a.l3.call(a)}}}]},{xtype:"textarea",name:"textoutput",flex:1},{html:"",collapsible:false,bodyStyle:"padding: 5px",name:"tableoutput",hidden:true,autoScroll:true,flex:1}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._IA7.superclass.initComponent.apply(this,arguments)}});IG$._IPc=IG$.x_c(IG$.pb,{uid:null,name:"sheet",layout:"card",autoScroll:false,bodyBorder:false,scroll:false,_IK2:null,_ILa:null,_ILb:null,activeView:-1,_IL5:false,layoutcomplete:false,border:0,m1:null,_IFf:function(c){var d=this,a=d._ILb,b,e=d,g=true;b=a.needPrompt.call(a);if(b&&b.length>0){e._IKd&&e._IKd.setVisible(true);e.showPrompt.call(e,b)}else{if(g==true){e._IKd&&e._IKd.setVisible(false)}}!c&&d._IK2&&d._IJ2()},_l1:function(b){var a=this;clearTimeout(a.__s1);a.__s1=setTimeout(function(){var c=b<20?0:b-20;a._IP7.call(a,c,c+200,true)},100)},Uc:function(b){var d=this,a=d._ILb,c;c=a?a.Uc.call(a,b):true;if(c){a.cubeuid=b}},__r1:function(l,o,n){var z=this,B,b,v,e,a=z._ILb,w,c=n?n.cell:null,d=n?n.row:null,u,s,q,m,g=z._IK2&&z._IK2.results.length?z._IK2.results[0]:null,A=g?g.data:null,y,t,x;z._IIf(true,true);z._IJf=true;z._IK1=true;z._IK1a=true;if(z._IK9&&z._IK9._IL8){v=z._IK9._IL8;e="<smsg><item uid='"+(z.uid||"")+"' option='pivot' active='"+z.sheetindex+"' pivotresult='T' jobid='"+(v||"")+"'>";e+="<option source='"+(n.source||"map")+"' zoom='"+n.zoom+"'>";if(n.bound){e+="<bound x1='"+n.bound.x1+"' y1='"+n.bound.y1+"' x2='"+n.bound.x2+"' y2='"+n.bound.y2+"'/>"}else{if(n.source=="hierarchy"){if(c.position==1){w=a.rows[c.index]}e+="<hierarchy uid='"+w.uid+"' depth='"+c.celltree.depth+"'>";if(g){e+="<headers n='"+g.rowfix+"' c='"+(g.cols-g.colfix)+"'>";for(u=g.colfix;u<g.cols;u++){e+="<col n='"+(u-g.colfix)+"'>";t="";for(s=0;s<g.rowfix;s++){y=g.data[s][u];x=(y.code||"")+"_"+(y.index)+"_"+y.position;t=(s==0)?x:t+":"+x}e+="<![CDATA["+t+"]]>";e+="</col>"}e+="</headers>"}e+="<values>";e+="<value type='D' depth='"+c.celltree.depth+"'>";e+="<code><![CDATA["+c.code+"]]></code>";e+="<text><![CDATA["+c.text+"]]></text>";e+="</value>";m=c.celltree.parent;while(m){e+="<value type='D' depth='"+m.celltree.depth+"'>";e+="<code><![CDATA["+m.code+"]]></code>";e+="<text><![CDATA["+m.text+"]]></text>";e+="</value>";m=m.celltree.parent}if(c.index>0){for(u=0;u<c.index;u++){for(s=0;s<d.length;s++){if(d[s].position==1&&d[s].index==u){q=d[s];e+="<value type='C' uid='"+a.rows[u].uid+"'>";e+="<code><![CDATA["+q.code+"]]></code>";e+="<text><![CDATA["+q.text+"]]></text>";e+="</value>"}}}}e+="</values>";e+="</hierarchy>"}}e+="</option>";e+="</item></smsg>";B="<smsg></smsg>";b=new IG$._I3e();b.init(z,{ack:"18",payload:e,mbody:B},z,function(h){z._IK9.r_IKb.call(z._IK9,h,[null,z.sheetindex,null,null,null,null,null,c])});b._l()}},CLS:{afterrender:function(){var a=this;a.layoutcomplete=true;a._IFd()},resize:function(b,l,j,c){var g=this,a=b.getWidth(),e=b.getHeight();if(a==0||e==0){var d=$(b.body.dom);a=b.width;e=b.height;if(d){IG$.x_10._w(d,a);IG$.x_10._h(d,e)}}if(a>0&&e>0){if(g.loadMask&&g.rendermask){g._IIf(true)}else{if(g.loadMask){g.setLoading(true)}}}}},_IFd:function(){var b=this,a;if(b.rst){a=b._ILb.viewmode;b._d(a,b.rst);if(IG$.__ep){if(a=="grid"){}}}else{if(b._IL5==true){b._IJ2()}}},_d:function(b,a){this._IJe(a)},_IOf:function(){var d=this,c=false,b,a;if(d.m1&&d.m1.length>0){b=d.m1.pop();switch(b.type){case"remove":b.target.splice(b.index,0,b.item);break;case"add":if(b.item){d._IP1(b.item)}break;case"measurelocation":d._ILb.measureposition=b.measureposition;d._ILb.measurelocation=b.measurelocation;break;case"move":if(b.item&&b.plocation&&b.pindex>-1){a=d._IP1(b.item);if(a){b.plocation.splice(b.pindex,0,a)}}break;case"property":b.item[b.name]=b.value;break}c=true}return c},_II9:function(b){var a=this,c;switch(b){case"chart":c=1;break;case"r":c=2;break;case"d":c=3;break;case"python":c=4;break;default:c=0;break}if(c==3){a.setActiveItem(0)}a._ILb.viewmode=(c==3?a._ILb.viewmode:b);a._cv(c)},_IP0:function(){var a="";return a},_IP1:function(g){var e=this,c,b=e._ILb,d=false,a=null;for(c=0;c<b.rows.length;c++){if(b.rows[c].uid==g.uid){d=true;a=b.rows[c];b.rows.splice(c,1);break}}if(d==false){for(c=0;c<b.cols.length;c++){if(b.cols[c].uid==g.uid){d=true;a=b.cols[c];b.cols.splice(c,1);break}}}if(d==false){for(c=0;c<b.measures.length;c++){if(b.measures[c].uid==g.uid){d=true;a=b.measures[c];b.measures.splice(c,1);break}}}return a},_IP2:function(a){var b=this;b.m1=(b.m1==null)?[]:b.m1;b.m1.push(a)},_IL7:function(a){var c=this,b="";if(c.activeView==0){b=c._IH6._IL7.call(c._IH6,a)}else{if(c.activeView==1){b=c._IH7._IL7.call(c._IH7,a)}else{if(c.activeView==2){b=c._IH8._IL7.call(c._IH8,a)}else{if(c.activeView==3){b=c._IH8a._IL7.call(c._IH8a,a)}}}}return b},_IP3:function(){var b=this,a=null;if(b.activeView==0){a=b._IH6._IP3.call(b._IH6)}return a},_IP4:function(c,a,e){var b=this,d;if(b.activeView==3){return}b._IIf(true,true);b._IJf=true;b._IK1=true;b._IK1a=true;if(b._job&&b._job.sid&&b._job.jid){if(!b._IK9){b._IK9=new IG$._IKa();b._IK9.ctrlsource="report";b._IK9.panel=b;b._IK9.uid=b.uid;b._IK9.sheet=null;b._IK9.chart=null}b._IK9._ILa=b._ILa}if(b._IK9&&(b._IK9._IL8||b._job)){d=b._ILa._IJ1();b._IK9._IKb.call(b._IK9,d,null,b.sheetindex,null,c,a,null,b._job,e)}else{b._IJ2()}},_IIf:function(h){if(h==true){var d=this,a,g,e,c,b=d._ILa;if(b&&b.ploader){d.fireEvent("_ld_",d)}else{e={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"};c=d.setLoading(e);g=$(d.rendermask);a=$("#m-mec-loader",g).bind("click",function(){d._IP5.call(d)})}}},_IP5:function(){var a=this,b=new IG$._I3e();if(a.jobid){b.init(a,{ack:"18",payload:"<smsg><item jobid='"+a.jobid+"' option='cancel'/></smsg>",mbody:"<smsg></smsg>"},a,a.r_IP5,null);b.showerror=false;b._l()}},r_IP5:function(a){var b=this,c=IG$._I18(a,"/smsg"),d=c?IG$._I1b(c,"status"):null;if(d=="S"){b.setLoading(false)}},getResultSet:function(){return this._IK2&&this._IK2.results?this._IK2.results:null},_IJe:function(d){var c=this,a=c._ILb,b=a?a.viewmode:"grid";c._job=d._job;if(c._ILa&&c._ILa.iscomposite==true){viewmode="grid";c._ILa._IK2=d}else{viewmode=c._ILb.viewmode;a._IK2=d}c._IK2=d;var e=c.activeView;c._IJf=true;c._IK0=true;c._IK1=true;c._IK1a=true;if(viewmode=="grid"){if(e!=0&&e!=3&&c._cv){if(c._IK3&&c._IK3._IK4){c._IK3._IK4.call(c._IK3)}c._cv.call(c,0)}else{c._IK5(c,c.sheetindex)}}else{if(viewmode=="chart"){if(e!=1&&e!=3&&c._cv){if(c._IK3&&c._IK3._IK6){c._IK3._IK6.call(c._IK3)}c._cv(1)}else{c._IP8(c,c.sheetindex)}}else{if(viewmode=="r"){if(e!=2&&e!=3&&c._cv){if(c._IK3){c._IK3._IK4.call(c._IK3);c._IK3._IK7.call(c._IK3,true)}c._cv(2)}else{c._IK8(c,c.sheetindex)}}else{if(viewmode=="python"){if(e!=3&&c._cv){if(c._IK3){c._IK3._IK4.call(c._IK3)}c._cv(4)}else{c._IK8a(c,c.sheetindex)}}}}}c.fireEvent("result_loaded",c);c._refresh_timer&&clearTimeout(c._refresh_timer);if(c._ILb&&c._ILb.autorefresh&&c._ILb.refresh_timer>1){c._refresh_timer=setTimeout(function(){c._IJ2(null,null,1)},c._ILb.refresh_timer*1000)}},_b1:function(){var a=this;if(a._ILb&&a._ILb.viewmode=="python"){if(a._IH8a){a._IH8a._do_edit(0)}}},_IJ2:function(b,j,o){var g=this,a,n,q,d,e,m,c,l=0;delete g.btabrun;clearTimeout(g._refresh_timer);g.__el=1;if(!o||(o&&g._ILa&&!g._ILa.phideloader)){l=1;g._IIf(true,true)}m=g.getWidth();c=g.getHeight();g._IJf=true;g._IK1=true;g._IK1a=true;if(!g._IK9){g._IK9=new IG$._IKa();g._IK9.ctrlsource="report";g._IK9.panel=g;g._IK9.uid=g.uid;g._IK9.sheet=null;g._IK9.chart=null}g._IK9._IL8=(b)?b:null;if(g._ILa){g._ILa._dfilter=g._dfilter;g._IK9._ILa=g._ILa;if(g._ILa.iscomposite==false){d=g._ILa.sheets[g.sheetindex];e=d.needPrompt.call(d)}if(j!==true&&e&&e.length>0){g.setLoading(false);g.showPrompt(e)}else{n=g._ILa._IJ1();q=g._ILb.viewmode;if(g._IK9&&g._IK9._IL8){g._IK9._IKb.call(g._IK9,n,null,g.sheetindex)}else{if(g._IK9){g._IK9._IJ0.call(g._IK9,n,q,g.sheetindex,g,null,!l)}}}}else{g.setLoading(false)}},showPrompt:function(a){var b=this;b._IKd.sheetindex=""+b.sheetindex;b._IKd._ILa=b._ILa;b._IKd.prompts=a;b._IKd._IFd.call(b._IKd);b._IKd.setVisible(true)},rs_showPrompt:function(){this._IJ2(null,true)},_IK5:function(b,e){var j=this,h,d,g,a,l,c;j.a1();if(j._IH6&&j._IK0==true&&j._IK2){c=j._IKe();j._IK0=false;j._IH6._IL0.call(j._IH6);j._IH6._IKc.call(j._IH6,b._IK2,b._IK9,b._ILa,b._ILb,c);if(IG$.__ep){l=j._IH6.G1._0x030;h=l.twidth+l.fixedColWidth;d=l.theight+l.fixedRowHeight;g=l.cwidth;a=l.cheight;if(h>0&&d>0&&(h>g||d>a)){j.fireEvent("cresized",j,{tw:h,th:d,cw:g,ch:a})}}}},_IKe:function(){var e=this,b=false,a=e._ILb,c=e.down("[name=pagepanel]"),d;if(a.usepaging=="T"&&e._IK2&&e._IK2.results&&e._IK2.results.length==1){d=e._IK2.results[0];if(d.pagestart>0||d.pageend<d.rows){b=true}}if(b==true){e._IKf()}else{c.setVisible(false)}return b},exportSheet:function(a){var b=this;b.fireEvent("export_sheet",b,{filetype:a})},_IP6:function(){var c=this,b=new IG$._I3e(),e=c._ILa.name+" "+(c._ILb.title||"sheet"),a="csv",d=c._IK9?c._IK9._IL8:"";e=e.replace(/\./g,"_");e=e.replace(/ /g,"");e=e+".csv";if(d){c.setLoading(true);b.init(c,{ack:"20",payload:"<smsg><item uid='"+c.uid+"' jobid='"+d+"' type='"+a+"' filename='"+e+"' option='instanceload'/></smsg>",mbody:"<smsg></smsg>"},c,c.r_IB3,null,e);b._l()}},_Ip7:function(){var b=this,c=b._IK9?b._IK9._IL8:"",a;if(c){if(IG$.bA_2){b._Ip7A.call(b,c)}else{a=ig$.scmap.igc9;IG$.x03(a,new IG$._I3d(this,function(){if(IG$.bA_2){b._Ip7A.call(b,c)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}}},_Ip7A:function(d){var b=this,a=new IG$._I3e(),c;c=new IG$.bA_2({jobid:d,fname:b._ILa.name+" "+(b._ILb.title||"sheet")});c.show()},r_IB3:function(a,e){var c=this,d=IG$._I18(a,"/smsg/info"),b,e;c.setLoading(false);if(IG$._I1b(d,"status")=="complete"){b=IG$._I1b(d,"downloadurl");e=IG$._I1b(d,"filename")||e;$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"_mts_",value:IG$._g$a||""},{name:"payload",value:b},{name:"mbody",value:e}],"POST")}},_IKf:function(){var z=this,h=z.down("[name=pagepanel]"),v=$("#idv-pgview",h.body.dom),g=z._IK2.results[0],t,s,j,b=z._ILb,o=b.rowperpage,u=b.pagestyle||"p10",w,l,n,A,e=g.pagestart,x,y=10,q=[],a,m;v.empty();if(u=="p10"){y=10}else{if(u=="p5"){y=5}}a=$("<div class='idv-pglist'></div>").appendTo(v);x=$("<ul></ul>").appendTo(a);j=g.rows-g.rowfix;s=Math.ceil(j/o);if(s>1&&b.usepaging=="T"){h.setVisible(true);l=Math.floor(e/o);m=$("<div class='idv-pg-dwn-csv' title='Download data in CSV'></div>").appendTo(v);m.bind("click",function(){z._IP6.call(z)});if(u=="button2"){if(l>0){var c=$("<li><span>&lt;&lt;</span></li>").appendTo(x);c.bind("click",function(){var B=(l-1)*o;z._IP7.call(z,B)})}$("<li><span>"+(l+1)+" / "+s+" pages</span></li>").appendTo(x);if(l+1<s){var d=$("<li><span>&gt;&gt;</span></li>").appendTo(x);d.bind("click",function(){var B=(l+1)*o;z._IP7.call(z,B)})}}else{A=Math.floor(l/y)*y;n=A+y;n=Math.min(s,n);if(A>0){var c=$("<li><span>&lt;&lt;</span></li>").appendTo(x);c.bind("click",function(){var B=(A-1)*o;z._IP7.call(z,B)})}for(t=A;t<n;t++){q.push(t)}$.each(q,function(D,E){var B=(E+1);var C=$("<li"+(E==l?" class='active'":"")+"><span>"+B+"</span></li>").appendTo(x);if(E!=l){C.bind("click",function(){var F=E*o;z._IP7.call(z,F)})}});if(n<s){var d=$("<li><span>&gt;&gt;</span></li>").appendTo(x);d.bind("click",function(){var B=n*o;z._IP7.call(z,B)})}}}else{h.setVisible(false)}},_IP7:function(b,a,e){var d=this,c;d._IP4(b,a,e)},r_ILd:function(a,b){},_IP8:function(b,j){var g=this,d,a,e,c=[],l;g.a1();if(g._IJf==true){l=g._IKe();g._IJf=false;if(g._IH7){g._IH7._IL0.call(g._IH7);g._IH7._IKc.call(g._IH7,b._IK2,b._IK9,b._ILa,b._ILb,l)}}},_IK8:function(a,c){var b=this;if(b._IK1==true){b._IKe();b._IK1=false;b.a1(true);b._IH8._IKc.call(b._IH8,a._IK2,a._IK9,a._ILa,a._ILb)}else{b.a1()}},_IK8a:function(a,c){var b=this;if(b._IK1a){b._IKe();b._IK1a=false;b.a1(true);b._IH8a._IKc.call(b._IH8a,a._IK2,a._IK9,a._ILa,a._ILb)}else{b.a1()}},a1:function(b){var e=this,a=b?true:false,d=e._ILb,g;if(!a&&e._IK2&&e._IK2.results.length>0&&((e._IK2.results.length==1&&e._IK2.results[0].m1==false)||e._IK2.results.length>1)){a=true}else{if(d&&d.mdf&&e._IK2&&e._IK2.results.length>0){for(var c in d.mdf){g=d.mdf[c];if(g&&g.op){a=true;break}}}}e.setActiveItem(a||e.activeView==3?0:1)},_cv:function(b){var e=this,d=e.a2_,a=d.getWidth(),c=d.getHeight();e.activeView=b;e.a1();switch(b){case 0:if(!e._IH6){e._IH6=new IG$.rp$R({layout:"fit",sheetobj:this,width:a,height:c,flex:1,html:"",_ILa:e._ILa,_ILb:e._ILb,listeners:{drillreport:function(g){var h=this;h.fireEvent("drillreport",h)},itemclick:function(g,j){var h=this;h.fireEvent("itemclick",h,j)},itemdblclick:function(g,j){var h=this;h.fireEvent("itemdblclick",h,j)},menu:function(g,h){var j=this;j.fireEvent("menu",j,h)},pivotchanged:function(g){var h=this;h.fireEvent("pivotchanged",h)},scroll_request:function(g,l){var j=this,h=l;h=(h-50)>0?h-50:h;j._l1.call(j,h)},request_data:function(h,g,j){var l=this;l.__r1.call(l,h,g,j)},hierarchy:function(g,h){var l=this,j={source:"hierarchy",cell:h.cell,row:h.row};l.__r1.call(l,g,null,j)},scope:this}});d.add(e._IH6)}break;case 1:if(!e._IH7){e._IH7=new IG$.rp$C({layout:"fit",flex:1,html:"",width:a,height:c,frame:false,margins:"0 0 0 0",cmargins:"0 0 0 0",_IPb:this,showtoolbar:true,listeners:{drillreport:function(g){var h=this;h.fireEvent("drillreport",h)},itemclick:function(g,j){var h=this;h.fireEvent("itemclick",h,j)},itemdblclick:function(g,j){var h=this;h.fireEvent("itemdblclick",h,j)},menu:function(g,h){var j=this;j.fireEvent("menu",j,h)},pivotchanged:function(g){var h=this;h.fireEvent("pivotchanged",h)},scroll_request:function(g,j){var h=this;h._l1.call(h,j)},request_data:function(h,g,j){var l=this;l.__r1.call(l,h,g,j)},hierarchy:function(h,g){var j=this;j.__r1.call(j,h,cview,option)},scope:this}});d.add(e._IH7)}break;case 2:if(!e._IH8){e._IH8=new IG$.rp$RR({layout:"fit",flex:1,width:a,height:c,sheetobj:this,_ILa:e._ILa,_ILb:e._ILb});d.add(e._IH8)}break;case 3:if(!e._IH9){e._IH9a=new IG$.pb({bodycls:"igc-peditor"});d.add(e._IH9a)}break;case 4:if(!e._IH8a){e._IH8a=new IG$.rp$RPa({layout:"fit",flex:1,width:a,height:c,sheetobj:this,_ILa:e._ILa,_ILb:e._ILb});d.add(e._IH8a)}break}e._IH6&&e._IH6.setVisible(b==0?true:false);e._IH7&&e._IH7.setVisible(b==1?true:false);e._IH8&&e._IH8.setVisible(b==2?true:false);e._IH9a&&e._IH9a.setVisible(b==3?true:false);e._IH8a&&e._IH8a.setVisible(b==4?true:false);if(e.activeView==0){e._IK0==true&&e._IK5(e)}else{if(e.activeView==1){e._IJf==true&&e._IP8(e)}else{if(e.activeView==2){e._IK1==true&&e._IK8(e)}else{if(e.activeView==4){e._IK1a==true&&e._IK8a(e)}}}}},_IP9:function(b,a){var c=this;c._ILa=b;c._ILb=a;c._IH6._IP9(b,a);c._IH7._IP9(b,a)},_IN0:function(){var b=this,d=b._IH6,c=b._IH8,a=b._IH8a;d&&d._IN0.call(d,b._ILa,b._ILb);c&&c._IN0.call(c,b._ILa,b._ILb);a&&a._IN0.call(a,b._ILa,b._ILb)},_ILd:function(a){},_ILc:function(g){var q=this,d,e,a,l,o,s,t,m,h,n,a,c,b=(q._ILb)?q._ILb._IL9:null;filter=(q._ILb)?q._ILb.filter:null;if(b){for(e in b){a=b[e];d=IG$._I13(a);l=IG$._I18(d,"/FilterData");if(l){s=IG$._I26(l);for(m=0;m<s.length;m++){t=IG$._I26(s[m]);for(h=0;h<t.length;h++){c=IG$._I1c(t[h]);n=g[c.name]=g[c.name]||{data:[],p:{}};a=IG$._I1a(t[h],"value")||IG$._I1a(t[h],"code")||"";if(a!=""&&!n.p[a]){n.data.push(a);n.p[a]=1}}}}}}if(filter){q._IPa(filter,g)}},_IPa:function(b,e){var n=this,l,h,g,d,c,m,a;if(b&&b.subConditions&&b.subConditions.length>0){for(l=0;l<b.subConditions.length;l++){d=b.subConditions[l];if(d&&d._d6&&d._d6.length>0){c=d._d6[0].name;m=e[c]=e[c]||{data:[],p:{}};if(d.values){for(h=0;h<d.values.length;h++){a=d.values[h].text||d.values[h].code||"";if(a!=""&&!m.p[a]){m.data.push(a);m.p[a]=1}}}}}}if(b&&b.subGroups&&b.subGroups.length>0){for(l=0;l<b.subGroups.length;l++){g=b.subGroups[l];n._IPa(g,e)}}},_IIe:function(){var a=this;a._IK0=true;a._IJf=true;a._IK1=true;a._IK1a=true;a.activeView=-1;a._IH6&&a._IH6.setVisible(false);a._IH7&&a._IH7.setVisible(false);a._IH8&&a._IH8.setVisible(false);a._IH9a&&a._IH9a.setVisible(false);a._IH8a&&a._IH8a.setVisible(false)},_ic:function(){var a=this;a.on("afterrender",function(){a.CLS.afterrender.call(a);var b=a.getWidth(),c=a.getHeight();a.rzone=a.down("[name=rzone]");a.a2_=a.down("[name=a2_]");a.a3=a.down("[name=noresultpanel]");a.setActiveItem(1)});IG$.apply(this,{items:[{xtype:"container",name:"rzone",deferredRender:false,layout:"fit",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,name:"a2_",layout:"fit",border:0},{xtype:"container",name:"pagepanel",html:"<div id='idv-pgview' class='idv-pgview'>Page view</div>",hidden:true,height:25}],region:"center",flex:1}]},{xtype:"container",name:"noresultpanel",deferredRender:false,html:"<div class='igc-no-results'><div class='no-result-msg'>"+(IRm$.r1("B_NO_DATA")||"No Results")+"</div></div>"}]});IG$._IPc.superclass._ic.call(this)}});IG$._Ibb=IG$._Ibb||{};$s.apply(IG$._Ibb,{_INf:function(a){var e=this,d=a,c=d.sheetindex,b;e._IO0(d);if(d._ILb.isdrillreport==true){return false}e._ine_t&&clearTimeout(e._ine_t);e._ine_t=setTimeout(function(){e._IL6.call(e,c,d)},500);return b},F:function(view,m,cl){var me=this;me._ine_t&&clearTimeout(me._ine_t);me._ine_t=setTimeout(function(){var drillfilter,dobj={titem:{enabled:false,item_map:{},items:[]},tparams:{enabled:false,item_map:{},items:[]},_dall:true},paux,auxfilter={},req,exportdata;drillfilter=view._IL7.call(view,dobj);if(drillfilter){paux=view._ILb._IL9;if(paux){for(var k in paux){auxfilter[k]=paux[k]}}auxfilter["report_"+view.sheetindex]=drillfilter;exportdata=["<smsg><item><auxfilter>"];for(var key in auxfilter){exportdata.push(auxfilter[key])}exportdata.push("</auxfilter></item></smsg>");view.setLoading.call(view,true,false);req=new IG$._I3e();req.init(me,{ack:"20",payload:"<smsg><item "+IG$._I20(m,"uid;type","s")+" option='LINK_FIELD'/></smsg>",mbody:exportdata.join("")},me,function(xdoc){view.setLoading.call(view,false);var tnode=IG$._I18(xdoc,"/smsg/item"),act=(tnode?IG$._I1b(tnode,"action"):null),dnode,fileuid,fileext,fname,dview,durl;if(act=="DOC"){dnode=IG$._I18(tnode,"info");if(dnode){fileuid=IG$._I1b(dnode,"downloadurl");fileext=IG$._I1b(dnode,"fileext");fname=IG$._I1b(dnode,"filename");fname=(fname?fname:m.name)+"."+fileext;$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:fileuid},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:fname}],"POST")}}else{if(act=="DRILL"){dnode=IG$._I18(tnode,"target");if(dnode){dview=IG$._I1c(dnode);me._INd(view,dview,drillfilter)}}else{if(act=="EXTERNAL"){dnode=IG$._I18(tnode,"url");if(dnode){dview=IG$._I1b(dnode,"target");durl=IG$._I24(dnode);if(durl){if(durl.substring(0,"javascript:".length)=="javascript:"){try{durl=durl.substring("javascript:".length);eval(durl)}catch(e){IG$._I52("ERROR on External Call."+durl+e,me)}}else{var ownd=null,MSG_POPUPS_BLOCKED=window.popups_blocked||"A window was blocked by pop-up blocker.\nTo run Administrator, pop-up windows must be allowed.\nPlease configure your blocker software to allow pop-ups for this site.";ownd=window.open(durl);if(ownd==null||typeof(ownd)=="undefined"){alert(MSG_POPUPS_BLOCKED)}}}}}}}},function(xdoc){view.setLoading.call(view,false)});req._l()}},500)},J3:function(l,o){var h=this,a=1,e,q=h.dzone,n,s=l?l._ILb.docid:null,b,c,j,d,g=[];for(e=0;e<q.items.length;e++){d=q.items[e];n=q.items[e].view;if((o||d.visible!==false)&&n&&n._ILb){c=n._ILb;j=c.pff1a;if(c.objtype=="FILTER"&&d.docid!=s&&!j.showbutton&&j.f_b_evt=="T"){b=n.l5m.call(n,1,g);if(!b){a=0}else{if(a){h._IO1(n,1);$.each(g,function(m,t){n.cc1.call(n,t,undefined)})}}}else{if(c.objtype=="RPT_VIEW"){if(n.irpt&&n.irpt.dzone){b=n.irpt.J3.call(n.irpt,null,o);if(!b){a=0}}}}}}return a},_IL6:function(b,e){var I=this,C,j,D=(I.sheets[b]._IK9)?I.sheets[b]._IK9._IL8:null,l,c=false,G,E=e._ILb,x=E?E.edrill:false,a=(E&&E.drilltarget?E.drilltarget:null),t=new IG$._dpca(a),q,y,w=I.dzone,n,B,z,s,o,F,m,d=false,H=I.dzone.docitems||{},v,h,g=false,u;c=false;for(C=0;C<I.sheets.length;C++){j=I.sheets[C];q=t._2("sheet_"+C);u=j._ILb;if((u.drillreport==true||x||(q&&q.isdrill))&&j.sheetindex!=b){if(!x&&t._e&&(!q||(q&&!q.isdrill))){continue}l=u._IL9;if(c==true){for(G in l){if(G.indexOf("report_")>-1){delete l[G]}}}y=u._IL9;if(y){for(var A in y){l[A]=y[A]}}m=e._IL7.call(e,q);if(m&&m.length>0){g=true;l["report_"+b]=m;n=w._IIb.call(w,j.renderBox);d=true;if(n&&n.parent&&n.parent.objtype=="TAB"){B=n.parent.view;d=B.active==j.renderBox}if(d==true){j._IJ2.call(j,null)}else{j.btabrun=true}}}}for(A in H){v=H[A].lt.ubody;h=v.view;if(v.objtype=="RPT_VIEW"){if(h){if(h.irpt){for(C=0;C<h.irpt.sheets.length;C++){j=h.irpt.sheets[C];rop=j._ILa;sop=j._ILb;q=rop?t._2(rop.uid+"_sheet_"+C):null;if((sop.drillreport==true||x||(q&&q.isdrill))){if(!x&&t._e&&(!q||(q&&!q.isdrill))){continue}l=sop._IL9;if(c==true){for(G in l){if(G.indexOf("report_")>-1){delete l[G]}}}y=E._IL9;if(y){for(var A in y){l[A]=y[A]}}m=e._IL7.call(e,q);if(m&&m.length>0){g=true;l["report_"+b]=m;n=w._IIb.call(w,j.renderBox);d=true;if(n&&n.parent&&n.parent.objtype=="TAB"){B=n.parent.view;d=B.active==j.renderBox}if(d==true){j._IJ2.call(j,null)}else{j.btabrun=true}if(v.visible&&!I._i0){h._vf=false}}}}}else{}}}}I._IJ4();return g},_IIa2:function(a){var c=this,b;for(b=0;b<c.sheets.length;b++){c.sheets[b]._dfilter=a}},_IIa:function(c){var m=this,a,d,l,q,o,h,e,n;if(c&&c.length>0){a=new IG$._IEb(null);a.name="____systemfilter____";d=new IG$._IEb(null);a.subGroups.push(d);for(h=0;h<c.length;h++){q=c[h];l=new IG$._IE9(null);l.operator=IG$._IE1._d3(q.operator);o=new IG$._IE8();o.uid=q.uid;o.type=q.type;o.nodepath=q.nodepath;o.name=q.name;l._d6.push(o);l.delimiter="$%^";for(e=0;e<q.value.length;e++){n={code:q.value[e].code||q.value[e],text:q.value[e].text||q.value[e].code||q.value[e]};l.values.push(n)}d.subConditions.push(l)}}if(a){for(h=0;h<m.sheets.length;h++){var b=false,g=m.sheets[h]._ILb.filter,s;while(g&&g.subGroups.length>0){g=g.subGroups[0]}if(g){g.subGroups.push(a)}}}},_IB3:function(j,h,e){var l=this,m=new IG$._I3e(),b=l._ILa.name,q,g=l._ILa.exportOption,o=l.dzone,a,c,d;if(e&&e._ILb&&e._ILb.name){c=o.docitems[e.renderBox];d=c.lt.ubody.getTitle();if(d){b=b+"_"+d}}b=b.replace(/\./g,"_");b=b.replace(/ /g,"");if(j.substring(0,"JASPER_".length)=="JASPER_"){j=j.substring("JASPER_".length).toLowerCase();l._t$.call(l,"cmd_export_jasper",j);return}else{if(j.substring(0,"OFFICE_".length)=="OFFICE_"){a=Number(j.substring("OFFICE_".length));if(isNaN(a)==false&&a>-1&&g&&g.otmpl[a]){l._t$.call(l,"cmd_export_office",g.otmpl[a])}return}}switch(j){case"EXCEL":b+=".xls";break;case"PNG":b+=".png";break;case"PDF":b+=".pdf";break;case"SVG":b+=".svg";break;case"HTML":b+=".html";break;case"ODT":case"ODS":case"ODP":b+="."+j.toLowerCase();break;case"TMPL":b+="."+j.toLowerCase();break}l.setLoading(true);q=l._IB4(g,j,h,false,null,e);m.init(l,{ack:"20",payload:"<smsg><item uid='"+l.uid+"' type='"+j+"' filename='"+b+"' fonttype='"+(g&&g.fonttype?g.fonttype:"")+"' isinstance='"+(h?"T":"F")+"'/></smsg>",mbody:q},l,function(n){l.r_IB3.call(l,n,b,j)},null);m._l()},r_IB3:function(g,d,j){var l=this,c=IG$._I18(g,"/smsg/info"),e,h,d;l.setLoading(false);if(IG$._I1b(c,"status")=="complete"){e=IG$._I1b(c,"downloadurl");h=IG$._I1b(c,"isinstance")=="T";d=IG$._I1b(c,"filename")||d;if(!h){if(j=="HTML"){var b=IG$._I83.jS1.mts_name,a="./htmlview.jsp?mts="+(b||"")+"&p1=export&p2="+e,m=window.open(a,"name","height=500,width=800");if(window.focus){m.focus()}}else{$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:e},{name:"_mts_",value:IG$._g$a||""},{name:"mbody",value:d}],"POST")}}else{var b=IG$._I83.jS1.mts_name,a="./print.jsp?mts="+(b||"")+"#p1=export&p2="+e,m=window.open(a,"name","height=500,width=800");if(window.focus){m.focus()}}}},_IB4:function(s,L,a,h,J,b){var M=this,x=[],G,F,w=M.dzone,g,z,I,c=M.sheets,H,B,y=0,v=0,K=0,d,l,m,C,A={},E,D,u,t;u=function(j){x.push(j)};if(a){u("<smsg><item>");u("<export filetype='"+L+"'>");u(s.TX.call(s));u("<sheets>");for(G=0;G<w.items.length;G++){g=w.items[G];if(g.objtype=="SHEET"){H=g.view;z=H.renderBox;if(H.jobid){u("<sheet docid='"+z+"' jobid='"+H.jobid+"'>");u("</sheet>")}}}u("</sheets>");u("</export>");u("</item>");u("</smsg>")}else{if(h){u("<report uid='"+M.uid+"' name='"+J+"'><options>")}else{u("<smsg><Export layout='"+(s.layout||"portrait")+"'>");u("<options>");u(s.TX.call(s))}u("<sheets>");if(b){z=b.renderBox;if(b.jobid){u("<sheet docid='"+z+"' jobid='"+b.jobid+"'>");u("</sheet>")}}else{for(G=0;G<w.items.length;G++){g=w.items[G];if(g.objtype=="SHEET"){H=g.view;z=H.renderBox;u("<sheet docid='"+z+"' jobid='"+(H.jobid||"")+"'>");u("<title><![CDATA["+(g.title||"")+"]]></title>");u("</sheet>");A["SHEET_"+G]=g.title||""}else{if(g.objtype=="FILTER"&&g.view){m=g.view;m._uu1.call(m,A)}}}}u("</sheets>");u("<LayoutInfo type='bubble'><![CDATA["+(w.l10a.call(w)||"")+"]]></LayoutInfo>");u("<params>");u("<param name='REPORT_NAME'><![CDATA["+(M._ILa.name||"")+"]]></param>");for(C in A){u("<param name='"+C+"'><![CDATA["+(A[C]||"")+"]]></param>")}u("</params>");u("</options>");if(M._ILa.name){u("<item type='label' x='"+y+"' y='"+v+"' sheet_title='T'>");u("<text><![CDATA["+M._ILa.name+"]]></text>");u("</item>");K=30;v+=K}for(G=0;G<w.items.length;G++){g=w.items[G];d="0";l="0";H=null;if(g){if(!b){y=g.lt.x;v=g.lt.y+K}d=g.lt.w;l=g.lt.h;if(g.visible==false){continue}}if(g.objtype=="SHEET"){H=g.view;if(b&&b!=H){continue}if(H&&H._ILb){z=H.renderBox;if(!b&&H._ILb.name){u("<item type='label' x='"+y+"' y='"+v+"' d_width='"+d+"' d_height='"+l+"' docid='"+g.docid+"' doc_title='T'>");u("<text><![CDATA["+H._ILb.name+"]]></text>");u("</item>");v+=20}if(s.filterdesc&&H._IK2&&H._IK2.results){E=H._IK2.results;D=E&&E.length?E[0].f_:null;if(D){u("<item type='label' x='"+y+"' y='"+v+"' sheet_title='T'>");u("<text><![CDATA["+D+"]]></text>");u("</item>");K=30;v+=K;l=l>30?l-30:l}}if(H.activeView==0){B=H._IH6&&H._IH6._IB4.call(H._IH6,s);if(B){u("<item type='datagrid' x='"+y+"' y='"+(v+20)+"' d_width='"+d+"' d_height='"+l+"' docid='"+g.docid+"' sheetindex='"+H.sheetindex+"'>");u(B);u("</item>")}}else{if(H.activeView==1){B=H._IH7&&H._IH7._IB4.call(H._IH7,s,y,v+20,g.docid,d,l);if(B){u(B)}if(L=="EXCEL"&&H._ILb&&H._ILb.tb_prt_grd){v+=(H.__h||300)+20;var q=H._IK2,o=q.results[0],n=(o?o.delim:null),e="<instance jobid='"+(q._IL8||"")+"' cols='"+o.cols+"' rows='"+o.rows+"' delimiter='"+n+"' fixedrow='"+o.rowfix+"'></instance>";u("<item type='datagrid' x='"+y+"' y='"+(v+20)+"' d_width='"+d+"' d_height='"+l+"' docid='"+g.docid+"' sheetindex='"+H.sheetindex+"'>");u(e);u("</item>")}}else{if(H.activeView==2){B=H._IH8&&H._IH8._IB4.call(H._IH8,s,y,v+20,L,g.docid,d,l);if(B){u(B)}}else{B=H._IH6&&H._IH6._IB4.call(H._IH6,s);if(B){u("<item type='datagrid' x='"+y+"' y='"+(v+20)+"' d_width='"+d+"' d_height='"+l+"'  docid='"+g.docid+"'>");u(B);u("</item>")}B=H._IH7&&H._IH7._IB4.call(H._IH7);if(B){u("<item type='chart' x='"+y+"' y='"+(v+20)+"' d_width='"+d+"' d_height='"+l+"' width='"+H._IH7.body.getWidth()+"' height='"+H._IH7.body.getHeight()+"' docid='"+g.docid+"'>");u(B);u("</item>")}}}}}}else{if(g.objtype=="FILTER"&&!b){H=g.view;B=H._IB4&&H._IB4.call(H,y,v,g.docid,d,l);if(B){u(B)}}}}if(h){u("</report>")}else{u("</Export></smsg>")}}I=x.join("");return I},_IJ4:function(){var b,e=this,h=e.sheets,g=e.dzone,a,c={},d=g.items;for(b=0;b<d.length;b++){a=d[b].view;if(a&&a._ILc){a._ILc.call(a,c)}}for(b=0;b<d.length;b++){a=d[b].view;if(a&&a._ILd){a._ILd.call(a,c)}}},_INe:function(h,d){var e=this,a=h.sheetindex,c=h._ILb,j,g,l=d?d.cl:null,b,n;if(l){n=l.title;if(c&&n==9){j=l.index;g=l.position;b=c.g1(j,g);if(b){e.F.call(e,h,b,l)}}else{if(n>2){e._INf.call(e,h)}}}},_INc:function(q,c){var C=this,a=q._ILb,b=c.menu.cell,z,x,A,s,y=false,w,E,D,d,l=(a)?a.sortoption:null,e,u,v;if(a){e=a.mdf=a.mdf||{}}if(b){v=b.position;if(v==1){A=a.rows}else{if(v==2){A=a.cols}else{if(v==3){A=a.measures}}}s=(A&&A.length>b.index)?A[b.index]:null}switch(c.cmd){case"CMD_REMOVE":if(b.position==4){w=a.Xsf;if(w){for(z=0;z<w.length;z++){if(w[z].fid=="formula_"+b.index){x=w.splice(z,1);u={type:"remove",item:x[0],index:z,target:w};q._IP2(u);y=true;break}}}}else{if(A&&a.rows.length+a.cols.length+a.measures.length>1){x=A.splice(b.index,1);u={type:"remove",item:x[0],index:b.index,target:A};q._IP2(u);y=true}}break;case"CMD_FILTER":C._t$("cmd_filter",s);break;case"CMD_ASC":if(s.sortorder!="asc"){x=s.sortorder;s.sortorder="asc";y=true;u={type:"property",item:s,name:"sortorder",value:x};q._IP2(u)}break;case"CMD_DESC":if(s.sortorder!="desc"){x=s.sortorder;s.sortorder="desc";y=true;u={type:"property",item:s,name:"sortorder",value:x};q._IP2(u)}break;case"CMD_TOP5":E="top";D=5;d=s.uid;break;case"CMD_TOP10":E="top";D=10;d=s.uid;break;case"CMD_BTM5":E="bottom";D=5;d=s.uid;break;case"CMD_BTM10":E="bottom";D=10;d=s.uid;break;case"CMD_SHOWALL":E="normal";D=0;d=null;break;case"CMD_UNDO":y=q._IOf.call(q);break;case"CMD_CLIPBOARD":var B=q._IP0();IG$._I49(B);break;case"CMD_RUN_FILTER":if(e){y=true;if(c.menu.mdf){e[b.c]=c.menu.mdf}else{delete e[b.c]}}break;case"T_SUM":case"T_AVG":case"T_MIN":case"T_MAX":case"T_RANK":case"T_POT":case"T_CUMUL":case"T_INCR":case"T_DIFF":case"CL_FM":case"R_FMT":if(e){C._IN2(q,s,c.cmd)}break;default:if(c.cmd.substring(0,7)=="detail:"){var h=c.cmd.substring(7),g,n,o,m;for(z=0;z<a.dff1.length;z++){if(a.dff1[z].uid==h){g=a.dff1[z];break}}if(g){n={titem:{enabled:false,items:[],item_map:{}},tparams:{enabled:false,items:[],item_map:{}}};o=n.titem;m=n.tparams;if(g.titem){o.items=g.titem.split("_");for(z=0;z<o.items.length;z++){if(o.items[z]){o.item_map[o.items[z]]=1}}if(o.items.length){o.enabled=true}}if(g.tparams){m.items=g.tparams.split("_");for(z=0;z<m.items.length;z++){if(m.items[z]){m.item_map[m.items[z]]=1}}if(m.items.length){m.enabled=true}}var j=q._IL7.call(q,n);if(j&&j.length>0){C._INd(q,g,j)}}}break}if(E!=l.sortmethod||D!=l.sortcount||d!=l.sortmeasure){y=true;l.sortmethod=E;l.sortcount=D;l.sortmeasure=d}if(y==true){C._ILb_=true;q._IP4.call(q)}},_ILf:function(b){var d,c="<smsg><item "+IG$._I20(b,"type","s")+">";c+="<objinfo/>";if(b&&b.cubeobj){d=b.cubeobj;c+="<sel_cube default='"+d.uid+"'>";c+="<item "+IG$._I20(d,"uid;name;type;nodepath;requirepwd","s")+"/>";c+="</sel_cube>"}c+="</item></smsg>";var a=IG$._I13(c);return a},_IG7:function(w,m){var x=this,t,j=w.cubeobj,h=j?j.uid:null,u=w.reporttype,s,a=m,e,g=x._ILa,o,b,l=x.dzone,d=x.sheets,q,y,c=0,n,v;if(!x._ILa){c=1;s=x.itemtype||"Report";xdoc=x._ILf({type:s,cubeobj:j,cubeuid:h,reportmode:u});x._IM9(xdoc,false);g=x._ILa}if(x.reportlayout){x.reportlayout=null}y=g.__cs;if(h&&(!y.m[h]||c)){if(!y.m[h]){n={uid:h,name:j.name,nodepath:j.nodepath,type:j.type};y.m[h]=n;y.l.push(n)}if(g.sheets.length==0){e=new IG$._IEf(null,g.itemtype,false);e.cubeuid=y.d;g.sheets.push(e);if(!d.length){o=x.aB();l._IIc.call(l,o);b=x._IMd(0,e,o);e.layoutinfo.docid=o.docid;o.setTitle.call(o,e.name||"");o.view=b;o.objtype="SHEET";o.m1.call(o);o.setReportOption.call(o,e);x.sheets.push(b)}q=x.sheets[0];q._ILa=g;q._ILb=e;q._IN0.call(q);l._IM5.call(l)}if(a){a._IGd.call(a,x._ILa.sheets[x._IJa],x._ILa)}x._IGb();x._IN3()}},_II9:function(c){var a=this,b=a.sheets[a._IJa];a._i0&&a._aa(false);c=="chart"&&a._IK6();c!="chart"&&a._IK4();a._IK7(c=="r");a._IK7p(c=="python");a._IL3(c=="chart"?false:true);a._IL4(c=="r"?false:true);b._II9.call(b,c)},_t$:function(M,a,E,K,O){var o=this,L=o.dzone,y,c,P=o.sheets[o._IJa],H=o.down("[name=tbsch]"),D,b;switch(M){case"cmd_sheetview":o._II9("grid");break;case"cmd_chartview":o._II9("chart");break;case"cmd_rview":if(IG$._I83.jS1.l3=="L1"){IG$._I52("R Viewer is not allowed for license limitation. Please contact ingecep.com for Enterprise license.",o)}else{o._II9("r")}break;case"cmd_pythonview":if(IG$._I83.jS1.l3=="L1"){IG$._I52("Python Viewer is not allowed for license limitation. Please contact ingecep.com for Enterprise license.",o)}else{o._II9("python")}break;case"cmd_run":if(o._cld){IG$._I55(ig$.appname,IRm$.r1("L_C_SCH"),function(n){if(n=="yes"){H&&H.hide();o._cld=0;o._t$.call(o,M,a,E,K,O)}})}else{o._i0&&o._ab();if(E){o._IIa(E)}if(K){o._IIa2(K)}o._i0&&o._aa(false);o._IJa=0;P=o.sheets[o._IJa];if(P){y=L._IIb.call(L,P._ILb?P._ILb.layoutinfo.docid:null);L._IIc.call(L,y)}o._IId();o._params=null;o._K();var g=[],s,j,N=0,h={};s=function(ad,ac){var W,aa=this,ab,Y,n,T=false,af=aa.dzone,S=aa.dzone.docitems||{},R,V,U,Z,X,Q,ae=true,Y;for(W=0;W<aa.sheets.length;W++){ab=aa.sheets[W];ab.__el=0;ab._IIe&&ab._IIe.call(ab);ab._b1.call(ab);n=ab._ILb;if(n&&(!O||n.openload==true)){T=ad==1?true:((ac&&ac[W]==1)?true:false);if(T){ab._IIf.call(ab,true,true);if(ab._IK9){ab._IK9._ILa._dfilter=ab._dfilter;Y=ab._IK9._ILa._IJ1.call(ab._IK9._ILa);ab._IK9._IJ0(Y,"mode",ab.sheetindex,ab)}else{ab._IJ2.call(ab)}}}}for(V in S){U=S[V];R=U.lt.ubody;if(R.objtype=="RPT_VIEW"){if(U.parent&&U.parent.loc=="inner"&&U.parent.node&&U.parent.node.objtype=="TAB"){if(U.parent.node.active!=R.docid){R.visible=false}else{R.visible=true}}else{R.visible=true}if(R.visible==true&&R.view&&!R.view._v1d){R.view._df1=R.view._df1||{};R.view._v2=true;if(ae){Q=R.view._df1;for(q in Q){if(q.indexOf("report_")>-1||q.indexOf("filter_")>-1){delete Q[q]}}}R.view.l3.call(R.view,ad==1);continue}if(R.view){if(R.view.irpt){for(W=0;W<R.view.irpt.sheets.length;W++){Z=R.view.irpt.sheets[W];X=Z._ILb;if(ae){Q=X._IL9;for(q in Q){if(q.indexOf("report_")>-1||q.indexOf("filter_")>-1){delete Q[q]}}}if(R.visible==true&&ad==1){Z._b1.call(Z);if(Z._IK9){Y=Z._IK9._ILa._IJ1.call(Z._IK9._ILa);Z._IK9._IJ0(Y,"mode",W,Z)}else{if(X){Z._IJ2.call(Z)}}}else{R.view._v2=true}}}else{R.view._df1=R.view._df1||{};R.view._v2=true;if(ae){Q=R.view._df1;for(q in Q){if(q.indexOf("report_")>-1||q.indexOf("filter_")>-1){delete Q[q]}}}}}}}};for(i=0;i<L.items.length;i++){c=L.items[i].view;if(c&&c._IJ3){c._i10=null;g.push(c)}}if(g.length>0){j=function(ab,ad){N++;var Z=this,V=ab.l7.call(ab),W,X=Z.sheets,T=ab._ILb.pff1a.showbutton,R=ab._ILb.pff1a.edrill,ac=ab._ILb.pff1a.drilltarget,aa=new IG$._dpca(ac),S=Z.dzone.docitems||{},Q="filter_"+Z.dzone._dzid+"_"+ab._ILb.docid,n,U,Y=[];n=ab.l5m.call(ab,1,Y);if(!T){for(W=0;W<X.length;W++){sheet=X[W];l=sheet._ILb;docid=(l.layoutinfo?l.layoutinfo.docid:null);ditem=S[docid];U=aa._2("sheet_"+W);if(!R&&aa._e&&!U){continue}l._IL9[Q]=V;if(ditem&&ditem.visible==false){continue}h[W]=typeof(h[W])=="undefined"?1:h[W];h[W]=(n&&h[W]==1)?1:0}}ab._i10=null;if(N==g.length){s.call(Z,2,h)}};$.each(g,function(R,Q){Q._i10={p:o,f:j};Q._IJ3.call(Q,null,1)})}else{s.call(o,1)}o._IJ4()}break;case"cmd_save":o._i0&&o._ab();if(o._ILa){o._i0&&o._aa(false);var I=IG$._Ibb._IJ7.call(o),d=I.uid;if(!d){o._IJ5(false)}else{var C=o._ILa._IJ1.call(o._ILa);o._IJ6(d,C,a)}}break;case"cmd_saveas":o._i0&&o._ab();IG$._Ibb._IJ7.call(o);o._IJ5(false);break;case"cmd_showpivot":o._i0=o._i0||false;o._aa(!o._i0);break;case"cmd_chartwizard":D=new IG$._Ia3({_ILa:o._ILa,_ILb:o._ILa.sheets[o._IJa],callback:new IG$._I3d(o,o._IJ9)});IG$._I_5(this,D);break;case"cmd_r_summary":case"cmd_r_script":P._IH8._IJ8.call(P._IH8,M);break;case"cmd_r_simage_png":o._IB3("PNG");break;case"cmd_r_simage_svg":o._IB3("SVG");break;case"cmd_r_wizard":D=new IG$._If3({dc:P._IH8.f5u.call(P._IH8),callback:new IG$._I3d(o,o._INa)});D.show(o);break;case"cmd_py_edit":var v=P._IH8a;v&&v._do_edit.call(v,true);break;case"cmd_export_excel":o._IB3("EXCEL");break;case"cmd_export_html":o._IB3("HTML");break;case"cmd_export_pdf":o._IB3("PDF");break;case"cmd_export_csv":P._IP6.call(P);break;case"cmd_export_tmpl":o._IB3("TMPL");break;case"cmd_export_prt":o._IB3("PDF",true);break;case"cmd_clipboard":o._IB2();break;case"cmd_export_office":var u=o._ILa,w=u.exportOption,q=u.name,F=new IG$._I3e(),e,A=a.name,B,J,z="TMPL_OC",m="TMPL",G;q=q.replace(/\./g,"_");q=q.replace(/ /g,"");J=A.lastIndexOf(".");if(J>0){B=A.substring(J+1);if(B=="docx"||B=="doc"){z="TMPL_T";if(a.export_type){G=a.export_type;q+="."+(G=="field"?"fields.xml":G)}else{q+="."+B}}}e=o._IB4(w,"office");o.setLoading(true);F.init(o,{ack:"20",payload:IG$._I2d({uid:o.uid,type:z,filename:q,utemplate:"T",tmpluid:a.uid,tmplname:a.name,tmpltype:a.type,outputformat:G},"uid;type;filename;fonttype;utemplate;tmpluid;tmplname;tmpltype;outputformat"),mbody:e},o,o.r_IB3,null,q);F._l();break;case"cmd_export_jasper":var u=o._ILa,w=u.exportOption,q=u.name,F=new IG$._I3e(),e,m="TMPL";q=q.replace(/\./g,"_");q=q.replace(/ /g,"");q+="."+(a.toLowerCase()=="excel"?"xls":a);e=o._IB4(w,"jasper");o.setLoading(true);F.init(o,{ack:"20",payload:IG$._I2d({uid:o.uid,type:m,filename:q,fonttype:(w&&w.fonttype?w.fonttype:""),utemplate:"T",tmplpage:w.jasper&&w.jasper.jasper_template,tmpluid:w.jasper&&w.jasper.jasper_tmpl_uid,jasper_filetype:a},"uid;type;filename;fonttype;utemplate;tmplpage;tmpluid;jasper_filetype"),mbody:e},o,o.r_IB3,null,q);F._l();break;case"cmd_export_option":D=new IG$._Ia2({_ILa:o._ILa,_ILb:P?P._ILb:null,dzone:o.dzone,callback:new IG$._I3d(o,o._IJb)});IG$._I_5(this,D);break;case"cmd_filter":D=new IG$._Ia1({_ILa:o._ILa,_ILb:P._ILb,targetitem:a,callback:new IG$._I3d(o,o._IJd)});IG$._I_5(this,D);break;case"cmd_edit_data":D=new IG$._If7({_ILa:o._ILa,_ILb:P._ILb,callback:new IG$._I3d(o,o._IJc)});IG$._I_5(this,D);break;case"cmd_prompt":var l=P._ILb,x=l.needPrompt.call(l);P.showPrompt.call(P,x);break;case"cmd_view_sql":if(P){D=new IG$.mA$_b({_ILa:o._ILa,_ILb:P._ILb,uid:o.uid,_IJa:o._IJa});IG$._I_5(this,D)}break;case"cmd_change_type":o._IB5();break;case"cmd_add_sheet":D=new IG$._If1({dzone:o.dzone,sheets:o.sheets,_ILa:o._ILa,_l1:true,objtype:a||"SHEET",callback:new IG$._I3d(o,o.addSheet)});IG$._I_5(this,D);break;case"cmd_dock_panel":o.dzone.editmode=o.dzone.editmode?false:true;o.dzone._IM5.call(o.dzone);break;case"cmd_edit_sql":D=new IG$._Ib1({_ILa:o._ILa,_ILb:P._ILb,uid:o.uid,_IJa:o._IJa,callback:new IG$._I3d(o,o._IN7)});IG$._I_5(this,D);break;case"cmd_sort_option":D=new IG$._If0({_ILa:o._ILa,_ILb:P._ILb,callback:new IG$._I3d(o,o._IO3)});IG$._I_5(this,D);break;case"cmd_statistics":D=new IG$._Ief({_IK2:P._IK2});D.show(o);break;case"cmd_layout":D=new IG$._Ibd({callback:new IG$._I3d(o,o._IN8,false)});D.show(o);break;case"cmd_loption":o._IM7();break;case"cmd_schedule":if(o.uid){var t=o._IN6();IG$._I50(o,o.uid,o.itemtype,t,o._ILa)}break;case"cmd_favorites":if(o.uid){var F=new IG$._I3e();F.init(o,{ack:"11",payload:IG$._I2d({uid:o.uid}),mbody:IG$._I2e({option:"addfavorites"})},o,o.rs_i1_2,null,null);F._l()}break;case"cmd_share":if(o.uid){o._s1()}break}},_s1:function(){var h=this,j=$("#igc_msr"),a=$("#igc_msr_s",j),g=$("#m_done",a),c=$("#m_close",a),d=$("#m_lnk",a),o=$("#m_msg",a),q=function(){a.hide();j.fadeOut()},l=ig$.applink||"",m="{objid}",b,e=$("#m_em",a);if(j&&j.length){a.show();j.show();b=l.indexOf(m);if(b>-1){l=l.substr(0,b)+h.uid+l.substr(b+m.length)}d.val(l);o.val("");g.unbind("click");g.bind("click",function(){var n=e.val(),t=o.val();if(n){var s=new IG$._I3e(),u="<smsg><item><recipient><![CDATA["+n+"]]></recipient><params><param name='message'><![CDATA["+t+"]]></param><param name='uid'><![CDATA["+(h.uid||"")+"]]></param><param name='linkurl'><![CDATA["+l+"]]></param></params></item></smsg>";s.init(h,{ack:"76",payload:IG$._I2d({uid:h.uid,mtype:"share_item"},"uid;mtype"),mbody:u},h,function(v){q()});s._l()}else{q()}});c.unbind("click");c.bind("click",function(){q()})}},_IJ7:function(){var e=this,c,b,a,g=e.dzone,d;if(e.sheets.length>1){for(b=0;b<e.sheets.length;b++){a=e.sheets[b];a._ILb.layoutinfo={docid:a.renderBox,collapsed:a.collapsed,headerposition:a.headerPosition,region:a.region,width:a.getWidth(),height:a.getHeight()}}}c=e._ILa.uid;e._ILa.savelayoutinfo=g.l10a.call(g);d={uid:c};return d},_INd:function(n,a,e){var m=this;var d={},c=n._ILb._IL9,o,b,h;for(o in c){b=o.replace(/report/,"pageRPT");b=b.replace(/filter/,"pageFLT");h=a.uid+"_"+b;if(o=="report_"+n.sheetindex){d[h]=e}else{d[h]=c[o]}}d[a.uid+"_pageRPT_"+n.sheetindex]=e;if(a.showintab&&IG$._I7d){var g=IG$._I7d,j={auxfilter:d};g.m1$7.call(g,a.uid,a.type||"report",a.name,a.nodepath,true,null,null,j)}else{var l=new IG$._Ibc({viewinfo:a,auxfilter:d});IG$._I_5(this,l)}},_IJ5:function(a){var b=this,c=new IG$._I96({mode:"newitem",initpath:b.nodepath});c.callback=new IG$._I3d(b,b._IO4,a);IG$._I_5(this,c)},_IO4:function(e,b){var d=this,a=d._ILa,g=a._IJ1.call(a),c=new IG$._I3e();c.init(d,{ack:"31",payload:"<smsg><item address='"+e.nodepath+"/"+e.name+"' name='"+e.name+"' type='"+(d.itemtype?d.itemtype:"Report")+"' pid='"+e.uid+"' description=''/></smsg>",mbody:g},d,d._IO5,d._IO6,[e.name,b,e.nodepath,e.uid,g]);c.showerror=false;c._l()},_IO6:function(e,b){var h=this,g=b[0],l=b[1],c=b[2],j=b[3],d=b[4],a=IG$._I27(e);if(a=="0x12e0"){IG$._I55(ig$.appname,g+" already exist on the server. Would you overwrite existing item with this copy?",function(n){if(n=="yes"){var m=new IG$._I3e();m.init(h,{ack:"31",payload:"<smsg><item address='"+c+"/"+g+"' name='"+g+"' type='"+(h.itemtype?h.itemtype:"Report")+"' pid='"+j+"' description='' overwrite='T'/></smsg>",mbody:d},h,h._IO5,null,[g,l,c]);m._l()}},h,h)}else{IG$._I51(e,h)}},_IO5:function(g,b){var j=this,d,h=b[0],l=b[1],e=j._ILa,c=IG$._I18(g,"/smsg/item"),a=IG$._I1b(c,"name");if(l==true){j.ignoreclose=true;j.close();return}j._ILb_=false;j.uid=IG$._I1b(c,"uid");for(d=0;d<j.sheets.length;d++){if(j.sheets[d]._IK9){j.sheets[d]._IK9.uid=j.uid}}e.uid=j.uid;e.name=a;j.setTitle(a)},_IO3:function(){this._t$("cmd_run")},_IId:function(){var c=this,b,a,d=c.sheets;if(d&&d.length>0){for(b=0;b<d.length;b++){a=d[b];auxfilter=a._ILb._IL9;for(fname in auxfilter){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete auxfilter[fname]}}}}},_IGa:function(l){var o=this,d=o._IJa,e=d>-1?o.sheets[d]:null,c=o.down("[name=tbrescount]"),a=o.down("[name=tbcache]"),q="",b=0,m="",g=false,j=o.sheets,h;if(e){if(e._IK2&&e._IK2.results&&e._IK2.results.length>0){q="(Row: "+e._IK2.results[0].rows+", Cols: "+e._IK2.results[0].cols+")";b=e._IK2.results[0].cache;m=e._IK2.results[0].u_cache_time}}if(l){for(h=0;h<j.length;h++){if(j[h].__el==1){g=true;break}}if(!g){o._d1.call(o)}}c&&c.setText(q);if(a){a.setVisible(b);a.setTooltip("DATA ON : "+m+"\nClick to refresh data!")}},_IGb:function(){var h=this,b=h.down("[name=tbcubepath]"),j=h.sheets[h._IJa],a=h._ILa.__cs,c=j?j._ILb.cubeuid:null,g=new IG$._I3e(),e,d;b.setText("");b.hide();a.m[c]&&h._IMf(a.m[c])},aB:function(a){var c=this,e,d=c.dzone,g=d._root,b={objtype:"SHEET",docid:null,_direction:0,parent:g,width:100,height:100};g.children.push(b);e=d._IMc.call(d,null,{width:(b.width?parseInt(b.width):null),height:(b.height?parseInt(b.height):null),draggable:d.draggable},a||"SHEET");b.docid=e.docid;e.objtype=b.objtype;b.lt={pos:{x:0,y:0,w:0,h:0},ubody:e};e._pc=b;e.m1.call(e);return e},_ILf_:function(b){var n=this,g,e,m,l,j=n.sheets,c=n._3,q=$(c.body),s=n.dzone,h=s._root,o=n._IM4,d,a;if(!b){for(g=0;g<n._ILa.sheets.length;g++){l=n._ILa.sheets[g];if(j.length>g){m=j[g];d=s._IIb.call(s,l.layoutinfo.docid)}else{d=n.aB();l.layoutinfo.docid=d.docid;m=n._IMd(g,n._ILb,d);m._ILa=n._ILa;d.view=m;d.objtype="SHEET";d.m1.call(d);d.setReportOption.call(d,l);n.sheets.push(m);if(n._i0&&o){setTimeout(function(){m._II9.call(m,"d");m.Uc.call(m,o.cubeuid)},100)}}if(d){d.setTitle.call(d,l.name||"");d.showTitle.call(d,!l.hidetitle)}j[g]._ILb=l;j[g]._IN0.call(j[g])}}else{for(g=0;g<n.sheets.length;g++){l=n._ILa.sheets[g];j[g]._ILb=l;j[g]._IN0.call(j[g])}}},_IJb:function(){var m=this,c=m._ILa,h=c.exportOption||{},j=h?h.jasper:null,q=m.down("[name=jasper]"),d=m.down("[name=office]"),a=false,b=0;if(!m._2){return}$.each(["xls","pdf","html","csv"],function(s,u){var t=m.down("[name=ig_r_"+u+"]");t&&t.setVisible(h["u_"+(u=="xls"?"excel":u)]&&!ig$.fm["ig_r_"+u])});if(h.u_office&&h.otmpl&&h.otmpl.length){d.show();d.menu.removeAll();$.each(h.otmpl,function(n,s){d.menu.add({xtype:"menuitem",text:s.description||s.name,handler:function(){m._t$.call(m,"cmd_export_office",s)}})})}else{d.hide()}if(j&&j.jasper_template&&h.u_jasper){a=true;q.menu.removeAll();m.dft_jasp_exp=null;$.each(["pdf","rtf","ppt","csv","excel","xlsx","docx","html","xml"],function(s,n){if(j[n+"_output"]=="T"){if(b==0){m.dft_jasp_exp=n}q.menu.add({xtype:"menuitem",text:j[n+"_label"]||n,handler:function(){m._t$.call(m,"cmd_export_jasper",n)}});b++}})}m.down("[name=jasper]").setVisible(a&&h.u_jasper&&!ig$.fm.ig_r_jasper);if(window.IExport){var m=this,e,l,o=false,g=m._2;for(e in window.IExport){if(window.IExport[e].toolbar){l=g.down("[name="+window.IExport[e].name+"]");o=window.IExport[e].toolbarShow(m);l.setVisible(o)}}}},_IN2:function(o,q,j){var n=this,d,h,e,a,u,g=o._ILb,m=g.Xsf,v,s,b,c=0,l;if(q){a=[];if(j.toLowerCase()=="cl_fm"){for(d=m.length-1;d>=0;d--){if(m[d].baseuid==q.uid){m.splice(d,1);c=1}}}else{if(j.toLowerCase()=="r_fmt"){l=new IG$._IEF({pR:n,pS:o,pF:m,pI:q,callback:new IG$._I3d(n,function(x){var t,w=m;for(t=w.length-1;t>=0;t--){if(w[t].baseuid==q.uid){w.splice(t,1)}}for(t=0;t<x.length;t++){w.push(x[t])}n._ILb_=true;n._IO2.call(n,n._IJa)})});l.show()}else{for(d=0;d<m.length;d++){if(m[d].baseuid==q.uid){if(m[d].expression==j.toUpperCase()){return}a.push(m[d])}}if(a.length>0){u=a[0]}else{u=new IG$._IF0(null);m.push(u)}c=1;u.baseuid=q.uid;u.direction="vertical";u.formatstring="";u.stylename=null;u.type=null;u.separatecolumn=true;u.subtotalbase=null;u.usecolumnformat=true;u.showtoprow="F";u.groupresults="F";u.fid="formula_"+g.si;g.si++;b=IG$._IEFc[j.toLowerCase()];if(b){v=b.title;s=b.expr;if(typeof(b.usecolumnformat)!="undefined"){u.usecolumnformat=b.usecolumnformat}if(typeof(b.formatstring)!="undefined"){u.formatstring=b.formatstring}u.title=v;u.expression=s}}}if(c){n._ILb_=true;n._IO2(n._IJa)}}},_IN6:function(){var l=this,a=[],g,n=l.dzone,m;var b,e,c,j,d,h;for(g=0;g<n.items.length;g++){m=n.items[g].view;if(m&&m._IIe){d=m._ILa;if(d&&d.poolname&&IG$.dbp[d.poolname]){j=IG$.dbp[d.poolname]}c="18";h=d.reportmode=="rolap"?"run":d.reportmode=="sql"?"sqlrun":"run",e="<smsg><item "+IG$._I21({uid:this.uid,option:h,active:""+m.sheetindex,pivotresult:"T",pwd:(j?j:null)})+"/></smsg>";b=a.length==0?m._ILa._IJ1():"";a.push({ack:c,payload:e,mbody:b,jobkey:""+m.sheetindex})}}return a},_INb:function(a,g){var d=this,e=d.dzone,c,h=e._root,b;h.children=h.children||[];if(!g){b={objtype:a.objtype,docid:null,_direction:0,parent:h,width:100,height:100};h.children.push(b);g=e._IMc.call(e,null,{width:(b.width?parseInt(b.width):null),height:(b.height?parseInt(b.height):null),draggable:e.draggable},a.objtype);b.docid=g.docid;g.objtype=b.objtype;b.lt={pos:{x:0,y:0,w:0,h:0},ubody:g};g._pc=b;g.m1.call(g)}a.docid=g.docid;switch(a.objtype){case"NAVI":c=new IG$._IA3(g.b3,a,d._ILa,d);break;case"FILTER":c=new IG$._Ied(g.b3,a,d);c.callback=new IG$._I3d(d,d._IO1);break;case"TEXT":c=new IG$._IA2(g.b3,a);break;case"PANEL":c=new IG$._IA4(g.b3,a);break;case"TAB":c=new IG$._IA5(g.b3,a,d.dzone);break;case"RPT_VIEW":c=new IG$._IA5r(g.b3,a,d);break}g.view=c;g.objtype=a.objtype;g.m1.call(g);g.setReportOption.call(g,a);if(a.objtype=="FILTER"&&c._IFd){setTimeout(function(){c._IFd.call(c)},100)}return g},__l1:function(h,l){var m=this,j=m.dzone.items,d,e=h._ILb,s=(e.layoutinfo?e.layoutinfo.docid:null),b,c,a,o,n,q,g;for(d=0;d<j.length;d++){if(j[d].docid==s){b=j[d];break}}if(b){o=b.b1.offset();n=b.b3.offset();q=n.left-o.left;g=n.top-o.top;c=IG$.x_10._w(b.b3);a=IG$.x_10._h(b.b3);c=Math.max(c,l.cw);a=Math.max(a,l.ch);b.fw=(l.tw>c);b.fh=(l.th>a);b.width=(b.fw)?l.tw+q:b.width;b.height=(b.fh)?l.th+g:b.height;m.dzone._IM5.call(m.dzone,true)}},_K:function(n){var l=this,m=n?n._IK2:null,h,o=l.dzone,e=l.dzone.docitems,c,b,j,g,d,a;h=l._params=l._params||{};if(m&&m.results){for(j=0;j<m.results.length;j++){b=m.results[j];c=b._params;if(c){for(g in c){h[g]=c[g]}}}}for(g in e){d=e[g].lt.ubody;a=d.view;d._param=h;d.applyFlt.call(d)}},_IMd:function(d,o,e,m){var a=this,j,c,h=$("<div class='igc-sheet-cntbox'></div>").appendTo(e.b3),b=$("<div></div>").appendTo(e.b3),n=e.b2,l=IG$.x_10._w(e.b3),g=IG$.x_10._h(e.b3);IG$.x_10._w(h,l);IG$.x_10._h(h,g);b.css({position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",overflow:"hidden"}).hide();j=new IG$._IPc({width:(o&&o.layoutinfo)?(o.layoutinfo.width||IG$.x_10._w(h)):null,height:(o&&o.layoutinfo)?(o.layoutinfo.height||IG$.x_10._h(h)):null,renderTo:h[0],rendermask:b,renderBox:e.docid,_ILa:a._ILa,_ILb:o,uid:a.uid,sheetindex:d,region:(d==0)?"center":((o)?o.region:null)||"east",collapsible:false,minSize:100,_IK3:a,floatable:false,bindheaderevent:false,rst:m,rX:function(){this.removeAll();n.unbind("click")},listeners:{drillreport:function(q){a._INf.call(a,q)},itemclick:function(q,s){a._ILc.call(a,e);if(q.activeView==0){a._INe.call(a,q,s)}else{if(q._ILb.isdrillreport!==true){a._INf.call(a,q)}}},itemdblclick:function(q,t){var s=a._INf.call(a,q);a._ILc.call(a,e);return},menu:function(q,s){a._INc.call(a,q,s)},pivotchanged:function(q){a._ILb_=true},cresized:function(q,s){a.__l1.call(a,q,s)},result_loaded:function(q){q.__el=0;a._K.call(a,q);a._IGa.call(a,true)},export_sheet:function(q,s){a._IB3.call(a,s.filetype.toUpperCase(),false,q)},destroy:function(q,s){q.__dx=true},afterrender:function(q){e.view=q;var s=$(q.body.dom);s.bind("click",function(){a._ILc.call(a,e)});setTimeout(function(){e.b3.trigger("i_ready")},10)},_ld_:function(q){a.dzone._IIf.call(a.dzone,true,q)},_ldx_:function(q){a.dzone._slx.call(a.dzone,q)},scope:this}});n.bind("click",function(){a._ILc.call(a,e)});j.setSize(IG$.x_10._w(h),IG$.x_10._h(h));return j},applyOption:function(h){var c=this,d=h.auxfilter,g,e,b,a=false;if(d){for(e=0;e<c._ILa.sheets.length;e++){b=c._ILa.sheets[e];for(g in b._IL9){delete b._IL9[g]}for(g in d){b._IL9[g]=d[g]}}a=true}if(a){this._t$("cmd_run")}},_IO0:function(l){var j=this,c=l,a=c.sheetindex,e=j.down("[name=tbresult]"),b=c._IP3.call(c),g="",d,h=0;if(b&&b.length>1){for(d=0;d<b.length;d++){if(b[d].position==3){h=h+parseFloat(b[d].code)}}if(IG$._I37(h)){g="SUM: "+h.format("0,000.00")}}e&&e.setText(g)},_IO1:function(o,j){var C=this,e=C.sheets,d,a,n,v,x,q,u,A="filter_"+C.dzone._dzid+"_"+o._ILb.docid,D=C.dzone.docitems||{},s,z=o._ILb.pff1a.drilltarget,t=o._ILb.pff1a.edrill=="T",m=new IG$._dpca(z),B=o._ILb.pff1a.f_b_clear=="T",w,y=o._fr,h,c,b,l=o.__dloaded,g=C.down("[name=tbsch]");if(C._cld){IG$._I55(ig$.appname,IRm$.r1("L_C_SCH"),function(E){if(E=="yes"){g&&g.hide();C._cld=0;C._IO1.call(C,o)}});return}C._params=null;C._K();q=o.l7.call(o);for(x=0;x<e.length;x++){d=e[x];a=d._ILb;u=(a.layoutinfo?a.layoutinfo.docid:null);s=D[u];b=m._2("sheet_"+x);if(!t&&(m._e&&(!b||(b&&!b.isdrill)))){if(y&&a&&a.openload){delete d.btabrun;if(d._IK9){v=d._IK9._ILa._IJ1.call(d._IK9._ILa);!j&&d._IK9._IJ0(v,"mode",x,d)}else{if(a){!j&&d._IJ2.call(d)}}}continue}if(B){h=a._IL9;for(fname in h){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete h[fname]}}}a._IL9[A]=q;if(s&&s.lt&&s.lt.ubody&&!s.lt.ubody.visible){d.btabrun=true;continue}if(y&&a&&!a.openload){d.btabrun=true;continue}if(!C._i0){delete d.btabrun;if(d._IK9){v=d._IK9._ILa._IJ1.call(d._IK9._ILa);!j&&d._IK9._IJ0(v,"mode",x,d)}else{if(a){!j&&d._IJ2.call(d)}}}}for(w in D){s=D[w].lt.ubody;c=s.view;if(s.objtype=="RPT_VIEW"){if(c){if(c.irpt){for(x=0;x<c.irpt.sheets.length;x++){d=c.irpt.sheets[x];n=d._ILa;a=d._ILb;b=n?m._2(n.uid+"_sheet_"+x):null;if(!t&&(m._e&&(!b||(b&&!b.isdrill)))){if(y&&a&&a.openload){delete d.btabrun;if(d._IK9){v=d._IK9._ILa._IJ1.call(d._IK9._ILa);!j&&d._IK9._IJ0(v,"mode",x,d)}else{if(a){!j&&d._IJ2.call(d)}}}continue}if(B){h=a._IL9;for(fname in h){if(fname.indexOf("report_")>-1||fname.indexOf("filter_")>-1){delete h[fname]}}}a._IL9[A]=q;if(s.visible&&!C._i0){c._v2=false;if(y&&a&&!a.openload){continue}if(d._IK9){v=d._IK9._ILa._IJ1.call(d._IK9._ILa);!j&&d._IK9._IJ0(v,"mode",x,d)}else{if(a){!j&&d._IJ2.call(d)}}}else{c._v2=true}}if(s.visible&&!C._i0){c._vf=false}}else{}}}}C._IJ4()},_IO2:function(d){var c=this,g=c.sheets,b=g[d],a,e;b.setLoading.call(b,true,true);a=b._ILb;if(b._IK9){e=b._IK9._ILa._IJ1.call(b._IK9._ILa);b._IK9._IJ0(e,"mode",d,b)}else{if(a){b._IJ2.call(b)}}c._IJ4()},rs_showPrompt:function(){this._t$("cmd_run")},_IJd:function(){var a=this;a._ILe_(true);a._t$("cmd_run")},_IJc:function(){this._t$("cmd_run")},_aa:function(e){var g=this,c=g._IM4,b=g.down("[name=pivoteditor]"),d=g._a.t_pivot,h=g.b_edpanel,a;if(!h){h=g.b_edpanel=g.down("[name=b_edpanel]")}d.toggle(e);g.dzone.editmode=e;h.toggle(g.dzone.editmode);g._i0=e;c.setVisible.call(c,g._i0);b&&b.setVisible(g._i0);if(g._i0&&g.loadPivotOption){g.loadPivotOption(g._IJa,c.cubeuid)}else{if(!g._i0&&g.confirmPivotOption){g.confirmPivotOption()}}g._i0&&c._IGd.call(c,g._ILa.sheets[g._IJa],g._ILa);$.each(this.sheets,function(l,j){j._II9.call(j,(g._i0?"d":j._ILb.viewmode));if(!g._i0){j._IFf.call(j)}})},_ab:function(){var a=this;$.each(this.sheets,function(c,b){b._IFf.call(b,1)})},_IB2:function(){var b=this,c=b.sheets[b._IJa],a=(c&&c._IH6)?c._IH6.G1.mresult:null;if(a){var d=new IG$._IA7({sheetview:c,mresult:a});d.show(b)}},_IB5:function(c,a){var b=this,d=new IG$._I3e();if(c){d.init(b,{ack:"11",payload:IG$._I2d({uid:c}),mbody:IG$._I2e({option:"translate"})},b,function(g){var l=IG$._I18(g,"/smsg/item"),j,h;if(l){j=IG$._I1c(l);h=IG$.xAM(j.type);b._IG7({cubeobj:j,reporttype:h})}},false);d._l()}else{if(IG$._IB6){var e=new IG$._IB6({modal:true,_ILa:b._ILa,callback:new IG$._I3d(b,function(g){b._IG7(g,a)})});e.show()}}},_IJ9:function(){var d=this,a=d.sheets[d._IJa],b,c=a._IK2;if(c&&c.results){for(b=0;b<c.results.length;b++){c.results[b].__bands=null}}a._IJf=true;a._IP8.call(a,a)},_ai:function(e){var c=this,d,a,b=c._par;c.dzone=new IG$.dz(e,c),c.dzone.cmode=c.cmode||0;if(b){b._dzseq=b._dzseq||0}c._dzid=b?b._dzid+"_"+(b._dzseq++):"root";c.dzone._dzid=c._dzid;c.dzone._IM6={f:c._IM6,s:c};c.dzone.b1.bind({config_doc:function(h,g){c._IM7.call(c,g)},config_pivot:function(h,g){c._IM7a.call(c,g)}});if(IG$.__ep){c.dzone.b1.bind("boxresized",function(){var j=c.getWidth(),o=c.getHeight(),l=borderpanel.getWidth(),g=borderpanel.getHeight(),h=c.dzone.b1.offset(),q=IG$.x_10._w(c.dzone.b1),m=IG$.x_10._h(c.dzone.b1),s,n;if(l<q||g<m){s=j-l;n=o-g;c.setSize(Math.max(q+s,j),Math.max(m+n,o))}})}c._IFd(c.vmode==1?true:null)},_IFd:function(c){var a=this,d,b=a.uid;a._IN1();if(b&&b.length>0){a.issheet=(a.itemtype=="Sheet")?true:false;a._IJa=0;if(a.isnewitem){}else{if(a.pivot){setTimeout(function(){var e=IG$._I13(a.pivot);a.pivot=null;a._IM9(e)},10)}else{if(a.writable){IG$._I56(a,function(e){if(e!="unlock"){a.writable=false;a.down("[name=t_save]").hide()}})}d=new IG$._I3e();d.init(a,{ack:"5",payload:IG$._I2d({uid:b,revision:a.revision}),mbody:IG$._I2e({option:a.hiddentoolbar?"":"diagnostics"})},a,a._IM9,false,c);d._l()}}}else{if(a.__jid&&a.__sid){a._ILd.call(a,a.__sid,a.__jid)}else{a.setLoading(false);a._d1.call(a);if(a.vmode!=1){setTimeout(function(){a._IB5.call(a,a.cubeuid)},400)}}}},_d1:function(b){var a=this.execallback;a&&a.execute(b)},_IM9:function(n,o){var b=this,e=b.auxfilter,d=IG$._I18(n,"/smsg/item"),l,q,m,c,h,a,g,j={};c=(d)?IG$._I1c(d):null;if(c&&c.type=="Export"){h=IG$._I18(n,"/smsg/item/export/report_content/reportxml");b._ILa=new IG$._IEe(h);h=IG$._I18(n,"/smsg/item/export/sheets");if(h){a=IG$._I26(h);for(l=0;l<a.length;l++){g=IG$._I18(a[l],"gridresult");if(g){j[IG$._I1b(a[l],"docid")]=new IG$._IF2(null,g)}}}b._IMb(j);b.fireEvent("_lc0",b)}else{b._ILa=new IG$._IEe(n);b._IMb(null,o);if(e){for(l=0;l<b._ILa.sheets.length;l++){m=b._ILa.sheets[l];for(q in e){m._IL9[q]=e[q]}}}b.fireEvent("_lc0",b)}},cL:function(){},_IMf:function(e){var c=this,a=c.down("[name=tbcubepath]"),d=c.sheets[c._IJa],b=c._ILa;a.show();a.setText(e.name);if(d&&d._ILb.cubeuid==e.uid){d._ILb.cubeitem=e}if(b.cubeuid==e.uid){b.cubeitem=e}a.setTooltip("Goto: "+e.nodepath)},_ILc:function(o,b){var q=this,m=o.view.sheetindex,t=q._IM4,n=q.down("[name=tbreportname]"),v=q.dzone,d,h,u,l,g;if(b||m!=q._IJa){l=q._IJa=(q.itemtype=="Sheet")?0:m;d=q.sheets[l];u=(d&&d._ILb?d._ILb.viewmode:null);if(q._2){var e=q.down("[name=t_grid]"),s=q.down("[name=t_chart]"),c=q.down("[name=t_r]"),j=q.down("[name=t_python]"),a=0;switch(u){case"chart":a=1;break;case"r":a=2;break;case"python":a=3;break}e.toggle(a==0,a==0);s.toggle(a==1,a==1);c.toggle(a==2,a==2);j.toggle(a==3,a==3);a==1&&q._IK6();a!=1&&q._IK4();q._IK7(a==2);q._IL3(a!=1);q._IL4(a!=2);q._IK7p(a==3)}h=v._IIb.call(v,d._ILb.layoutinfo.docid);h.setTitle.call(h,d._ILb.name||"");v._IIc.call(v,h);q._ILe_(false);if(n){n.setText(q._ILa.name||"");q._IGb();q._IN4()}q._IGa(false);if(q._i0){if(t){t._IGd.call(t,q._ILa.sheets[l],q._ILa)}g=q.loadPivotOption;g&&g.call(q,l,t?t.cubeuid:null)}}},_IMb:function(x,C){var z,d,c,o=this,D=o,j=o.down("[name=tbreportname]"),u=o.dzone,l,q,A=(C?false:true),a=o.issheet,h=o._ILa,e=h.sheets,c,w,y,g,B,v,b,n,t,s;o._IJb();u._IN9.call(u);o.sheets=[];l=h.layoutinfo;o.ctrls=h.ctrls;o._IN3();j&&j.setText(h.name||"");if(!a){if(l.type=="bubble"){l=u.tLayout(l)}else{if(l.type=="mondrian"){}}u.m1.call(u,o,l,o.ctrls)}if(h.requirepwd&&!IG$.dbp[h.poolname]){A=false;var m=new IG$._Ice({poolname:h.poolname,callback:new IG$._I3d(o,o.r_IMa,h.poolname)});IG$._I_5(this,m)}if(e.length>0){d=e[0];n=d.layoutinfo;if(a&&o.sheetindex!=0){}else{w=n.docid;if(!w){v=u.items;for(z=0;z<v.length;z++){b=v[z];if(b.objtype=="SHEET"&&!b.view){w=n.docid=b.docid;break}}}ubody=u._IIb.call(u,w);if(ubody==null&&!w){ubody=D.aB();w=n.docid=ubody.docid}if(ubody){ubody.setTitle.call(ubody,d.name||"");u._IIc.call(u,ubody);y=x?x[w]:null;c=o._IMd(0,d,ubody,y);ubody.view=c;ubody.objtype="SHEET";ubody.m1.call(ubody);ubody.setReportOption.call(ubody,d);o.sheets.push(c);B=o.sheets[0];B.sheetindex=0;B._ILb=d;B._ILa=h;B._IN0.call(B)}}}t=u.items;if(A&&t){$.each(t,function(E,F){if(F.objtype=="FILTER"){A=false}})}if(h.b_sc_load=="T"){A=false;u.cmode=1;o._cld=1}if(e.length>1){for(z=e.length-1;z>=0;z--){sop=e[z];n=sop.layoutinfo;w=n.docid;ubody=u._IIb.call(u,w);if(!ubody){if(a){if(o.sheetindex==z){ubody=D.aB(sop.objtype);n.docid=ubody.docid}}else{e.splice(z,1);o.sheets.splice(z,z)}}}for(z=1;z<e.length;z++){d=e[z];n=d.layoutinfo;if(a&&o.sheetindex!=z){continue}w=n.docid;ubody=u._IIb.call(u,w);if(ubody){y=x?x[w]:null;c=o._IMd(z,d,ubody,y);ubody.view=c;ubody.objtype="SHEET";ubody.setReportOption.call(ubody,d);ubody.m1.call(ubody);o.sheets.push(c);if(d.openload){c.sheetindex=z;c._ILb=d;c._ILa=h;c._IN0.call(c);A=true}ubody.setTitle.call(ubody,d.name||"")}}}if(!IG$.__ep&&h.__cs.l.length==0){if(o.vmode!=1){setTimeout(function(){o._IB5.call(o)},200)}}if(!IG$.__ep){g=e.length>0?u._IIb.call(u,e[0].layoutinfo.docid):null;g&&o._ILc(g,true);if(o._2){o._IGb()}o._IJ4();o._ILe_(true)}o._ILf_(true);if(!A){o._d1()}o.__ld=true;o.__d_c&&o.__d_c.execute();if(typeof window.callPhantom==="function"){window.callPhantom({_proc:"S"})}if(h.b_sc_load=="T"){setTimeout(function(){var E=new IG$._I3e();E.init(o,{ack:"22",payload:IG$._I2d({uid:o.uid,action:"latestjob"},"uid;action"),mbody:IG$._I2e({})},o,function(F){var I=IG$._I18(F,"/smsg/job"),G=this,H;if(I){H=IG$._I1c(I);H.sid&&H.jid&&G._ILd.call(G,H.sid,H.jid)}else{G._cld=0;D._load_run()}},null);E._l()},10)}},_load_run:function(){var c=this,d=c.dzone,a=d.ctrls,b=[];$.each(d.items,function(e,g){switch(g.objtype){case"FILTER":b.push(g);break;default:break}});if(b.length){if(b.length==1){f=b[0];f.view&&f.view.l5.call(f.view,true,true)}else{$.each(b,function(g,o){var l=o.view,h,j,n,e;if(l){h=l._ILb.pff1a;j=h?h.showbutton:false;n=(j&&h.f_b_trg=="T")?1:0;e=n&&h.f_b_trg_all=="T"?1:0;if(n){f=o}}});if(!f){f=b[b.length-1]}f.view&&f.view.l5.call(f.view,true,true)}}else{c.cobj._t$.call(c.cobj,"cmd_run",null,null,null,1)}},r_IMa:function(d,a){var b=this,c=b.sheets;IG$.dbp[a]=d;if(c&&c.length>0){c[0]._IJ2.call(c[0])}},regbody:function(a,c){var b=this;b.__dreg=b.__dreg||{};b.__dreg[a]={b_init:false,docid:a,fobj:c}},cCC:function(){var a=this,c=new IG$._I3e(),b=a.uid;if(b){c.init(a,{ack:"11",payload:IG$._I2d({uid:b},"uid"),mbody:IG$._I2e({option:"clear_cache"})},a,function(d){var g=this,e=g.down("[name=tbcache]");if(e){e.hide()}});c._l()}}});IG$._ILd=function(a,b){var d=this,c=new IG$._I3e(),e;if(b){d.setLoading(true);e={sid:a,jid:b,action:"jobresult"};c.init(d,{ack:"22",payload:IG$._I2d(e,"sid;jid;action"),mbody:IG$._I2e({})},d,d.r_ILd,null,e);c._l()}};IG$.r_ILd=function(y,l){var z=this,h=z.down("[name=tbsch]"),g=IG$._I18(y,"/smsg"),d=(g?IG$._I26(g):null),v,A,a,s=[],u,c,b,j,m,w,x,o,q,n,e=z.sheets;z.setLoading(false);if(d){for(v=0;v<d.length;v++){n=d[v];u=parseInt(IG$._I1b(n,"jobseq"));c=IG$._I1b(n,"key");j=IG$._I1b(n,"crdate");m=IG$._I1b(n,"srdate");b=(c?parseInt(c):u);a=IG$._I19(n,"info");if(a){w=IG$._I1a(a,"crdate");x=IG$._I1a(a,"srdate")}a=IG$._I19(n,"resultxml");if(a){q=IG$._I25(a);q=q?IG$._I13(q):null;o={jobseq:b,crdate:j,srdate:m,crdate_fmt:w,srdate_fmt:x,content:q};s.push(o)}}if(s.length){for(v=0;v<s.length;v++){jobres=s[v];u=jobres.jobseq;j=jobres.crdate;w=jobres.crdate_fmt;m=jobres.srdate;x=jobres.srdate_fmt;if(jobres.content){A=new IG$._IF2(jobres.content);A.srdate=m;A.crdate=j;A.srdate_fmt=x;A.crdate_fmt=w;if(l){A._job={sid:l.sid,jid:l.jid,jobid:A._IL8}}if(e[u]){e[u]._IJe.call(e[u],A)}}}if(h){h.show();h.setText(x||"-")}}}};IG$._IBe=$s.extend(IG$._I57,{uid:null,layout:"fit",closable:true,sheets:[],ctrls:{},_IJa:0,_IM0:[],_IM1:[],_ILb_:false,isnewitem:false,ignoreclose:false,_IM2:{},_c:["t_save","t_save_as","t_run","t_exp","t_tool","t_grid","t_chart","t_r","t_python","toolbarprompt","t_sql_edit","t_sql_view","t_sheet","t_chart_wizard","t_chart_type","t_r_summary","t_r_script","t_r_saveimage","t_r_wizard","t_editdata","t_py_edit"],initComponent:function(){var d=this,c,b,a;if(d._iv=="dashboard"){d.hiddenstatusbar=true;d.hiddentoolbar=true}if(IG$.__ep_m<1){c={xtype:"toolbar",name:"_1",hidden:d.hiddenstatusbar||false,items:[{xtype:"button",text:"",name:"tbreportname",tooltipType:"title",tooltip:"Search in navigation",handler:function(){var g=d._ILa,e=IG$._IM3;if(g&&g.nodepath&&IG$._I7d&&e){if(e.vmode!="tree"){IG$._I7e(1)}e._IHd.call(e,{name:g.name,nodepath:g.nodepath,uid:g.uid})}},scope:d},"-",{xtype:"button",text:"",name:"tbcubepath",tooltipType:"title",hidden:true,handler:function(){var g=this,j=g.sheets[g._IJa],h=j._ILb.cubeuid?j._ILb.cubeitem:g._ILa.cubeitem;if(h&&IG$._IM3&&IG$._IM3.rendered){var e=IG$._IM3;if(e.vmode!="tree"){IG$._I7e(1)}e._IHd.call(e,h)}},scope:d},"->",{xtype:"tbtext",text:"",hidden:true,name:"tbsch"},{xtype:"tbtext",text:"",name:"tbresult"},"-",{xtype:"tbtext",name:"tbrescount",text:""},"-",{xtype:"tbtext",text:"Ready",name:"tbstatus"},{xtype:"button",iconCls:"igc-cached",hidden:true,tooltipType:"title",name:"tbcache",tooltip:"",handler:function(){this.cCC()},scope:d}]};b={xtype:"toolbar",name:"_2",hidden:d.hiddentoolbar||(ig$.fm&&ig$.fm.ig_r_tbar)||false,items:[{iconCls:"icon-toolbar-runreport",tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this._t$("cmd_run")},scope:d}]}}a=[{xtype:"panel",border:0,layout:"border",items:[{xtype:"panel",name:"mainpanel",border:0,region:"center",layout:"border",flex:1,defaults:{collapsible:true,split:false,bodyPadding:0,border:true},items:[{name:"_3",html:"Please wait while loading...",region:"center",layout:"fit",border:0,collapsible:false}],listeners:{resize:function(e,m,l,j){var g=this,h=g.dzone;if(h){IG$.x_10._w(h.b0,m);IG$.x_10._h(h.b0,l);h._IM5.call(h,true)}},scope:d}}]}];$s.apply(d,{tbar:b,bbar:c,items:a});IG$._IBe.superclass.initComponent.call(this)},loadPivotOption:function(a,d){var g=this,c=g.down("[name=pivoteditor]"),b,d,e=true;if(c&&g._i0){g.confirmPivotOption();c.setVisible(true);b=g._ILa.sheets[a];c._IJa=a,c._ILa=g._ILa;c._ILb=b;if(!d){d=b?b.cubeuid:null}if(d){e=b?b.Uc.call(b,d):true;if(e){b.cubeuid=d}}c.cubeuid=b?b.cubeuid:null;c.Uc.call(c,d,e);setTimeout(function(){c._IL1.call(c);c._c=1},20)}},confirmPivotOption:function(){var b=this,a=b.down("[name=pivoteditor]");if(a&&a._c){a._IFf.call(a);a._c=0}},listeners:{afterrender:function(){var b=this,a=b.down("[name=_3]"),d=$(a.body.dom),c=b.down("[name=_1]");_2=b.down("[name=_2]");b._1=c;b._2=_2;b.__loaded=1;b._IM4=b.down("[name=p1]");b._3=a;d.empty();b._ai(d)},resize:function(a,g,e,b){var c=this,d=c.dzone;if(g>0&&e>0){d._IM5.call(d,true)}},close:function(a,d){var c=this,g=c.sheets,e=c.dzone,b;if(g&&g.length){for(b=0;b<g.length;b++){g[b].close()}c.sheets=null}if(e&&e.items&&e.items.length){for(b=0;b<e.items.length;b++){if(e.items[b].objtype!="SHEET"&&e.items[b].view){e.items[b].view.__dx=true}}}},beforeclose:function(c,h){var g=this,e=true,a=[],d,j=g.sheets;if(g.dlg_pivot){g.dlg_pivot.close()}for(d=0;d<j.length;d++){if(j[d].jobid){a.push(j[d].jobid)}if(j[d]._refresh_timer){clearTimeout(j[d]._refresh_timer)}}if(c.ignoreclose){e=true}else{if(c._ILb_&&(g.writable||!g.uid)){IG$._I55(null,null,c._IM8,c,c);e=false}else{if(g.writable&&g.uid){var b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"lock",detail:"close",rcs:a.join(";")})},c,function(l){},false);b._l()}else{if(a.length>0){var b=new IG$._I3e();b.init(c,{ack:"18",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"clearjob",rcs:a.join(";")})},c,function(l){},false);b._l()}}}}return e}},_IM8:function(c){var b=this;if(c=="no"){if(b.uid){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){b.ignoreclose=true;b.close()},false);a._l()}else{b.ignoreclose=true;b.close()}}else{if(c=="yes"){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){b._t$("cmd_save",true)},false);a._l()}}},_IM6:function(o){var h=this,m=h.dzone,b=h._ILa,n=m._IIb.call(m,o),l=(n?n.view:null),d,c,e=h.sheets,g,a=false;h._ILb_=true;if(l){switch(n.objtype){case"SHEET":for(d=0;d<e.length;d++){g=e[d];if(g==l){e.splice(d,1);if(g._ILb&&g._ILb.objtype=="SHEET"&&b.sheets.length>d){b.sheets.splice(d,1)}a=true;break}}break;default:if(h.ctrls[o]){l.__dx=true;delete h.ctrls[o]}a=true;break}}else{if(h.ctrls[o]){delete h.ctrls[o]}a=true}return a},_IM7:function(m){var g=this,j=g.dzone,l=(m?j._IIb.call(j,m):null),h=(l?l.view:null),c,d=g.sheets,e,a=false,b;if(h){b=h.sheetindex;g._IG9.call(g,b,h)}},_IM7a:function(o){var j=this,m=j.dzone,n=(o?m._IIb.call(m,o):null),l=(n?n.view:null),d,e=j.sheets,g,a=false,b,c;if(l){c=n.objtype=="FILTER";b=l.sheetindex;if(j.dlg_pivot){if(j.dlg_pivot.docid==o){return}j.dlg_pivot.close();j.dlg_pivot=null}var h=new IG$.dlg_pivot({report_ptr:j,_ILa:j._ILa,sheetindex:b,objtype:n.objtype,docid:o});IG$._I_5(j,h)}},r_IMa:IG$._Ibb.r_IMa,regbody:IG$._Ibb.regbody,_IMb:IG$._Ibb._IMb,_load_run:IG$._Ibb._load_run,_ILd:IG$._ILd,r_ILd:IG$.r_ILd,_IL6:IG$._Ibb._IL6,_s1:IG$._Ibb._s1,_K:IG$._Ibb._K,_ILc:IG$._Ibb._ILc,_IGa:IG$._Ibb._IGa,_IG9:function(d,c){c.sheetindex=d;var b=this,a=new IG$._If1({dzone:b.dzone,sheets:b.sheets,_ILb:c._ILb,sheetindex:d,_ILa:b._ILa,callback:new IG$._I3d(b,b.r_IG9,c)});IG$._I_5(this,a)},r_IG9:function(q,j){var s=this,m=s._ILa.sheets,d=s._ILa,n=j._ILb,v=s.dzone,x,o,b,a=j.sheetindex,e,g,u,c;x=(n.objtype=="SHEET")?n.layoutinfo.docid:n.docid;e=v._IIb.call(v,x);if(e){s._ILb_=true;c=d.sheets;if(n.changetype){s._IJa=0;if(n.changetype=="SHEET"){for(g=0;g<c.length;g++){if(c[g]==n){c.splice(g,1);break}}for(g=0;g<s.sheets.length;g++){if(s.sheets[g]==j){s.sheets.splice(g,1);break}}for(g=0;g<s.sheets.length;g++){s.sheets[g].sheetindex=g}}if(e.view){e.view.rX.call(e.view);e.b3.empty()}if(n.objtype=="SHEET"){o=new IG$._IEf(null,s.itemtype,false);o.layoutinfo.docid=x;c.push(o);b=s._IMd(a,o,e);e.view=b;s.sheets.push(b);b.sheetindex=s.sheets.length-1}else{if(n.changetype=="SHEET"){u=new IG$._IFc(null);u.objtype=n.objtype;u.close=n.close;u.name=n.name}s._INb(n,e);o=e.view;if(n.changetype=="SHEET"){s.ctrls[e.docid]=u}var t=IG$.x_10._w(o.container),l=IG$.x_10._h(o.container);o.setSize(t,l)}s._ILf_(false)}if(n.objtype=="FILTER"||n.objtype=="TEXT"||n.objtype=="NAVI"||n.objtype=="RPT_VIEW"){if(n.objtype=="FILTER"){e.view.l3.call(e.view,null,false,false,true)}else{e.view.l3.call(e.view)}}e.setTitle.call(e,n.name);e.showTitle.call(e,!n.hidetitle);e.fw=n.fw;e.fh=n.fh;e.setReportOption.call(e,n);e.m1.call(e)}v._IM5.call(v,true)},_IGb:IG$._Ibb._IGb,_IMf:IG$._Ibb._IMf,_ILf_:IG$._Ibb._ILf_,_IJb:IG$._Ibb._IJb,aB:IG$._Ibb.aB,_IN1:function(){var g,c=this,b=c._2,a=[],e,h;if(!b){return}b.suspendLayout=true;b.removeAll();for(e=0;e<IG$._I32.length;e++){h={text:IG$._I32[e].label,charttype:IG$._I32[e].charttype,subtype:IG$._I32[e].subtype,handler:function(){c._IN5.call(c,this)}};a.push(h)}g=[{iconCls:"icon-toolbar-save",name:"t_save",cls:"ig_r_save",tooltip:IRm$.r1("L_SAVE_REPORT"),hidden:true,handler:function(){this._t$("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",cls:"ig_r_saveas",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),hidden:true,handler:function(){this._t$("cmd_saveas")},scope:this},"-",{iconCls:"icon-toolbar-runreport",name:"t_run",cls:"ig_r_run",hidden:true,tooltip:IRm$.r1("L_RUN_REPORT"),handler:function(){this._t$("cmd_run")},scope:this},"-",{xtype:"button",iconCls:"icon-toolbar-addsheet",name:"t_sheet",cls:"ig_r_adpanel",hidden:true,text:IRm$.r1("L_ADD_VIEW"),menu:{xtype:"menu",items:[{text:IRm$.r1("L_NEW_SHEET"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","SHEET")},scope:this},{text:IRm$.r1("L_NEW_FILTER"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","FILTER")},scope:this},{text:IRm$.r1("L_NEW_TEXTAREA"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","TEXT")},scope:this},"-",{text:IRm$.r1("L_NEW_TABPANEL"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","TAB")},scope:this},{text:IRm$.r1("L_NEW_PANEL"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","PANEL")},scope:this},{text:IRm$.r1("L_NEW_RPT_VIEWER"),handler:function(){this._ILb_=true;this._t$("cmd_add_sheet","RPT_VIEW")},scope:this}]}},{iconCls:"icon-toolbar-layout",tooltip:"Edit Docking Panel",cls:"ig_r_edpanel",name:"b_edpanel",enableToggle:true,text:IRm$.r1("L_PIVOT_REPORT"),handler:function(){this._ILb_=true;this._t$("cmd_dock_panel")},listeners:{afterrender:function(j){IG$.r___.a(j,"edit_dock_panel")}},scope:this},"-",{iconCls:"icon-toolbar-grid",cls:"ig_r_grid",name:"t_grid",hidden:true,toggleGroup:"vm",tooltip:IRm$.r1("L_VIEW_GRID"),handler:function(){this._ILb_=true;this._t$("cmd_sheetview")},scope:this},{iconCls:"icon-toolbar-chart",name:"t_chart",cls:"ig_r_chart",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_CHART"),handler:function(){this._ILb_=true;this._t$("cmd_chartview")},scope:this},{iconCls:"icon-toolbar-r",name:"t_r",cls:"ig_r_r",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_RSTAT"),handler:function(){this._ILb_=true;this._t$("cmd_rview")},scope:this},{iconCls:"icon-toolbar-python",name:"t_python",cls:"ig_r_python",toggleGroup:"vm",hidden:true,tooltip:IRm$.r1("L_VIEW_PYTHON"),handler:function(){this._ILb_=true;this._t$("cmd_pythonview")},scope:this},"-",{iconCls:"icon-toolbar-editdata",name:"t_editdata",hidden:true,tooltip:IRm$.r1("L_EDIT_DATA"),handler:function(){this._ILb_=true;this._t$("cmd_edit_data")},scope:this},{iconCls:"icon-toolbar-prompt",name:"toolbarprompt",hidden:true,tooltip:"Prompt",handler:function(){this._ILb_=true;this._t$("cmd_prompt")},scope:this},{iconCls:"icon-sql",name:"t_sql_edit",hidden:true,tooltip:IRm$.r1("L_EDIT_SQL"),handler:function(){this._t$("cmd_edit_sql")},scope:this},{iconCls:"icon-toolbar-export",name:"t_exp",cls:"ig_r_exp",hidden:true,tooltip:IRm$.r1("L_EXPORT"),xtype:"button",menu:[{text:IRm$.r1("L_EXPORT_EXCEL"),name:"ig_r_xls",iconCls:"icon-toolbar-excel",handler:function(){this._t$("cmd_export_excel")},scope:this},{text:IRm$.r1("L_EXPORT_PDF"),name:"ig_r_pdf",iconCls:"icon-toolbar-pdf",handler:function(){this._t$("cmd_export_pdf")},scope:this},{text:IRm$.r1("L_EXPORT_CSV"),name:"ig_r_csv",handler:function(){this._t$("cmd_export_csv")},scope:this},{text:IRm$.r1("L_EXPORT_HTML"),name:"ig_r_html",iconCls:"icon-toolbar-html",handler:function(){this._t$("cmd_export_html")},scope:this},{name:"office",cls:"ig_r_office",text:IRm$.r1("L_EXPORT_OFFICE"),menu:{xtype:"menu",items:[]}},{name:"jasper",cls:"ig_r_jasper",text:IRm$.r1("L_EXPORT_JASPER"),menu:{xtype:"menu",items:[]},handler:function(){if(this.dft_jasp_exp){me._t$.call(me,"cmd_export_jasper",this.dft_jasp_exp)}}},{text:IRm$.r1("L_CLIPBOARD_COPY"),cls:"ig_r_clb",iconCls:"icon-toolbar-clipboard",handler:function(){this._t$("cmd_clipboard")},scope:this}]}];if(window.IExport){var d;for(d in window.IExport){if(window.IExport[d].toolbar){window.IExport[d].toolbar.scope=this;g.push(window.IExport[d].toolbar)}}}g.push({tooltip:IRm$.r1("L_EXPORT_OPTION"),iconCls:"icon-toolbar-popt",cls:"ig_r_eopt",handler:function(){this._ILb_=true;this._t$("cmd_export_option")},scope:this},"-",{iconCls:"icon-sql",text:IRm$.r1("L_VIEW_SQL"),cls:"ig_r_sv",name:"t_sql_view",hidden:true,handler:function(){this._t$("cmd_view_sql")},scope:this},{iconCls:"icon-toolbar-tools",name:"t_tool",cls:"ig_r_tools",hidden:true,tooltip:IRm$.r1("L_REPORT_TOOLS"),xtype:"button",menu:[{text:IRm$.r1("L_STATISTICS"),cls:"ig_r_stat",handler:function(){this._ILb_=true;this._t$("cmd_statistics")},scope:this}]},"-",{text:IRm$.r1("B_WIZARD"),name:"t_chart_wizard",cls:"ig_r_cwz",dtype:"chart",hidden:true,handler:function(){var j=this;this._ILb_=true;j._t$.call(j,"cmd_chartwizard")},scope:this},{text:IRm$.r1("L_CHART_TYPE"),name:"t_chart_type",cls:"ig_r_ct",hidden:true,dtype:"chart",menu:a},{text:IRm$.r1("L_R_SUMMARY"),tooltip:IRm$.r1("L_R_SUMMARY"),name:"t_r_summary",cls:"ig_r_rsum",iconCls:"icon-toolbar-rsummary",dtype:"r",hidden:true,handler:function(){var j=this;this._ILb_=true;j._t$.call(j,"cmd_r_summary")},scope:this},{text:IRm$.r1("L_R_SCRIPT"),tooltip:IRm$.r1("L_R_SCRIPT"),iconCls:"icon-toolbar-rscript",name:"t_r_script",cls:"ig_r_rsce",dtype:"r",hidden:true,handler:function(){var j=this;this._ILb_=true;j._t$.call(j,"cmd_r_script")},scope:this},{text:IRm$.r1("L_R_WIZARD"),tooltip:IRm$.r1("L_R_WIZARD"),iconCls:"icon-toolbar-rwizard",name:"t_r_wizard",cls:"ig_r_rwzd",dtype:"r",hidden:true,handler:function(){var j=this;this._ILb_=true;j._t$.call(j,"cmd_r_wizard")},scope:this},{text:IRm$.r1("L_PY_EDIT"),tooltip:IRm$.r1("L_PY_EDIT"),iconCls:"icon-toolbar-pyedit",name:"t_py_edit",cls:"ig_py_edit",dtype:"py",hidden:true,handler:function(){var j=this;this._ILb_=true;j._t$.call(j,"cmd_py_edit")},scope:this},{text:IRm$.r1("T_SAVE_IMAGE"),tooltip:IRm$.r1("L_SAVE_IMAGE"),iconCls:"icon-toolbar-saveimage",name:"t_r_saveimage",cls:"ig_r_rimg",xtype:"button",dtype:"r",hidden:true,menu:[{text:"PNG File",handler:function(){var j=this;j._t$.call(j,"cmd_r_simage_png")},scope:this},{text:"SVG File",handler:function(){var j=this;j._t$.call(j,"cmd_r_simage_svg")},scope:this}]},"->",{iconCls:"icon-toolbar-schedule",cls:"ig_r_sch",tooltip:IRm$.r1("B_SCHEDULE"),hidden:ig$.features&&!ig$.features.enable_scheduler?true:false,handler:function(){this._t$.call(this,"cmd_schedule")},scope:this},{iconCls:"icon-email",cls:"ig_r_email",tooltip:IRm$.r1("B_SHARE"),handler:function(){this._t$.call(this,"cmd_share")},scope:this},{iconCls:"icon-toolbar-favorites",cls:"ig_r_fav",tooltip:IRm$.r1("B_FAVORITES"),handler:function(){this._t$.call(this,"cmd_favorites")},scope:this},{iconCls:"icon-toolbar-svn",hidden:true,tooltip:IRm$.r1("B_SVN"),handler:function(){this._t$.call(this,"cmd_svn")},scope:this},{iconCls:"icon-toolbar-userdoc",tooltip:IRm$.r1("B_USER_DOC"),cls:"ig_r_inst",handler:function(){IG$._I63(this.uid,true,"report")},scope:this});b.add(g);b.suspendLayout=false;b.doLayout()},_IN2:IG$._Ibb._IN2,_b:function(){var d=this,a=d._2,c=d._c,b=d._a;if(!a){return}if(!b){b=d._a={};for(i=0;i<c.length;i++){b[c[i]]=a.down("[name="+c[i]+"]")}}return b},_IN3:function(){var g=this,a=g._2,e=g._a,d=g._c,c,b,h=[];if(!a){return}a.suspendLayout=true;e=g._b();for(c=0;c<d.length;c++){e[d[c]].hide()}if(g.writable||g.uid==""){h.push("t_save")}h.push("t_save_as");h.push(["t_run","t_tool","t_exp","t_grid","t_chart","t_sheet"]);if(IG$._I83.jS1.l3.charAt(0)!="P"){h.push("t_r");h.push("t_python")}g._IN4();g._IJb();for(c=0;c<h.length;c++){if(typeof(h[c])=="string"){if(!ig$.fm[e[h[c]].cls]){e[h[c]].show()}}else{for(b=0;b<h[c].length;b++){if(!ig$.fm[e[h[c][b]].cls]){e[h[c][b]].show()}}}}a.suspendLayout=false;a.doLayout()},_IN4:function(){var d=this,b=d._b(),a=d._ILa.__cs,e=d.sheets[d._IJa],c=e?e._ILb.cubeuid:null,g;b.t_editdata.hide();b.t_sql_edit.hide();b.t_sql_view.hide();if(c&&a.m[c]){g=a.m[c].type;g=g?g.toLowerCase():null}if(g=="cube"||g=="mcube"||g=="datacube"||g=="nosql"||g=="mdbcube"||g=="sqlcube"){if(d.writable&&g=="mcube"&&!ig$.fm[b.t_editdata.cls]){b.t_editdata.show()}}else{if(g=="sqlcube"&&!ig$.fm[b.t_sql_edit.cls]){b.t_sql_edit.show()}}if((g=="cube"||g=="sqlcube")&&!ig$.fm[b.t_sql_view.cls]){b.t_sql_view.show()}},_ILe_:function(g){var c=this,a=null,b,e=c.down("[name=toolbarprompt]"),d=c.sheets[c._IJa];if(e){e.hide()}if(e&&d&&c._ILa&&c._ILa.sheets.length>c._IJa){a=c._ILa.sheets[c._IJa];b=a.needPrompt.call(a);if(b&&b.length>0){e.show();if(g){d._IKd&&d._IKd.show();d.showPrompt.call(d,b)}}else{if(g){d._IKd&&d._IKd.hide()}}}},_IK6:function(){var b=this,a=b._b();if(a){$.each(["t_chart_wizard","t_chart_type"],function(d,c){!ig$.fm[a[c].cls]&&a[c].show()})}},_IK4:function(){var b=this,a=b._b();if(!a){return}a.t_chart_wizard.hide();a.t_chart_type.hide()},_IK7:function(c){var b=this,a=b._a;if(!a){return}$.each(["t_r_summary","t_r_script","t_r_saveimage","t_r_wizard"],function(e,d){a[d]&&a[d][!ig$.fm[a[d].cls]&&c?"show":"hide"]()})},_IK7p:function(c){var b=this,a=b._a;if(!a){return}$.each(["t_py_edit"],function(e,d){a[d]&&a[d][!ig$.fm[a[d].cls]&&c?"show":"hide"]()})},_IN5:function(h){var d=this,e=h.charttype,a=h.subtype,c=d.sheets[d._IJa],b=c?c._ILb:null,g;if(b){g=b.cco;g.charttype=e;g.subtype=a;d._IJ9()}},_IL3:function(a){var c=this,b;for(b=0;b<c._IM0.length;b++){if(a){c._2.remove(c._IM0[b])}else{c._2.add(c._IM0[b])}}},_IL4:function(a){var b,c=this;for(b=0;b<c._IM1.length;b++){if(a){c._2.remove(c._IM1[b])}else{c._2.add(c._IM1[b])}}},_IIa:IG$._Ibb._IIa,_IIa2:IG$._Ibb._IIa2,_II9:IG$._Ibb._II9,_t$:IG$._Ibb._t$,rs_i1_2:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED_FAV"),null,null,0,"success")},_IN6:IG$._Ibb._IN6,_IN7:function(){var a=this;a._ILe_(true)},_IId:IG$._Ibb._IId,_INa:function(a){var c=this,d=c.sheets[c._IJa],b=d._IH8;if(a){d._ILb.rro.s3=a.vcontent;b.F2a.call(b);b.F3.call(b)}},addSheet:function(h){var d=this,b=h._ILb,e=d.dzone,c=d.sheets.length,a=this,g;b.objtype=h.objtype;b.drillreport=h.drillreport;b.drilltarget=h.drilltarget;b.close=h.closable;b.hidetitle=h.hidetitle;b.isdistinct=h.isdistinct;b.name=h.reportname;b.openload=h.openload;b.columnfill=h.columnfill;switch(h.objtype){case"SHEET":a._ILa.sheets.push(b);break;default:g=a._INb(b);a.ctrls[g.docid]=b;g.setReportOption.call(g,b);break}a._ILf_(false);e._IM5.call(e,true)},_INb:IG$._Ibb._INb,__l1:IG$._Ibb.__l1,_IMd:IG$._Ibb._IMd,_INc:IG$._Ibb._INc,_INd:IG$._Ibb._INd,applyOption:IG$._Ibb.applyOption,_INe:IG$._Ibb._INe,_INf:IG$._Ibb._INf,_IJ4:IG$._Ibb._IJ4,_IO0:IG$._Ibb._IO0,_IO2:IG$._Ibb._IO2,_IO1:IG$._Ibb._IO1,rs_showPrompt:IG$._Ibb.rs_showPrompt,_IJd:IG$._Ibb._IJd,_IJc:IG$._Ibb._IJc,_aa:IG$._Ibb._aa,_ab:IG$._Ibb._ab,_IO3:IG$._Ibb._IO3,_IJ9:IG$._Ibb._IJ9,F:IG$._Ibb.F,J3:IG$._Ibb.J3,_IJ6:function(c,b,d){var a=this;var e=new IG$._I3e();e.init(a,{ack:"31",payload:IG$._I2d({uid:c}),mbody:b},a,a.r_IJ6,null,[d]);e._l()},r_IJ6:function(a,b){var d=this,c=(b?b[0]:false);if(c){d.ignoreclose=true;d.close()}else{d._ILb_=false;IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}},_IJ5:IG$._Ibb._IJ5,_IO4:IG$._Ibb._IO4,_IO6:IG$._Ibb._IO6,_IO5:IG$._Ibb._IO5,_IB2:IG$._Ibb._IB2,_IB3:IG$._Ibb._IB3,_IB4:IG$._Ibb._IB4,r_IB3:IG$._Ibb.r_IB3,_IB5:IG$._Ibb._IB5,_ILf:IG$._Ibb._ILf,_IG7:IG$._Ibb._IG7,_ai:IG$._Ibb._ai,_IFd:IG$._Ibb._IFd,_d1:IG$._Ibb._d1,_IM9:IG$._Ibb._IM9,cL:IG$._Ibb.cL,cCC:IG$._Ibb.cCC,Uc:function(a){var b=this,c=b.sheets;$.each(c,function(e,d){d.Uc.call(d,a)})}});IG$._Ie7=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:500,height:440,seq:0,callback:null,_IG0:function(){var a=this;a.callback&&a.callback.execute();a.close()},_IFf:function(){var a=this;a.l2();a._IG0()},_IFd:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"1",payload:IG$._I2d({address:"ReportStyle"}),mbody:IG$._I2e()},a,function(o){var s=this,h=s._piobj.hloption,n,c=[],m,l,g=s.down("[name=grdhl]"),e=IG$._I18(o,"/smsg/item/themes/Styles"),t,d,q=[];for(m=0;m<h.length;m++){n=h[m];n.seq=s.m1();c.push(n.g1.call(n))}g.store.loadData(c);if(e){t=IG$._I18(e,"Custom");if(t){d=IG$._I26(t);for(l=0;l<d.length;l++){q.push({name:IG$._I1b(d[l],"name")})}}}s.__global_cs=q},null);b._l()},l2:function(){var e=this,g=e._piobj.hloption,h=e.down("[name=grdhl]"),a=h.store,d,c,l,b=[];for(d=0;d<a.data.items.length;d++){l=a.data.items[d];for(c=0;c<g.length;c++){if(g[c].seq==l.get("seq")){b.push(g[c]);break}}}e._piobj.hloption=b},o1:function(a){var b=this,a=a,c=new IG$._IAf({_piobj:b._piobj,__global_cs:b.__global_cs,hlobj:a,callback:new IG$._I3d(b,b.rs_o1)});IG$._I_5(b,c)},rs_o1:function(c){var b=this,e=b.down("[name=grdhl]"),a,g,d;if(c.isnew==true){c.isnew=false;b._piobj.hloption.push(c);e.store.add(c.g1())}else{for(a=0;a<e.store.data.items.length;a++){d=e.store.data.items[a];if(d.get("seq")==c.seq){g=d;break}}if(g){g.set("name",c.name);g.set("delimiter",c.delimiter);g.set("itemname",c.itemname);g.set("uid",c.uid);g.set("operator",c.operator);g.set("stylename",c.stylename);g.set("styleuid",c.styleuid);g.set("apprange",c.apprange);g.set("appset",c.appset);g.set("values",c.values)}}},m1:function(){var a=this;a.seq++;return"seq_"+a.seq},initComponent:function(){var a=this;a.title=IRm$.r1("T_HL_OPT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_HL_DESC"),flex:1},{xtype:"button",text:IRm$.r1("L_ADD_NEW"),handler:function(){var c=this,b=new IG$._Ie4(null);b.isnew=true;b.seq=c.m1();c.o1(b)},scope:this}]},{xtype:"gridpanel",name:"grdhl",flex:1,store:{xtype:"store",fields:["name","delimiter","itemname","uid","operator","stylename","styleuid","apprange","appset","seq","values"]},selType:"checkboxmodel",selModel:{mode:"SINGLE"},tbar:[{iconCls:"icon-toolbar-moveup",text:"Move Up",handler:function(){var d=this.down("[name=grdhl]"),g=d.getSelectionModel(),c=g.getSelection(),e,b;if(c&&c.length==1){e=c[0];b=d.store.indexOf(e);if(b>0){d.store.remove(e);d.store.insert(b-1,e);g.select(e,true)}}},scope:this},{xtype:"button",iconCls:"icon-toolbar-movedown",text:"Move Down",handler:function(){var d=this.down("[name=grdhl]"),g=d.getSelectionModel(),c=g.getSelection(),e,b;if(c&&c.length==1){e=c[0];b=d.store.indexOf(e);if(b+1<d.store.data.items.length){d.store.remove(e);d.store.insert(b+1,e);g.select(e,true)}}},scope:this}],columns:[{xtype:"gridcolumn",text:IRm$.r1("B_NAME"),dataIndex:"itemname",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_ST_NAME"),dataIndex:"stylename",flex:1},{xtype:"gridcolumn",text:IRm$.r1("L_CONDITION"),dataIndex:"operator",width:60},{xtype:"gridcolumn",text:IRm$.r1("B_VALUE"),dataIndex:"values",flex:1},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:IRm$.r1("B_DELETE"),handler:function(e,h,c){var g=this,d,b;rec=e.store.getAt(h);for(d=0;d<g._piobj.hloption.length;d++){if(g._piobj.hloption[d].seq==rec.get("seq")){b=g._piobj.hloption[d];g._piobj.hloption.splice(d,1);break}}if(b){e.store.removeAt(h)}},scope:this}]}],listeners:{cellclick:function(b,d,q,j,o,s,l,m){var n=this,g=b.store.getAt(s),c,h;if(q<3&&q>0){for(h=0;h<n._piobj.hloption.length;h++){if(n._piobj.hloption[h].seq==g.get("seq")){c=n._piobj.hloption[h];break}}if(c){n.o1(c)}}},scope:this}}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._Ie7.superclass.initComponent.apply(this,arguments)}});IG$._IAf=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:450,height:400,callback:null,_IG0:function(){var a=this;a.callback&&a.callback.execute(a.hlobj);a.close()},_IFf:function(){var a=this;a.l2();a._IG0()},_IFd:function(){var m=this,h=m._piobj,e=m.hlobj,c=h.defaultstyle,q=h.customstyle,d=[],n,b,s=[],l=m.down("[name=dsitem]"),o=m.down("[name=stylename]"),g,j,a=m.__global_cs;if(a){for(g=0;g<a.length;g++){s.push({name:a[g].name,value:a[g].name})}}$.each([c,q],function(u,v){var u,t;for(u=0;u<v.length;u++){t={name:v[u].name,value:v[u].name};s.push(t)}});o.store.loadData(s);for(g=0;g<h.dataview.store.data.items.length;g++){b=h.dataview.store.data.items[g];if(b.get("uid")){n={uid:b.get("uid"),name:b.get("name")};d.push(n)}}j=e.appset||"";j=j.split(";");for(g=0;g<j.length;g++){switch(j[g]){case"bg":m.down("[name=aset_1]").setValue(true);break;case"fs":m.down("[name=aset_2]").setValue(true);break;case"format":m.down("[name=aset_3]").setValue(true);break;case"tmpl":m.down("[name=aset_4]").setValue(true);break}}m.dsitemuid=e.uid;l.setValue(e.name);m.down("[name=delimiter]").setValue(e.delimiter||";");m.down("[name=operator]").setValue(e.operator||"EQ");m.down("[name=stylename]").setValue(e.stylename);m.down("[name=apprange]").setValue(e.apprange||"CELL");m.down("[name=values]").setValue(e.values)},l2:function(){var e=this,a=e.hlobj,c=e.down("[name=dsitem]"),b,g,d=[];$.each([{fname:"aset_1",code:"bg"},{fname:"aset_2",code:"fs"},{fname:"aset_3",code:"format"},{fname:"aset_4",code:"tmpl"}],function(h,j){if(e.down("[name="+j.fname+"]").getValue()==true){d.push(j.code)}});a.appset=d.join(";");a.uid=e.dsitemuid;a.itemname=c.getValue();a.name=a.itemname;a.delimiter=e.down("[name=delimiter]").getValue();a.operator=e.down("[name=operator]").getValue();a.stylename=e.down("[name=stylename]").getValue();a.apprange=e.down("[name=apprange]").getValue();a.values=e.down("[name=values]").getValue()},P2C:function(){var a=this,b=new IG$._I96({visibleItems:"workspace;folder;metric;tabdimension;measuregroupdimension;groupfield;formulameasure",u5x:{cubebrowse:true,rootuid:a._piobj.uid}});b.callback=new IG$._I3d(a,a.rs_P2C);IG$._I_5(a,b)},rs_P2C:function(b){var a=this;a.dsitemuid=b.uid;a.down("[name=dsitem]").setValue(b.name)},initComponent:function(){var a=this;a.title=IRm$.r1("T_HL_OPT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dsitem",readOnly:true,fieldLabel:IRm$.r1("B_NAME")},{xtype:"button",text:"..",handler:function(){this.P2C()},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_CONDITION"),name:"operator",valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_F_EQ"),value:"EQ"},{name:IRm$.r1("L_F_LT"),value:"LT"},{name:IRm$.r1("L_F_LE"),value:"LTE"},{name:IRm$.r1("L_F_GT"),value:"GT"},{name:IRm$.r1("L_F_GE"),value:"GTE"},{name:IRm$.r1("L_F_BETWEEN"),value:"BTW"},{name:IRm$.r1("L_F_LIKE"),value:"LIKE"},{name:IRm$.r1("L_F_IN"),value:"IN"}]},listeners:{change:function(b){var d=this,c=d.down("[name=delimiter]"),e=b.getValue();c.setVisible(e=="IN"||e=="BTW")},scope:this}},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"values"},{xtype:"textfield",hidden:true,fieldLabel:IRm$.r1("B_DELIMITER"),name:"delimiter"}]}]},{xtype:"fieldset",title:IRm$.r1("L_STYLE_OPTION"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_ST_NAME"),name:"stylename",valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",name:"apprange",fieldLabel:IRm$.r1("L_HL_RANGE"),valueField:"value",displayField:"name",editable:false,queryMode:"local",autoSelect:true,autoScroll:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_HL_CELL"),value:"CELL"},{name:IRm$.r1("L_HL_ROW"),value:"ROW"},{name:IRm$.r1("L_HL_COL"),value:"COL"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_APPL_R"),layout:"anchor",items:[{xtype:"checkbox",name:"aset_1",boxLabel:IRm$.r1("L_BG_COL")},{xtype:"checkbox",name:"aset_2",boxLabel:IRm$.r1("L_FONT_ST")},{xtype:"checkbox",name:"aset_3",boxLabel:IRm$.r1("L_F_STR")},{xtype:"checkbox",name:"aset_4",boxLabel:IRm$.r1("L_F_TMPL")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._IAf.superclass.initComponent.apply(this,arguments)}});IG$._Ibc=$s.extend($s.window,{xtype:"window",modal:true,region:"center",layout:"fit",closable:true,resizable:true,maximizable:true,width:700,height:500,callback:null,poolname:null,defaults:{bodyStyle:"padding:10px"},c1:function(){var a=this},initComponent:function(){var d=this,b,g,e,j=$(document),a=j.width()||700,c=j.height()||600;$s.apply(d,{width:a-80,height:c-80,title:IRm$.r1("L_DET_VIEW")+" ("+(d.viewinfo.title||d.viewinfo.name)+")",items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,name:"mpanel",border:0,layout:"fit",items:[]}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._Ibc.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){var c=this,b=c.down("[name=mpanel]"),e,d;if(c.viewinfo){e="report";d=IG$._I61(c.viewinfo.uid,e,c.viewinfo.name,c.viewinfo.nodepath,false,{closable:false,hiddentoolbar:true,auxfilter:c.auxfilter,header:false});b.add(d)}}}});IG$.cM4=function(b,c){var a=this;a.html=$("<div class='dummyctrl'></div>");a.layout=b;a.pctrl=c;a._1()};IG$.cM4.prototype={appendTo:function(a){this.html.appendTo(a)},_1:function(){var a=this,b;a.html.bind("click",function(c){c.stopPropagation();c.preventDefault();a._2.call(a,"click")});a.html.resizable({resize:function(j,g){var h=g.position,c=g.size,d=a.layout;d.position.width=c.width;d.position.height=c.height;a._2.call(a,"resize")}});a.html.draggable({stop:function(h,d){var g=d.position,c=a.layout;c.position.top=g.top;c.position.left=g.left;a._2.call(a,"resize")}});b=IG$.getControl.call(a,a.layout.type);a.ctrl=b},_2:function(b){var a=this;a.html.trigger("e_"+b)}};IG$.__global=IG$.__global||{};IG$.$d={applyOption:function(a){var c=this,b;if(a.bt){b=IG$._I13(a.bt.content);c.rs_M1(b)}else{if(a._ipcnt){c.iC();c.M7a(c._9._l21.onload)}}c.bt=null},M1:function(){var l=this,d=l.uid,g=$(".dashboard_cnt",l.body.dom),c=$(".dashboardview",l.body.dom),a,e,j,b=window.bowser;if(d&&d.length>0){a=l._emode?l.getWidth():l.body.getWidth();e=l._emode?l.getHeight():l.body.getHeight();l.initialized=true;$(c).empty();if(b.msie&&a>0&&e>0){IG$.x_10._w(c,a);IG$.x_10._h(c,e)}if(l.bt&&l.bt.content){l.applyOption({bt:l.bt})}else{j=new IG$._I3e();j.init(l,{ack:"5",payload:IG$._I2d({uid:d}),mbody:IG$._I2e()},l,l.rs_M1,null);j._l()}}},rs_M1:function(c){var e=this,m,l,b,a,d,g,j,h;e.setLoading(false);e._9=new IG$.cdxml(c);e._9.parseContent.call(e._9,e);m=e._9.item;if(m&&m.uid){e.uid=m.uid}e.M2(c);e.M3();e.M3a(c);e.iC();e.M7a(e._9._l21.onload)},showDummyInfo:function(g){var d=this,a=[{name:"Name",value:g.name},{name:"Type",value:g.type}],h=$("<ul class='dm-info'></ul>"),b;d.dummyInfo.empty();if(g.item){a.push({name:"Bind",value:g.item.name})}for(b=0;b<a.length;b++){h.append($("<li><span class='dm-title'>"+a[b].name+": </span><span>"+a[b].value+"</span></li>"))}var e=g.dummy.html.offset(),j=$(d.body.dom),c=j.offset();d.dummyInfo.css({left:(e.left-c.left+5),top:(e.top-c.top+5)});d.dummyInfo.show()},iC:function(){var e=this,a,j,c,h,d,g,b;if(e._ipcnt){a=IG$._I13(e._ipcnt);j=IG$._I18(a,"/smsg/params");if(j){c=e._9.page_param_map;h=IG$._I26(j);for(d=0;d<h.length;d++){g=IG$._I1b(h[d],"name");b=IG$._I24(h[d]);if(c[g]){c[g].set(b)}}}}e._ipcnt=null},M2:function(g){var l=this,e,d,b,n,h,c,m,a=IG$._I18(g,"/smsg/item/actevents");l.P1={};l.P1a={onload:null,ontimer:null};if(a!=null&&a.hasChildNodes()==true){b=IG$._I26(a);for(e=0;e<b.length;e++){n=IG$._I1b(b[e],"name");h=IG$._I26(b[e]);c=[];for(d=0;d<h.length;d++){m=new IG$._ICe(h[d]);c.push(m)}l.P1[n]=c}}a=IG$._I18(g,"/smsg/item/appl_acts");if(a){b=IG$._I26(a);for(e=0;e<b.length;e++){var o=IG$._I1b(b[e],"name");l.P1a[o]=IG$._I24(b[e])}}},M3:function(q){var n=this,l=$(".dashboard_cnt",n.body.dom),m=$(".dashboardview",n.body.dom),d,b,g=m,c,e,a,o,j;if(q){n._9=q}c=n._9;if(n.P3){$.each(n.P3,function(h,s){var t=s.P9;if(t&&t.destroy){t.destroy.call(t)}})}n.P3=[];n.P2={};n.P3r=[];m.empty();if(n.dsmode){n.dummyInfo=$("<div class='dummyinfo'></div>");n.dummyInfo.appendTo(g);n.dummyInfo.hide();n.dummyInfo.bind("click",function(){n.dummyInfo.fadeOut(1000)})}e=IG$.x_10._w(l);a=IG$.x_10._h(l);b={x:0,y:0,w:e,h:a};n.M4(c.layout,m,b,null,n.P3r);if(!n.dsmode){$.each(n.P3,function(h,s){var t=s.P9;if(t){t.__ivp_=1;t.__ivp&&t.__ivp.call(t)}})}n.Mm11("",b.w,b.h,null)},cL:function(b){var a=this,c=b.P10;a.Mmlla(b,b.layouts,c.x,c.y,c.w,c.h)},M3a:function(a){var d=this,g=IG$._I18(a,"/smsg/item/ActiveScript"),e,b={},c;for(c=0;c<d.P3.length;c++){b[d.P3[c].P6]=d.P3[c].P9}d.m_d$$mj=d._9.m_d$$mj;d.m_d$$mj._l6.call(d.m_d$$mj,b,d);g=IG$._I18(a,"/smsg/item/ConditionScript");if(g){e=$.trim(IG$._I24(g));if(e!=""){e=Base64.decode(e);d.c_d$$mj=new IG$.d$$mj("clc_"+d.uid.replace("-","_"));d.c_d$$mj._l5.call(d.c_d$$mj,e);d.c_d$$mj._l6.call(d.c_d$$mj,b)}}},M4:function(h,a,g,d,c){var e=this,b;if(h&&h.length){for(b=0;b<h.length;b++){var j=e.M5(h[b],a,g,d);j.layouts=[];if(h[b].layout.length){e.M4(h[b].layout,j.P9.html,j.P10,j,j.layouts)}c.push(j)}}},M5:function(c,j,a,n){var h=this,b=new IG$._ICc(c,n,h.dsmode),d,o,g={},l,e;b.dashboard=h;b.P1=h;h.P3.push(b);h.P2[b.P6.toLowerCase()]=b;b.P11(n,a.x,a.y,a.w,a.h);var m=$("<div id='"+b.P6+"'>");for(d=0;d<b.P9.p.length;d++){g[b.P9.p[d].name]=b.P9.p[d]}for(o in b.P7){if(g[o]){l=b.P7[o];switch(g[o].datatype){case"boolean":b.P7[o]=(l=="true"||l==true)?true:false;break;case"number":b.P7[o]=Number(l);break}}}var q=b.P9.html;q.appendTo(j).css({position:"absolute"});if(b.P9!=null&&b.P9.html!=null){b.P9.layout=c;b.P9.initDrawing()}if(b.P9){b.P9.pe=h.M6;b.P9.invalidate.call(b.P9)}if(h.dsmode){e=b.i9.call(b,c);e&&e.bind({e_resize:function(s){s.stopPropagation();s.stopImmediatePropagation();h._dE._1.call(h._dE,c)},e_click:function(s){s.stopPropagation();s.stopImmediatePropagation();h._dE._2.call(h._dE,c)}})}return b},M6:function(h,d){var j=this,c=j.ctrl.dashboard,l;switch(h){case"magnifire":var b=d.ctrl,m=IG$.x_10._w(b.P9.html),g=IG$.x_10._h(b.P9.html);l=b.P10;if(l.w==m&&l.h==g){var e=$(".dashboardview",c.body.dom);b.P9.html.css({top:0,left:0,width:e.clientWidth,height:e.clientHeight,zIndex:99});var a=b.P9;a.zoom=true;a.invalidate.call(a)}else{b.P9.html.css({position:"absolute",top:l.y+l._py,left:l.x+l._py,height:l.h,width:l.w,zIndex:""});b.P9.zoom=false;b.P9.invalidate.call(b.P9)}break}},M7a:function(b){var e=this,n=[],h,g,d,c,l,m=arguments;if(e.P1&&b&&b.length>0){for(d=0;d<b.length;d++){h=b[d];if(e.P1[h.uid]){g=e.P1[h.uid];for(c=0;c<g.length;c++){l=g[c];n.push(l)}}}m=Array.prototype.slice.call(m,1);m.unshift(n);e.M7.apply(e,m)}},M7:function(b){var c=this,a=arguments;a=Array.prototype.slice.call(a,1);if(c.executeEvents&&c.executeEvents.length>0){IG$._I52("Currently processing another job. Please wait while complete!");return}c._IIf(true);clearTimeout(c.eX);c.eX=setTimeout(function(){c.executeEvents=[];for(i=0;i<b.length;i++){b[i].args=a;c.executeEvents.push(b[i])}$.each(c.P2,function(d,e){if(e&&e.P9&&e.P9._c1){e.P9._c1.call(e.P9)}});c.M8.call(c,c)},100)},_IIf:function(g){var c=this,a,e,d,b;if(g==true){d={msg:IRm$.r1("B_PROC")+" <button id='m-mec-loader'>"+IRm$.r1("B_PROC_CANCEL")+"</button>"};b=c.setLoading(d);e=$(c.rendermask);a=$("#m-mec-loader",e).bind("click",function(){c._IP5.call(c)})}else{c.setLoading(false)}},_IP5:function(){var a=this;a.executeEvents=null;a.setLoading(false)},M8:function(b){if(b.executeEvents.length>0){var a=b.executeEvents.shift();try{b.M10.call(b,a)}catch(c){IG$._I52(IRm$.r1("E_D_EVNT",a.name));setTimeout(function(){b.executeEvents=null;b._IIf.call(b,false);b.setLoading(false)},10)}}else{setTimeout(function(){b._IIf.call(b,false);b.setLoading(false)},10)}},M9:function(g){var j=this,h,e,d,l,a=j._9.page_param_map;g.filtervalue=null;if(g.operator){h=g.valuemode;if(h=="control"){var b=j.P2[g.valuefield.toLowerCase()];if(b){e=b.P12.call(b,g.valuefield);if(e!=null){g.filtervalue=e}}}else{if(h=="value"){e=[{code:g.valuetext}];g.filtervalue=e}}if(e&&e.length>0){for(d=0;d<e.length;d++){l=e[d].code;if(l&&l.charAt(0)=="{"&&l.charAt(l.length-1)=="}"){l=l.substring(1,l.length-1);if(a[l]){l=a[l].get();e[d].code=l}}}}}},_g1:function(d,c,g){var b=null,l=this,j=l._9,a,m,e=g?g.r1:null,h=e?e[d.name]:null;if(d.map_type=="var"){a=j.page_param_map[d.map_param];if(c){b=(a?a.get():null)}else{if(h){a.set(h.t=="dataset"?h:h.v)}}}else{if(d.map_type=="ctrl"){a=l.P2[d.map_param.toLowerCase()];if(c){if(a&&a.P9&&a.P9.P12){m=a.P9.P12.call(a.P9,d);if(m&&m.length>0){b=m[0].code}}else{if(a&&a.P9){b=a.P9.get("text")}}}else{if(h){if(h.t=="dataset"){a.P9._ds&&a.P9._ds.call(a.P9,h)}else{a.P9.set("text",h.v)}}}}}return b},_a:function(d){var b="<params>",a,c=this;for(a in d.iparams){b+="<param name='"+a+"'><![CDATA[";r=c._g1(d.iparams[a],true);b+=(r||"");b+="]]></param>"}b+="</params>";return b},M10:function(x){var F=this,z,j=false,q=-1,D,c=x.args;switch(x.purpose.toLowerCase()){case"onlinereport":var l,m,d=(x.item?x.item.uid:null)||null,y;for(z=0;z<F.P3.length;z++){m=F.P3[z];if(m.P3&&m.P6==d){l=m;break}}var A="<smsg><filters source='dashboard'>";A+="<Filter>";A+=x.__sfilter.TX.call(x.__sfilter);A+="</Filter>";A+="<HavingFilter>";A+=x.__shavingfilter.TX.call(x.__shavingfilter);A+="</HavingFilter>";A+="</filters>";A+=F._a(x);A+="</smsg>";if(l){var a=l.P9,w=l.P7;j=false;y=new IG$._I3d(F,function(s,H){var t=this;if(H!=true){}});a.eRun&&a.eRun.call(a,y,A)}else{q=1}break;case"valuelist":if(x.item&&x.item.uid){var b=new IG$._I3e();b.init(F,{ack:"18",payload:"<smsg><item uid='"+x.item.uid+"' option='valuelist'/></smsg>",mbody:"<smsg></smsg>"},F,function(t){var H=this,s=new IG$._ICd(t,x.item.uid);$.each(x.oparams,function(I,K){if(K.map_type=="ctrl"&&K.map_param){var J=H._9.controls[K.map_param.toLowerCase()];rctrl=H.P2[K.map_param.toLowerCase()];rctrl=(rctrl?rctrl.P9:null);if(J&&rctrl){rctrl.loadData&&rctrl.loadData.call(rctrl,s)}}});H.M8(H)},null);b._l();return}else{q=1}break;case"execute_script":if(F.m_d$$mj){if(x.script){c.unshift(x.script);var n=F.m_d$$mj._l7.apply(F.m_d$$mj,c);if(F.m_d$$mj.lastError){IG$._I52(F.m_d$$mj.lastError);q=3}else{if(n===2){j=true}else{if(n==false){F.executeEvents=null;F._IIf.call(F,false);F.setLoading(false);j=true}}}}}else{q=2}break;case"export":if(x.exp_tmpl&&x.exp_out){var B=F._m();var E=F._9.item?F._9.item.name:"",b=new IG$._I3e(),C,C="TMPL",g;switch(x.exp_out){case"excel":g="xls";break;case"word":g="doc";break;default:g=x.exp_out;break}E=E||"unnamed";E=E.replace(/\./g,"_");E=E.replace(/ /g,"");E+="."+g;b.init(F,{ack:"20",payload:IG$._I2d({uid:F.uid,type:C,filename:E,fonttype:"",utemplate:"T",tmplpage:x.exp_tmpl,jasper_filetype:x.exp_out},"uid;type;filename;fonttype;utemplate;tmplpage;jasper_filetype"),mbody:B},F,F.r_IB3,null,E);b._l()}else{q=2}break;case"servercall":if(x.jmodule&&x.jmethod){j=true;var b=new IG$._I3e(),v="<smsg>",u,o;v+=F._a(x);v+="</smsg>";b.init(F,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:F.uid,option:"exec",jmodule:x.jmodule,jmethod:x.jmethod})+"/></smsg>",mbody:v},F,function(s){var I=this,t,H;H=new IG$._maa(s);for(t in x.oparams){I._g1(x.oparams[t],false,H)}I._1_p(s,l)},function(){this.executeEvents=null;F._IIf(false)},l);b._l()}else{q=4}break;case"open_win":var h=x.item&&x.item.uid,G,e="<smsg>";G=x.iparams&&x.iparams.target_window?x.iparams.target_window:null;if(G&&G.map_param&&G.map_type){h=F._g1(x.iparams.target_window,true)}if(h){j=true;e+=F._a(x);e+="</smsg>";var b=new IG$._I3e();b.init(F,{ack:"11",payload:IG$._I2d({uid:h}),mbody:IG$._I2e({option:"translate"})},F,function(s){var I=IG$._I18(s,"/smsg/item"),H=I?IG$._I1c(I):null;if(H.type=="Dashboard"&&x.ispopup==true){var J=new IG$._I3e();J.init(F,{ack:"5",payload:IG$._I2d({uid:x.item.uid}),mbody:IG$._I2e({option:"diagnostics"})},F,function(L){var K=new IG$.cdxml(L),M=new IG$._IBf({bt:{content:IG$._I25(L)},uid:x.item.uid,closable:true,header:false,_ipcnt:e,border:0});K.parseContent.call(K,null);var N=new IG$._IBF({uid:x.item.uid,dmain:M,title:K.item.name,width:K.width,height:K.height,callback:new IG$._I3d(F,function(O){F._1_p(null,null)})});M.on("close_win",function(){N.close()});IG$._I_5(this,N)},false);J._l()}else{var t=IG$._I7d;t&&t.m1$7.call(t,H.uid,H.type.toLowerCase(),H.name,H.nodepath,false,H.writable,null,{_ipcnt:e});F._1_p.call(F)}},false);b._l()}else{q=5}break;case"open_dlg":j=true;switch(x.btntype){case"yesno":IG$._I55(x.dlgtitle,x.dlgmsg,function(s){F._1_p.call(F)},null,null,6);break;case"yesnocancel":IG$._I55(x.dlgtitle,x.dlgmsg,function(s){F._1_p.call(F)},null,null,14);break;default:IG$._I54(x.dlgtitle,x.dlgmsg,function(){F._1_p.call(F)},null,2);break}break;case"close":this.fireEvent("close_win");break;case"update_params":break;case"upload_file":break;case"sql":if(x.dsource&&x.sqlsyntax){j=true;var b=new IG$._I3e(),v="<smsg>",u,o;v+=F._a(x);v+=x.getXML();v+="</smsg>";b.init(F,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:F.uid,option:"run_sql"})+"/></smsg>",mbody:v},F,function(s){var I=this,t,H,K,J;if(x.rmode=="list"){K=IG$._I18(s,"/smsg/item");J=(K?IG$._I1b(K,"resultid"):null);if(J){var L=0;for(t in x.oparams){L++}if(L>0){$.each(x.oparams,function(N,R){var M=new IG$._I3e(),P,Q,O=true;if(R.map_type=="ctrl"){P=I._9.controls[R.map_param.toLowerCase()];Q=I.P2[R.map_param.toLowerCase()];Q=(Q?Q.P9:null);if(P&&Q){M.init(I,{ack:"73",payload:"<smsg><item"+IG$._I21({uid:I.uid,option:"gridresult",resultid:J})+"/></smsg>",mbody:"<smsg>"+P.getXML()+"</smsg>"},I,function(T){var S=new IG$._IF2(T);Q.loadData&&Q.loadData.call(Q,S);L--;if(L==0){I._1_p.call(I,T,P)}},function(S){I.executeEvents=null;I._IIf(false)});M._l();O=false}}if(O==true){L--;if(L==0){I._1_p.call(I,s,P)}}})}else{I._1_p(s,l)}}else{I._1_p(s,l)}}else{H=new IG$._maa(s);for(t in x.oparams){I._g1(x.oparams[t],false,H)}I._1_p(s,l)}},null,l);b._l()}else{q=5}break}if(j==false&&q<0){F.M8(F)}else{if(q>-1){switch(q){case 1:D="Item not found";break;case 2:D="Script not loaded";break;case 3:D="Error on script execution";break;case 4:D="Service not found";break;case 5:D="Service parameter not configured correctly";break}F.executeEvents=null;F._IIf.call(F,false);F.setLoading(false);if(D){IG$._I52(D)}}}},_1_p:function(a,c){var b=this;b.M8(b)},M8_:function(){var a=this;a.executeEvents=null;a._IIf.call(a,false);a.setLoading(false)},_m:function(){var b=this,a="<smsg><dashboard>";$.each(b.P3,function(d,e){var g=e.P9,h={},c;if(g){c=g.ctrl.P6||"";switch(g.type){case"olapreport":if(g.viewer){a+=g.viewer._IB4.call(g.viewer,h,"jasper",false,true,c)}break;case"dashboard":if(g.viewer){a+="<dashboard name='"+c+"'>"+g.viewer._m.call(g.viewer)+"</dashboard>"}break;case"label":a+="<text name='"+c+"'><![CDATA["+(g.get("text")||"")+"]]></text>";break}}});a+="</dashboard></smsg>";return a},Mm11:function(b,o,j,d){var m=this,g,l=$(".dashboard_cnt",m.body.dom),n=$(".dashboardview",m.body.dom),e,a,o,j,c=m._9;e=IG$.x_10._w(l);a=IG$.x_10._h(l);if(c){o=(c.autowidth==false&&c.width>0)?c.width:(c.minwidth>e)?c.minwidth:e;j=(c.autoheight==false&&c.height>0)?c.height:(c.minheight>a)?c.minheight:a}IG$.x_10._w(n,o);IG$.x_10._h(n,j);l.css({overflowX:c&&c.hscroll?"auto":"hidden",overflowY:c&&c.vscroll?"auto":"hidden"});m.Mmlla(null,m.P3r,0,0,o,j)},Mmlla:function(m,o,e,d,g,j){var u,z=this,a={t:0,b:0,l:0,r:0},q=0,x={},l=0,h,q,s,c;if(m!=null&&m.P4=="panel"){s=m.P7.padding||0;a={t:s,b:s,l:s,r:s}}g=g-a.l-a.r;j=j-a.t-a.b;if(m!=null&&m.P4=="panel"&&m.P7.layout=="border"){for(u=0;u<o.length;u++){h=o[u];x[h.P7.region]=h;h.P11(m,e,d,g,j)}l=0;$.each(["north","south","east","west","center"],function(D,H){var F=x[H],A,G,I,E,b,C,B;if(F){A=F.P10;switch(H){case"north":A.x=0;A.y=l;A.w=g;A.h-=l;break;case"south":A.x=0;A.y=j-l-A.h;A.w=g;A.h-=l;break;case"east":A.x=g-A.w;A.y=l;A.h=j-l;if(x.north){A.y=l+x.north.P10.h;A.h-=x.north.P10.h}if(x.south){A.h-=x.south.P10.h}break;case"west":A.x=0;A.y=l;A.h=j-l;if(x.north){A.y=l+x.north.P10.h;A.h-=x.north.P10.h}if(x.south){A.h-=x.south.P10.h}break;case"center":A.x=0;A.y=l;A.w=g;A.h=j-l;if(x.north){A.y=l+x.north.P10.h;A.h-=x.north.P10.h}if(x.south){A.h-=x.south.P10.h}if(x.west){A.x=x.west.P10.w;A.w-=x.west.P10.w}if(x.east){A.w-=x.east.P10.w}break}G=F.P9.html;I=G.css({position:"absolute",top:A.y+a.t,left:A.x+a.l,height:A.h-a.t-a.b,width:A.w-a.l-a.r});if(F.P9!=null){F.P9.invalidate.call(F.P9)}if(F.layouts&&F.layouts.length>0){C=F.P10.x;B=F.P10.y;E=F.P10.w;b=F.P10.h;if(F.P4=="panel"){b-=F.P9.titleheight}z.Mmlla.call(z,F,F.layouts,C,B,E,b)}}})}else{if(m!=null&&m.P4=="panel"&&(m.P7.layout=="hbox"||m.P7.layout=="vbox")){var w=m.P7.layout,t=0,n=0,v=0,y=0;th=0;for(u=0;u<o.length;u++){h=o[u];p=h.P5;h.P11(m,e,d,g,j);if(p.percentwidth!=null){n+=p.percentwidth}else{if(p.width!=null){y+=p.width}}if(p.percentheight!=null){v+=p.percentheight}else{if(p.height!=null){th+=p.height}}}for(u=0;u<o.length;u++){h=o[u];p=h.P5;c=h.P10;if(w=="hbox"){c.x=t;c.y=0;c.w=(p.width!=null)?p.width:(p.percentwidth!=null)?(g-y)*p.percentwidth/n:c.w;t+=c.w}else{if(w=="vbox"){c.x=0;c.y=t;c.h=(p.height!=null)?p.height:(p.percentheight!=null)?(j-th)*p.percentheight/v:c.h;t+=c.h}}if(m!=null&&m.P4=="panel"){c.y+=m.P9.titleheight}cstr=h.P9.html;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(h.P9!=null){h.P9.invalidate.call(h.P9)}if(h.layouts&&h.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;if(h!=null&&h.P4=="panel"){plh-=h.P9.titleheight}z.Mmlla(h,h.layouts,plx,ply,plw,plh)}}}else{if(m!=null&&m.P4=="tabpanel"){m.P9.loadHeader.call(m.P9,o);q=m.P9.getTabHeight.call(m.P9);for(u=0;u<o.length;u++){var h=o[u];h.P10={x:0,y:0,w:g,h:j,_px:e,_py:d};c=h.P10;c.y+=q;c.h-=q;cstr=h.P9.html;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(h.P9!=null){h.P9.invalidate.call(h.P9)}if(h.layouts&&h.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;z.Mmlla(h,h.layouts,plx,ply,plw,plh)}if(u==m.P9.activeIndex){h.P9.html.show()}else{h.P9.html.hide()}}}else{for(u=0;u<o.length;u++){h=o[u];h.P11(m,e,d,g,j);if(m!=null&&m.P4=="panel"){h.P10.y+=m.P9.titleheight}cstr=h.P9.html;c=h.P10;$ctrl=cstr.css({position:"absolute",top:c.y+a.t,left:c.x+a.l,height:c.h-a.t-a.b,width:c.w-a.l-a.r});if(h.P9!=null){h.P9.invalidate.call(h.P9)}if(h.layouts&&h.layouts.length>0){plx=c.x;ply=c.y;plw=c.w;plh=c.h;if(h!=null&&h.P4=="panel"){plh-=h.P9.titleheight}z.Mmlla(h,h.layouts,plx,ply,plw,plh)}}}}}},disposeContent:function(c){var b=$(".dashboardview",c.body.dom);if(c.P3){for(var a=c.P3.length-1;a>=0;a--){if(c.P3[a]){c.P3[a].disposeContent(c.P3[a]);delete c.P3[a]}}c.P3=null}if(b){$(b).empty()}},afterrender:function(b){var a=b;if(a.initialized==false&&a.uid&&a.uid.length>0){a.M1()}},resize:function(c,e,b,a,d){c.Mm11.call(c,e,b,null)}};if(window.Ext){IG$._IBf=$s.extend(IG$._I57,{iconCls:"icon-dashboard",layout:{type:"vbox",align:"stretch"},defaults:{flex:1},entryLogin:function(a){a.M1.call(a)},commitCode:function(){var a=this;return true},refreshCode:function(){var a=this;a._dE.refreshControl.call(a._dE);a.M3()},initComponent:function(){var a=this;a.hiddenPkgs=[];a.addEvents("close_win");$s.apply(this,{P1:{},P2:{},P3:[],P3r:[],initialized:false,refreshmode:"F",closable:true,autoScroll:true,collapseFirst:false,items:[{html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}]});IG$._IBf.superclass.initComponent.call(this)},applyOption:IG$.$d.applyOption,M1:IG$.$d.M1,rs_M1:IG$.$d.rs_M1,showDummyInfo:IG$.$d.showDummyInfo,iC:IG$.$d.iC,M2:IG$.$d.M2,M3:IG$.$d.M3,cL:IG$.$d.cL,M3a:IG$.$d.M3a,M4:IG$.$d.M4,M5:IG$.$d.M5,M6:IG$.$d.M6,M7a:IG$.$d.M7a,M7:IG$.$d.M7,_IIf:IG$.$d._IIf,_IP5:IG$.$d._IP5,M8:IG$.$d.M8,M9:IG$.$d.M9,_g1:IG$.$d._g1,_a:IG$.$d._a,M10:IG$.$d.M10,r_IB3:IG$._Ibb.r_IB3,_1_p:IG$.$d._1_p,M8_:IG$.$d.M8_,_m:IG$.$d._m,Mm11:IG$.$d.Mm11,Mmlla:IG$.$d.Mmlla,disposeContent:IG$.$d.disposeContent,listeners:{afterrender:IG$.$d.afterrender,resize:IG$.$d.resize}})}else{IG$._IBf=IG$.x_c(IG$.pb,{layout:"fit",entryLogin:function(a){a.M1.call(a)},commitCode:function(){var a=this;return true},refreshCode:function(){var a=this;a._dE.refreshControl.call(a._dE);a.M3()},_ic:function(){var a=this;a.hiddenPkgs=[];a._emode=1;IG$.apply(this,{P1:{},P2:{},P3:[],P3r:[],initialized:false,refreshmode:"F",closable:true,autoScroll:true,collapseFirst:false,items:[{xtype:"container",html:"<div class='dashboard_cnt'><div class='dashboardview'></div></div>"}]});IG$._IBf.superclass._ic.call(this)},applyOption:IG$.$d.applyOption,M1:IG$.$d.M1,rs_M1:IG$.$d.rs_M1,showDummyInfo:IG$.$d.showDummyInfo,iC:IG$.$d.iC,M2:IG$.$d.M2,M3:IG$.$d.M3,cL:IG$.$d.cL,M3a:IG$.$d.M3a,M4:IG$.$d.M4,M5:IG$.$d.M5,M6:IG$.$d.M6,M7a:IG$.$d.M7a,M7:IG$.$d.M7,_IIf:IG$.$d._IIf,_IP5:IG$.$d._IP5,M8:IG$.$d.M8,M9:IG$.$d.M9,_g1:IG$.$d._g1,_a:IG$.$d._a,M10:IG$.$d.M10,r_IB3:IG$._Ibb.r_IB3,_1_p:IG$.$d._1_p,M8_:IG$.$d.M8_,_m:IG$.$d._m,Mm11:IG$.$d.Mm11,Mmlla:IG$.$d.Mmlla,listeners:{afterrender:IG$.$d.afterrender,resize:IG$.$d.resize}})}if(window.Ext){IG$._IBF=$s.extend($s.window,{modal:true,layout:{type:"fit",align:"stretch"},closable:true,resizable:false,width:600,height:500,m1$9:function(){var a=this;a.callback&&a.callback.execute(["ok",a]);a.close()},initComponent:function(){var a=this;$s.apply(this,{items:[a.dmain]});IG$._IBF.superclass.initComponent.apply(this,arguments)}})}else{IG$._IBF=IG$.x_c(IG$.pbW,{modal:true,layout:"fit",closable:true,resizable:false,width:600,height:500,m1$9:function(){var a=this;a.callback&&a.callback.execute(["ok",a]);a.close()},_ic:function(){var a=this;IG$.apply(this,{items:[a.dmain]});IG$._IBF.superclass._ic.apply(this,arguments)}})}
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 3.1.11
*
* Requires: jQuery 1.2.2+
*/
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],m=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],j=Array.prototype.slice,l,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var g=c.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var o=m.length;o;){this.addEventListener(m[--o],n,false)}}else{this.onmousewheel=n}c.data(this,"mousewheel-line-height",g.getLineHeight(this));c.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var o=m.length;o;){this.removeEventListener(m[--o],n,false)}}else{this.onmousewheel=null}c.removeData(this,"mousewheel-line-height");c.removeData(this,"mousewheel-page-height")},getLineHeight:function(o){var q=c(o)["offsetParent" in c.fn?"offsetParent":"parent"]();if(!q.length){q=c("body")}return parseInt(q.css("fontSize"),10)},getPageHeight:function(o){return c(o).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};c.fn.extend({mousewheel:function(o){return o?this.bind("mousewheel",o):this.trigger("mousewheel")},unmousewheel:function(o){return this.unbind("mousewheel",o)}});function n(o){var t=o||window.event,z=j.call(arguments,1),B=0,v=0,u=0,y=0,x=0,w=0;o=c.event.fix(t);o.type="mousewheel";if("detail" in t){u=t.detail*-1}if("wheelDelta" in t){u=t.wheelDelta}if("wheelDeltaY" in t){u=t.wheelDeltaY}if("wheelDeltaX" in t){v=t.wheelDeltaX*-1}if("axis" in t&&t.axis===t.HORIZONTAL_AXIS){v=u*-1;u=0}B=u===0?v:u;if("deltaY" in t){u=t.deltaY*-1;B=u}if("deltaX" in t){v=t.deltaX;if(u===0){B=v*-1}}if(u===0&&v===0){return}if(t.deltaMode===1){var A=c.data(this,"mousewheel-line-height");B*=A;u*=A;v*=A}else{if(t.deltaMode===2){var s=c.data(this,"mousewheel-page-height");B*=s;u*=s;v*=s}}y=Math.max(Math.abs(u),Math.abs(v));if(!b||y<b){b=y;if(a(t,y)){b/=40}}if(a(t,y)){B/=40;v/=40;u/=40}B=Math[B>=1?"floor":"ceil"](B/b);v=Math[v>=1?"floor":"ceil"](v/b);u=Math[u>=1?"floor":"ceil"](u/b);if(g.settings.normalizeOffset&&this.getBoundingClientRect){var q=this.getBoundingClientRect();x=o.clientX-q.left;w=o.clientY-q.top}o.deltaX=v;o.deltaY=u;o.deltaFactor=b;o.offsetX=x;o.offsetY=w;o.deltaMode=0;z.unshift(o,B,v,u);if(l){clearTimeout(l)}l=setTimeout(h,200);return(c.event.dispatch||c.event.handle).apply(this,z)}function h(){b=null}function a(q,o){return g.settings.adjustOldDeltas&&q.type==="mousewheel"&&o%120===0}}));window.IG$=window.IG$||{};function RBar(a){this.D_(a)}RBar.prototype={D_:function(a){var b=this;b.owner=a;b.html=$("<div class='m-datagrid-rhandle'></div>").appendTo(a.ctx).bind("mousedown",function(c){b.ms={x:c.pageX,y:c.pageY};b.sp=b.html.offset();b.spo=b.owner.ctx.offset();b.owner.resizeCol=true;b.regG.call(b,c)});b.col=-1},regG:function(d){var c=this,e=$("body");function b(l){var j=c.html[0],g={x:l.pageX,y:l.pageY},h=c.ms,m=(c.sp.left-c.spo.left)+(g.x-h.x);j.style.left=""+(m-2)+"px"}function a(g){c.unRegG.call(c);c.ts={x:g.pageX,y:g.pageY};c.moveCol.call(c,c.ts.x-c.ms.x,c.ts.y-c.ms.y);c.ms=null;c.owner.resizeCol=false}c.mouseMove=b;c.mouseUp=a;e.bind("mousemove",b);e.bind("mouseup",a)},moveCol:function(d,c){var b=this,a=b.owner;if(b.col>-1){a.moveCol.call(a,b.col,d,c)}},unRegG:function(){var a=this,b=$("body");b.unbind("mousemove",a.mouseMove);b.unbind("mouseup",a.mouseUp)}};IG$._IE3={P_NONE:0,P_BOLD:1,P_ITALIC:2,P_UNDERLINE:4};IG$.cMa=function(a){var b=this,c;b._browser=b.browser();c=IG$._ccache=IG$._ccache||{};c.colorcode=c.colorcode||{};c.tmeasure=c.tmeasure||{};b.D_(a)};IG$.cMa.prototype={merge:function(c,a){var b;for(b in a){c[b]=a[b]}},D_:function(a){var b=this;b.mv=false;b._1=0;b._2=0;b._3=0;b._4=0;b._5=-1;b._6=-1;b._7=0;b._8=0;b._9=0;b._a=0;b._b=0;b._c=0;b._d=0;b._e=0;b.timer=0;b.interval=10;b.delay=250;b.styles={};b.cellcharts=[];b._n=[];b.U_=[];b.V_=[];b.font="sans";b.size=13;b.regv=false;b.regh=false;b._v=13;b.selcolor="#f8a084";b.mmax=0;b.width=0;b.height=0;b.selectedItems=[];b.selectedRows=[];b._w=false;b._x=false;b._y=false;b._f=false;b._g=-1;b._h=-1;b._i=-1;b._nh=0;b.buttondown=false;b._j=-1;b._k=-1;b._l=0;b._m=0;b._o=-1;b._p=-1;b.mouseAction=0;b.mouseMode="select";b.columnfill=false;b.treeIndent=20;b.dtm=-1;b._z=false;b._q=true;b.selectionmode="cell";b._L=-1;b._Z=true;b._r=true;b._s=false;b._t=1;b._u=1;if(a){b.merge(b,a)}},onRender:function(){var a=this},_d1:function(){var e=this,d={menu:e.context},c=e._dfc.__af,b=e.context.cell,a=0;if(e._dfc.f_opt.val()=="between"){if(e._dfc.sval1.val()){e._dfc.sval2.focus()}else{a=1}}else{if(e._dfc.sval1.val()){a=1}}if(a){c[b.c]={op:e._dfc.f_opt.val(),val1:e._dfc.sval1.val(),val2:e._dfc.sval2.val()}}else{delete c[b.c]}d.cmd="cmd_run_filter".toUpperCase();d.menu.mdf=c[b.c];e.l_.call(e,"menu",d);e._df.hide()},initialize:function(a){var l=this,b,q,c,g,n,h;clearTimeout(l.timer);l.rhdls=[];l.owner=a;if(l.ctx==null){l.ctx=$('<div class="m-datagrid-container"></div>').appendTo(a);l.H_=$('<div class="m-datagrid-data"></div>').appendTo(l.ctx);l.H_[0].uid="H_/*regdata_og*/";l.I_=$('<div class="m-datagrid-data-bg"></div>').appendTo(l.H_);l.I_[0].uid="I_/*regdata*/";l._G=$('<div class="m-datagrid-scroll m-datagrid-hscroll"></div>').css({height:l._v}).hide().appendTo(l.ctx);b=$('<div class="m-datagrid-track m-datagrid-track-h"></div>').appendTo(l._G);l._Gt=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-h"></div>').css({height:(l._v),width:20}).appendTo(b);c=$('<div class="m-datagrid-end m-datagrid-end-h">').css({height:(l._v),width:5}).appendTo(l._Gt);l._F=$('<div class="m-datagrid-scroll m-datagrid-vscroll"></div>').hide().appendTo(l.ctx);q=$('<div class="m-datagrid-track m-datagrid-track-v"></div>').css({width:l._v}).appendTo(l._F);l._Ft=$('<div class="m-datagrid-scrollthumb m-datagrid-scrollthumb-v"></div>').css({width:(l._v),height:20}).appendTo(q);g=$('<div class="m-datagrid-end m-datagrid-end-v">').css({width:(l._v),height:5}).appendTo(l._Ft);l.measurediv=$('<div class="m-datagrid-cell-measure"></div>').appendTo($("body"));l.editor=$("<div class='m-datagrid-editor'></div>").appendTo(l.ctx).hide();l.contextmenu=$("<ul class='contextMenu'></ul>").appendTo(l.ctx);l.context={menu:l.contextmenu};if($(a).contextMenu&&l.enablecontextmenu!=false){$(a).contextMenu(l.context,new IG$._I3d(l,l._X))}}if(!l._M){l._M=$("<div class='m-datagrid-loading-mask'><div class='m-datagrid-loading'><div class='m-datagrid-loading-indicator'></div></div></div>").appendTo(l.ctx).hide()}l._s=l.is_s(l.owner);var o,e;if(l._s==false){var j=$(l.owner).clone();j.css({visibility:"hidden",width:"",height:"",maxWidth:"",maxHeight:""});$("body").append(j);o=j.outerWidth();e=j.outerHeight();j.remove()}else{o=IG$.x_10._w(l.ctx);e=IG$.x_10._h(l.ctx)}if(o>0&&e>0){l._d=o;l._e=e}l._1=0;l._2=0;l.rows=[];l.cols=[];l.W_=0;l.X_=0;if(!l.U_){l.U_=[]}l.pad=new IG$.cMa.padding(2);l.cellcharts=[];l._n=[];l.ctx.bind({touchstart:function(m){var s=l;s._A.call(s,l,m);return false},touchend:function(m){var s=l;s._B.call(s,l,m);return false},touchmove:function(m){var s=l;s._C.call(s,l,m);return false},mousedown:function(m){var s=l;return s.e_.call(s,l,m)},dblclick:function(m){var s=l;return s._D.call(s,l,m)},mousewheel:function(m,t){m.stopPropagation();m.preventDefault();var s=l;return s._E.call(s,l,m,t)},selectstart:function(){return false}});l._F.bind({click:function(m){var s=l;if(s.mv==false){s._J.call(s,l,m,"v")}return false}});l._G.bind({click:function(m){var s=l;if(s.mv==false){s._J.call(s,l,m,"h")}return false}});l._Ft[0].eventtarget="vertical";l._Ft.bind({mousedown:function(m){var s=l;s.mv=true;m.stopPropagation();s._H.call(s,this,m,"v");return false},mouseup:function(m){var s=l;s._I.call(s,this,m,"v");return}});l._Gt[0].eventtarget="horizontal";l._Gt.bind({mousedown:function(m){var s=l;s.mv=true;s._H.call(s,this,m,"h")},mouseup:function(m){var s=l;s._I.call(s,this,m,"h")}});l._df="<div class='igc-dfilter-m'><div class='igc-dfilter-bg'></div><div class='igc-dfilter'><div class='flt-line flt-sep' id='cmd_filter'>"+IRm$.r1("B_SET_FILTER")+"</div><div class='flt-line' id='cmd_asc'>"+IRm$.r1("B_ORDER_ASC")+"</div><div class='flt-line' id='cmd_desc'>"+IRm$.r1("B_ORDER_DSC")+"</div><div class='flt-line flt-sep' id='cmd_sort'>"+IRm$.r1("L_SORT_OPTION")+"</div>";if(window.ig$&&window.ig$.features&&window.ig$.features.gfilter){l._df+="<div class='flt-line' id='b_filter'><span>"+IRm$.r1("L_FILTER_OPTION")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_filter'><div class='flt-line-g'><span id='cl_flt'>Clear Filter</span><span id='r_flt'>Apply</span></div><div class='flt-line' id='c_filter'></div></div>"}l._df+="<div class='flt-line' id='b_fm'><span>"+IRm$.r1("L_FORMULA")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_fm'><div class='flt-line-g'><span id='cl_fm'>Clear Formula</span><span id='r_fmt'>More</span></div><div id='c_fm'><ul><li class='flt-line' id='t_sum'>"+IRm$.r1("F_STOT")+"</li><li class='flt-line' id='t_avg'>"+IRm$.r1("F_AVG")+"</li><li class='flt-line' id='t_min'>"+IRm$.r1("F_MIN")+"</li><li class='flt-line' id='t_max'>"+IRm$.r1("F_MAX")+"</li><li class='flt-line' id='t_rank'>"+IRm$.r1("F_RNK")+"</li><li class='flt-line' id='t_pot'>"+IRm$.r1("F_P_TOT")+"</li><li class='flt-line' id='t_cumul'>"+IRm$.r1("F_P_CUM")+"</li><li class='flt-line' id='t_incr'>"+IRm$.r1("F_INC")+"</li><li class='flt-line' id='t_diff'>"+IRm$.r1("F_DIFF")+"</li></ul></div></div>";l._df+="<div class='flt-line' id='b_rank'><span>"+IRm$.r1("L_RANK_OPTION")+"</span><div class='flt-expand'></div></div><div class='flt-block' id='d_rank'><div class='flt-line' id='cmd_showall'>"+IRm$.r1("B_SHOW_ALL")+"</div><div class='flt-line' id='cmd_top5'>"+(IRm$.r1("B_TOP")+" 5")+"</div><div class='flt-line' id='cmd_top10'>"+(IRm$.r1("B_TOP")+" 10")+"</div><div class='flt-line' id='cmd_btm5'>"+(IRm$.r1("B_BOTTOM")+" 5")+"</div><div class='flt-line' id='cmd_btm10'>"+(IRm$.r1("B_BOTTOM")+" 10")+"</div></div><div class='flt-line flt-sep-top' id='cmd_remove'>"+IRm$.r1("B_REMOVE_PIVOT")+"</div></div></div>";l._df=$(l._df).appendTo(l.ctx).hide();h=$(".igc-dfilter",l._df);l._dfc={dmain:h,t_sum:$("#t_sum",h),t_avg:$("#t_avg",h),t_min:$("#t_min",h),t_max:$("#t_max",h),t_rank:$("#t_rank",h),t_pot:$("#t_pot",h),t_cumul:$("#t_cumul",h),t_incr:$("#t_incr",h),t_diff:$("#t_diff",h),b_rank:$("#b_rank",h),d_rank:$("#d_rank",h),b_filter:$("#b_filter",h),d_filter:$("#d_filter",h),c_filter:$("#c_filter",h),cmd_filter:$("#cmd_filter",h),cmd_asc:$("#cmd_asc",h),cmd_desc:$("#cmd_desc",h),cmd_sort:$("#cmd_sort",h),cmd_top5:$("#cmd_top5",h),cmd_top10:$("#cmd_top10",h),cmd_btm5:$("#cmd_btm5",h),cmd_btm10:$("#cmd_btm10",h),cmd_showall:$("#cmd_showall",h),cmd_remove:$("#cmd_remove",h),r_flt:$("#r_flt",h),cl_flt:$("#cl_flt",h),cl_fm:$("#cl_fm",h),b_fm:$("#b_fm",h),d_fm:$("#d_fm",h),r_fmt:$("#r_fmt",h)};var d=$("<div><div class='igc-c-filter-op'><select id='f_opt'><option value='_like_'>"+IRm$.r1("L_F_LIKE")+"</option><option value='between'>"+IRm$.r1("L_F_BETWEEN")+"</option><option value='gt'>"+IRm$.r1("L_F_GT")+"</option><option value='lt'>"+IRm$.r1("L_F_LT")+"</option></select></div><div class='igc-c-filter-inp'><input type='text' name='sval1'></input><input type='text' name='sval2' style='display: none;'></input></div></div>").appendTo(l._dfc.c_filter);if(!window.Ext){l._dfc.cmd_filter.hide()}l._dfc.f_opt=$("#f_opt",h);l._dfc.sval1=$("[name=sval1]",h);l._dfc.sval2=$("[name=sval2]",h);l._dfc.d_fm.hide();l._dfc.f_opt=$("#f_opt",h).bind("change",function(s){var m=$(this).val();l._dfc.sval2[m=="between"?"show":"hide"]()});l._dfc.sval1.bind("keyup",function(s){var m=s.which;if(m==13){l._d1.call(l)}});l._dfc.sval2.bind("keyup",function(s){var m=s.which;if(m==13){l._d1.call(l)}});$.each(["cmd_asc","cmd_desc","cmd_sort","cmd_top5","cmd_top10","cmd_btm5","cmd_btm10","cmd_showall","cmd_remove","cmd_filter","r_flt","cl_flt","cl_fm","r_fmt","t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(t,s){l._dfc[s]&&l._dfc[s].length&&l._dfc[s].bind("click",function(){var w={cmd:s.toUpperCase(),menu:l.context},v=l._dfc.__af,u=l.context.cell,m=1;if(s=="r_flt"){if(l._dfc.f_opt.val()=="between"){if(!l._dfc.sval1.val()||!l._dfc.sval2.val()){m=0}}else{if(!l._dfc.sval1.val()){m=0}}if(m){v[u.c]={op:l._dfc.f_opt.val(),val1:l._dfc.sval1.val(),val2:l._dfc.sval2.val()}}else{return}w.cmd="cmd_run_filter".toUpperCase()}else{if(s=="cl_flt"){delete v[u.c];w.cmd="cmd_run_filter".toUpperCase()}}w.menu.mdf=v[u.c];l.l_.call(l,"menu",w);l._df.hide()})});l._dfc.b_filter.bind("click",function(){l._dfc.d_filter.toggle()});l._dfc.b_rank.bind("click",function(){l._dfc.d_rank.toggle()});l._dfc.b_fm.bind("click",function(){l._dfc.d_fm.toggle()});l._dfc.dmain.bind({click:function(m){m.stopPropagation()},mousedown:function(m){m.stopPropagation()},mouseup:function(m){m.stopPropagation()}});l._df.bind({click:function(m){m.stopPropagation();$(this).hide()},mousedown:function(m){m.stopPropagation();$(this).hide()},mouseup:function(m){m.stopPropagation();$(this).hide()}})},moveCol:function(e,b,a){var d=this,c=d.cols[e];c.width=Math.max(c.width+b,50);d.redraw()},setLoading:function(b){var a=this;if(a._L>-1){clearTimeout(a._L);a._L=-1}if(b==true){a._M.show()}else{a._L=setTimeout(function(){a._M.fadeOut()},500)}},_N:function(a){},initializeDragDrop:function(a){},_O:function(e){var a=this;var d=function(g){a._P.call(a,g,e);return false};var c=function(g){g.stopPropagation();a.mv=true;a._Q.call(a,g,e);return false};var b=function(g){g.stopPropagation();a.mv=true;a._R.call(a,g,e);$(document).unbind({mousedown:d,mousemove:c,mouseup:b});return false};this.ge={mousedown:d,mousemove:c,mouseup:b};$(document).bind({mousedown:d,mousemove:c,mouseup:b})},_P:function(a,b){},_Q:function(b,c){var a=this;b.preventDefault();b.stopImmediatePropagation();if(a){a._S.call(a,{x:b.pageX,y:b.pageY},c)}},_R:function(b,c){var a=this;a._x=false;a._y=false;a.ge=null;setTimeout(function(){a.mv=false},50)},_S:function(u,j){var a=this,h=this,q=h._F,o=h._G,c=h._Ft,s=h._Gt,n=u.x-a._g,m=u.y-a._h,g=a._1,e=a._2,l=(a._c-a._e)/(a._e-a._7),b=(a._b-a._d)/(a._d-a._8),d,t;if(h.__scr){return}if(j=="v"){t=IG$.x_10._h(q);e=Math.min(t-h.thumbvheight,Math.max(0,a.sy+m))}else{d=IG$.x_10._w(o);g=Math.min(d-h.thumbhwidth,Math.max(0,a.sx+n))}if(a._1!=g||a._2!=e){a._1=g;a._2=e;a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},30)}},cR:function(){var c,b,a,e=this,d,g;if(this._5>-1){if(this._5>-1){e._c=0;for(c=0;c<e.treeData.length;c++){a=e.treeData[c][e._5];b=a.parent;d=e.rows[c];g=true;while(b){if(b.treeinfo&&b.treeinfo.opened!==true){g=false;break}b=b.parent}if(g==true){e._c+=d.height+e._u}}}if(this._6>-1){}e.H_.css({height:e._e})}},_T:function(n,q,m,o,e,g){var l=this,j=$("<div></div>").appendTo(g).css({position:"absolute",margin:0,padding:0,left:0,top:0,width:o,height:e}).show();var a={defaultPixelsPerValue:parseInt(o/n.chartData.elementdata.length)},b=n.chartData,d=b.seriesdata;if(d&&d.length>0&&d[0].data.length>0){a.type="line";IG$.D_1(b,a);a.defaultPixelsPerValue=parseInt(o/(d[0].data.length));if(a.defaultPixelsPerValue-d[0].data.length>2){a.barWidth=a.defaultPixelsPerValue-d[0].data.length}a.width=parseInt(o);a.height=parseInt(e);a.tooltipFormat="{{offset:offset}} {{y:val}}";a.tooltipValueLookups={offset:d[0].element};a.xvalues=b.element}j.sparkline((d&&d.length>0)?d[0].data:[],a);l.cellcharts.push(j);return j},_U:function(){var b,c=this,d=c.cellcharts,a;for(b=d.length-1;b>=0;b--){a=d.pop();a.hide();c._n.push(a)}},_V:function(a){var c=0,b={};if(a.title==1){if(a.position==1||a.position==2){if(window.Ext){b.cmd_filter=1}b.cmd_asc=1;b.cmd_desc=1;b.cmd_sort=1;b.b_filter=1;c=1}if(a.position==3){b.b_rank=1;b.b_filter=2;c=1}b.cmd_remove=1}return{active:c,items:b}},_W:function(d){var b=this,a,c=b.contextmenu;c.html("");for(a=0;a<d.length;a++){c.append($("<li"+(d[a]["class"]?" class='"+d[a]["class"]+"'":"")+"><a href='#"+d[a].name+"'>"+d[a].disp+"</a></li>"))}},_X:function(a){var b=this;b.l_("menu",a)},setDataProvider:function(y,d,t){var C,B,o,q,a=null,m,h,c,w,G=this,u,F,v,A,D,z,E,e,l,g,x;G._Y=y;if(G.__tpstart==0){G._1=0;G._2=0}else{A=false}G._Z=true;G._N();G.oY=G._Y;if(this._5>-1||this._6>-1){G.stT();G._9=G.treeData.length}else{G._9=G.oY.length}if(G._9>0){G._a=G.oY[0].length}if(G._9<G.rows.length){G.rows.splice(G._9,G.rows.length-G._9);for(C=0;C<G.rows.length;C++){G.rows[C].init()}}else{for(C=0;C<G.rows.length;C++){G.rows[C].init()}for(C=G.rows.length;C<G._9;C++){G.rows.push(new IG$.cMa.DimInfo(C))}}if(G._a<G.cols.length){G.cols.splice(G._a,G.cols.length-G._a);for(C=0;C<G.cols.length;C++){G.cols[C].init()}}else{if(G.cols.length==G._a&&A===false){}else{for(C=0;C<G.cols.length;C++){G.cols[C].init()}for(C=G.cols.length;C<G._a;C++){G.cols.push(new IG$.cMa.DimInfo(C))}}}G.hidden_columns=t;G._nh=0;if(t&&t.length){for(C=0;C<t.length;C++){if(G.cols[t[C]]){if(t[C]<G._4){G._nh++}G.cols[t[C]].visible=false}}}G._7=0;G._c=0;m=G.pad.paddingLeft+G.pad.paddingRight;h=G.pad.paddingTop+G.pad.paddingBottom;c={};var b;for(C=0;C<G._9;C++){if(G._5>-1||G._6>-1){b=G.treeData[C]}else{b=G.oY[C]}b&&b.length&&G.J_(G.rows[C],b,c)}c=null;if(d!==false){G.t_.call(G);G.redraw(A)}G.__scr=0},J_:function(a,b,m){var n=this,d,q,o,h,t,e,g,l,c;for(d=0;d<n._a;d++){q=b[d];if(!q){continue}q.menus=n._V(q);text=q.text;if(q.chart&&q.chart.chartData){t={width:q.chart.chartData.w||40,height:q.chart.chartData.h||30};o=t.width;h=t.height}else{e=(q.stylename?n.styles[q.stylename]:null);if(q.position!=9&&m[text]){t=m[text]}else{t=n.u_(n.font,n.size,text,e);t.width=Math.max(t.width,q.position==9?20:80);m[text]={width:t.width,height:t.height}}o=t.width;h=t.height;if(!t.fw){c=q.treeinfo;if(n._5>-1&&d==n._5){o+=16+(c&&c.depth&&!c.nd?c.depth*n.treeIndent:0)}else{if(n._6>-1&&q.haschild===true){o+=16}else{if(c){c.depth=c.depth||0;o+=16+(c.nd?0:c.depth*n.treeIndent)}}}}}if(!t.fw&&q.menus&&q.menus.active){o+=16}if(e){g=e.padleft+e.padright;l=e.padtop+e.padbottom}else{g=n.pad.paddingLeft+n.pad.paddingRight;l=n.pad.paddingTop+n.pad.paddingBottom}q.tex_b=o;q.tex_c=h;n.cols[d].width=t.fw?t.fw_:(n.cols[d].fw?n.cols[d].width:Math.max(n.cols[d].width,o+g));n.cols[d].fw=(t.fw)?1:n.cols[d].fw;a.height=Math.max(a.height,h+l)}},K_:function(){var a=this,c=a._1,b=a._2;a.setDataProvider(a._Y,false,a.hidden_columns);a._1=c;a._2=b;a.redraw(false)},redraw:function(c){var d=this,b,e,g,a;if(d.__tpstart>0||d.__trow>d._9){for(b=0;b<d._3;b++){d._7+=d.rows[b].height;d._c+=d.rows[b].height+d._u}d._tsh=(d.rows.length>d._3)?d.rows[d._3].height+d._u:21;e=(d._tsh)*(d.__trow-d._3);d._c+=e}else{for(b=0;b<d._9;b++){if(b<d._3){d._7+=d.rows[b].height}if(d.rows[b].vcr!=false){d._c+=d.rows[b].height+d._u;if(d.template&&d.oY[b][0].expanded==true&&d.oY[b][0].template){a=IG$.x_10._h(d.oY[b][0].template);d._c+=a}}}}if(c!==false){d._F.hide();d._G.hide();d.regv=false;d.regh=false}d.N_();d.cR();d.L_(c===false?true:undefined);d.draw()},plog:function(c,d){var a=d?new Date().getTime():this.m_t,b=new Date().getTime();this.m_t=d?a:this.m_t;console.log(c+">> "+(b-a))},L_:function(g){var d,j=0,a=0,h=this,b,e=0,l=0;h.sh=1,h.sv=1;if(h._browser<8&&h._d>0&&h._e>0){h.ctx.width(h._d).height(h._e)}for(b=0;b<h.cols.length;b++){if(h.cols[b].visible!==false){l++}}if(h._b<h._d&&h.columnfill==true&&l>0){if(h.showlnum){if(l>1){e=(h._d-h._b-(g==true?h._v:0))/(l-1)}}else{e=(h._d-h._b-(g==true?h._v:0))/l}for(b=0;b<h._a;b++){if(h.showlnum&&b==0){}else{h.cols[b]._d=e}}}else{for(b=0;b<h._a;b++){h.cols[b]._d=0}}for(b=0;b<Math.min(h._4,h._a);b++){if(h.cols[b].visible!==false){j+=h.cols[b].width+h.cols[b]._d+2}}for(b=0;b<h._3;b++){a+=h.rows[b].height+1}h._7=a;h._8=j;if(j>h._d){h._8=j=0;h._4=0}h.M_()},M_:function(){var a=this;a.H_.css({left:0,top:0,width:a._d,height:a._e})},resize:function(a,b){var c=this;if(a>0&&b>0){c._d=a;c._e=b;c._F.hide();c.regv=false;c.L_(false);c.draw()}},draw:function(){var b=this,a;if(b.dtm>-1){clearTimeout(b.dtm)}b.P_();a=b.Qc();b.__scr=(a.r==2?1:0);b.dtm=setTimeout(function(){b.dtm=-1;b.Q_.call(b,a)},5)},cS:function(l,c){var j=this,e=j._5,h=j._6,g,a=1,d,b=false;d=j.treeData.length;for(g=0;g<l.length;g++){l[g].dr=d}j.treeData.push(l);if(l[e].children&&l[e].children.length>0){for(g=0;g<l[e].children.length;g++){a+=j.cS(l[e].children[g],c)}}return a},stT:function(){var d=this,a,c,b;if(this._5>-1||this._6>-1){a=0;d.treeData=[];if(d.oY){for(c=0;c<d.oY.length;c++){a+=d.cS(d.oY[c],c)}}}},N_:function(){var b=this,a;b._b=0;b._8=0;for(a=0;a<b._a;a++){if(b.cols[a].visible!==false){if(a<b._4){b._8+=b.cols[a].width+b.cols[a]._d+2}b._b+=b.cols[a].width+b._t+2}}},O_:function(){var g=this,e,d,h=g._4,l=g._3,n,c,a;n=g.treeData[g._3-1];for(e=1;e<l;e++){g.rows[e].visible=false}for(d=h;d<g._a;d++){c=false;a=n[d].parent;while(a){if(a.treeinfo.opened!==true){c=true;break}a=a.parent}if(n[d].haschild===true&&n[d].depth>-1&&n[d].treeinfo.opened===true&&n[d].depth<g._3&&c==false){g.rows[n[d].depth+1].visible=true}g.cols[d].visible=!c}var b=0,m=0;g.sh=1;g.sv=1;g.N_();for(e=0;e<g._3;e++){if(g.rows[e].visible!==false){m+=g.rows[e].height}}if(m!=g._7){g._c=g._c-g._7+m;g._7=m}b=g._8;if(b>g._d){g._8=b=0;g._4=0}g.M_();g.P_();_2=g._2/g.sv;_1=g._1/g.sh},P_:function(){var g=this,e,c=0,b=0,a=0,d;for(e=0;e<g._a;e++){if(g.cols[e].visible!==false){if(e<g._4){b+=g.cols[e].width+g.cols[e]._d+2}c+=g.cols[e].width+g.cols[e]._d+2;a+=g.cols[e]._d}}d=(g._meas_rect)?g._meas_rect.call(g,a,g._c):false;if(d){return}g.sh=a>0?1:(g._d-b)/(c-b);g.sv=(g._e-g._7)/(g._c-g._7);if(g.sh<1){g.sv=(g._e-g._7-g._v)/(g._c-g._7)}if(g.sv<1){g.sh=(g._d-b-(a-g._v>0?0:g._v))/(c-b)}},Qc:function(){var c=this,b=0,a,e,d=c._2/c.sv;if(c.__tpstart>0||c.__trow>c._9){if(c.__tpstart>0&&c.__scr&&c.__scr_a){d=c.__scr_a._2}e=Math.ceil(d/c._tsh);a=e+Math.ceil((c._e-c._7)/c._tsh);if((c.__tpstart>0&&c.__tpstart>e)||(c.__trow>c.__tpend&&c.__tpend<a)){if(c.__tpstart<c.__tpend||(c.__scr_a&&c.__scr_a.nrow!=e)){b=2}else{b=1}}}return{r:b,nrow:e}},Q_:function(c){var al,aj,h,d,J,G,o,m,C=0,z=0,e,aa,t=-1,g=-1,u=0,q=0,af,S,F,Y,Z,ac,V,A,am,x,T,y=this,H,K,R,X,ah,ad,W,B,b,D,M,ak,a,P,N,L,I=c.nrow,w=0;y.R_();H=y._2/y.sv;K=y._1/y.sh;y.W_=y.X_=0;y.measurediv.show();y._U();y.c_();if(c.r==2){y.__scr_a={nrow:I,_2:H};y.l_("scroll_request",I);return}if(y.__tpstart>0){H-=y._tsh*y.__tpstart}h=0;d=0;G=0;o=0;m=0;Y=0;if(y._6>-1){y.O_()}y.mmax=0;for(al=0;al<y.V_.length;al++){y.V_[al].hide()}A=y._9;if(y._5>-1){A=y.treeData.length}x=y.pad.paddingTop+y.pad.paddingBottom;for(al=0;al<A;al++){h=0;J=0;o=0;C=0;if(y._5>-1){V=y.treeData[al]}else{V=y.oY[al]}if(al<y._3){e=true;if(y.rows[al].visible===false){e=false}else{aa=y.rows[al].height}}else{e=true;if(y._5>-1){y.rows[al]._5a=false;T=V[y._5];R=T.parent;while(R){if(R.treeinfo&&R.treeinfo.opened!==true){e=false;break}R=R.parent}y.rows[al]._5a=!e}if(V&&V.length&&V[0].mcelltree&&V[0].mcelltree.length>0){for(ah=0;ah<V[0].mcelltree.length;ah++){ad=V[0].mcelltree[ah];if(V[ad].celltree&&V[ad].celltree.parent){W=V[ad].celltree.parent;while(W&&e==true){if(W.celltree.opened==false){e=false}W=W.celltree.parent}}if(e==false){break}}}if(e==true&&H>0&&G+y.rows[al].height+y._u<H){e=false;G+=y.rows[al].height+y._u;aa=0;Y++}else{if(e==true&&H>0&&G<H){m=(y.rows[al].height-(H-G));G+=y.rows[al].height;aa=m;if(aa>0){e=true}else{e=false;Y++}}else{if(e==true){e=true;aa=y.rows[al].height}}}}if(e==true){if(t<0||t<y._3){t=y._3}g=-1;u=0;w=0;d+=y._u;for(aj=0;aj<y._a;aj++){if(!V[aj]){continue}if(y.cols[aj].visible===false){w++;continue}var ab=V[w].merged;if(K>0&&J<K&&(g<0||g<(y._4-y._nh))){g=w}if(al>y._3&&(al-Y)==t&&(ab&8)){ab|=1}else{if((w==0||(w-y._4+y._nh>0&&(w-y._4+y._nh)==g))&&(ab&4)){ab|=2}}af=y.rows[al].height;S=y.cols[w].width+y.cols[w]._d+y._t;z=m;F=false;D=V[w].fvisible;M=V[w].flborder;if(ab&1){for(k=al+1;k<A;k++){am=y[(y._5>-1||y._6>-1)?"treeData":"_Y"][k];if(!(am[w].merged&8)){break}else{if(y.rows[k].vcr==true){if(am.length>w+1){am[w+1].flborder=(ab&2)?true:false}af+=y.rows[k].height+y._u;if(z>0){z+=y.rows[k].height+y._u}}}if(af+d>y._e){break}}if(ab&2){for(k=w+1;k<y._a;k++){if(!(V[k].merged&4)){break}else{V[k].text="";V[k].fvisible=true}}}}else{if(ab&2){for(k=w+1;k<y._a;k++){if(!(V[k].merged&4)){break}else{if(y.cols[k].visible!==false){S+=y.cols[k].width+y.cols[k]._d+y._t+1}}}if(S>y._d-h){S=y._d-h;F=true}else{F=false}}}if(w<y._4){if(ab==0||(ab&1)||(ab&2)){y.b_(h,d,al,w,C,z,af,S,u,q,V,true,ab,M);u++}else{y.b_(h,d,al,w,C,z,af,S,u,q,V,false,ab,M);u++}h+=y.cols[w].width+y.cols[w]._d+y._t+1}else{if(K>0&&J+y.cols[w].width+y.cols[w]._d<K){J+=y.cols[w].width+y.cols[w]._d;g=-1}else{if(K>0&&J<K){o=(y.cols[w].width+y.cols[w]._d-(K-J));if(F==false){C=(S-(K-J))}else{if(ab&2){C=0}}if(ab==0||(ab&1)||(ab&2)||D==true){y.b_(h,d,al,w,C,z,af,S,u,q,V,true,ab,M);u++}else{y.b_(h,d,al,w,C,z,af,S,u,q,V,false,ab,M);u++}J+=y.cols[w].width+y.cols[w]._d+y._t+1;h+=o;o=0;C=0}else{if(ab==0||(ab&1)||(ab&2)||D==true){y.b_(h,d,al,w,0,z,af,S,u,q,V,true,ab,M);u++}else{y.b_(h,d,al,w,0,z,af,S,u,q,V,false,ab,M);u++}h+=y.cols[w].width+y.cols[w]._d+y._t+1}}}w++;if(h>y._d){break}}m=0;d+=aa;if(y.template&&V[0].expanded==true&&V[0].template){V[0].template.css({top:d});V[0].template.show();d+=IG$.x_10._h(V[0].template)}if(y.U_.length>q&&y.U_[q]){for(aj=u;aj<y.U_[q].length;aj++){if(y.U_[q][aj].v!==false){y.U_[q][aj].hide();y.U_[q][aj].v=false}}}q++;if(d>y._e){break}}}for(al=q;al<y.U_.length;al++){for(aj=0;aj<y.U_[al].length;aj++){if(y.U_[al][aj].v!==false){y.U_[al][aj].hide();y.U_[al][aj].v=false}}}if(y.sh<1){Z={left:y._8};Z.width=y._d-y._8-(y.sv<1?y._v:0);y.thumbhwidth=Z.width*y.sh;B=Math.max(30,Z.width*y.sh);y._G.css(Z);y._G.show();ak=IG$.x_10._w(y._G);y._Gt.css({left:Math.min(y._1,ak-B),width:B});y.regh=true}else{y.regh=false;y._G.hide()}if(y.sv<1){Z={top:y._7};Z.height=y._e-y._7-(y.sh<1?y._v:0);y.thumbvheight=Z.height*y.sv;B=Math.max(30,Z.height*y.sv);a=Z.height;y._Ft.css({top:Math.min(y._2,a-B),height:B});y._F.css(Z);if(!y.regv&&y._b<y._d&&y.columnfill==true&&y.cols.length>0){y._F.show();y.regv=true;y.L_(true);y.draw();return}else{y._F.show();y.regv=true}}else{if(y.regv&&y._b<y._d&&y.columnfill==true&&y.cols.length>0){y.regv=false;y._F.hide();y.L_(false);y.draw();return}else{y.regv=false;y._F.hide()}}y.measurediv.hide();y.I_.width(y.W_+y._t).height(y.X_+y._u);var an,E=y.rhdls;if(y._r==true&&y._3>0&&y.U_.length>y._3-1){var U,ae,l,ai=y._3-1,v=y._7,ag=y.cols.length,Q=0,O=0;for(al=0;al<ag;al++){if(!y.U_[ai][al]){continue}ae=y.U_[ai][al].p;if(E.length>al){an=E[al];U=an.html[0]}else{an=new RBar(y);E.push(an);U=an.html[0]}an.col=al;Q=ae[2];O=0;if(y._3>1){O=0;for(aj=0;aj<y._3-1;aj++){if(y.U_[aj][al].v===false||y.U_[aj][al].cl.merged==2){l=y.U_[aj][al].p;O+=l[3]-l[1]}}}U.style.left=""+(Q-2)+"px";U.style.top=""+O+"px";U.style.height=""+(v-O)+"px";an.html.show()}if(ag<E.length){for(al=ag;al<E.length;al++){E[al].html.hide()}}}else{if(E&&E.length>0){for(al=0;al<E.length;al++){E[al].html.hide()}}}},R_:function(){var e=this,g,d,c,b,a;if(e._Z==false){return}if(e._5>-1){g=e.treeData}else{g=e.oY}if(g){for(c=0;c<g.length;c++){d=g[c];if(c<e._3){a=true}else{a=true;if(d&&d.length>0&&d[0].mcelltree&&d[0].mcelltree.length>0){for(cmi=0;cmi<d[0].mcelltree.length;cmi++){cmo=d[0].mcelltree[cmi];if(d[cmo].celltree&&d[cmo].celltree.parent){cmop=d[cmo].celltree.parent;while(cmop&&a==true){if(cmop.celltree.opened==false){a=false}cmop=cmop.celltree.parent}}}}}e.rows[c].vcr=a}e._Z=false}},a_:function(){var d,c,g,a,e,h=this,l,m,b;for(d=0;d<h.U_.length;d++){for(c=0;c<h.U_[d].length;c++){g=h.U_[d][c];l=g.cl;b=l.selected;if(h.selectionmode=="row"&&h.rows[g.rowIndex].selected==true){b=true}if(b==true){g.cssobj.background=this.selcolor;g.css({background:this.selcolor});g.addClass("m-datagrid-cell-selected")}else{m=g.cbg;a=(m)?m:"rgb(255, 255, 255)";g.cssobj.background=a;g.css({background:a});g.removeClass("m-datagrid-cell-selected")}}}},b_:function(m,e,ag,ae,v,u,S,W,y,x,Q,G,V,I){var C=this,P=Q[ae],R,O=P.text,ah=P.stylename,Z=P.tex_b,X=P.tex_c,aj=C.styles[ah],af={},Y={},H,F={},ad=m,ac=e,L=0,J=0,d=W,B=S,ai=(u>0)?u:S,U=(v>0)?v:W,l=(u>0)?S-u:0,q=(v>0)?W-v:0,T=null,o=null,E,N,ak,z,al,n=((C._3<ag+1&&C._5>-1&&ae==C._5&&P.treeinfo)||(C._3>ag&&C._6>-1&&P.haschild===true))?true:false,am=(n==true&&((P.children&&P.children.length>0)||P.haschild===true))?true:false,g=null,t,ab=null,D=null,s,b=P.isdirty,A,a,an,c,M,K,aa=(ag-C._3)%2==1;P.r=ag;P.c=ae;F.paddingLeft=C.pad.paddingLeft;F.paddingTop=C.pad.paddingTop;nparent=C.I_;if(C.U_.length>x){if(C.U_[x].length>y){T=C.U_[x][y]}else{T=$('<div class="m-datagrid-cell"></div>').appendTo(nparent);C.U_[x].push(T)}}else{T=$('<div class="m-datagrid-cell"></div>').appendTo(nparent);C.U_.push([]);C.U_[x]=[];C.U_[x].push(T)}T.rowIndex=ag;T.colIndex=ae;R=T.cl;T.cl=P;T.p=[ad,ac,ad+U,ac+ai];s=(P.type||C.cols[ae].type);if(G==false){T.hide();T.v=false}else{if(T.v!==true){T.show();T.v=true}}T._cn&&T.removeClass(T._cn);if(!R||(R&&R.celltype!=s)){T.dobj=null;T.html("")}F.paddingRight=C.pad.paddingRight;F.paddingLeft=(aj?aj.padleft:C.pad.paddingLeft)+(n==true?C.treeIndent*((!P.treeinfo.nd?P.treeinfo.depth:0)||0):0);F.paddingLeft+=(P.celltree&&!P.celltree.nd?C.treeIndent*P.celltree.depth:0);T._cn=null;if(aj!=null){K=aj.cssname;A=parseInt(aj.textalign);switch(A){case 1:case 4:case 7:af.textAlign="left";break;case 2:case 5:case 8:af.textAlign="center";break;case 3:case 6:case 9:af.textAlign="right";F.paddingLeft=0;break}switch(A){case 1:case 2:case 3:F.paddingTop=-l;break;case 4:case 5:case 6:F.paddingTop=((B-X)/2)-l;break;case 7:case 8:case 9:F.paddingTop+=(B-X-C.pad.paddingBottom)-l;break}al="#f1f1f1";if((!aa&&aj.backcolor1)||(aa&&aj.str_backcolor1)){al=C.x_(aa&&aj.str_backcolor1?Number(aj.str_backcolor1):Number(aj.backcolor1))}else{if(aj.backcolor1){al=C.x_(Number(aj.backcolor1))}}af.background=al;af.fontSize=Number(aj.fontsize)+"px";if(aj.color&&aj.color!=""){al=C.x_(Number(aj.color));af.color=al}else{af.color=0}aj.fontstyle=Number(aj.fontstyle);af.fontWeight="normal";af.fontStyle="normal";af.textDecoration="none";if(isNaN(aj.fontstyle)==false){af.fontWeight=(aj.fontstyle&IG$._IE3.P_BOLD)?"bold":"normal";af.fontStyle=(aj.fontstyle&IG$._IE3.P_ITALIC)?"italic":"normal";af.textDecoration=(aj.fontstyle&IG$._IE3.P_UNDERLINE)?"underline":"none"}}af.left=(ad-L)+"px";af.top=(ac-J)+"px";af.width=U;af.height=ai;if(C._browser>0&&C._browser<8){af.width-=1;af.height-=1}af.width+="px";af.height+="px";if(g){}else{if(n==true){}else{if(P.celltree){}}}if(Q[ae].chart!=null){C._T(Q[ae].chart,m,e,W,S,T)}else{switch(s){case"checkbox":case"boolean":if(T.dobj){o=T.dobj}else{if(O=="true"||O=="false"){P.checked=(O=="true")?true:false;P.text=O=""}o=T.dobj=$("<input type='checkbox' value='"+(O||"&nbsp")+"'>"+(O||"&nbsp")+"</input>");T.append(o)}o.attr("checked",P.checked);o.bind("click",function(h){h.stopPropagation();P.checked=o.attr("checked")});break;case"radio":if(T.dobj){o=T.dobj}else{o=T.dobj=$("<input type='radio' value='"+(O||"&nbsp")+"'>"+(O||"&nbsp")+"</input>");T.append(o)}o.attr("checked",P.checked);break;case"action":if(C.columns&&C.columns[ae].items){for(an=0;an<C.columns[ae].items.length;an++){C.b_a(C.columns[ae].items[an],T)}}break;default:if(T.dobj){o=T.dobj;E=o.tcss}else{o=T.dobj=o=$("<div class='m-cell-text'></div>");T.append(o)}a=F.paddingLeft||0;if((n==true&&am==true)||(P.celltree&&P.celltree.haschild==true)){F.paddingLeft=0}N={marginLeft:(F.paddingLeft||0)+"px",marginTop:(F.paddingTop||0)+"px",marginRight:(F.paddingRight||0)+"px",marginBottom:(F.paddingBottom||0)+"px"};if(O&&O.charAt(0)=="<"&&O.charAt(O.length-1)==">"){}else{O=(O?O:"").replace(" ","&nbsp;")}K=K?K.replace("${value}",O):null;o.html(O||" ");o.tcss=N;for(E in N){o[0].style[E]=N[E]}break}}if(K){T._cn=K;T.addClass(K)}if(P.title==3||P.title==5){T.addClass("igc-i-link");T._3=1}else{if(T._3){T.removeClass("igc-i-link");T._3=0}}if(P.title==4||P.title==5){ak=T._drm;if(!ak){ak=$("<div class='igc-dgs-drill'></div>").appendTo(T);T._drm=ak}ak.css({position:"absolute",left:af.textAlign=="right"?0:"initial",right:af.textAlign=="right"?"initial":0});ak.unbind("mouseover");ak.unbind("mouseout");ak.unbind("mousedown");ak.unbind("mouseup");ak.bind({mousedown:function(h){},mouseup:function(h){}})}else{if(T._drm){T._drm.remove();T._drm=null}}if((n==true&&am==true)||(P.celltree&&P.celltree.haschild==true)){if(T.treeicon){ab=T.treeicon;D=$("#treetext",ab);g=$("#treeicon",ab)}else{T.treeicon=ab=$("<div class='m-datagrid-tree-box'><div id='treeicon' class='m-datagrid-tree-icon'></div><div id='treetext' class='m-datagrid-tree-text'></div></div>");g=$("#treeicon",T.treeicon);D=$("#treetext",T.treeicon);T.append(ab)}D.html(o.html());o.hide()}else{if(T.treeicon){T.treeicon.remove();T.treeicon=null;o.show()}}if((n==true&&am==true)||(P.celltree&&P.celltree.haschild==true)){if(P.celltree){t=(P.celltree.opened===true)?true:false;ab.css({left:C.pad.paddingLeft+(P.celltree.nd?0:C.treeIndent*P.celltree.depth),top:C.pad.paddingTop});g.unbind("click");g.bind("click",function(){P.celltree.opened=!P.celltree.opened;C._Z=true;C.R_();C._c=0;C.redraw.call(C);if(P.celltree.opened&&P.celltree.h){C.l_("hierarchy",{cell:P,row:Q})}return false})}else{t=(P.treeinfo.opened===true)?true:false;ab.css({left:C.pad.paddingLeft+C.treeIndent*(P.treeinfo.nd?0:P.treeinfo.depth),top:C.pad.paddingTop});g.unbind("click");g.bind("click",function(){P.treeinfo.opened=!P.treeinfo.opened;C.cR();C._Z=true;C.draw.call(C);return false})}g.removeClass("m-datagrid-treeplus").removeClass("m-datagrid-treeminus").addClass((t==false)?"m-datagrid-treeplus":"m-datagrid-treeminus")}if(P.menus&&P.menus.active&&!C.hidemenu){if(!T.menuobj){ak=$("<div class='m-datagrid-menu'></div>").appendTo(T);T.menuobj=ak;ak.css({position:"absolute",right:F.paddingRight,top:F.paddingTop})}else{ak=T.menuobj;ak.unbind("mouseover");ak.unbind("mouseout");ak.unbind("mousedown");ak.unbind("mouseup")}ak.bind({mouseover:function(j){var h=$(this);h.addClass("m-datagrid-menu-focus");return false},mouseout:function(j){var h=$(this);h.removeClass("m-datagrid-menu-focus");return false},mousedown:function(h){h.stopPropagation();return false},mouseup:function(h){var j=C.owner,ap=$(this).offset(),ao=$(j).offset(),aq=C._df,w=C._dfc,av=ap.left-ao.left,at=ap.top-ao.top+$(this).height(),ar,au;ar=w.__af=w.__af||{};if(C.enablecontextmenu==false){return false}h.stopPropagation();$.each(["cmd_asc","cmd_desc","cmd_sort","b_rank","b_filter","cmd_remove","cmd_filter"],function(ay,aw){var ax=0;if(P.menus.items[aw]){ax=1}w[aw][ax?"show":"hide"]()});w.d_rank.hide();if(ar[P.c]){w.d_filter.show()}else{w.d_filter.hide()}au=ar[P.c]=ar[P.c]||{};w.f_opt&&w.f_opt.val(au.op||(P.position==3?"between":"_like_"));w.sval1&&w.sval1.val(au.val1||"");w.sval2&&w.sval2.val(au.val2||"");w.sval2[w.f_opt.val()=="between"?"show":"hide"]();$.each(["t_sum","t_avg","t_min","t_max","t_rank","t_pot","t_cumul","t_incr","t_diff"],function(ax,aw){var ay=w[aw];if(P.position==1||P.position==2){ay[/(t_sum|t_avg|t_min|t_max)/.test(aw)?"show":"hide"]()}else{if(P.position==3){ay[/(t_min|t_max)/.test(aw)?"hide":"show"]()}}});aq.show();if(av+w.dmain.width()>$(j).width()){av=$(j).width()-w.dmain.width()}C.context.cell=P;w.dmain.css({top:at,left:av});return false}})}else{if(T.menuobj){T.menuobj.remove();T.menuobj=null}}if(ag==(C._3-1)&&C.__gflt&&C.__gflt[ae]){if(!T.ficon){z=$("<div class='m-datagrid-filter'></div>").appendTo(T);T.ficon=z;z.css({position:"absolute",right:F.paddingRight+(T.menuobj?16:0),top:F.paddingTop})}else{z=T.ficon}}else{if(T.ficon){T.ficon.remove();T.ficon=null}}T.cbg=af.background;if(C.selectionmode=="row"&&C.rows[ag].selected==true){M=true}else{M=P.selected}if(M==true){af.background=C.selcolor}Y=T.cssobj;T.cssobj=af;for(E in af){T[0].style[E]=af[E]}C.W_=Math.max(C.W_,ad+U);C.X_=Math.max(C.X_,ac+ai);return T},b_a:function(c,d){var b=this,a;switch(c.type){default:a=$("<button>"+c.name+"</button>").appendTo(d).bind("click",function(){if(c.action){c.action(b,d)}return false});break}},c_:function(){},d_:function(o,n){var v,u,t,z=this,s,h=null,A=z.ctx.offset(),d=o-A.left,b=n-A.top,m=(z.cols.length>(z._4-z._nh)?(z._4-z._nh):0),l,c,a,x,w,q=z._2/z.sv,y=z._1/z.sh,e=null,g=false;if(z.U_.length>0){for(v=0;v<z.U_.length;v++){if(z.U_[v].length>m&&m>-1){s=z.U_[v][m];l=s.p;c=l[1];a=l[3];if(s&&s.v!==false&&c>-1&&c<b&&b<a){for(u=0;u<z.U_[v].length;u++){s=z.U_[v][u];l=s.p;x=l[0];w=l[2];if(x>-1&&x<d&&d<w){g=true;if(!s.v&&s.cl.merged==8){for(t=v;t>=z._3;t--){if(z.U_[t][u]&&(z.U_[t][u].cl.merged==0||z.U_[t][u].cl.merged==1)){e=z.U_[t][u];break}}}else{if(s.v!==false){e=s}}break}}}}if(e||g){break}}}return e},_A:function(d,c){var a=this,b=c.originalEvent,e;if(c){c.stopPropagation();if(b.touches.length==2&&(a.regv||a.regh)){e=b.touches[0];a._f=true;a.sx=a._1;a.sy=a._2;a._x=true;a._g=e.pageX;a._h=e.pageY}else{if(b.touches.length>0){e=b.touches[0];a._f=false;a.h_.call(a,e.pageX,e.pageY)}else{a._f=false;a.j_.call(a,c.pageX,c.pageY,false,false)}}}},_B:function(c,b){var a=this;if(b){b.stopPropagation();if(!a._f){a.j_.call(a,b.pageX,b.pageY,false,false)}a._f=false}},_C:function(b,j){var a=this,g=j.originalEvent,c,n,e,m,l,h;if(g&&g.touches.length>0){j.stopPropagation();c=g.touches[0];if(a._f&&a._g>-1&&a._h>-1){n={x:a._g,y:a._h};e={x:c.pageX,y:c.pageY};if(a.regv&&a.regh){m=Math.abs(e.x-n.x);l=Math.abs(e.y-n.y);if(m>l){h="h"}else{h="v"}}else{if(a.regv){h="v"}else{if(a.regh){h="h"}}}a._S.call(a,e,h)}else{a.i_.call(a,c.pageX,c.pageY)}}},e_:function(d,o){var m=this,c=m.owner,s,n,b,h,l,a=false;if(o&&!m.resizeCol){var g=(window.Ext&&Ext.dd.DragDropManager.dragCurrent&&Ext.dd.DragDropManager.dragCurrent.dragging==true)?true:false;if(m._x==false&&m._y==false&&g!==true){if(o.which==1){if(m.editing){l=m.d_(o.pageX,o.pageY);if(l==m.editing){a=true}else{o.stopPropagation()}}else{o.stopPropagation()}m.h_.call(m,o.pageX,o.pageY);function j(t){m.f_.call(m,d,t);return false}function q(t){m.g_.call(m,d,t);$(document).unbind("mousemove",j).unbind("mouseup",q);return false}$(document).bind("mousemove",j).bind("mouseup",q)}else{if(o.which==3){if(m.enablecontextmenu==false){return}var e=$(c).offset();o.stopPropagation();s=o.pageX-e.left;n=o.pageY-e.top;b=[];if(m.selectedItems&&m.selectedItems.length<2){l=m.d_(o.pageX,o.pageY);if(l){m.p_();cl=l.cl;cl.selected=true;m.rows[l.rowIndex].selected=true;m.selectedRows.push(m.rows[l.rowIndex]);m.selectedItems.push(cl);m.a_()}}if(m.selectedItems&&m.selectedItems.length>0){if((m._browser>0&&m._browser<8)||$.zclip){b.push({disp:IRm$.r1("B_CLIPBOARD"),name:"CMD_CLIPBOARD","class":(b.length>0?"separator":null)})}if(m._ILb&&m._ILb.dff1.length>0){l=m.d_(o.pageX,o.pageY);if(l){for(h=0;h<m._ILb.dff1.length;h++){if(m._ILb.mL(m._ILb.dff1[h],l)){b.push({disp:m._ILb.dff1[h].name,name:"detail:"+m._ILb.dff1[h].uid})}}}}}if(b.length>0){m._W(b);m.context.cell=null;if($(c).showContextMenu){$(c).showContextMenu.call($(c),m.context,s,n)}}}}}}return a},f_:function(d,c){var a=this;if(c&&!a.resizeCol){var b=(window.Ext&&Ext.dd.DragDropManager.dragCurrent&&Ext.dd.DragDropManager.dragCurrent.dragging==true)?true:false;if(a._x==false&&a._y==false&&b!==true){c.stopPropagation();a.i_.call(a,c.pageX,c.pageY)}}},g_:function(c,b){var a=this;if(b&&!a.resizeCol){a.j_.call(a,b.pageX,b.pageY,b.which,b.ctrlKey,b.shiftKey)}},_D:function(c,b){var a=this;if(b&&!a.resizeCol){a.k_.call(a,b.pageX,b.pageY,b.which,b.ctrlKey,b.shiftKey)}},h_:function(b,a){var d=this;if(d._x==true){return}if(d._y==true){return}if(d.resizeCol==true){return}d._l=d._1;d._m=d._2;d.buttondown=true;d._j=b;d._k=a;d.prevRenderer=d.d_(b,a);d.startRenderer=d.prevRenderer;d.mouseAction=0;var e=new Date().getTime();d.doubletap=false;if(d._o&&e-d._o<800){d.doubletap=true}d._o=e},i_:function(q,n){var t,o,m=this,b=false,e,d,g=m.startRenderer,s;if(m._x==true){return}if(m._y==true){return}if(m.mouseMode=="scroll"){if(m.mouseAction==0&&m.buttondown==true&&(m._b>m._d||m._c>m._e)){t=q-m._j;o=n-m._k;m.v_(m,t,o,q,n)}}else{if(m.mouseMode=="select"&&(Math.abs(m._j-q)>5||Math.abs(m._k-n)>5)){if(m.mouseAction==0&&m.buttondown==true){renderer=m.d_(q,n);if(renderer!=null&&g!=null){s=renderer.cl;if(renderer==g&&(m.selectedItems.length!=1||(m.selectedItems.length==1&&m.selectedItems[0]!=s))){m.p_();s.selected=true;m.rows[renderer.rowIndex].selected=true;m.selectedRows.push(m.rows[renderer.rowIndex]);m.selectedItems.push(s);b=true}else{if(m.prevRenderer!=renderer){var a=Math.min(g.rowIndex,renderer.rowIndex),l=Math.min(g.colIndex,renderer.colIndex),h=Math.max(g.rowIndex,renderer.rowIndex),c=Math.max(g.colIndex,renderer.colIndex);m.p_();for(e=a;e<=h;e++){if(m.rows[e].visible!==false&&m.rows[e]._5a!==true){for(d=l;d<=c;d++){if(m.cols[d].visible!==false){m[(this._5>-1||this._6>-1)?"treeData":"_Y"][e][d].selected=true;m.selectedItems.push(m[(this._5>-1||this._6>-1)?"treeData":"_Y"][e][d])}}m.selectedRows.push(m.rows[e])}}b=true}}if(b==true){m.a_()}m.prevRenderer=renderer}}}}},j_:function(m,l,n,b,j){var h=new Date().getTime(),e,a=0,g=this,d,o;if(g._x==true){return}if(g._y==true){return}if(g.mouseMode=="scroll"){if(g.mouseAction==0&&(h-g._o)<500&&Math.abs(g._j-m)<10&&Math.abs(g._k-l)<10){e=g.d_(m,l);if(e){o=e.cl;g.p_();o.selected=true;g.selectedItems.push(o);g.rows[e.rowIndex].selected=true;g.selectedRows.push(g.rows[e.rowIndex]);g.a_()}}}else{if(g.mouseMode=="select"){e=g.d_(m,l);if(e){if(g.editing!=e){g._N.call(g)}if(n==3){}else{if(g._p>-1&&h-g._p<500&&g.mouseUpRenderer&&g.mouseUpRenderer==e){}else{if(h-g._o<500){a=1;if(g.itemClick(e)!==false){g.l_("itemclick",e)}}}o=e.cl;if(b&&a==1){o.selected=!o.selected;g.rows[e.rowIndex].selected=!g.rows[e.rowIndex].selected;if(o.selected==true){g.selectedItems.push(o);g.selectedRows.push(g.rows[e.rowIndex])}else{for(d=0;d<g.selectedItems.length;d++){if(g.selectedItems[d]==o){g.selectedItems.splice(d,1);break}}if(g.selectionmode=="row"){for(d=0;d<g.selectedRows.length;d++){if(g.selectedRows[d]==g.rows[e.rowIndex]){g.selectedRows.splice(d,1);break}}}}g.a_()}if(a>0){if(a>1||!b){g.p_()}o.selected=true;g.selectedItems.push(o);g.rows[e.rowIndex].selected=true;g.selectedRows.push(g.rows[e.rowIndex]);g.a_()}else{if(g.selectedItems.length>0){g.l_("selectionchanged")}}}}else{g._N.call(g)}g.mouseUpRenderer=e;g._p=h}}g.buttondown=false;g._j=-1;g._k=-1},k_:function(d,b,a,h,c){var e=this,g=e.d_(d,b);e._p=-1;if(e.m_(g)!==false){e.l_("itemdblclick",g)}},l_:function(a,b){this.ctx.trigger(a,[b])},_E:function(e,d,j){if(typeof(j)=="undefined"){j=d.originalEvent?d.originalEvent.deltaY*-0.1:0}var c=this,h=c._1,g=c._2,a=j>0?"Up":"Down",b=Math.abs(j);if(c.__scr){return}b=(b>15)?b*1.5:18+1;b=(j>0)?-b:b;c._N.call(c);if(c._c>c._e){c.v_(c,0,undefined,0,0,b>0?10:-10)}},m_:function(b){var a=this;if(a._z&&a.cols[b.colIndex]._z!==false){a.n_(b)}},n_:function(a){},o_:function(){},itemClick:function(a){},p_:function(){var a,b=this,d=b.selectedItems,c=b.selectedRows;for(a=d.length-1;a>=0;a--){d[a].selected=false}for(a=c.length-1;a>=0;a--){c[a].selected=false}b.selectedItems=d=[];b.selectedRows=[]},_H:function(c,b,d){var a=this;if(b){b.preventDefault();b.stopImmediatePropagation();a.dt1=new Date().getTime();a._f=true;a._g=b.pageX;a._h=b.pageY;a.sx=a._1;a.sy=a._2;a._x=true;a.scrolltarget=c.eventtarget;a._O(d)}return false},_I:function(d,n,s){var l=this,a=l,m=new Date().getTime();if(n&&l.dt1&&l.dt1>-1&&m-l.dt1<200){var o=$(d),e=o.offset(),t=n.pageX-e.left,q=n.pageY-e.top,u=IG$.x_10._w(o),g=IG$.x_10._h(o),j=l._1,h=l._2,b,c;l.dt1=-1;event.stopPropagation();if(l.ge){$(document).unbind(l.ge);l.ge=null}l._R.call(l,n,s);a._f=false;a._g=-1;a._h=-1;if(s=="v"){c=(q>g/2)?0.1:-0.1;b=Math.min(a._c-a._e,(a._e-a._7)*0.1);h=h+b*c;h=(h<0)?0:Math.min(h,a._c-a._e)}else{if(s=="h"){c=(t>u/2)?0.1:-0.1;b=b=Math.min(a._b-a._d,(a._d-a._8)*0.1);j=j+b*c;j=(j<0)?0:Math.min(j,a._b-a._d)}}if(a._1!=j||a._2!=h){a._1=j;a._2=h;a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},50)}}},q_:function(b){var a=this;a._N();a.on_i.call(a)},r_:function(a){var d=this,b,e=Math.min(a+d._3,d.rows.length),c=0;for(b=d._3;b<e;b++){c+=d.rows[b].height}d.q_(c*d.sv)},s_:function(){var a=this,b=(a._c-a._7-a._e)*a.sv+1;a.q_(b)},_K:function(e,d,g){var c=this,b,a;d.stopPropagation();if(g=="v"){a=$(e).scrollTop();a=a*c.sv;c._2=a}else{if(g=="h"){a=$(e).scrollLeft();a=a*c.sh;c._1=a}}if(c._i>-1){clearTimeout(c._i)}c._N();c._i=setTimeout(function(){c.on_i.call(c)},10)},_J:function(d,l,m){var a=this;l.stopPropagation();a._N.call(a);var j=a._1,h=a._2,c=0,b,e,n,g=(m=="v")?a._Ft.offset():a._Gt.offset();if(m=="v"){c=(g.top>l.pageY)?-1:1;b=a.thumbvheight;h+=b*c;n=IG$.x_10._h(a._F);h=Math.min(n-a.thumbvheight,Math.max(0,h));if(a._2==h){return}a._2=h}else{c=(g.left>l.pageX)?-1:1;b=a.thumbhwidth;j+=b*c;e=IG$.x_10._w(a._G);j=Math.min(e-a.thumbhwidth,Math.max(0,j));if(a._1==j){return}a._1=j}a.t_.call(a);if(a._i>-1){clearTimeout(a._i)}a._i=setTimeout(function(){a.on_i.call(a)},10)},on_i:function(){this._i=-1;var a=this,b=a._2/a.sv;if(b>(a._c-a._7-a._e)){a.l_("scrollend",null)}this.draw()},t_:function(){var d=this,c=30,e,b,g,a;e=IG$.x_10._w(d._G);b=IG$.x_10._h(d._F);g=IG$.x_10._w(d._Gt);a=IG$.x_10._h(d._Ft);d._Gt.css({left:Math.min(d._1,e-g)});d._Ft.css({top:Math.min(d._2,b-a)})},v_:function(a,q,n,j,h,e){var m=this,l=a._1,g=a._2,c,u,t=m._F,b,d,s=l,o=g;if(a.sh<1&&Math.abs(q)>5){c=IG$.x_10._w(a._G);s=Math.min(c-a.thumbhwidth,Math.max(0,l+q))}if(a._c>a._e&&typeof(n)=="undefined"){b=IG$.x_10._h(t);d=b-m.thumbvheight;u=e*a.sv*21;o=Math.min(d,a._2+u);if(o<0){o=0}}else{if(a._c>a._e&&Math.abs(n)>5){u=IG$.x_10._h(a._F);o=Math.min(u-a.thumbvheight,Math.max(0,g+n))}}if(s!=l||o!=g){a._1=s;a._2=o;a.t_.call(a);a.draw()}},u_:function(b,o,m,e){var j=this,n=new IG$.cMa.CSize(0,0),g=window.bowser,h={},d,l=IG$._ccache.tmeasure,c,a=0;m=m||"&nbsp;";if(e){h.fontSize=Number(e.fontsize);if(e.autowidth=="F"&&e.columnwidth){d=Number(e.columnwidth);a=isNaN(d)?0:1}}else{h.fontSize=o}c=m+":"+h.fontSize+":"+(a?d:"");if(l[c]){return l[c]}j.measurediv.show();j.measurediv.css(h);j.measurediv.html(m);n.height=IG$.x_10._h(j.measurediv);n.width=IG$.x_10._w(j.measurediv);if(a){n.fw=1;n.fw_=d}else{if(e){n.width+=e.padright+e.padleft+8}}l[c]=n;return n},w_:function(e){var b=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),c=Math.floor(e/16),a=e-c*16,d=b[a];return d},x_:function(g){var d=this,c=new Array(),b=0,a,e=IG$._ccache.colorcode;if(e[g]){return e[g]}if(g<16){fcolor="#00000"+d.w_(g)}else{while(g>15){c[b]=d.w_(g);g=Math.floor(g/16);b+=1}c[b]=d.w_(g);fcolor="#";for(b=0;b<6;b++){a=c[5-b];fcolor+=(a?a:"0")}}e[g]=fcolor;return fcolor},y_:function(e,b){var d=this,c=null,a=d.oY;if(a&&a.length>e&&a[e].length>b){c=a[e][b]}return c},z_:function(e,b,d){var c=this,a=c.oY;if(a&&a.length>e&&a[e].length>b){a[e][b].text=d}},S_:function(){var g=this,j=g.oY,h,e=[],a=[],d=j.length,c,b={};g._N();g._Z=true;g._c=0;h=new IG$.cMa.DimInfo(d);g.rows.push(h);for(c=0;c<g._a;c++){e.push("")}g.T_(e,a);j.push(a);g.J_(h,a,b);this._9=j.length;g.t_.call(g);g.redraw()},A_:function(b){var a=this,c=a.oY;a._N();a._Z=true;c.splice(b,1);a.rows.splice(b,1);this._9=c.length;a.t_.call(a);a.redraw()},T_:function(a,g){var e=this,d=e.columns,c,b;for(b=0;b<d.length;b++){cell={text:a[d[b].field]||null,mrow:0,mcol:0,merged:0,stylename:d[b].stylename||"normal",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1};if(cell.stylename&&e.styles[cell.stylename]){st=e.styles[cell.stylename];if(d[b].type=="numeric"&&st.formatstring){cell.code=cell.text;cell.text=e.formatString(cell.code,st.formatstring)}}g.push(cell)}},C_:function(e,g){var d=this,c=d.columns,b,a;for(b=0;b<e.length;b++){row=[];d.T_(e[b],row);g.push(row)}},is_s:function(a){var c=$(a)[0];if((c.nodeType!=1)||(c==document.body)){return true}if(c.currentStyle&&c.currentStyle.display!="none"&&c.currentStyle.visibility!="hidden"){return this.is_s(c.parentNode)}else{if(window.getComputedStyle){var b=document.defaultView.getComputedStyle(c,null);if(b.getPropertyValue("display")!="none"&&b.getPropertyValue("visibility")!="hidden"){return this.is_s(c.parentNode)}}}return false},check_s:function(a){var d=$(a)[0];var c=a;if((d.nodeType!=1)||(d==document.body)){return null}if(d.currentStyle&&(d.currentStyle.display=="none"||d.currentStyle.visibility=="hidden")){return c}else{if(window.getComputedStyle){var b=document.defaultView.getComputedStyle(d,null);if(b.getPropertyValue("display")=="none"||b.getPropertyValue("visibility")=="hidden"){return c}}else{c=this.check_s(d.parentNode);if(c){return c}}}return c},browser:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}};IG$.cMa.padding=function(b){var a=this;a.paddingTop=b;a.paddingBottom=b;a.paddingLeft=b;a.paddingRight=b};IG$.cMa.DimInfo=function(a){var b=this;b.index=a;b.width=0;b.height=0;b._d=0};IG$.cMa.DimInfo.prototype={w:function(){var a=this;return a.width+(a._d?a._d:0)},h:function(){var a=this;return a.height+(a._e?a._e:0)},init:function(){var a=this;a._d=0;a._e=0;a.width=0;a.height=0;a.visible=true;a.fw=undefined;a.fw_=undefined}};IG$.cMa.CSize=function(b,a){var c=this;c.width=b;c.height=a};if(window.Ext){IG$.DmU=Ext.extend(Ext.dd.DragZone,{dtimer:-1,spoint:null,constructor:function(b,a){this.callParent([b,a])},destroy:function(){this.callParent()}})}IG$.cMa.prototype.initializeDragDrop=function(b){var a=this;this.DF=$('<div class="m-datagrid-feedback"></div>');this.DF.appendTo(this.owner);this.DF.hide()};IG$.cMa.prototype.isAllowedType=function(c){var b=false,a=this.getTypeName(c);if(a=="d"||a=="m"){b=true}return b};IG$.cMa.prototype.getTypeName=function(b){var a="";if(b=="measure"||b=="formulameasure"||b=="measuregroup"){a="m"}else{if(b=="metric"||b=="custommetric"||b=="tabdimension"||b=="measuregroupdimension"){a="d"}}return a};if(!window.Ext){window.Ext=null}qigridview.prototype=new IG$.cMa();qigridview.prototype.constructor=qigridview;qigridview.prototype.parent=IG$.cMa.prototype;function qigridview(a){this.createComponent();this.editable=true;this.enablecontextmenu=false;this.scrollbar="image";this.drawmode=(a?a.drawmode||"req":"req");this.columnfill=(a&&a.columnfill==true?true:false);this.processRowFunction=a?a.processRowFunction:null;this.initStyles();if(a){this.merge(a)}}qigridview.prototype.initStyles=function(){var a;this.styles={normal:{name:"normal",fontsize:11,color:0,backcolor1:16777215,padtop:4,padbottom:4,padright:2,padleft:2,formatstring:null,textalign:"4"}};a=this.addStyle("fixedrow");a.padtop=2;a.padbottom=2;a.textalign="5";a.backcolor1=874901;a.color=16777215;a=this.addStyle("fixedcolumn");a=this.addStyle("numeric");a.formatstring="#,###";a.textalign="6";a=this.addStyle("boolean");a.textalign="5";a=this.addStyle("grandtotal","numeric");a.backcolor1=16645822;a=this.addStyle("subtotal","numeric");a.backcolor1=16645822;a=this.addStyle("grandtotallabel");a.backcolor1=16645822;a=this.addStyle("subtotallabel");a.backcolor1=16645822};qigridview.prototype.addStyle=function(g,e){var c=this,d=c.styles[e],b,a;if(!d){d=c.styles.normal}b={name:g};for(a in d){if(a!="name"){b[a]=d[a]}}c.styles[b.name]=b;return b};qigridview.prototype.merge=function(b){var a,c=this,d=b;for(a in d){if(typeof(c[a])!="undefined"){c[a]=d[a]}}};qigridview.prototype.setColumns=function(b,m,n){var h=this,g,d,c=[],l=[],e,o,a;h.subtotal=m;h.template=n;if(b){h.columns=b;a=h.calculateDepth(b,l,0,0,null);e=a.depth;for(g=0;g<e+1;g++){o=[];for(d=0;d<l.length;d++){o.push(null)}c.push(o)}h.makeHeaderData(c,b,0,0);h.colcount=(c&&c.length>0)?c[0].length:0;h.rowcount=c.length;h.fixedRow=c.length;h.setDataProvider(c)}h.columns=l;return l};qigridview.prototype.calculateDepth=function(d,l,g,b,e){var h,n,m,j={depth:0,cols:0},a,c=0;for(h=0;h<d.length;h++){if(d[h].columns&&d[h].columns.length>0){a=this.calculateDepth(d[h].columns,l,g+1,h,d[h].defaults||e);g=a.depth;j.cols+=a.cols;c+=a.cols;b+=a.cols}else{if(e){for(m in e){d[h][m]=e[m]}}if(d[h].type=="numeric"){d[h].stylename=d[h].stylename||"numeric"}else{if(d[h].type=="boolean"){d[h].stylename=d[h].stylename||"boolean"}}if(d[h].formatstring){n=this.addStyle("column_"+(h+b),(d[h].stylename||"normal"));n.formatstring=d[h].formatstring;d[h].stylename=n.name}l.push(d[h]);j.cols++;c++}}j.depth=g;return j};qigridview.prototype.makeHeaderData=function(d,c,g,b){var l=this,h,e,n,a=0,m;for(h=0;h<c.length;h++){n={text:c[h].name||c[h].field,mrow:0,mcol:0,merged:0,stylename:c[h].headerstyle||"fixedrow",chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1};if(c[h].columns&&c[h].columns.length>0){for(e=0;e<c[h].columns.length;e++){n=l.ocopy(n);n.merged=(e==0)?2:4;d[g][a+e+b]=n}m=l.makeHeaderData(d,c[h].columns,g+1,a);a+=m}else{for(e=g;e<d.length;e++){n=l.ocopy(n);n.merged=(e==g)?1:3;n.type="string";d[e][a+b]=n}a++}}return a};qigridview.prototype.ocopy=function(c){var b={},a;for(a in c){b[a]=c[a]}return b};qigridview.prototype.setDataProvider=function(d,e){if(!d){return}var c=this,b=c.columns,a;qigridview.prototype.parent.setDataProvider.call(c,d,false);for(a=0;a<b.length;a++){if(b[a].minwidth){c.cols[a].width=Math.max(c.cols[a].width,b[a].minwidth)}if(b[a].maxwidth){c.cols[a].width=Math.min(c.cols[a].width,b[a].maxwidth)}c.cols[a].type=b[a].type}if(e!==false){c.redraw()}};qigridview.prototype.loadData=function(e){var h=this,c=h.dataProvider,g,d,l,b=h.columns,n,m,a;if(c.length>h.fixedRow){c.splice(h.fixedRow,c.length-h.fixedRow)}if(e){h.getRowData(e,c);a=h.updateSubtotal(c);c=(a?a:c);h.updateMerge(c)}h.setDataProvider(c)};qigridview.prototype.formatString=function(a,b){a=this.format(Number(a),b);return a};qigridview.prototype.format=function(s,q){if(typeof(q)!="string"){return""}var b=-1<q.indexOf(","),a=this.j5(q).split("."),l=s;if(1<a.length){l=l.toFixed(a[1].length)}else{if(2<a.length){throw ("NumberFormatException: invalid format, formats should have no more than 1 period: "+q)}else{l=l.toFixed(0)}}var t=l.toString();if(b){a=t.split(".");var o=a[0],e=[],g=o.length,d=Math.floor(g/3),c=o.length%3||3;for(var h=0;h<g;h+=c){if(h!=0){c=3}e[e.length]=o.substr(h,c);d-=1}t=e.join(",");if(a[1]){t+="."+a[1]}}return q.replace(/[\d,?,#\.?,#]+/,t)};qigridview.prototype.j5=function(d){d+="";var b=/^\d|\.|\#|-$/;var a="";for(var c=0;c<d.length;c++){if(b.test(d.charAt(c))){if(!((d.charAt(c)=="."&&a.indexOf(".")!=-1)||(d.charAt(c)=="-"&&a.length!=0))){a+=d.charAt(c)}}}return a};qigridview.prototype.loadAjaxData=function(a){var b=this;if(a){a.datatype=a.datatype||"json";b.setLoading(true);$.ajax({type:a.method||"GET",url:a.url,dataType:a.datatype||"json",data:a.data,timeout:10000,success:function(c){if(a.success){a.success.call(a.scope||b,c)}b.processAjaxData.call(b,a,c,"load")},error:function(g,c,d){b.setLoading(false)}})}};qigridview.prototype.appendAjaxData=function(a){var b=this;if(a){a.datatype=a.datatype||"json";b.setLoading(true);$.ajax({type:a.method||"GET",url:a.url,dataType:a.datatype||"json",data:a.data,timeout:10000,success:function(c){b.processAjaxData.call(b,a,c,"append")},error:function(g,c,d){b.setLoading(false)}})}};qigridview.prototype.processAjaxData=function(h,q,l){var o=this;o.setLoading(false);var g,e,d=[],n=o.dataProvider;if(h.datatype=="xml"){var b=o.L7(q,h.rootnode),m,t,c,a;if(b){m=o.L14(b);for(g=0;g<m.length;g++){if(o.processRowFunction){t=o.processRowFunction.call(o,o,m[g])}else{t=o.L10(m[g])}if(t){d.push(t);if(m[g].hasChildNodes()==true){a=this.L14(m[g]);for(e=0;e<a.length;e++){t[this.L17(a[e])]=this.L12(a[e])}}}}}}else{if(h.datatype=="json"){var s=h.rootnode.split("/"),b,m,t,c;if(s.length>0){for(g=0;g<s.length;g++){if(g==0){b=q}else{b=b[s[g]]}if(!b){}}if(b){m=b;for(g=0;g<m.length;g++){if(o.processRowFunction){t=o.processRowFunction.call(o,o,m[g])}else{t=m[g]}if(t){d.push(t)}}}}}}if(l=="load"){o.dataFullLoaded=false;o.loadData(d)}else{if(l=="append"){if(d.length==0){o.dataFullLoaded=true}else{o.getRowData(d,n);c=o.updateSubtotal(n);o.dataProvider=n=c?c:n;o.updateMerge(n);o.refreshData()}}}};qigridview.prototype.updateSubtotal=function(l){var v=this,d=v.columns,n,m,g,q=false,e=l||v.dataProvider,w,t,u,o={},a;for(n=0;n<d.length;n++){o[d[n].field]=n}if(v.subtotal&&v.subtotal.length>0){for(n=0;n<v.subtotal.length;n++){t=v.subtotal[n];t.colindex=-1;if(t.field&&typeof(o[t.field])!="undefined"&&t.datafields&&t.datafields.length>0){t.colindex=o[t.field];t.pvalue=null;t.fcalc=[];t.topposition=-1;for(m=0;m<t.datafields.length;m++){if(typeof(o[t.datafields[m]])!="undefined"){t.fcalc.push({field:t.datafields[m],colindex:o[t.datafields[m]],sum:null,mbody:null})}}}}for(n=e.length-1;n>=v.fixedRow;n--){if(e[n][0].issubtotal==true){e.splice(n,1)}}var c=[],b,h,s;for(n=0;n<v.fixedRow;n++){c.push(e[n])}for(n=v.fixedRow;n<e.length;n++){b=e[n];c.push(b);for(m=0;m<v.subtotal.length;m++){t=v.subtotal[m];if(t.colindex>-1){a=t.toplocate||false;for(g=0;g<t.fcalc.length;g++){u=Number(b[t.fcalc[g].colindex].code||b[t.fcalc[g].colindex].text);if(isNaN(u)==false){t.fcalc[g].sum=(t.fcalc[g].sum==null)?u:t.fcalc[g].sum+u}}if(t.isgrandtotal==true){if(a!=true&&n==e.length-1){h=v.addSubTotalRow(t,null);c.push(h)}else{if(a==true&&n==v.fixedRow){h=v.addSubTotalRow(t,null);t.srow=h;c.splice(c.length-1,0,h)}else{if(a==true&&n==e.length-1){v.updateSubTotalRow(t,null)}}}}else{s=(n+1<e.length?e[n+1][t.colindex].text:null);if(e[n][t.colindex].text!=s){h=v.addSubTotalRow(t,b[t.colindex]);if(a==true){if(t.topposition<0){t.topposition=v.fixedRow}c.splice(t.topposition,0,h);t.srow=h;v.updateSubTotalRow(t,b[t.colindex]);t.topposition=c.length}else{c.push(h)}for(g=0;g<t.fcalc.length;g++){t.fcalc[g].sum=null;t.fcalc[g].cnt=null}}}t.pvalue=e[n][t.colindex].text}}}return c}return null};qigridview.prototype.addSubTotalRow=function(h,g){var e,j=this,c=j.columns,b=[],a,m,l,d;for(e=0;e<c.length;e++){l={text:null,mrow:0,mcol:0,merged:0,stylename:null,chart:null,position:-1,code:null,value:null,index:-1,title:-1,pindex:-1,issubtotal:true,type:"string"};if(e==h.colindex){l.text=(h.isgrandtotal==true)?h.name:g.text;l.stylename=h.labelstylename||(h.isgrandtotal?"grandtotallabel":"subtotallabel")}else{if(h.isgrandtotal!=true&&e==h.colindex+1){l.text=h.name;l.stylename=h.labelstylename||(h.isgrandtotal?"grandtotallabel":"subtotallabel")}}b.push(l)}for(e=0;e<h.fcalc.length;e++){m=h.fcalc[e].colindex;a=c[m];l=b[m];l.code=h.fcalc[e].sum;l.text=l.code;l.stylename=h.stylename||(h.isgrandtotal==true?"grandtotal":"subtotal");if(h.stylename&&j.styles[h.stylename]){st=j.styles[h.stylename];d=st.formatstring}else{if(a.stylename&&j.styles[a.stylename]){st=j.styles[a.stylename];d=st.formatstring}}if(d){l.text=j.formatString(l.code,d)}}return b};qigridview.prototype.updateSubTotalRow=function(h,g){var e,j=this,c=j.columns,b=[],a,m,l,d,b=h.srow;if(b){for(e=0;e<h.fcalc.length;e++){m=h.fcalc[e].colindex;a=c[m];l=b[m];l.code=h.fcalc[e].sum;l.text=l.code;l.stylename=h.stylename||(h.isgrandtotal==true?"grandtotal":"subtotal");if(h.stylename&&j.styles[h.stylename]){st=j.styles[h.stylename];d=st.formatstring}else{if(a.stylename&&j.styles[a.stylename]){st=j.styles[a.stylename];d=st.formatstring}}if(d){l.text=j.formatString(l.code,d)}}}return b};qigridview.prototype.updateMerge=function(c){var w=this,a=w.columns,l=[],g=[],t,s,x=false,d,y,q,v,z,m,b,e,u,n=c||w.dataProvider,o,h;for(t=0;t<a.length;t++){if(a[t].merged==1){x=true;l.push(t);g.push(null)}}if(x==true){for(t=w.fixedRow;t<n.length;t++){d=n[t];y=(t>w.fixedRow)?n[t-1]:null;q=(t+1<n.length)?n[t+1]:null;for(s=0;s<l.length;s++){z=l[s];v=(s>0&&l[s-1]==z-1)?l[s-1]:-1;m=(s+1<l.length&&l[s+1]==z+1)?l[s+1]:-1;b=(q)?q[z].text:null;u=d[z].text;e=(y)?y[z].text:null;h=(y)?y[z].merged:0;o=(v>-1)?d[v].merged:3;if(e!=u&&b==u){d[z].merged=1}else{if(e==u&&o>1){d[z].merged=3}else{if(b==u){d[z].merged=(o>1&&h>0)?3:1}}}}}}};qigridview.prototype.L7=function(e,d){var a=null;var c=d.split("/");var h=0;var b=e;if(c[0]==""){b=e.getElementsByTagName(c[1])[0];h=2}var g=null;for(i=h;i<c.length;i++){b=this.L8(b,c[i]);if(b==null||b==undefined){break}}g=b;return g};qigridview.prototype.L8=function(d,c){var e=null,a=null,b;if(d!=null&&d.hasChildNodes()==true){a=this.L14(d);for(b=0;b<a.length;b++){if(a[b].nodeName==c){e=a[b];break}}}return e};qigridview.prototype.L9=function(b,a){var c="";c=b.getAttribute(a);return c};qigridview.prototype.L10=function(c){var d={},a=window.bowser;for(var b=0;b<c.attributes.length;b++){d[(a.msie?c.attributes[b].nodeName:c.attributes[b].localName)]=c.attributes[b].value}return d};qigridview.prototype.L14=function(d,b){var a=[];if(d!=null&&d.hasChildNodes()==true){for(var c=0;c<d.childNodes.length;c++){if(d.childNodes[c].nodeType=="1"){if(!(b&&b!=this.L17(d.childNodes[c]))){a.push(d.childNodes[c])}}}}return a};qigridview.prototype.L12=function(b){var a=window.bowser;if(a.msie){if(b){return b.text||b.textContent||""}}else{if(b!=null&&typeof b.textContent!="undefined"){return b.textContent}}return""};qigridview.prototype.L17=function(a){return a.nodeName};qigridview.prototype.expandTemplate=function(e,b){var c=this,d=this.dataProvider[e],a=false;if(c.template){d[0].expanded=b;if(!d[0].template){d[0].template=$("<div></div>").css({position:"absolute"}).appendTo(c.regdata);d[0].template.append($(c.template));c.trenderers.push(d[0].template);a=true}if(b){c.theight+=d[0].template.height();d[0].template.fadeIn(500)}else{if(a==false){c.theight-=d[0].template.height()}d[0].template.fadeOut(500)}c.refreshData()}};qigridview.prototype.createEditor=function(b){var g=this,h,c,e,a,d;if(b&&b.editor){switch(b.editor.type){case"select":case"combobox":h=$("<select></select>");if(b.editor.data){for(c=0;c<b.editor.data.length;c++){d=b.editor.data[c];e=d[b.editor.codename||"value"];a=d[b.editor.displayname||"label"]||e;$("<option value='"+e+"'>"+a+"</option>").appendTo(h)}}break;default:h=$("<input type='text'></input>");h.bind("keyup",function(j){if(j.keyCode==13){g.endEdit.call(g,"enter")}return false});break}}else{h=qigridview.prototype.parent.createEditor.call(g)}return h};qigridview.prototype.beginEdit=function(j){var l=this,g=l.ctx.offset(),d,a,n,e=l.columns,c=l.cols[j.colIndex],m=e[j.colIndex],b,o,h=false;if(l.editable==true&&l.cols[j.colIndex].editable!==false){d=j.offset();a={left:0,top:0};if(false==true&&l.drawmode=="dom"){if(j.rname=="fixcolumn"){a=l.regfixcolumn.offset();n=l.regfixcolumn.region.offset()}else{if(j.rname=="fixheader"){a=l.regfixheader.offset();n=l.regfixheader.region.offset()}else{if(j.rname=="data"){a=l.regdata.offset();n=l.regdata.region.offset()}}}}o=j.cl;l.editing=j;l.editor.empty();if(m.editor&&m.editor.type){switch(m.editor.type){case"combobox":case"select":b=m.editrenderer=l.createEditor(m);l.editor.append(b);l.editor.css({left:(d.left-g.left),top:(d.top-g.top),overflow:"visible"});l.editor.ceditor=b;b.width(j.width());l.editor.width(j.width()).height(j.height());l.editor.show();h=true;break}}if(h==false){qigridview.prototype.parent.beginEdit.call(l,j)}}};var qigridinstances={instance:0};function qigridpages(a){this.container=a.container;this.template=a.template||"totalcounter";this.totalcount=a.totalcount;this.pagecount=a.pagecount;this.datagrid=a.datagrid;this.prevlabel=a.prevlabel||"Previous";this.nextlabel=a.nextlabel||"Next";this.instance=qigridinstances.instance;qigridinstances.instance++;this.init()}qigridpages.prototype={init:function(){var c=this,a,b;c.pageindex=0;c.container.empty();switch(c.template){case"totalcounter":a="<div class='m-datagrid-totalcounter'><div class='m-datagrid-pageinfo-1'><span><b>{START_LABEL}</b> - <b>{END_LABEL}</b> of <b>{TOTAL_LABEL}</b><span></div><div class='m-datagrid-page-btngrp'>{BUTTON_PREV}{BUTTON_NEXT}</div></div>";break;case"pageindex":a="<div class='m-datagrid-pageindex'><div class='m-datagrid-pageinfo-2'><div class='m-datagrid-page-btn-prev10'>{BUTTON_PREV10}</div><div class='m-datagrid-page-indexlist'>{PAGE_INDEX_10}</div><div class='m-datagrid-page-btn-next10'>{BUTTON_NEXT10}</div></div></div>";break}c.tmpl=a},updatePage:function(o){var e,l=this,m=l.tmpl,g=l.pagecount,c=o*g,d=(o+1)*g,j=Math.floor(o/10)*10,b=Math.ceil(l.totalcount/l.pagecount),a="",h,q,n;l.pageindex=o;l.container.empty();if(m){n=l.instance;d=Math.min(d,l.totalcount);m=m.replace("{START_LABEL}",c+1);m=m.replace("{END_LABEL}",d+1);m=m.replace("{TOTAL_LABEL}",qigridview.prototype.formatString(l.totalcount,"#,###"));m=m.replace("{BUTTON_PREV}","<div class='m-datagrid-prevpage"+(o==0?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev_"+n+"'>"+(l.prevlabel||"")+"</div>");m=m.replace("{BUTTON_NEXT}","<div class='m-datagrid-nextpage"+(o==Math.ceil(l.totalcount/l.pagecount)?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next_"+n+"'>"+(l.nextlabel||"")+"</div>");m=m.replace("{BUTTON_PREV10}","<div class='m-datagrid-prevpage"+(j==0?" m-datagrid-page-disabled":"")+"' id='qipages_btn_prev10_"+n+"'>"+(l.prevlabel||"")+"</div>");m=m.replace("{BUTTON_NEXT10}","<div class='m-datagrid-nextpage"+(j+10>=b?" m-datagrid-page-disabled":"")+"' id='qipages_btn_next10_"+n+"'>"+(l.nextlabel||"")+"</div>");for(e=j;e<Math.min(j+10,b);e++){a+="<div class='m-datagrid-jumppage"+(e==o?" m-datagrid-currentpage":"")+"' name='qipages_btn_jump_"+n+"'>"+(e+1)+"</div>"}m=m.replace("{PAGE_INDEX_10}",a);h=$(m);l.container.append(h);$("#qipages_btn_next_"+n).bind("click",function(){l.changePage.call(l,++l.pageindex)});$("#qipages_btn_prev_"+n).bind("click",function(){if(l.pageindex>0){l.changePage.call(l,--l.pageindex)}});$("#qipages_btn_next10_"+n).bind("click",function(){if(b>j+10){l.changePage.call(l,j+10)}});$("#qipages_btn_prev10_"+n).bind("click",function(){if(j>0){l.changePage.call(l,j-1)}});q=h.find("[name='qipages_btn_jump_"+n+"']");q.bind("click",function(s){var t=$(s.target).text();if(t){t=parseInt(t);if(t-1!=l.pageindex){l.changePage.call(l,t-1)}}})}},changePage:function(c){var b=this,a=b.container;a.trigger("changepage",[b,c])}};IG$._I6e=$s.extend($s.window,{modal:true,layout:"fit",closable:false,resizable:false,width:300,autoHeight:true,parentnodepath:null,itemtype:null,parentuid:null,callback:null,viewmode:"newitem",i1:function(){var e=this,d=e.itemtype.split(";");if(d.length>1){e.itemtype=d[0];e.t1=d;var c=e.down("[name=txttitle]"),a=e.down("[name=txtedittitle]"),g=e.down("[name=selitemtype]"),h=[],b;c.setVisible(false);a.setVisible(false);g.setVisible(true);h.push({name:IRm$.r1("L_CR_TP_SEL"),value:""});for(b=0;b<d.length;b++){h.push({name:IRm$.r1("D_"+d[b].toUpperCase()),value:d[b]})}g.store.loadData(h);g.setValue("")}},$f3:function(){var m=this,a=this,g=this.down("[name=fitemname]"),l=this.down("[name=fitemname]").getValue(),h=this.down("[name=fdesc]").getValue(),b=this.down("[name=fhelpuid]").getValue()||null,e=this.down("[name=selitemtype]"),n=this.down("[name=group_dim_name]"),d=this.down("[name=groupid]").getValue();g.clearInvalid();if(!l){g.markInvalid([g.blankText]);return}if(a.itemtype=="Help"&&b==null){return}if(m.t1&&m.t1.length>1){m.itemtype=e.getValue();if(!m.itemtype){return}}if(l.indexOf("/")>-1){l=l.split("/");l=l.join("&#x2044;")}if(a.itemtype=="MeasureGroup"&&!n.getValue()){n.markInvalid([n.blankText]);return}if(a.doUpdate==false){if(a.callback){a.callback.execute()}return}var o=new IG$._I3e(),c="31",q=IG$._I2d({address:(this.parentnodepath=="/")?this.parentnodepath+l:this.parentnodepath+"/"+l,name:l,type:this.itemtype,pid:(this.parentuid=="/")?"":this.parentuid,memo:b||null,dimname:n.getValue(),description:h},"address;name;type;pid;description;memo;dimname"),j=IG$._I2e();if(this.itemtype=="Group"){c="28";q=IG$._I2d({address:"/usergroup/"+l,action:"create",pid:this.parentuid,description:h,groupid:d},"address;action;pid;description;groupid");j="<smsg><item><usergroup "+IG$._I30({pid:this.parentuid,description:h,groupid:d})+"/></item></smsg>"}else{if(this.itemtype=="Auth"){c="28";q=IG$._I2d({address:"/Auth/"+l,action:"create",pid:this.parentuid,description:h},"address;action;pid;description");j=IG$._I2e({option:"create",name:l,description:h})}else{if(this.itemtype=="tenant"){c="28";q=IG$._I2d({address:"/tenants/"+l,action:"create",pid:this.parentuid,description:h},"address;action;pid;description");j=IG$._I2e({})}}}o.init(a,{ack:c,payload:q,mbody:j},a,a._IO5,null);o._l()},_IO5:function(a){var b=this,c=this.down("[name=fitemname]").getValue();b._IG0.call(b);if(b.callback){b.callback.execute()}},_IG0:function(){this.close()},initComponent:function(){var b=this;b.title=IRm$.r1("L_MAKEITEM_G");b.__c=false;var c=new IG$._I57({layout:"anchor",border:0,defaults:{anchor:"100%",labelWidth:80},items:[{name:"selitemtype",hidden:true,xtype:"combobox",fieldLabel:IRm$.r1("L_CR_TP_SEL"),queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"]}},{xtype:"textfield",fieldLabel:IRm$.r1("L_ITEMNAME"),name:"fitemname",value:"",allowBlank:true,blankText:"Item name is required!",enableKeyEvents:true,listeners:{keyup:function(d,g){if(g.keyCode==13){this.$f3.call(this)}},scope:this}},{xtype:"textfield",fieldLabel:"HELPID",name:"fhelpuid",hidden:(this.itemtype=="Help")?false:true,value:"",allowBlank:false,blankText:"HELP_ID is required!"},{xtype:"textfield",fieldLabel:"Group ID",name:"groupid",hidden:(this.itemtype=="Group")?false:true,allowBlank:true},{xtype:"textfield",fieldLabel:"Dimension",name:"group_dim_name",blankText:"Item is required!",hidden:(this.itemtype=="MeasureGroup")?false:true},{fieldLabel:IRm$.r1("L_DESCRIPTION"),xtype:"textarea",height:50,name:"fdesc",value:""}]});var a=IRm$.r1("D_"+this.itemtype.toUpperCase());$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"container",defaults:{bodyStyle:"padding:10px"},layout:{type:"vbox",align:"stretch"},items:[{html:IRm$.r1("L_MAKEITEM",a),name:"txttitle",hidden:(this.viewmode!="newitem"),height:30,border:0},{html:IRm$.r1("L_RENAME_ITEM",this.itemname||""),name:"txtedittitle",height:30,hidden:(this.viewmode!="edititem"),border:0},c]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){if(this.__c==false){this.__c=true;this.$f3()}},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(d){d.i1()},show:function(d){this.down("[name=fitemname]").focus()}}});IG$._I6e.superclass.initComponent.apply(this,arguments)}});IG$._Icd=$s.extend(IG$._I6e,{viewmode:"edititem",$f3:function(){var j=this,a=this,m=this.down("[name=fitemname]"),h=m.getValue(),g=this.down("[name=fdesc]").getValue(),c=this.down("[name=fhelpuid]").getValue(),e=this.down("[name=selitemtype]"),o="31",n,l,d=this.down("[name=groupid]").getValue(),b="rename";if(j.t1&&j.t1.length>1){e.clearInvalid();j.itemtype=e.getValue();if(!j.itemtype){e.markInvalid(IG$.mX);return}}m.clearInvalid();if(!h){m.markInvalid(IG$.mX);return}n=IG$._I2d({uid:this.uid,name:h,itemtype:this.itemtype,pid:this.parentuid,description:g,memo:(this.itemtype=="Help")?c:null},"uid;name;itemtype;pid;description;memo");switch(this.itemtype){case"Group":o="28";b="update";n=IG$._I2d({address:"/usergroup/"+h,action:"update",gid:this.uid,description:g,groupid:d},"address;gid;description;action;groupid");break}l=new IG$._I3e();l.init(a,{ack:o,payload:n,mbody:IG$._I2e({option:b})},a,a._IO5,null);l._l()},initComponent:function(){this.title=IRm$.r1("T_RENAME_ITEM");this.on("afterrender",function(){var g=this.down("[name=fitemname]"),e=this.down("[name=fdesc]"),a=this.down("[name=fhelpuid]"),d=this.down("[name=txttitle]"),c=this.down("[name=txtedittitle]"),b=this.down("[name=groupid]");d.setVisible(false);c.setVisible(true);g.setValue(this.itemname||"");e.setValue(this.description||"");a.setValue(this.memo||"");b.setValue(this.groupid||"")},this);IG$._Icd.superclass.initComponent.apply(this,arguments);this.setTitle(IRm$.r1("T_RENAME_ITEM",this.itemname))}});IG$._Ic1=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:490,height:520,_ILb:null,callback:null,defaults:{bodyStyle:"padding:5px"},_IG0:function(){this.close()},_IFf:function(){var m=this,o=m.item||null,e=m.record||null;if(o&&e){var l=m.down("[name=cb_sortdir]"),h=l.getGroupValue(),n=m.down("[name=cb_sorttype]"),a=m.down("[name=cb_sorttype]").getGroupValue(),d,c,b=m.item.itemtype,g=(m._ILb)?m._ILb.Xsf:null;e.set("sortorder",(h=="")?null:h);e.set("memo",(a=="")?null:a);e.set("aggrfunc",m.down("[name=aggrfunc]").getValue());e.set("disp_title",m.down("[name=disp_title]").getValue());e.set("hidecolumn",m.down("[name=hidecolumn]").getValue()?"T":"F");e.set("timeformat",m.down("[name=timeformat]").getValue());if(b=="Measure"||b=="FormulaMeasure"||b=="MeasureGroup"){e.set("activeformula",null)}}if(m.callback){m.callback.execute()}m._IG0()},_IFd:function(){var o=this;o.formulas=[];if(o.item){var m=o.item.sortorder||"",n=o.down("[name=optsortdir]"),a=o.item.memo||"",h=o.down("[name=optsorttype]"),e=o.down("[name=aggrfunc]"),j=o.down("[name=disp_title]"),b=o.down("[name=timeformat]"),d=o.down("[name=hidecolumn]"),g,l,c=o.item.itemtype;n.setValue({cb_sortdir:[m]});h.setValue({cb_sorttype:[a]});e.setValue(o.item.aggrfunc||"");j.setValue(o.item.disp_title||"");b.setValue(o.item.timeformat||"");d.setValue(o.item.hidecolumn=="T");if(o._ILb&&o._ILb.Xsf){l=o._ILb.Xsf;for(g=0;g<l.length;g++){if(l[g].baseuid==o.item.uid){o.formulas.push(l[g])}}o.down("[name=grd_formula]").store.loadData(o.formulas)}}},m1$20:function(e){var c=this,a=c._ILb.Xsf,b=c.item,d=new IG$._IEF({pR:c,pS:c._ILb,pF:a,pI:b,pCC:e,callback:new IG$._I3d(c,function(l){var g,h=this,j=a;for(g=j.length-1;g>=0;g--){if(j[g].baseuid==b.uid){j.splice(g,1)}}for(g=0;g<l.length;g++){j.push(l[g])}h.down("[name=grd_formula]").store.loadData(l)})});d.show()},initComponent:function(){var c=this,a,d=c.item,b=(d)?d.itemtype:null;$s.apply(this,{title:IRm$.r1("T_METRIC_SETTING"),items:[{xtype:"panel",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_SORT_SEL"),layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:IRm$.r1("L_SORT_ORD"),plain:true,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sortdir",inputValue:"",checked:true},{boxLabel:IRm$.r1("B_ASC"),name:"cb_sortdir",inputValue:"asc"},{boxLabel:IRm$.r1("B_DSC"),name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:IRm$.r1("L_SORT_TP"),plain:true,items:[{boxLabel:IRm$.r1("B_DEFAULT"),name:"cb_sorttype",inputValue:"",checked:true},{boxLabel:IRm$.r1("B_STRING"),name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:IRm$.r1("B_NUMERIC"),name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),layout:"anchor",$w:400,defaults:{anchor:"100%",$w:400},items:[{xtype:"textfield",name:"disp_title",fieldLabel:IRm$.r1("L_DISP_TITLE")},{xtype:"checkbox",name:"hidecolumn",fieldLabel:IRm$.r1("L_COL_VIS"),boxLabel:IRm$.r1("B_HIDE")},{xtype:"textfield",name:"timeformat",fieldLabel:IRm$.r1("L_TIME_FMT")},{xtype:"displayfield",value:IRm$.r1("L_TIME_FMT_DSC")}]},{xtype:"fieldset",title:IRm$.r1("L_AGGR"),layout:"anchor",hidden:c.item.type=="Metric"&&c.loc=="mea"?false:true,defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"aggrfunc",fieldLabel:IRm$.r1("L_FUNC"),displayField:"name",valueField:"value",queryMode:"local",editable:false,store:{xtype:"store",fields:["name","value"],data:[{name:"Not Use",value:""},{name:"Sum values",value:"SUM"},{name:"Count rows",value:"COUNT"},{name:"Distinct count",value:"COUNT_DISTINCT"},{name:"Minimum",value:"MIN"},{name:"Maximum",value:"MAX"},{name:"Average",value:"AVG"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_FORMULA"),layout:"fit",height:160,items:[{xtype:"gridpanel",border:0,name:"grd_formula",bbar:[{text:"Config Formula",handler:function(){this.m1$20()},scope:this}],store:{xtype:"store",fields:["title","expression","baseuid","fid"]},columns:[{text:"Name",flex:1,dataIndex:"title"},{text:"Expression",flex:1,dataIndex:"expression"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(h,l,g){var e=h.store,j=e.getAt(l);this.m1$20(j)},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(e,m,o){var n=e.store,h=n.getAt(m),l=c._ILb.Xsf,j,q=h.get("baseuid"),g=h.get("fid");n.removeAt(m);for(j=0;j<l.length;j++){if(l[j].baseuid==q&&l[j].fid==g){l.splice(j,1);break}}}}]}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._IFd()}}});IG$._Ic1.superclass.initComponent.apply(this,arguments)}});IG$._Ic4=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:480,height:430,callback:null,_IG0:function(){this.close()},_IFf:function(){var q=this;if(q.item){var h,o=q.down("[name=cb_sortdir]"),m=o.getGroupValue(),s=q.down("[name=cb_sorttype]"),b=q.down("[name=cb_sorttype]").getGroupValue(),g=q.down("[name=optstyle]"),n=q.down("[name=optremoveblank]"),a=q.down("[name=isdatetype]"),t=q.down("[name=dateformat]"),e=IG$._I4c,l={},j="",d,c;q.item.sortorder=(m=="")?null:m;q.item.sorttype=(b=="")?null:b;q.item.removeblank=n.getValue();q.item.itemstyle=g.getValue();q.item.isdatetype=a.getValue();q.item.dateformat=t.getValue();for(h=0;h<e.length;h++){if(q.down("[name=datediv_"+e[h].name+"]").getValue()==true){j=(j=="")?e[h].name:j+";"+e[h]}}q.item.dateitems=j;q.item.datecustom=q.down("[name=customdatetype]").getValue()}q.callback&&q.callback.execute(q.item);q._IG0()},_IFd:function(){var a=this;a.formulas=[];if(a.item){a.a1()}},a1:function(){var n=this,h,j=n.item.sortorder||"",m=n.down("[name=optsortdir]"),b=n.item.sorttype||"",g=n.down("[name=optsorttype]"),e=n.down("[name=optstyle]"),l=n.down("[name=optremoveblank]"),a=n.down("[name=isdatetype]"),o=n.down("[name=dateformat]"),d=IG$._I4c,c;m.setValue({cb_sortdir:[j]});g.setValue({cb_sorttype:[b]});l.setValue(n.item.removeblank||false);a.setValue(n.item.isdatetype||false);o.setValue(n.item.dateformat||"");if(n.item.itemstyle){e.setValue(n.item.itemstyle)}else{e.setValue("")}if(n.item.dateitems){c=n.item.dateitems.split(";");for(h=0;h<c.length;h++){n.down("[name=datediv_"+c[h]+"]").setValue(true)}}n.down("[name=customdatetype]").setValue(n.item.datecustom||"")},cdt:function(){var c=this,a=c.down("[name=dateformat]"),b="";a.setValue(b)},initComponent:function(){var a,c=this,b=[];c.title=IRm$.r1("T_METRIC_SETTING");b.push({name:"-Item Default-",value:""});if(c.styles&&c.styles.length>0){for(a=0;a<c.styles.length;a++){b.push({name:c.styles[a].name,value:c.styles[a].name})}}$s.apply(c,{bodyStyle:"padding:5px; background: #ffffff",border:0,items:[{xtype:"panel",layout:"anchor",padding:"5 5",border:0,autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:"Sorting",layout:"anchor",padding:"0 5",defaults:{anchor:"100%"},items:[{xtype:"radiogroup",name:"optsortdir",fieldLabel:"Sort Direction",padding:"0 5",plain:true,items:[{boxLabel:"Default",name:"cb_sortdir",inputValue:"",checked:true},{boxLabel:"Ascending",name:"cb_sortdir",inputValue:"asc"},{boxLabel:"Descending",name:"cb_sortdir",inputValue:"desc"}]},{xtype:"radiogroup",name:"optsorttype",fieldLabel:"Sort Type",padding:"0 5",plain:true,items:[{boxLabel:"Default",name:"cb_sorttype",inputValue:"",checked:true},{boxLabel:"String",name:"cb_sorttype",inputValue:"VARCHAR"},{boxLabel:"Numeric",name:"cb_sorttype",inputValue:"NUMBER"}]}]},{xtype:"fieldset",title:"Style",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"combobox",name:"optstyle",fieldLabel:"Base style",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:b}}]},{xtype:"fieldset",title:"Other options",layout:"anchor",padding:"3 5",defaults:{anchor:"100%"},items:[{xtype:"checkbox",name:"optremoveblank",boxLabel:"Ignore blank value"},{xtype:"checkbox",name:"isdatetype",boxLabel:"Date type field",listeners:{change:function(n,h,o,l){var m=this,e=n.getValue(),d=m.down("[name=datedivision]"),j=m.down("[name=customdatetypecontainer]"),g=m.down("[name=datediv_CUSTOM]");d.setVisible(e);if(e==true&&g.getValue()==true){j.setVisible(true)}else{j.setVisible(false)}},scope:this}},{xtype:"fieldcontainer",fieldLabel:"Date format",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"dateformat",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){var d=c.down("[name=dateformat]");d.setValue(this.value)}}]}}]}]},{fieldLabel:IRm$.r1("L_GROUP_LEVEL"),name:"datedivision",hidden:true,xtype:"checkboxgroup",columns:3,plain:true,items:[{boxLabel:IRm$.r1("B_YEAR"),name:"datediv_YYYY",inputValue:"YYYY"},{boxLabel:IRm$.r1("B_QUARTER"),name:"datediv_QUARTER",inputValue:"QUARTER"},{boxLabel:IRm$.r1("B_MONTH"),name:"datediv_MM",inputValue:"MM"},{boxLabel:IRm$.r1("B_DAY"),name:"datediv_DD",inputValue:"DD"},{boxLabel:IRm$.r1("B_WEEKMONTH"),name:"datediv_WM",inputValue:"WM"},{boxLabel:IRm$.r1("B_WEEK"),name:"datediv_WEEK",inputValue:"WEEK"},{boxLabel:IRm$.r1("B_AMPM"),name:"datediv_AMPM",inputValue:"AMPM"},{boxLabel:IRm$.r1("B_HOUR"),name:"datediv_HH",inputValue:"HH"},{boxLabel:IRm$.r1("B_MINUTE"),name:"datediv_MI",inputValue:"MI"},{boxLabel:IRm$.r1("B_CUSTOM"),name:"datediv_CUSTOM",inputValue:"CUSTOM",listeners:{change:function(j,l,h,d){var g=j.getValue(),e=this.down("[name=customdatetypecontainer]");e.setVisible((g==true?true:false))},scope:this}}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_CUSTOM"),name:"customdatetypecontainer",hidden:true,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"customdatetype",flex:1},{xtype:"button",text:"Example",menu:{items:[{text:"2001.07.04 AM 12:08:56",value:"yyyy.MM.dd a HH:mm:ss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"2001-07-04 AM 12:08:56",value:"yyyy-MM-dd a HH:mm:ss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"Wed, Jul 4, '01",value:"EEE, MMM d, ''yy",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}},{text:"20010704120856",value:"yyyyMMddHHmmss",handler:function(){var d=c.down("[name=customdatetype]");d.setValue(this.value)}}]}}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this._IFd()}}});IG$._Ic4.superclass.initComponent.apply(this,arguments)}});