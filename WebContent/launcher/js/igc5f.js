IG$.Pg=$s.extend($s.gridpanel,{initComponent:function(){var b=this,a=b.ptr_p;$s.apply(this,{border:1,hideHeaders:true,store:{xtype:"store",fields:["name","nodepath","li","activeformula","itemtype","memo","sortorder","type","uid","iupd","disp_title","hidecolumn","timeformat","aggrfunc","iconcls","lname"]},viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},__ing:1,listeners:{beforedrop:function(z,H,F,E,e){var w=false,l,A,q=(F)?F.data.li:-1,p=false,c,d=a.reportmode,G,D,y,B,C=false,m,j,g=a.down("[name=bcluster]").getValue(),o=0,x,u,f,s,h=a.down("[name=dataquerymode]").getValue();H.copy=(H.view.__ing)?false:true;c=this.panel.location;l=(F)?this.panel.store.indexOf(F):0;if(E=="after"){l++}C=(c=="rc"||c=="rm");if(H.copy==true&&!a.__penabled){return false}for(B=0;B<H.records.length;B++){A=H.records[B];p=false;if(C){x=["pivotgrid_row","pivotgrid_rpt_col","pivotgrid_rpt_mea"];$.each(x,function(K,J){var I=a.down("[name="+J+"]"),r=I.store.data.items,k;for(k=0;k<r.length;k++){trec=r[k];if(trec.get("uid")==A.get("uid")){p=true;break}}if(p==true){return false}})}else{if(h=="M_DATA"){x=["pivotgrid_row"];u=["pivotgrid_col","pivotgrid_mea","pivotgrid_cls"]}else{x=["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"]}$.each(x,function(K,J){var I=a.down("[name="+J+"]"),r=I.store.data.items,k;if(J=="pivotgrid_cls"&&!g){return}for(k=0;k<r.length;k++){if(r[k].get("uid")==A.get("uid")){p=true;break}}if(p==true){return false}});if(u){for(y=0;y<u.length;y++){f=a.down("[name="+u[y]+"]");s=f.store.data.items;for(D=s.length-1;D>=0;D--){if(s[D].get("uid")==A.get("uid")){f.store.remove(s[D])}}}}}if(A&&p==false){j=A.data;m={type:j.type,uid:j.uid,name:j.name,address:j.address,nodepath:j.nodepath,lname:j.lname};G=m.type.toLowerCase();switch(G){case"measure":case"measuregroup":case"formulameasure":case"chartmeasure":case"metric":case"measuregroupdimension":case"tabdimension":case"custommetric":case"groupfield":case"hierarchy":m.location=c;m.li=q;m.iconcls=IG$._I11(m.type.toLowerCase());this.store.insert(l+(o++),m);a._IOb.call(a,m.location,m.li,C);break}}else{if(A&&H.copy==false){j=A.data;G=j.type.toLowerCase();if(G=="datemetric"){w=false}else{w=true}a._IOb.call(a,j.location,j.li,C)}}}return w},drop:function(g,h,k,e){var j=false,f=this;if(h.copy==false&&k){var d=h.records[0].get("li"),c=(k)?f.panel.store.indexOf(k):0;if(e=="after"){c++}j=false}return j}}},columns:[{text:"",dataIndex:"iconcls",menuDisabled:true,width:30,renderer:function(g,f,c,e,h,d){return"<div class='igc_g_icon "+g+"' title='"+(c.get("nodepath")||"")+"'></div>"}},{dataIndex:"name",flex:1,renderer:function(j,g,f,l,c,k){var m=f.get("type").toLowerCase(),e=f.get("aggrfunc"),d=a.down("[name=dataquerymode]").getValue()=="M_DATA",h=(m=="metric"||m=="custommetric")&&(d||(b.location=="rm"||b.location=="m")||e);return"<div class='igc-pivot-field' style='"+(f.get("hidecolumn")=="T"?"color:#C7C7C7":"")+"' title='"+(f.get("nodepath")||"")+"'>"+(f.get("lname")||f.get("name"))+(h?"<div class='igc-aggr-sel'><div class='sel-icon'></div><span>"+(e?e.toLowerCase():"")+"</span></div>":"")+"</div>"}},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(d,f,c){var e=d.store.data.items[f];if(!d.__loc){d=d.ownerCt}if(e.get("uid")){if(e.get("type")!="Hierarchy"&&e.get("type")!="HierarchyMetric"){e.set("iupd",true);a._IOc.call(a,e,d.__loc,d.__loc1)}}},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(d,f,c){var e=d.store.data.items[f];if(!d.__loc){d=d.ownerCt}if(e.data.uid){d.store.remove(e);a._IOb.call(a,e.data.location,e.data.li,d.__loc1)}},scope:this}]}],listeners:{afterrender:function(c){var e=c,d=$(c.el.dom);d.on("click",".igc-aggr-sel",function(f){f.stopPropagation();var g=e.getSelectionModel().selected;if(g&&g.length){a.sL.call(a,g.items[0],d,this)}})},scope:this}});IG$.Pg.superclass.initComponent.call(this)}});IG$._IGeR=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:true,width:450,autoHeight:true,l1:function(){var b=this,a=b._dt;b._f=["name","measureposition","measuretitle","ext_title"];if(a){$.each(b._f,function(d,g){var e=b.down("[name="+(g=="name"?"t":"")+g+"]"),c;c=a[g];if(g=="measuretitle"){c=(c=="T")}else{if(g=="measureposition"){c=parseInt(c||"0")}}e.setValue(c)})}},_IFf:function(){var b=this,c=b.callback,a=b._dt;if(a){$.each(b._f,function(e,h){var g=b.down("[name="+(h=="name"?"t":"")+h+"]"),d;d=g.getValue();if(h=="measuretitle"){d=(d?"T":"F")}else{if(h=="measureposition"){d=""+d}}a[h]=d})}c&&c.execute();b.close()},initComponent:function(){var a=this;$s.apply(a,{title:IRm$.r1("L_P_RPT_C"),items:[{xtype:"panel",bodyPadding:10,layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"tname",fieldLabel:IRm$.r1("B_NAME")},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"textfield",name:"ext_title",fieldLabel:IRm$.r1("L_M_EXT_TITLE")}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._IGeR.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){a.l1.call(a)}}});IG$._IGe=$s.extend($s.panel,{floatable:false,collapseFirst:false,bodyBorder:false,activeItem:0,margins:"0 0 0 0",cmargins:"0 0 0 0",browser:null,pivotchanged:false,autoScroll:false,border:0,layout:{type:"vbox",align:"stretch"},droptarget:null,metriclistview:null,_ILb:null,spl:"5.Splice with",_i1:false,_IL2:function(a){var b=this;b._ILb=a;if(b.rendered){b._IL1()}},_IL1:function(){var k,l=this,q,f=l._ILa,c=l._ILb;if(c&&l.peditor){var e=l.down("[name=dataquerymode]"),d=l.down("[name=pivotgrid_rpt]"),j=l.down("[name=pivotgrid_rpt_item]"),b=l.down("[name=bcluster]"),a=l.down("[name=syncrows]"),m,g,p,o,h;m=c.dataquerymode;o=[{aname:"rows",bname:"row",li:0},{aname:"cols",bname:"col",li:2},{aname:"measures",bname:"mea",li:1},{aname:"clusters",bname:"cls",li:1}];$.each(o,function(u,s){var r=c[s.aname],w,x=[];if(r&&r.length){for(w=0;w<r.length;w++){r[w].li=s.li;r[w].iconcls=IG$._I11(r[w].type.toLowerCase());x.push(r[w])}}l.down("[name=pivotgrid_"+s.bname+"]").store.loadData(x)});p=4;if(c.rptitems&&c.rptitems.length){h=c.rptitems;l._p(h,p)}else{h=c.rptitems=[{name:l.pivot_unit,itemtype:"unit",measures:l.measures,cols:l.cols}]}a.setValue(c.syncrows);j.store.loadData(h);l.s2(c.c1);e.setValue(m);b.setValue(c.bcluster);q=l.down("[name=feditor]");q._ILa=f;q._ILb=c;q.in$t.call(q)}},_m1:function(){var b=this,a=b.down("[name=pivotgrid_rpt_col]"),c=b.down("[name=pivotgrid_rpt_mea]");a.store.loadData(b._a_rpt.cols||[]);c.store.loadData(b._a_rpt.measures||{});b.s2(b._a_rpt.c1)},_p:function(e,h){var d,c,f=this,l,k,b,g;for(d=0;d<e.length;d++){g=e[d];g.name=g.name||f.pivot_unit;if(g.cols&&g.cols.length>0){for(c=0;c<g.cols.length;c++){b=g.cols[c];b.li=h;b.iconcls=IG$._I11(b.type.toLowerCase())}}if(g.measures&&g.measures.length>0){for(c=0;c<g.measures.length;c++){b=g.measures[c];b.li=h;b.iconcls=IG$._I11(b.type.toLowerCase())}}}},_IO8:function(f){var d=this,a,c=null,e=panel.sop.iscomposite==true?panel.sop.reportmode:panel.reportmode,b=panel.down("[name=bcluster]").getValue();$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],function(l,k){var j=d.down("[name="+k+"]").store,g,h;if(k=="pivotgrid_cls"&&!b){return}for(h=0;h<j.data.items.length;h++){g=j.data.items[h];if(g.get(e=="sql"?"name":"uid")==f[e=="sql"?"name":"uid"]){c=g;break}}if(c){return false}});return c},_IOb:function(c,a,b){var d=this;if(b){d.c2(d._a_rpt)}},c2:function(a){var b=this,c=b.fct.split(";");a.cols=[];a.measures=[];$.each(["pivotgrid_rpt_col","pivotgrid_rpt_mea"],function(e,j){var h=b.down("[name="+j+"]"),f,l,g,k;k=h.location;for(f=0;f<h.store.data.items.length;f++){l=h.store.data.items[f].data;if(l.uid){g=new IG$._IE8(null);l.itemtype=l.type||l.itemtype;IG$._I1d(l,g,b.fct);l.iupd=false;switch(k){case"rc":a.cols.push(g);break;case"rm":a.measures.push(g);break}}}})},_IOc:function(b,d,a){var c=new IG$._Ic1({_ILb:this._ILb,item:b.data,record:b,loc:d,_ILa:this._ILa,callback:new IG$._I3d(this,function(){this.r_IOc(b);if(a){this._IOb(null,null,true)}},null)});c.show()},r_IOc:function(a){},listeners:{afterrender:function(){var a=this;a.peditor=a.down("[name=peditor]");if(a._ILb){a._IL1()}}},_mk:function(){var f=this,d=this,a=d.down("[name=c_z]"),c=$(".igc-p-color",a.el.dom),e=$(".igc-p-remove",a.el.dom),b=$("span",c);e.bind("click",function(){f.s1.call(f,null)});b.bind("click",function(){});d._dz=$s.create($s.dropzone,c[0],{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(j){var h=j.browserEvent.pageX||j.browserEvent.clientX,g=j.browserEvent.pageY||j.browserEvent.clientY;return a},onNodeEnter:function(o,g,m,l){var k=this,j,h=false;if(l.records&&l.records.length>0){j=l.records[0].get("type");if(j=="Measure"){h=true}}k.accept=h},onNodeOver:function(o,g,m,l){var k=this,j,h=((k.accept==true)?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed);if(k.accept==true){if(l.records&&l.records.length>0){j=l.records[0].data}}return h},onNodeDrop:function(m,g,l,k){var j=this,h;if(j.accept==true){if(k.records&&k.records.length>0){dt=k.records[0].data;h=new IG$._IE8(null);IG$._I1d(dt,h,f.fct);f.s1.call(f,h)}}j.accept=false;return true}})},s1:function(d){var c=this,a=c._ILb,b=c.down("[name=dataquerymode]").getValue();if(b=="M_REPORT"){if(c._a_rpt){c._a_rpt.c1=d}}else{if(b=="M_PIVOT"){a.c1=d}}c.s2(d)},sL:function(d,b,c){var h=this,k=$(c),j=k.parent(),e=k.offset(),a=k.width(),g=k.height(),f;f=new $s.menu({margin:"0 0 10 0",floating:true,items:[{text:"Count rows",handler:function(){d.set("aggrfunc","COUNT")}},{text:"Distinct Count",handler:function(){d.set("aggrfunc","COUNT_DISTINCT")}},{text:"Sum values",handler:function(){d.set("aggrfunc","SUM")}},{text:"Minimum",handler:function(){d.set("aggrfunc","MIN")}},{text:"Maximum",handler:function(){d.set("aggrfunc","MAX")}},"-",{text:"Clear",handler:function(){d.set("aggrfunc","")}}]});f.showAt(e.left,e.top+g)},s2:function(e){var d=this,b=d.down("[name=c_z]"),c=b.el.dom,f=$(".igc-p-color",c),a=$("span",f);bdom=$(".igc-p-remove",c);a.empty();bdom[e?"show":"hide"]();if(e){a.attr("title",e.nodepath);a.html(e.name||"")}else{a.removeAttr("title");a.html("")}},fct:"uid;name;itemtype;type;sortorder;nodepath;memo;pid;description;activeformula;rankcount;aggrfunc;disp_title;hidecolumn;timeformat",_IFf:function(){var y=this,a=y._ILb,g=y.down("[name=dataquerymode]"),j=y.down("[name=pivotgrid_rpt_item]"),r=y.down("[name=syncrows]"),u=j.store,k=y,s,w,x=y._i1,l=[],m=[],q=[],h=[],e=[],f=y.fct.split(";"),o,b=y._ILb.rptitems;x=(a.dataquerymode!=g.getValue()?true:x);a.dataquerymode=g.getValue();a.bcluster=y.down("[name=bcluster]").getValue();a.syncrows=r.getValue();o=function(z,d){var A,B=false;if(z&&d){for(A=0;A<f.length;A++){B=(z[f[A]]!=d[f[A]])?true:B;if(B==true){break}}}else{B=true}return B};$.each(["pivotgrid_row","pivotgrid_col","pivotgrid_mea","pivotgrid_cls"],function(c,C){var B=y.down("[name="+C+"]"),z,E,A,D;D=B.location;for(z=0;z<B.store.data.items.length;z++){E=B.store.data.items[z].data;if(E.uid){A=new IG$._IE8(null);E.itemtype=E.type||E.itemtype;IG$._I1d(E,A,y.fct);x=E.iupd?true:x;E.iupd=false;switch(D){case"r":x=o(A,a.rows[l.length])?true:x;l.push(A);break;case"c":x=o(A,a.cols[m.length])?true:x;m.push(A);break;case"m":x=o(A,a.measures[q.length])?true:x;q.push(A);break;case"l":x=o(A,a.clusters[h.length])?true:x;h.push(A);break}}}});if(a.dataquerymode=="M_REPORT"&&y._a_rpt){y.c2(y._a_rpt)}x=(a.rows.length==l.length)?x:true;x=(a.cols.length==m.length)?x:true;x=(a.measures.length==q.length)?x:true;a.rows=l;a.cols=m;a.measures=q;a.clusters=h;a.queryItems=e;for(s=0;s<u.data.items.length;s++){w=u.data.items[s];if(b&&b.length>s){b[s].name=w.get("name")}}var p=this.down("[name=feditor]");p.m1$9.call(p);return x},_p2:function(e,l){var h,g,f,o,p,m,b,a,r,q;for(h=0;h<e.childNodes.length;h++){q={cols:[],measures:[]};r=e.childNodes[h];for(f=0;f<r.childNodes.length;f++){b=r.childNodes[f];if(b.get("itemtype")=="pivot_mea"&&b.childNodes){for(g=0;g<b.childNodes.length;g++){a=b.childNodes[g];m=a.data;o=new IG$._IE8(null);m.itemtype=m.type||m.itemtype;IG$._I1d(m,o,me.fct);p=m.iupd?true:p;m.iupd=false;q.measures.push(o)}}else{if(b.get("itemtype")=="pivot_col"&&b.childNodes){for(g=0;g<b.childNodes.length;g++){a=b.childNodes[g];m=a.data;o=new IG$._IE8(null);m.itemtype=m.type||m.itemtype;IG$._I1d(m,o,me.fct);p=m.iupd?true:p;m.iupd=false;q.cols.push(o)}}}}if(q.cols.length+q.measures.length>0){l.push(q)}}},_IOd:function(){var g=this,c=g.down("[name=dataquerymode]"),d=g.down("[name=pivotgrid_cls]"),j=g.down("[name=mv]"),f=g.down("[name=vc]"),k=g.down("[name=vr]"),a=g.down("[name=bcluster]"),h=c.getValue(),e=g.down("[name=pivotgrid_rpt_item]"),b=g._ILb;j.setVisible(h!="M_DATA");a.setVisible(h=="M_PIVOT");f.setVisible(h=="M_PIVOT");k.setVisible(h=="M_REPORT");e.setVisible(h=="M_REPORT");d.setVisible(a.getValue()&&h=="M_PIVOT");if(h=="M_REPORT"&&b){e.getSelectionModel().select(e.store.data.items[0]);g._a_rpt=b.rptitems[0];g._m1()}},_IOd2:function(){var j=this,b=j.down("[name=dataquerymode]").getValue(),f=j.down("[name=pivotgrid_row]"),k=j.down("[name=pivotgrid_mea]"),d,c,a=[],e,h,g;if(b=="M_DATA"){h=k.store;g=f.store}else{if(b=="M_PIVOT"){h=f.store;g=k.store}}if(h&&g){k.getView().refresh();f.getView().refresh();for(d=0;d<h.data.items.length;d++){c=h.data.items[d];if(c.get("type")=="Measure"){a.push(c)}}if(a.length){e=g.data.items.length;for(d=a.length-1;d>=0;d--){h.remove(a[d]);g.insert(e,a[d])}}}},Uc:function(a,b){var c=this;c.__penabled=b},_IJd:function(){this._i1=true},_IO3:function(){this._i1=true},_IOe:function(){var x=this,w,u,q,b,y,o=x._ILb,k,l=o.Xsf||[],a={},d={},g=o.rows,h=o.cols,p=o.measures,f,r,e,c=x.down("[name=dataquerymode]").getValue(),s={};o.itemstyle=o.itemstyle==null?[]:o.itemstyle;k=o.itemstyle;f={};if(c!="M_REPORT"){for(w=0;w<l.length;w++){a[l[w].baseuid+"_0_"+l[w].fid]=l[w];d[l[w].baseuid+"_0"]=d[l[w].baseuid+"_0"]||[];d[l[w].baseuid+"_0"].push(l[w])}}for(w=k.length-1;w>=0;w--){b=false;if(k[w].uid&&k[w].rptseq&&k[w].fid){y=k[w].uid+"_"+k[w].rptseq+"_"+k[w].fid}else{if(k[w].uid&&k[w].rptseq){y=k[w].uid+"_"+k[w].rptseq}else{y=k[w].name}}if(c=="M_REPORT"){for(q=0;q<g.length;q++){if(g[q].name==y){b=true;break}else{if(y==g[q].uid+"_0"){b=true;break}}}if(b==false){for(q=0;q<o.rptitems.length;q++){e=o.rptitems[q];$.each([e.cols,e.measures],function(z,A){var m;if(b==false){for(m=0;m<A.length;m++){if(A[m].name==y){b=true;break}else{if(A[m].uid+"_"+q==y){b=true;break}}}}});if(b==true){break}}}}else{if(a[y]){b=true}else{$.each([g,h,p],function(z,A){var m;if(b==false){for(m=0;m<A.length;m++){if(A[m].name==y){b=true;break}else{if(A[m].uid+"_0"==y){b=true;break}}}}})}}if(s[y]){b=false}if(b==false){k.splice(w,1)}else{f[y]=k[w]}s[y]=1}r=function(C,E){var A,m,D=E.items,F=(E.m==1),B=(E.m==2),z,G=E.rptseq,H;for(A=0;A<D.length;A++){if(B){z=D[A].baseuid+"_"+G+"_"+D[A].fid}else{z=D[A].uid+"_"+G;if(d[z]){for(m=0;m<d[z].length;m++){d[z][m].basename=D[A].name}}}H=f[z];if(!H&&f[D[A].name]){H=f[D[A].name]}if(!H){H=new IG$._IF7();H.nodename="item";H.basestylename=null;if(B){H.uid=D[A].baseuid;H.basestylename="Formula";H.fid=D[A].fid}else{H.uid=D[A].uid;switch(D[A].itemtype.toLowerCase()){case"metric":case"custommetric":case"measuregroupdimension":H.basestylename=F||D[A].aggrfunc?"Measure":"Dimension";break;case"measure":case"measuregroup":H.basestylename="Measure";break;case"formulameasure":H.basestylename="Formula";break}}k.push(H)}if(B){H.name=D[A].basename+" ("+(D[A].title||"")+")"}else{H.name=D[A].name}H.rptseq=E.rptseq}};if(c=="M_REPORT"){r.call(x,0,{items:g,m:0,rptseq:0});for(w=0;w<o.rptitems.length;w++){e=o.rptitems[w];$.each([{items:e.cols,m:0,rptseq:w},{items:e.measures,m:1,rptseq:w}],r)}}else{$.each([{items:g,m:0,rptseq:0},{items:h,m:0,rptseq:0},{items:p,m:1,rptseq:0}],r);$.each([{items:l||[],m:2,rptseq:0}],r)}},_m2:function(f,h,g){var c=f.getSelectionModel().getSelection(),b=c.length?c[0]:null;if(!b){return}var e=f.getStore().indexOf(b),d=e,a;if(h<0){d--;if(d<0){return}}else{d++;if(d>=f.getStore().getCount()){return}}if(g&&g.length){a=g[e];g.splice(e,1);g.splice(d,0,a)}f.getStore().remove(b);f.getStore().insert(d,b);f.getSelectionModel().select(b,true)},initComponent:function(){var a=this,b;a.row=IRm$.r1("L_P_ROW");a.column=IRm$.r1("L_P_COL");a.measure=IRm$.r1("L_P_MEASURE");a.pivot_unit=IRm$.r1("L_P_PIVOT_UNIT");a.cluster=IRm$.r1("L_P_CLUSTER");if(a._i0!=true){a.browser=new IG$._I98({showtoolbar:false,cubebrowse:true,collapsible:false,floatable:false,floating:false,ddGroup:"_I$RD_G_",layout:"fit",enabledrag:true,flex:1,border:0,_search:true,_IHb:a})}else{b={name:"peditor",layout:"fit",floatable:false,border:0,flex:1,items:[{xtype:"container",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"border",flex:1,border:0,padding:8,items:[{xtype:"container",flex:1,region:"center",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"pivotgrid_rpt_item",title:IRm$.r1("L_P_RPT"),region:"north",height:140,hidden:true,hideHeaders:true,store:{fields:["name"]},tbar:[{iconCls:"icon-toolbar-addsheet",handler:function(){var d=this,f={name:d.pivot_unit,itemtype:"unit",measuretitle:"T",ext_title:null,cols:[],measures:[]},c=d.down("[name=pivotgrid_rpt_item]"),e=c.getSelectionModel();d._ILb.rptitems.push(f);c.store.loadData(d._ILb.rptitems);e.select(c.store.data.items.length-1);d._a_rpt=f;d._m1()},scope:this},{iconCls:"icon-toolbar-moveup",handler:function(){var c=this;c._m2(c.down("[name=pivotgrid_rpt_item]"),-1,c._ILb.rptitems)},scope:this},{iconCls:"icon-toolbar-movedown",handler:function(){var c=this;c._m2(c.down("[name=pivotgrid_rpt_item]"),1,c._ILb.rptitems)},scope:this},"-",{xtype:"checkbox",boxLabel:"Synchronize Rows",name:"syncrows"}],selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},plugins:[{ptype:"cellediting",clicksToEdit:false}],columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",editor:{allowBlank:true}},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:"Config Item",handler:function(d,j,c){var f=this,h=d.store.data.items[j],e=f._ILb.rptitems[j],g;if(e){g=new IG$._IGeR({_dt:e,callback:new IG$._I3d(f,function(){h.set("name",e.name)})});IG$._I_5(this,g)}},scope:this},{iconCls:"icon-toolbar-filter",tooltip:"Filter",handler:function(d,j,c){var f=this,h=d.store.data.items[j],e=f._ILb.rptitems[j],g;if(e){e.filter=e.filter||new IG$._IEb(null);e.havingfilter=e.havingfilter||new IG$._IEb(null);g=new IG$._Ia1({_ILb:{filter:e.filter,havingfilter:e.havingfilter},_ILa:{cubeuid:f._ILb.cubeuid||f._ILa.cubeuid},callback:new IG$._I3d(f,function(k){e.filter=k.filter;e.havingfilter=k.havingfilter})});IG$._I_5(f,g)}},scope:this},{iconCls:"icon-grid-delete",tooltip:"Remove Item",handler:function(d,g,c){var f=this,e=d.store.data.items[g];if(d.store.data.items.length>1){d.store.remove(e);f._ILb.rptitems.splice(g,1);d.getSelectionModel().select(d.store.data.items[0]);f._a_rpt=f._ILb.rptitems[0];f._m1()}},scope:this}]}],listeners:{cellclick:function(d,l,f,c,h,k,j,g){},selectionchange:function(c,e,g){var f=this,h=c.store.indexOf(e[0]),d;if(h>-1){d=f._ILb.rptitems[h];if(d){if(f._a_rpt){f.c2(f._a_rpt)}f._a_rpt=d;f._m1()}}},scope:this}},new IG$.Pg({name:"pivotgrid_row",ptr_p:a,title:a.row,location:"r",flex:1,__loc:"row"})]},{xtype:"container",layout:{type:"vbox",align:"stretch"},region:"east",name:"mv",flex:1,items:[{xtype:"container",flex:1,layout:"border",border:0,name:"vc",padding:4,items:[new IG$.Pg({name:"pivotgrid_col",ptr_p:a,flex:1,region:"south",title:a.column,location:"c",__loc:"col"}),new IG$.Pg({name:"pivotgrid_mea",ptr_p:a,flex:1,region:"center",title:a.measure,location:"m",__loc:"mea"}),new IG$.Pg({name:"pivotgrid_cls",ptr_p:a,flex:1,region:"south",title:a.cluster,hidden:true,location:"l",__loc:"cls"})]},{xtype:"container",flex:1,layout:"fit",border:0,region:"east",name:"vr",hidden:true,padding:4,items:[{xtype:"panel",name:"pivotgrid_rpt",border:1,flex:1,location:"p",layout:{type:"vbox",align:"stretch"},items:[new IG$.Pg({name:"pivotgrid_rpt_mea",ptr_p:a,flex:1,region:"center",title:a.measure,location:"rm",__loc:"mea",__loc1:true}),new IG$.Pg({name:"pivotgrid_rpt_col",ptr_p:a,flex:1,region:"south",title:a.column,location:"rc",__loc:"col",__loc1:true})]}]},{xtype:"panel",border:1,region:"south",height:30,layout:{type:"hbox",align:"stretch"},items:[{html:"<div><div class='igc-p-color'><span></span></div><div class='igc-p-color-ic' title='Color Measure'></div><div class='igc-p-remove'></div></div>",name:"c_z",flex:1,listeners:{afterrender:function(){setTimeout(function(){a._mk.call(a)},100)}}},{html:"<div class='igc-p-color'></div>",name:"s_z",hidden:true,flex:1,listeners:{afterrender:function(){a._mk.call(a)}}}]}]}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_VIEW_MODE"),name:"dataquerymode",labelAlign:"right",queryMode:"lcoal",displayField:"name",valueField:"value",editable:false,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_VIEW_MODE_LBL"),value:"M_DATA"},{name:IRm$.r1("L_V_PIVOT"),value:"M_PIVOT"},{name:IRm$.r1("L_V_RPT"),value:"M_REPORT"}]},hidden:(a._ILb&&a._ILb.iscomposite?true:false),listeners:{change:function(c,f,d,e){a._IOd.call(a)},select:function(c,d,e){a._IOd2.call(a)}}},{xtype:"displayfield",value:"..",listeners:{afterrender:function(c){IG$.r___.a(c,"data_query_viewer")}}},{xtype:"checkbox",name:"bcluster",labelAlign:"right",fieldLabel:IRm$.r1("L_CLUSTER"),boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(c){var e=this,f=e.down("[name=pivotgrid_cls]"),d=e.down("[name=dataquerymode]");f.setVisible(c.getValue()&&d.getValue()=="M_PIVOT")},scope:this}}]}]}]}}a.items=[];if(a.browser){a.items.push({xtype:"container",layout:"fit",flex:1,region:"center",autoScroll:false,items:[a.browser]})}if(b){a.items.push({xtype:"panel",layout:"card",region:a._i0>1?"east":"center",name:"p_editor",border:0,flex:1,deferredRender:false,tbar:[{type:"button",iconCls:"icon-toolbar-pivot",name:"btn_pivot",pressed:1,$w:80,text:IRm$.r1("L_PIVOT"),handler:function(){var e=this,c=e.down("[name=p_editor]"),d=e.down("[name=btn_filter]"),f=e.down("[name=btn_pivot]");c.getLayout().setActiveItem(0);f.toggle(true);d.toggle(false)},scope:this},{type:"button",iconCls:"icon-toolbar-filter",name:"btn_filter",$w:80,text:IRm$.r1("L_FILTER"),handler:function(){var e=this,c=e.down("[name=p_editor]"),d=e.down("[name=btn_filter]"),f=e.down("[name=btn_pivot]");c.getLayout().setActiveItem(1);f.toggle(false);d.toggle(true)},scope:this},{type:"button",iconCls:"icon-toolbar-sort",$w:80,text:IRm$.r1("L_SORT_OPTION"),handler:function(){var d=this,c=new IG$._If0({_ILa:d._ILa,_ILb:d._ILb,callback:new IG$._I3d(d,d._IO3)});IG$._I_5(this,c)},scope:this},{type:"button",iconCls:"icon-toolbar-style",$w:80,text:IRm$.r1("L_GRID_STYLE"),handler:function(){var d=this,c;d._IOe();c=new IG$._Iff({cmode:"report",_IJa:d._IJa,_ILa:d._ILa,_ILb:d._ILb,callback:new IG$._I3d(d,d._IO3)});IG$._I_5(this,c)},scope:this},"->",{type:"button",$w:90,text:IRm$.r1("L_ADV_OPTION"),handler:function(){var c=new IG$._Ic0({_ILb:this._ILb});this._i1=true;IG$._I_5(this,c)},listeners:{afterrender:function(c){IG$.r___.a(c,"advanced_pivot")}},scope:this}],items:[b,new IG$._Ida({name:"feditor",deferredRender:false,bodyPadding:10})]})}IG$._IGe.superclass.initComponent.call(this)}});IG$._Ibf=$s.extend($s.panel,{region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,_ILa:null,callback:null,defaults:{bodyStyle:"padding:0px"},_IG0:function(){var a=this;a.setVisible(false);setTimeout(function(){a.callback&&a.callback.execute()},100)},_IFf:function(){this._IFf();this._IG0()},_IGc:function(b){var a=this},_IGd:function(e,g){var l=this,d=l.down("[name=pivoteditor]"),c,j,k,h,b=l.down("[name=t_0]"),a=l.down("[name=t_1]"),m=l.down("[name=t_2]"),f=0;l._ILb=e;c=l._ILa=g;j=c.__cs;if(l._ILb&&l._ILb.cubeuid){cubeuid=l._ILb.cubeuid}else{cubeuid=j.d||(j.l.length>0?j.l[0].uid:null)}l.cubeuid=cubeuid;if(j&&j.l){f=j.l.length>1;for(h=0;h<j.l.length;h++){if(j.l[h].uid==cubeuid){k=j.l[h];break}}if(!k){k=j.l[0];cubeuid=k.uid;if(l._ILb){l._ILb.cubeuid=cubeuid}}if(f){b.store.loadData(j.l);b.setValue(cubeuid)}else{a.setValue(k?k.name||"":"")}}b.setVisible(f);a.setVisible(!f);m.setVisible(f);l.lC(k);l._IFe.call(l)},_IH0:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"5",payload:IG$._I2d({uid:b}),mbody:IG$._I2e()},a,a.r_IH0,null,null);c._l()},r_IH0:function(m){var h=this.down("[name=pivoteditor]"),l=h.browser,e=IG$._I18(m,"/smsg/item/result/Header"),d=(e)?IG$._I26(e):null,j,b=[],a=[],q,o=l.getRootNode(),k,g;if(d){for(j=0;j<d.length;j++){q=IG$._I1c(d[j]);q.type=IG$._I34(q.type)?"Measure":"Metric";q.leaf=true;q.checked=false;(q.type=="Measure")?b.push(q):a.push(q)}var c=[];if(a.length>0){c.push({id:"metric_folder",name:"Metric",type:"Folder",leaf:false})}if(b.length>0){c.push({id:"measure_folder",name:"Measure",type:"Folder",leaf:false})}o.appendChild(c);var p=l.store.getNodeById("metric_folder");if(p){p.appendChild(a)}var f=l.store.getNodeById("measure_folder");if(f){f.appendChild(b)}}},_IGf:function(){var f=this.down("[name=pivoteditor]"),h=f.browser,g,b=[],a=[],o,l=h.getRootNode(),j,e,k=this._ILb.sqloption;if(k&&k.columns){for(g=0;g<k.columns.length;g++){k.columns[g].itemtype=k.columns[g].type;k.columns[g].leaf=true;k.columns[g].checked=false;k.columns[g].uid=k.columns[g].uid||k.columns[g].fieldname;if(k.columns[g].type=="Measure"){b.push(k.columns[g])}else{a.push(k.columns[g])}}var c=[];if(a.length>0){c.push({id:"metric_folder",name:"Metric",type:"Folder",leaf:false})}if(b.length>0){c.push({id:"measure_folder",name:"Measure",type:"Folder",leaf:false})}l.appendChild(c);var m=h.store.getNodeById("metric_folder");if(m){m.appendChild(a)}var d=h.store.getNodeById("measure_folder");if(d){d.appendChild(b)}}},_IFe:function(){var b=this,c=this.reportmode;if(c=="excel"){var a=this.cubeuid;this._IH0(a)}else{if(c=="sql"){setTimeout(function(){b._IGf.call(b)},10)}}},_IFf:function(){var a=this.down("[name=pivoteditor]");a._IFf.call(a)},lC:function(j){var m=this,d=m.down("[name=mp]"),a=d.items,b,g,f=d.getLayout(),e=j?j.uid:null,k,h=0;if(!e){return}for(g=0;g<a.items.length;g++){k=a.items[g];if(k.__ckey==e){h=1;f.setActiveItem(k);break}}m.cubeuid=e;if(!h){b=new IG$._I98({showtoolbar:false,cubebrowse:true,collapsible:false,floatable:false,floating:false,ddGroup:"_I$RD_G_",__ckey:e,layout:"fit",enabledrag:true,rootuid:"none",flex:1,border:0,_search:true,_IHb:m});b.on("afterrender",function(l){var c={};c.type=j.name;c.name=c.type;c.nodepath=c.type;c.uid=e||null;c.leaf=false;l.setRootNode.call(l,c);setTimeout(function(){l.getRootNode().expand()},10)});k=d.add(b);f.setActiveItem(k)}m.fireEvent("cube_changed",m)},initComponent:function(){var c,a,b=this;b.addEvents("cube_changed");$s.apply(b,{title:IRm$.r1("T_RPT_PIVOT"),header:false,tools:[{type:"refresh",tooltip:"Refresh",handler:function(h,f,e){var g=this,j=g.down("[name=pivoteditor]");var d={};d.type=(g.reportmode=="rolap")?"Cube":"Metric";d.name=d.type;d.nodepath=d.type;d.uid=g.cubeuid||null;d.leaf=false;j.browser.setRootNode.call(j.browser,d);g.acubeuid=g.cubeuid;j.browser.getRootNode().expand()},scope:b}],items:[{xtype:"panel",bodyBorder:false,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",pack:"center"},defaults:{margin:"4 2 0"},items:[{xtype:"combobox",name:"t_0",queryMode:"local",displayField:"name",valueField:"uid",editable:false,autoSelect:true,flex:1,$w:150,hidden:true,store:{fields:["name","uid"]},listeners:{change:function(e){var h=this,g=h._ILa,d=g.__cs,k=e.getValue(),f,j;if(!k){return}for(f=0;f<d.l.length;f++){if(d.l[f].uid==k){j=d.l[f];break}}if(j.uid!=h.cubeuid){h.lC(j)}},scope:this}},{xtype:"displayfield",value:"",name:"t_1",$w:150},{xtype:"button",iconCls:"icon-toolbar-addsheet",tooltip:IRm$.r1("B_ADD"),handler:function(){var d=this.rptptr;d._IB5.call(d,null,this)},scope:b},{xtype:"button",name:"t_2",iconCls:"icon-grid-delete",hidden:true,tooltip:IRm$.r1("B_DELETE"),handler:function(){var g=this,f=g._ILa,d=f.__cs,h=g.down("[name=t_0]"),j=h.getValue(),e;if(d.m[j]){for(e=0;e<d.l.length;e++){if(d.l[e].uid==j){d.l.splice(e,1);break}}delete d.m[j];g._IGd(g._ILb,f)}},scope:b}]},{xtype:"panel",layout:"card",name:"mp",flex:1}]}]});IG$._Ibf.superclass.initComponent.apply(b,arguments)},listeners:{afterrender:function(){var a=this;a._IFe()}}});IG$._Ic0=$s.extend($s.window,{modal:true,layout:"fit",closable:false,resizable:false,width:500,autoScroll:false,height:550,maxHeight:550,bodyPadding:10,bodyStyle:{background:"#ffffff"},callback:null,_IG0:function(){var a=this;a.close();a.callback&&a.callback.execute()},_IFf:function(){var e=this,d=e._ILb,c=0,b,f=this.down("[name=cb_mloc]"),a=this.down("[name=measureposition]");if(d){b=f.getGroupValue();c=a.getValue();if(b=="row"&&d.rows.length<c){c=d.rows.length}else{if(b=="column"&&d.cols.length<c){c=d.cols.length}}c=(c<0)?0:c;$.each(e._f,function(h,k){var j=e.down("[name="+k+"]"),g;switch(k){case"measurelocation":g=b;break;case"measureposition":g=c;break;case"customfix":case"usepaging":case"measuretitle":g=j.getValue()?"T":"F";break;default:g=j.getValue();break}d[k]=g})}e._IG0()},_IFd:function(){var b=this,a=b._ILb;b._f=["measurelocation","measureposition","measuretitle","isdistinct","fetchall","treeview","columntree","isbigdecimal","showlnum","customfix","customfixcols","usepaging","rowperpage","pagestyle","measureformat","measureformatname"];if(a){a.measureposition=(a.measureposition<0)?0:a.measureposition;$.each(b._f,function(d,g){var e=b.down("[name="+g+"]"),c=a[g];switch(g){case"measurelocation":e.setValue({cb_mloc:[c]});break;case"customfix":case"usepaging":case"measuretitle":e.setValue(c=="T");g=="customfix"&&b.down("[name=customfixcols]").setVisible(c=="T");break;case"customfixcols":e.setValue(c||0);break;case"rowperpage":e.setValue(c||20);break;case"pagestyle":e.setValue(c||"normal");break;default:e.setValue(c);break}})}},initComponent:function(){this.title=IRm$.r1("L_ADV_OPTION");$s.apply(this,{items:[{xtype:"panel",layout:"anchor",autoScroll:true,bodyPadding:5,defaults:{anchor:"100%"},fieldDefaults:{labelWidth:100},items:[{xtype:"fieldset",title:IRm$.r1("L_M_POSITION"),collapsible:false,defaults:{anchor:"100%"},items:[{name:"measurelocation",fieldLabel:IRm$.r1("L_MEASURE_ON"),xtype:"radiogroup",plain:true,items:[{boxLabel:IRm$.r1("L_P_ROW"),name:"cb_mloc",inputValue:"row"},{boxLabel:IRm$.r1("L_P_COL"),name:"cb_mloc",inputValue:"column",checked:true}],listeners:{}},{xtype:"numberfield",name:"measureposition",fieldLabel:IRm$.r1("L_M_POSITION"),minValue:0,maxValue:99,value:0,anchor:"60%"},{xtype:"checkbox",name:"measuretitle",fieldLabel:IRm$.r1("L_M_TITLE"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_FIX_COLUMN"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"checkbox",name:"customfix",boxLabel:IRm$.r1("L_CUSTOM_FIX"),listeners:{change:function(a,f,c,d){var e=this,b=e.down("[name=customfixcols]");b.setVisible(f)},scope:this}},{xtype:"numberfield",name:"customfixcols",minValue:0,maxValue:10,value:0}]}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_M_FORMAT"),items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_M_FORMAT"),name:"measureformat"},{xtype:"textfield",fieldLabel:IRm$.r1("L_M_NAME"),name:"measureformatname"},{xtype:"displayfield",value:"* Merge multiple measure in single column"}]},{xtype:"fieldset",layout:"anchor",title:IRm$.r1("L_PAGING"),items:[{xtype:"checkbox",name:"usepaging",fieldLabel:IRm$.r1("L_USE_PAGING"),boxLabel:IRm$.r1("B_ENABLED")},{xtype:"numberfield",name:"rowperpage",fieldLabel:IRm$.r1("L_ROW_P_PAGE"),minValue:10,maxValue:1000,value:20},{xtype:"combobox",name:"pagestyle",fieldLabel:IRm$.r1("L_PAGE_STYLE"),queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"Normal",value:"normal"},{name:"10 pages",value:"p10"},{name:"5 pages",value:"p5"},{name:"2 buttons",value:"button2"}]}}]},{xtype:"fieldset",title:IRm$.r1("L_TREE_VIEW"),collapsible:false,items:[{xtype:"form",layout:"anchor",border:0,hidden:false,defaults:{anchor:"100%"},items:[{xtype:"checkbox",boxLabel:IRm$.r1("L_ENABLE_TREE_VIEW"),name:"treeview",bodyPadding:"0 10 10 10"},{xtype:"checkbox",boxLabel:IRm$.r1("L_COL_TREE"),name:"columntree",bodyPadding:"0 10 10 10"}]}]},{xtype:"fieldset",title:IRm$.r1("L_OTHER_OPTION"),collapsible:false,items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_DISTINCT"),name:"isdistinct",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_FETCH_ALL"),name:"fetchall",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"checkbox",fieldLabel:IRm$.r1("L_NUM_PREC"),boxLabel:IRm$.r1("L_HIGH_PREC"),bodyPadding:"0 10 10 10",name:"isbigdecimal"},{xtype:"checkbox",fieldLabel:IRm$.r1("L_LINE_NUM"),name:"showlnum",boxLabel:IRm$.r1("B_ENABLED")}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Ic0.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){a._IFd.call(a)}}});IG$.dlg_pivot=$s.extend($s.window,{modal:false,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:true,height:520,callback:null,Uc:function(a){var b=this,c=b.report_ptr.sheets;$.each(c,function(e,d){d.Uc.call(d,a)})},init$f:function(){var h=this,a=h.sheetindex,c=h._ILa.sheets[a],e=h.down("[name=p1]"),b=h.down("[name=pivoteditor]"),d,g;h.report_ptr.dlg_pivot=h;if(h.objtype=="FILTER"){e._IGd.call(e,h._ILa.sheets[a],h._ILa)}else{b._IJa=a,b._ILa=h._ILa;b._ILb=c;var f=h._ILa.__cs&&h._ILa.__cs.l&&h._ILa.__cs.l.length?h._ILa.__cs.l[0].uid:null;d=c?c.cubeuid||f:f;if(c&&!c.cubeuid){c.cubeuid=f}if(d){g=c?c.Uc.call(c,d):true;if(g){c.cubeuid=d}}b.cubeuid=c?c.cubeuid:null;b.Uc.call(b,d,g);e._IGd.call(e,h._ILa.sheets[a],h._ILa);setTimeout(function(){b._IL1.call(b);b._c=1},20)}},_IFf:function(){var b=this,a=b.down("[name=pivoteditor]");if(b.objtype=="FILTER"){b.close();return}a._IFf.call(a);$.each(b.report_ptr.sheets,function(d,c){if(c.sheetindex==b.sheetindex){c._IFf.call(c)}});b.close()},initComponent:function(){var a=this;a.title=IRm$.r1("L_PIVOT_REPORT");$s.apply(this,{width:a.objtype=="FILTER"?210:820,bodyStyle:"padding:5px; background: #ffffff",border:0,items:[{xtype:"panel",layout:"border",items:[new IG$._Ibf({name:"p1",region:"center",flex:1,border:0,resizable:true,rptptr:a.report_ptr,callback:new IG$._I3d(a,a._IO3),listeners:{cube_changed:function(b,e){var d=this,c=b.cubeuid;c&&d.Uc(c)},scope:this}}),new IG$._IGe({name:"pivoteditor",flex:3,layoutmode:"panel",region:"east",hidden:a.objtype=="FILTER",split:true,resizable:true,_i0:true,border:0})]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),hidden:a.objtype=="FILTER",handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this.init$f()},close:function(b){b.report_ptr.dlg_pivot=null},scope:this}});IG$.dlg_pivot.superclass.initComponent.apply(this,arguments)}});IG$.mA$_b=$s.extend($s.window,{xtype:"window",modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:500,height:400,defaults:{bodyStyle:"padding:10px"},callback:null,_ILa:null,_ILb:null,_IG0:function(){this.close()},sv:function(){var b=this;if(b._ILb!=null&&b._ILa!=null){var c=b._ILa._IJ1.call(b._ILa),a=new IG$._I3e();a.init(b,{ack:"18",payload:'<smsg><item uid="'+b.uid+'" option="sql" active="'+b._IJa+'"/></smsg>',mbody:c},b,b.rs_sv,null);a._l()}},rs_sv:function(a){var c=this,e,b=c.down("[name=sqlview]"),d=IG$._I18(a,"/smsg/item/ExecuteQuery");if(d){e=IG$._I24(d);b.setValue(e)}},items:[{xtype:"textarea",name:"sqlview",readOnly:true}],initComponent:function(){var a=this;a.title=IRm$.r1("L_VIEW_SQL");a.buttons=[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}];a.listeners={afterrender:function(){this.sv()}};IG$.mA$_b.superclass.initComponent.apply(this,arguments)}});IG$.ltW=IG$.ltW||[{name:"jobcategory",type:"select",categ:"jobcategory",shortdesc:"Begin Here",title:"Before You Begin",items:[{name:"rdbms",title:"Relational Database",actiontype:"gotomenu",action:"rdbms;cube;report",desc:"Follow step for relational database analysis."},{name:"sql",title:"Analysis by SQL Query",actiontype:"gotomenu",action:"sql;cube;report",desc:"Advanced SQL Query to analysis."},{name:"excel",title:"Excel file analysis",actiontype:"gotomenu",action:"excel;cube;report",desc:"Local file to analysis report."},{name:"nosql",title:"Big data analysis",actiontype:"gotomenu",action:"nosql;report",desc:"Big data without boundary."},{name:"browse",title:"Browse existing content",actiontype:"gotomenu",action:"browse;report",desc:"Get your analysis report on browser."},{name:"report",title:"Make report",actiontype:"gotomenu",action:"report",desc:"Make new report with easy guides."},{name:"rstatistics",title:"R Statistics",actiontype:"gotomenu",action:"report;rstatistics",desc:"Powerful statistical engine for your report."}]},{name:"connectdb",categ:"rdbms",shortdesc:"Database",title:"Connect database.",type:"cmd",btnname:"New Database Instance",desc:"<b>Click [button] to open connect database manager.</b>"},{name:"registertable",categ:"rdbms",shortdesc:"Register Tables",title:"Register Tables.",type:"cmd",btnname:"Table Register Manager",desc:"<b>Click [button] to open register table manager.</b>"},{name:"datamodel",categ:"rdbms",shortdesc:"Data Modelling",title:"Make relations between tables.",type:"cmd",btnname:"New Relational Model",desc:"<b>Click [button] to make new datamodel.</b>"},{name:"codmapping",categ:"cube",shortdesc:"Code Mapping",title:"Define Code Mapping DataSet.",type:"cmd",btnname:"Define Code Mapping",desc:"<b>Click [button] to Code Mapping Manager.</b>"},{name:"variables",categ:"cube",shortdesc:"Variables",title:"Define Mostly Used Variables.",type:"cmd",btnname:"Define Variables",desc:"<b>Click [button] to Variables Manager.</b>"},{name:"rcube",categ:"rdbms",shortdesc:"Make Cube",title:"Make Cube for analysis subject.",type:"cmd",btnname:"New Relational Cube",desc:"<b>Click [button] to make new Cube</b>"},{name:"sqlloading",categ:"sql",shortdesc:"Create SQL Cube",title:"Set SQL query to execute.",type:"cmd",btnname:"New SQL Cube",desc:"<b>Click [button] to create SQL to Analysis subject.</b>"},{name:"openexcel",categ:"excel",enabled:false,shortdesc:"Upload Excel or CSV file",title:"Upload file and change Metric attribute or options.",type:"cmd",btnname:"New File Cube",desc:"<b>Click [button] to set detailed information on columns</b>"},{name:"prerequirements",categ:"nosql",shortdesc:"Pre requirements",title:"Pre requirements for big data analysis.",type:"wizard"},{name:"selectnode",categ:"nosql",shortdesc:"Select node",title:"Select node and data category.",type:"wizard"},{name:"beforerstat",categ:"rstatistics",shortdesc:"Before begin",title:"Before begin R statistics",type:"html",html:"<p>R statistics is available on each report. You can transfer between items with sheet/chart/R statistics on report toolbar menu.</p><p>R runs with script running on server. Make your R script or select one on the templates.</p>"},{name:"rscript",categ:"rstatistics",shortdesc:"R Script",title:"Select R script for statistical analysis.",type:"wizard"},{name:"report",categ:"report",shortdesc:"Make Report",title:"Make Report with Pivot.",type:"cmd",btnname:"New Report",desc:"<b>Click [button] to make new Report</b>"},{name:"dashboard",categ:"dashboard",shortdesc:"Make Dashboard",title:"Make Dashboard with multiple reports.",type:"cmd",btnname:"New Dashboard",desc:"<b>Click [button] to make new Dashboard</b>"}];IG$.sMM=function(){};IG$.sMM.prototype={show:function(){this.klink.removeClass("disabled");this.klink.addClass("selected");this.content.fadeIn()},hide:function(){this.klink.removeClass("selected");this.klink.addClass("disabled");this.content.hide()}};IG$.prM=function(c,d,a){var b=IG$._I7d||null;switch(c){case"registertable":IG$._I65("CMD_TABLE_REGISTER");break;case"connectdb":IG$._I65("CMD_CONNECT_DB");break;case"datamodel":b.m1$7.call(b,null,"CubeModel".toLowerCase(),"New DataModel",null,null,true);break;case"rcube":b.m1$7.call(b,null,"Cube".toLowerCase(),"New Cube",null,null,true);break;case"report":b.m1$7.call(b,null,"Report".toLowerCase(),"New Report",null,null,true);break;case"dashboard":b.m1$7.call(b,null,"Dashboard".toLowerCase(),"New Dashboard",null,null,true,a);break;case"molapcube":b.m1$7.call(b,null,"MCube".toLowerCase(),"New MCube",null,null,true,a);break;case"setmicrocube":b.m1$7.call(b,null,"DataCube".toLowerCase(),"LocalFileLoader",null,null,true);break;case"openexcel":b.m1$7.call(b,null,"DataCube".toLowerCase(),"LocalFileLoader",null,null,true);break;case"sqlloading":b.m1$7.call(b,null,"SQLCube".toLowerCase(),"SQL Cube",null,null,true);break;case"close_wizard":IG$._I65("CMD_HOME");break;case"codmapping":IG$._I65("CMD_LOOKUP");break;case"variables":IG$._I65("CMD_VAR");break}};IG$._I80=function(f,b){var e=this,a=$(f.dwizard.el.dom),d=$(f.dwizard_bar.el.dom);this.container=a;this.cbar_area=d;a.empty();d.empty();var c=$("<div class='app-wizard-bg'></div>").appendTo(this.container);this.html=$("<div class='idv-wz-cntl'></div>").appendTo(this.container);this.categ=b;this.categmap=[];this.initialize()};IG$._I80.prototype={initialize:function(){var e=this,d,c=e.categ;this.html.empty();e.categmap={};e.c_nstep=0;for(d=0;d<c.length;d++){e.categmap[c[d].name]=c[d]}e.c_step=c[0];e.drawStep();var b={},a;b.bar=$("<div class='idv-st-abar'></div>").appendTo(this.cbar_area);b.finish=$("<button class='idv-st-btn idv-st-btn-finish'>Finish</button>").appendTo(b.bar);a=$("<div class='idv-st-btn-box'></div>").appendTo(b.bar);b.prev=$("<button class='idv-st-btn idv-st-btn-prev'>Previous</button>").appendTo(a);b.next=$("<button class='idv-st-btn idv-st-btn-next'>Next</button>").appendTo(a);b.next.addClass("idv-st-btn-disable");b.prev.addClass("idv-st-btn-disable");b.finish.bind("click",function(){IG$.prM("close_wizard")});b.next.bind("click",function(){e.doStep.call(e,1)});b.prev.bind("click",function(){e.doStep.call(e,-1)});this.actionbar=b},drawStep:function(){var d=this,c=d.html,b,a=d.categ;d.stepcontainer=$("<div class='idv-st-cnter'></div>").appendTo(c);d.stepul=$("<ul class='idv-st-anch'></ul>").appendTo(c);d.stepitems=[];$.each(a,function(h,l){var f,r=h+1,m=(h==d.c_nstep)?"selected":"disabled",k=new IG$.sMM(),q,g,e;k.kul=$("<li></li>").appendTo(d.stepul);k.klink=$("<a href='#' class='"+m+"'></a>").appendTo(k.kul);k.item=l;k.label=$("<label class='idv-st-nbr'>"+r+"</label>").appendTo(k.klink);k.stepdesc=$("<span class='idv-st-desc'>"+l.shortdesc+"</span>").appendTo(k.klink);k.content=$("<div class='idv-st-cnt'></div>").appendTo(d.stepcontainer);k.ctitle=$("<h2 class='idv-st-stitle'><span id='mstep'>Step"+r+"</span> : "+l.title+"</h2>").appendTo(k.content);switch(l.type){case"select":var o=$("<ul class='idv-st-sel'></ul>").appendTo(k.content);l.divdesc=$("<div class='idv-st-sel-desc'></div>").appendTo(k.content);$.each(l.items,function(j,u){if(u.enabled!=false){var s=$("<li class='idv-st-sel-item'><a href='#'>"+u.title+"</a></li>").appendTo(o);s.bind("click",function(){switch(u.actiontype){case"gotomenu":var w=u.action;if(d.loadedAction==w){d.doStep.call(d,1)}else{d.loadActionMenu.call(d,w,l,u)}break}})}});break;case"cmd":e=$("<div class='idv-st-inr'></div>").appendTo(k.content);$("<div>"+k.item.desc+"</div>").appendTo(e);var p=$("<div class='idv-st-btn'>"+(k.item.btnname||"Continue")+"</div>").appendTo(e);p.bind("click",function(){IG$.prM(k.item.name)});break;case"html":e=$("<div class='idv-st-inr'></div>").appendTo(k.content);$(k.item.html).appendTo(e);if(k.item.buttons&&k.item.buttons.length>0){$.each(k.item.buttons,function(s,j){$("#"+j,e).bind("click",function(){IG$.prM(k.item.name,j)})})}if(k.item.post){k.item.post(d,e)}break}if(h>0){k.kul.hide();k.content.hide()}k.klink.bind("click",function(){var s,j=-1,u=k.item.name;if(u==d.stepitems[0].item.name){j=0}else{for(s=0;s<d.actionsteps.length;s++){if(d.actionsteps[s].item.name==u){j=s+1;break}}}if(j>-1){d.goStep.call(d,j)}});d.stepitems.push(k)})},loadActionMenu:function(g,a,h){var b,e=this,d=1,c,f=2;e.loadedAction=g;e.actionbar.next.removeClass("idv-st-btn-disable");g=";"+g+";";e.actionsteps=[];e.c_nstep=0;e.hidemsg();a.divdesc.show();a.divdesc.html(h.desc);for(b=1;b<e.stepitems.length;b++){c=e.stepitems[b];if(g.indexOf(";"+c.item.categ+";")>-1){c.hide();c.label.html(""+f);c.kul.fadeIn();$("#mstep",c.stepdesc).html("Step "+f);$("#mstep",c.ctitle).html("Step "+f);d++;f++;e.actionsteps.push(c)}else{c.kul.hide()}}},doStep:function(e){var d=this,a,c=d.c_nstep+e;if(d.actionsteps&&d.actionsteps.length>0&&c>-1&&c<d.actionsteps.length+1){d.goStep(c)}else{var b="";if(!d.actionsteps||(d.actionsteps&&d.actionsteps.length==0)){b="Click work category to proceed!"}d.showmsg(b)}},goStep:function(c){var b=this,a;b.hidemsg();if(c==0){b.stepitems[0].show();b.actionbar.next.removeClass("idv-st-btn-disable");b.actionbar.prev.addClass("idv-st-btn-disable")}else{b.stepitems[0].hide();if(b.actionsteps.length==c){b.actionbar.next.addClass("idv-st-btn-disable")}else{b.actionbar.next.removeClass("idv-st-btn-disable")}b.actionbar.prev.removeClass("idv-st-btn-disable")}if(b.actionsteps){for(a=0;a<b.actionsteps.length;a++){if(a+1==c){b.actionsteps[a].show()}else{b.actionsteps[a].hide()}}}b.c_nstep=c},showmsg:function(a){},hidemsg:function(){}};IG$._I7c=$s.extend(IG$._I57,{padding:10,closable:true,iconCls:"icon-schedule",layout:{type:"vbox",align:"stretch"},_IFd:function(){var a=this;a.l1()},l1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"22",payload:IG$._I2d({action:"checkstatus"},"action"),mbody:IG$._I2e({})},a,a.rs_l1,null);b._l()},rs_l1:function(b){var d=this,e=d.down("[name=txtstatus]"),g=IG$._I18(b,"/smsg/status"),a,c,f="Failed to check status";if(g){c=IG$._I1b(g,"code");if(c=="100"){f="Schedule server is running and normal"}else{if(c=="1"){f="Schedule server is disabled"}else{if(c=="5"){a=IG$._I19(g,"message");f="Error while connect schedule server. errorcode: ("+IG$._I1b(a,"errcode")+") "+IG$._I24(a)}else{if(c="6"){f="Server result xml is not well formed"}}}}}e.setValue(f);d.l2()},l2:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"22",payload:IG$._I2d({action:"list"},"action"),mbody:IG$._I2e({})},a,a.rs_l2,null);b._l()},rs_l2:function(j){var p=this,b=IG$._I18(j,"/smsg"),m=(b?IG$._I26(b):null),e,o,l=[],d=p.down("[name=grdjoblist]"),a=p.down("[name=disp_job]"),q=p.down("[name=grddetail]"),h,k,f,c;if(m){for(e=0;e<m.length;e++){o=IG$._I1c(m[e]);k="Unknown";switch(o.pstatus){case"A":k="Ready to Pickup";break;case"C":k="Completed";break;case"E":k="User Cancelled";break}o.pstatus_desc=k;o.crtdate_desc=IG$._I40(o.crtdate);o.uptdate_desc=IG$._I40(o.uptdate);o.pickdate_desc=o.pickdate?IG$._I40(o.pickdate):null;o.enddate_desc=o.enddate?IG$._I40(o.enddate):null;c=IRm$.r1("L_SC_"+o.sctype);o.sc=c+" "+o.scoption;f=IG$._I19(m[e],"program");if(f){o.objname=IG$._I1b(f,"name")}l.push(o)}}a.setVisible(true);q.setVisible(false);d.store.loadData(l)},l3:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"22",payload:IG$._I2d({sid:b,action:"joblist"},"sid;action"),mbody:IG$._I2e({})},a,a.rs_l3,null);c._l()},rs_l3:function(f){var j=this,a=j.down("[name=disp_job]"),k=j.down("[name=grddetail]"),b=IG$._I18(f,"/smsg"),e,d=[],c,h=IG$._I26(b),g;if(h){for(e=0;e<h.length;e++){c=IG$._I1c(h[e]);g="Unknown";switch(c.pstatus){case"I":g="Running";break;case"C":g="Completed";break;case"Q":g="Queue Waiting";break;case"X":g="Running";break;case"T":g="Cancel Queue";break;case"M":g="Cancelled";break}c.pstatusdesc=g;c.crtdate_desc=IG$._I40(c.crtdate);c.uptdate_desc=IG$._I40(c.uptdate);d.push(c)}}a.setVisible(false);k.setVisible(true);k.store.loadData(d)},lr:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"22",payload:IG$._I2d({action:"programs"},"action"),mbody:IG$._I2e({})},a,function(q){var d=IG$._I18(q,"/smsg"),r=IG$._I26(d),m,h,g,e=[],u,c,o,l,f;if(r&&r.length){for(m=0;m<r.length;m++){c={name:IG$._I1b(r[m],"name"),java_class:IG$._I1a(r[m],"java_class"),input_items:[]};o=IG$._I19(r[m],"input_items");if(o){l=IG$._I26(o);for(h=0;h<l.length;h++){u={};f=IG$._I26(l[h]);for(g=0;g<f.length;g++){u[IG$._I1b(f[g],"name")]=IG$._I24(f[g])}c.input_items.push(u)}}e.push(c)}var s=new IG$.s$mr({sid:null,uid:null,callback:new IG$._I3d(a,a.l1),req:null,programs:e});IG$._I_5(a,s)}});b._l()},initComponent:function(){var a=this;a.items=[{xtype:"fieldset",title:"Schedule Server Status",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",name:"txtstatus",value:"Server status checking...",flex:1},{xtype:"button",text:"Refresh",handler:function(){this.l1()},scope:this},{xtype:"button",text:"Register Schedule",handler:function(){this.lr()},scope:this}]}]},{xtype:"gridpanel",flex:1,name:"grdjoblist",store:{xtype:"store",fields:["sid","userid","uuid","uuname","objuid","objname","objtype","name","crtdate","uptdate","crtdate_desc","uptdate_desc","pstatus","pstatus_desc","sctype","scoption","a_1","a_1a","a_1b","a_1c","sc","pickdate_desc","enddate_desc","heartbeat_desc"]},columns:[{text:"Nickname",flex:1,dataIndex:"name"},{text:"Object name / Class",flex:1,dataIndex:"objname"},{text:"Owner",dataIndex:"uuname"},{text:"Status",dataIndex:"pstatus_desc"},{text:"Schedule",dataIndex:"sc"},{text:"Pickup Time",dataIndex:"pickdate_desc"},{text:"End Time",dataIndex:"enddate_desc"},{text:"Heartbeat",dataIndex:"heartbeat"},{text:"Created date",dataIndex:"crtdate_desc"},{text:"Modified date",dataIndex:"uptdate_desc"}],listeners:{itemclick:function(c,b,f,d,h,g){this.l3(b.get("sid"))},scope:this}},{xtype:"fieldset",title:"Detailed Status",name:"detailpanel",flex:1,layout:{type:"vbox",align:"stretch"},collapsed:false,defaults:{anchor:"100%"},items:[{xtype:"displayfield",name:"disp_job",hidden:false,value:"Click Schedule for detailed job status"},{xtype:"gridpanel",name:"grddetail",flex:1,hidden:true,store:{xtype:"store",fields:["sid","jid","crtdate","crtdate_desc","uptdate","uptdate_desc","pstatus","pstatusdesc"]},columns:[{xtype:"gridcolumn",text:"Updated date",dataIndex:"uptdate_desc",flex:1},{xtype:"gridcolumn",text:"Started date",dataIndex:"crtdate_desc",flex:1},{xtype:"gridcolumn",text:"Status",dataIndex:"pstatusdesc"}]}]}];IG$._I7c.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._IFd()}}});IG$.s$mr=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:480,height:420,autoHeight:false,parentnodepath:null,itemtype:null,parentuid:null,callback:null,_IFd:function(){var a=this;a.down("[name=c2_rp]").setValue("M");a.down("[name=c2_r1]").setValue("");if(a.sid){a.l1()}},$f3:function(){var z=this,h=z.down("[name=mform]"),l=z.down("[name=sctype]"),g,f=z.down("[name=f_dw]"),b=f.checkboxCmp,k=z.down("[name=fs_dm]"),q=k.checkboxCmp,w=z.down("[name=fs_m]"),y=z.down("[name=scp]"),d=w.checkboxCmp,m,u,j,x;if(h.getForm().isValid()==true){l.clearInvalid();if(!l.getValue()){l.markInvalid();return}y.clearInvalid();if(z.programs&&!y.getValue()){y.markInvalid();return}if(z.programs&&!z.req){for(u=0;u<z.programs.length;u++){if(z.programs[u].java_class==y.getValue()){j=z.programs[u];break}}x=[];for(u=0;u<j.input_items.length;u++){if(j.input_items[u].name){x.push({name:j.input_items[u].name,value:j.input_items[u].__dw.getValue()})}}z.req=[{ack:22,payload:IG$._I2d({action:"exec_program"},"action"),mbody:IG$._I2e({name:j.name,java_class:j.java_class},null,x)}]}g=l.getValue();var o=this,c={sid:z.sid,sctype:g,action:"register",rid:z.uid,pstatus:z.down("[name=pstatus]").getValue()},s,e=z.req,a=new IG$._I3e();c.name=z.down("[name=scname]").getValue();c.a_1=z.down("[name=a_1]").getValue()?"T":"F";c.a_1a=z.down("[name=a_1a]").getValue();c.a_1b=z.down("[name=a_1b]").getValue();c.a_1c=z.down("[name=a_1c]").getValue();if(g=="C1"){c.hour=z.down("[name=c1_hh]").getValue();c.minute=z.down("[name=c1_mm]").getValue();c.seconds=z.down("[name=c1_ss]").getValue()}else{if(g=="C2"){c.c2_from=IG$._I41(z.down("[name=c2_from]").getValue(),"yyyymmdd");c.c2_to=IG$._I41(z.down("[name=c2_to]").getValue(),"yyyymmdd");c.c2_hh=z.down("[name=c2_hh]").getValue();c.c2_mm=z.down("[name=c2_mm]").getValue();c.c2_ss=z.down("[name=c2_ss]").getValue();c.c2_r1=z.down("[name=c2_r1]").getValue()=="R"?"T":"F";c.c2_ri=""+z.down("[name=c2_ri]").getValue();c.c2_rp=z.down("[name=c2_rp]").getValue();c.c2_pt1=z.g1(1);c.c2_pt2=z.g1(2);if(b.getValue()){c.wd=[];$.each(["SU","MO","TU","WE","TH","FR","SA"],function(B,A){var C=f.down("[name=c_"+A+"]");if(C.getValue()){c.wd.push(A)}});c.wd=c.wd.join(";")}if(q.getValue()){c.dm=[];for(u=0;u<31;u++){var r=k.down("[name=f_"+(u)+"]");if(r.getValue()){c.dm.push(""+u)}}if(k.down("[name=f_lday]").getValue()){c.dm.push("lday")}c.dm=c.dm.join(";")}if(d.getValue()){c.mon=[];for(u=0;u<12;u++){var r=w.down("[name=m_"+(u)+"]");if(r.getValue()){c.mon.push(""+u)}}c.mon=c.mon.join(";")}}else{if(g=="C3"){c.hour=z.down("[name=c3_hh]").getValue();c.minute=z.down("[name=c3_mm]").getValue()}}}s="<smsg>";for(u=0;u<e.length;u++){s+="<job key='"+(e[u].jobkey||u)+"'>";s+="<ack>"+e[u].ack+"</ack>";s+="<mbody><![CDATA["+Base64.encode(e[u].mbody)+"]]></mbody>";s+="<payload>"+(e[u].payload?"<![CDATA["+Base64.encode(e[u].payload)+"]]>":"")+"</payload>";s+="</job>"}s+="</smsg>";m="<smsg><item "+IG$._I20(c,"sid;action;sctype;rid;hour;minute;seconds;name;c2_from;c2_to;c2_hh;c2_mm;c2_ss;wd;dm;mon;a_1;a_1a;pstatus;c2_r1;c2_ri;c2_rp;c2_pt1;c2_pt2")+"><mailcc><![CDATA["+(c.a_1b||"")+"]]></mailcc><message><![CDATA["+(c.a_1c||"")+"]]></message></item></smsg>";a.init(o,{ack:"22",payload:m,mbody:s},o,o._IO5,null);a._l()}},g1:function(d){var c=this,b="",a;$.each(["h","m","s"],function(g,f){var h=c.down("[name=c2_r"+f+d+"]"),e=h.getValue();b+=(g>0?":":"")+(e<10?"0":"")+e});return b},_IO5:function(a){this.callback&&this.callback.execute();this.close()},l1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"22",payload:IG$._I2d({uid:this.uid,sid:this.sid,action:"getinfo"},"uid;sid;action"),mbody:IG$._I2e({})},a,a.rs_l1,null);b._l()},rs_l1:function(f){var h=this,b=IG$._I18(f,"/smsg/schedule"),l,c,k,j,g,e;if(b){l=IG$._I1c(b);h.down("[name=scname]").setValue(l.name);h.down("[name=sctype]").setValue(l.sctype);h.down("[name=pstatus]").setValue(l.pstatus);h.down("[name=a_1]").setValue(l.a_1=="T");h.down("[name=a_1a]").setValue(l.a_1a||"");h.down("[name=a_1b]").setValue(IG$._I1a(b,"mailcc"));h.down("[name=a_1c]").setValue(IG$._I1a(b,"message"));c=l.scoption||"";if(l.sctype=="C1"){c=c.split(":");c[0]&&h.down("[name=c1_hh]").setValue(Number(c[0]));c[1]&&h.down("[name=c1_mm]").setValue(Number(c[1]));c[2]&&h.down("[name=c1_ss]").setValue(Number(c[2]))}else{if(l.sctype=="C2"){c=c.split("|");var d=function(o){var p=IG$._I0a_(o),m;if(p.y&&p.M&&p.d){m=new Date(Number(p.y),Number(p.M)-1,Number(p.d))}return m};k=c[2]||"";k=k.split(":");c[0]&&h.down("[name=c2_from]").setValue(d(c[0]));c[1]&&h.down("[name=c2_to]").setValue(d(c[1]));k[0]&&h.down("[name=c2_hh]").setValue(k[0]);k[1]&&h.down("[name=c2_mm]").setValue(k[1]);k[2]&&h.down("[name=c2_ss]").setValue(k[2]);if(c[3]){j=";"+c[3]+";";g=h.down("[name=f_dw]");e=g.checkboxCmp;e.setValue(true);$.each(["SU","MO","TU","WE","TH","FR","SA"],function(q,o){var r=g.down("[name=c_"+o+"]");if(j.indexOf(";"+o+";")>-1){r.setValue(true)}})}if(c[4]){j=";"+c[4]+";";g=h.down("[name=fs_dm]");e=g.checkboxCmp;e.setValue(true);for(i=0;i<31;i++){var a=g.down("[name=f_"+(i)+"]");if(j.indexOf(";"+i+";")>-1){a.setValue(true)}}if(j.indexOf(";lday;")>-1){g.down("[name=f_lday]").setValue(true)}}if(c[5]){j=";"+c[4]+";";g=h.down("[name=fs_m]");e=g.checkboxCmp;e.setValue(true);for(i=0;i<12;i++){var a=g.down("[name=m_"+(i)+"]");if(j.indexOf(";"+i+";")>-1){a.setValue(true)}}}c[6]&&h.down("[name=c2_r1]").setValue(c[6]=="T"?"R":"");c[7]&&h.down("[name=c2_ri]").setValue(c[7]);c[8]&&h.down("[name=c2_rp]").setValue(c[8]);if(c[9]){j=c[9].split(":");if(j.length==3){h.down("[name=c2_rh1]").setValue(parseInt(j[0]));h.down("[name=c2_rm1]").setValue(parseInt(j[1]));h.down("[name=c2_rs1]").setValue(parseInt(j[2]))}}if(c[10]){j=c[10].split(":");if(j.length==3){h.down("[name=c2_rh2]").setValue(parseInt(j[0]));h.down("[name=c2_rm2]").setValue(parseInt(j[1]));h.down("[name=c2_rs2]").setValue(parseInt(j[2]))}}}else{if(l.sctype=="C3"){c=c.split(":");c[0]&&h.down("[name=c3_hh]").setValue(Number(c[0]));c[1]&&h.down("[name=c3_mm]").setValue(Number(c[1]))}}}}},_update_parmas:function(f){var d=this,e=d.programs,c,b,a=d.down("[name=_params]");a.removeAll();for(c=0;c<e.length;c++){if(e[c].java_class==f){b=e[c];break}}if(b&&b.input_items){a.setVisible(true);$.each(b.input_items,function(g,h){var j={};switch(h.type){case"integer":j.xtype="numberfield";break;case"string":j.xtype="textfield";break;case"text":j.xtype="textarea";break;case"boolean":j.xtype="checkbox";break}j.fieldLabel=h.label;j.name=h.name;h.__dw=a.add(j)})}else{a.setVisible(false)}},initComponent:function(){var e=this,b=new Date(),d=new Date(),c,g=[],a=[],f=[];e.title=IRm$.r1("L_REG_SCH");d.setDate(d.getDate()+7);for(c=0;c<31;c++){g.push({xtype:"checkbox",boxLabel:""+(c+1)+"",name:"f_"+c})}g.push({xtype:"checkbox",name:"f_lday",boxLabel:"Last day"});for(c=0;c<12;c++){a.push({xtype:"checkbox",boxLabel:""+(c+1),name:"m_"+c})}if(e.programs&&e.programs.length){for(c=0;c<e.programs.length;c++){f.push({name:e.programs[c].name,value:e.programs[c].java_class})}}$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",name:"mform",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:IRm$.r1("L_GENERAL_OPTION"),layout:"anchor",items:[{xtype:"combobox",fieldLabel:"Job type",name:"scp",store:{fields:["name","value"],data:f},queryMode:"local",eidtable:false,valueField:"value",labelField:"name",displayField:"name",hidden:e.programs?false:true,emptyText:IRm$.r1("B_REQ"),listeners:{change:function(h,l,j,k){this._update_parmas(l)},scope:this}},{xtype:"textfield",fieldLabel:"Job name",name:"scname",allowBlank:false,emptyText:IRm$.r1("B_REQ")},{xtype:"combobox",fieldLabel:IRm$.r1("L_JB_STAT"),name:"pstatus",hidden:(this.sid?false:true),editable:false,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_ACTIVE"),value:"A",selected:true},{name:IRm$.r1("B_INACTIVE"),value:"N"}]},valueField:"value",labelField:"name",displayField:"name"}]},{xtype:"fieldset",title:IRm$.r1("L_SC_ACTION"),layout:"anchor",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_NOTI_EMAIL"),name:"a_1",boxLabel:IRm$.r1("B_ENABLED"),listeners:{change:function(k){var j=this,l=k.getValue(),h=j.down("[name=f_opt_em]");h.setVisible(l)},scope:this}},{xtype:"fieldcontainer",layout:"anchor",name:"f_opt_em",hidden:true,items:[{xtype:"combobox",fieldLabel:IRm$.r1("L_OUTP_TYPE"),name:"a_1a",editable:false,queryMode:"local",store:{xtype:"store",fields:["name","value"],data:[{name:"Select",value:""},{name:"HTML Link",value:"link"},{name:"CSV Data",value:"csv"},{name:"Excel File",value:"excel"}]},valueField:"value",displayField:"name",value:""},{xtype:"textarea",name:"a_1b",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_CC")},{xtype:"textarea",name:"a_1c",anchor:"100%",fieldLabel:IRm$.r1("L_MAIL_BD")}]}]},{xtype:"fieldset",name:"_params",title:IRm$.r1("B_PARAMTERS"),layout:"anchor",items:[],hidden:true},{xtype:"fieldset",title:IRm$.r1("B_SCHEDULE"),layout:"anchor",items:[{xtype:"combobox",name:"sctype",editable:false,queryMode:"local",allowBlank:false,emptyText:IRm$.r1("B_REQ"),fieldLabel:IRm$.r1("L_SC_CT"),store:{xtype:"store",fields:["name","value"],data:[{name:"Select One",value:"",selected:true},{name:IRm$.r1("L_SC_C1"),value:"C1"},{name:IRm$.r1("L_SC_C3"),value:"C3"},{name:IRm$.r1("L_SC_C2"),value:"C2"}]},valueField:"value",displayField:"name",value:"",listeners:{change:function(k,j,h,o){var q=this,r=q.down("[name=f_runafter]"),p=q.down("[name=f_cron]"),l=q.down("[name=f_runat]"),m=q.down("[name=c2_r1]");r.setVisible(j=="C1");p.setVisible(j=="C2");l.setVisible(j=="C3");m.setVisible(j=="C2")},scope:this}},{xtype:"combobox",fieldLabel:IRm$.r1("L_SCC_TYPE"),name:"c2_r1",editable:false,queryMode:"local",valueField:"value",labelField:"name",displayField:"name",hidden:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_SCC_DATE"),value:""},{name:IRm$.r1("L_SCC_REC"),value:"R"}]},listeners:{change:function(k){var m=this,l=k.getValue()=="R",j=m.down("[name=p_r1]"),h=m.down("[name=p_r2]");j.setVisible(!l);h.setVisible(l)},scope:this}}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C1"),hidden:true,name:"f_runafter",layout:"anchor",items:[{xtype:"numberfield",name:"c1_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c1_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:20},{xtype:"numberfield",name:"c1_ss",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_SECOND"),value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_C3"),hidden:true,name:"f_runat",layout:"anchor",items:[{xtype:"numberfield",name:"c3_hh",minValue:0,maxValue:24,fieldLabel:IRm$.r1("B_HOUR"),value:0},{xtype:"numberfield",name:"c3_mm",minValue:0,maxValue:59,fieldLabel:IRm$.r1("B_MINUTE"),value:10}]},{xtype:"fieldcontainer",layout:{type:"vbox",align:"stretch"},hidden:true,name:"f_cron",items:[{xtype:"fieldset",title:IRm$.r1("L_SCC_REC"),name:"p_r2",hidden:true,layout:"anchor",items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_EVERY"),layout:"hbox",items:[{xtype:"numberfield",name:"c2_ri",minValue:1,maxValue:59,value:5,width:130},{xtype:"combobox",name:"c2_rp",editable:false,queryMode:"local",width:120,emptyText:IRm$.r1("B_REQ"),store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("B_MINUTE"),value:"M"},{name:IRm$.r1("B_HOUR"),value:"H"}]},valueField:"value",displayField:"name"},{xtype:"container",flex:1}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_FR"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",width:40},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80},items:[{xtype:"numberfield",name:"c2_rh1",minValue:0,maxValue:23,value:0,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm1",minValue:0,maxValue:59,value:0,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs1",hidden:true,minValue:0,maxValue:59,value:0}]}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_T_TO"),layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",width:40},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:80},items:[{xtype:"numberfield",name:"c2_rh2",minValue:0,maxValue:23,value:23,fieldLabel:IRm$.r1("B_HOUR")},{xtype:"numberfield",name:"c2_rm2",minValue:0,maxValue:59,value:59,fieldLabel:IRm$.r1("B_MINUTE")},{xtype:"numberfield",name:"c2_rs2",minValue:0,maxValue:59,value:59,hidden:true}]}]}]},{xtype:"fieldset",title:IRm$.r1("L_SCC_DATE"),name:"p_r1",layout:"anchor",items:[{xtype:"numberfield",fieldLabel:IRm$.r1("B_HOUR"),name:"c2_hh",minValue:0,maxValue:23,value:23},{xtype:"numberfield",fieldLabel:IRm$.r1("B_MINUTE"),name:"c2_mm",minValue:0,maxValue:59,value:0},{xtype:"numberfield",fieldLabel:IRm$.r1("B_SECOND"),name:"c2_ss",minValue:0,maxValue:59,value:0}]},{xtype:"fieldset",title:IRm$.r1("L_SC_PR"),name:"f_period",layout:"anchor",items:[{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_FR"),name:"c2_from",format:"Y-m-d",value:b},{xtype:"datefield",fieldLabel:IRm$.r1("B_DT_TO"),name:"c2_to",format:"Y-m-d",value:d}]},{xtype:"fieldset",title:"Day of Week",name:"f_dw",checkboxToggle:true,collapsed:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Sunday",name:"c_SU"},{xtype:"checkbox",boxLabel:"Monday",name:"c_MO"},{xtype:"checkbox",boxLabel:"Tuesday",name:"c_TU"},{xtype:"checkbox",boxLabel:"Wednesday",name:"c_WE"},{xtype:"checkbox",boxLabel:"Thursday",name:"c_TH"},{xtype:"checkbox",boxLabel:"Friday",name:"c_FR"},{xtype:"checkbox",boxLabel:"Saturday",name:"c_SA"}]},{xtype:"fieldset",title:"Day of Month",name:"fs_dm",checkboxName:"fs_dm_c",checkboxToggle:true,collapsed:true,items:g},{xtype:"fieldset",title:"Month",name:"fs_m",checkboxName:"fs_m_c",checkboxToggle:true,collapsed:true,layout:"anchor",items:a},{xtype:"fieldset",title:"Yearly",name:"f_y",checkboxName:"f_y_c",checkboxToggle:true,collapsed:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.$f3()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(j){var h=this;h._IFd()}}});IG$.s$mr.superclass.initComponent.apply(this,arguments)}});IG$.s$ml=$s.extend($s.window,{modal:false,region:"center",layout:"fit",closable:false,resizable:false,width:650,height:520,autoHeight:false,parentnodepath:null,itemtype:null,parentuid:null,callback:null,_IFd:function(){var a=this;if(a._ILa){a.down("[name=b_sc_load]").setValue(a._ILa.b_sc_load=="T")}a.l1()},l1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"22",payload:IG$._I2d({uid:this.uid,action:"list"},"uid;action"),mbody:IG$._I2e({})},a,a.rs_l1,null);b._l()},rs_l1:function(a){var d=this,h=IG$._I18(a,"/smsg"),g,c,e=[],f,b=d.down("[name=scgrid]");if(h){g=IG$._I26(h);for(c=0;c<g.length;c++){f=IG$._I1c(g[c]);switch(f.pstatus){case"A":f.pstatusdesc="Active";break;case"N":f.pstatusdesc="Inactive";break;default:f.pstatusdesc="N/A";break}f.uptdate_desc=IG$._I40(f.uptdate);f.crtdate_desc=IG$._I40(f.crtdate);e.push(f)}}b.store.loadData(e)},l2:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"22",payload:IG$._I2d({uid:this.uid,sid:b,action:"joblist"},"uid;sid;action"),mbody:IG$._I2e({})},a,a.rs_l2,null);c._l()},rs_l2:function(b){var e=this,h=IG$._I18(b,"/smsg"),g,d,a=[],f,c=e.down("[name=jobgrid]");if(h){g=IG$._I26(h);for(d=0;d<g.length;d++){f=IG$._I1c(g[d]);switch(f.pstatus){case"I":f.pstatusdesc="Running";break;case"C":f.pstatusdesc="Completed";break;case"Q":f.pstatusdesc="Queue Waiting";break;case"X":f.pstatusdesc="Running";break;case"T":f.pstatusdesc="Cancel Queue";break;case"M":f.pstatusdesc="Cancelled";break;default:f.pstatusdesc="N/A";break}f.crtdate_desc=IG$._I40(f.crtdate);f.uptdate_desc=IG$._I40(f.uptdate);a.push(f)}}c.store.loadData(a)},cf1:function(){var a=this;if(a._ILa){a._ILa.b_sc_load=a.down("[name=b_sc_load]").getValue()?"T":"F"}a.close()},cf3:function(a,b){var c=this;if(c.runner&&c.runner._ILd){c.runner._ILd.call(c.runner,a,b)}},initComponent:function(){var a=this;a.title=IRm$.r1("L_LST_SCH");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",layout:{type:"vbox",align:"stretch"},height:160,title:"Related Schedules",items:[{xtype:"gridpanel",flex:1,name:"scgrid",store:{xtype:"store",fields:["sid","userid","objuid","crtdate","uptdate","name","pstatus","pstatusdesc","uptdate_desc","sctype","scoption","a_1","a_1a","a_1b","a_1c"]},columns:[{xtype:"gridcolumn",text:"Schedule name",dataIndex:"name",tdCls:"igc-td-link",flex:1},{xtype:"gridcolumn",text:"Status",tdCls:"igc-td-link",dataIndex:"pstatusdesc",width:50},{xtype:"gridcolumn",text:"Updated",dataIndex:"uptdate",width:80},{xtype:"actioncolumn",width:60,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,h,d){var b=e,c=b.store,g=c.getAt(h);var f=new IG$.s$mr({sid:g.get("sid"),uid:this.uid,callback:new IG$._I3d(this,this.l1),req:this.req});IG$._I_5(this,f)},scope:this}]}],listeners:{cellclick:function(b,d,p,h,o,q,j,k){var m=this,c=h.get("sid");if(p==0){var g=b,r=g.store,f=r.getAt(q);var l=new IG$.s$mr({sid:f.get("sid"),uid:m.uid,callback:new IG$._I3d(m,m.l1),req:m.req});IG$._I_5(m,l)}else{if(c&&p==1){m.l2(c)}}},scope:this}},{xtype:"checkbox",name:"b_sc_load",labelWidth:200,fieldLabel:"Load Schedule on Init",boxLabel:IRm$.r1("B_ENABLE")}]},{xtype:"fieldset",layout:"fit",height:240,title:"Job History",items:[{xtype:"gridpanel",name:"jobgrid",store:{xtype:"store",fields:["sid","jid","crtdate","uptdate","pstatus","executeid","uptdate_desc","crtdate_desc","pstatusdesc"]},columns:[{text:"Updated Date",flex:1,tdCls:"igc-td-link",dataIndex:"uptdate_desc"},{text:"Started At",flex:1,dataIndex:"crtdate_desc"},{text:"Status",width:80,dataIndex:"pstatusdesc"},{text:"ExID",width:110,dataIndex:"executeid"}],listeners:{cellclick:function(b,c,l,g,k,m,h,j){var f=b,o=f.store,d=o.getAt(m);if(l==0){this.cf3(d.get("sid"),d.get("jid"))}},scope:this}}]}]}],buttons:[{text:"Register",handler:function(){var b=new IG$.s$mr({uid:this.uid,callback:new IG$._I3d(this,this.l1),req:this.req});IG$._I_5(this,b)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.cf1()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$.s$ml.superclass.initComponent.apply(this,arguments)}});IG$._Idba=$s.extend($s.panel,{_d6:[],selvalues:null,sK3:function(){this.setEditorLayout()},_IFd:function(){var g=this,c=g.m4,e,b=g.down("[name=rbeditortype]"),l=g.down("[name=rbvaluetype]"),d=g.down("[name=delimiter]"),f=g.down("[name=prompttype]"),k,j,h;g.m1=g.down("[name=cnormalvalue]");g.m2=g.down("[name=clongvalue]");g.m3=g.down("[name=csecondvalue]");g.m4a=g.down("[name=fieldeditortype]");g._d6=[];g.formula="";g._d7=false;g._d8=false;g._d9=false;g.selvalues=null;g.l_item=[];if(c){if(g.targetitem){c._d6=[g.targetitem]}if(c._d6&&c._d6.length>0){g.down("[name=itemname]").setValue(c._d6[0].name);for(e=0;e<c._d6.length;e++){g._d6.push(c._d6[e])}}if(c.l_item&&c.l_item.length){g.down("[name=l_item1]").setValue(c.l_item[0].name);c.l_item.length>1&&g.down("[name=l_item2]").setValue(c.l_item[1].name);for(e=0;e<c.l_item.length;e++){g.l_item.push(c.l_item[e])}}if(c.values&&c.values.length>0){g.selvalues=[];for(e=0;e<c.values.length;e++){g.selvalues.push(c.values[e])}}g.down("[name=cop]").setValue(c.operator);g.down("[name=opisnot]").setValue(c.opisnot);d.setValue(c.delimiter);f.setValue(c.promptEditor);var a=null;if(c.valuetype=="field"){l.setValue("field")}else{if(c._d7){l.setValue("prompt")}else{if(c._d9){l.setValue("sql")}else{l.setValue("normal")}}}if(c._d8){b.setValue("input")}else{b.setValue("list")}g.sK3();k=g.m1.isVisible();j=g.m2.isVisible();h=g.m3.isVisible();if(h){g.m4.values&&g.m4.values.length>1&&g.down("[name=secondvalue]").setValue(this.m4.values[1].value||this.m4.values[1].code);g.m4.values&&g.m4.values.length&&g.down("[name="+(k?"normalvalue":"longvalue")+"]").setValue(this.m4.values[0].value||this.m4.values[0].code)}else{k&&g.setFilterDesc(g.down("[name=normalvalue]"));j&&g.setFilterDesc(g.down("[name=longvalue]"))}}},_IFf:function(){var g=this,a=g.m4,h=g.down("[name=rbeditortype]").getGroupValue(),j=g.down("[name=rbvaluetype]").getGroupValue(),b=g.down("[name=delimiter]").getValue(),f=g.down("[name=prompttype]").getValue(),c,d;a._d6=g._d6;a.operator=g.down("[name=cop]").getValue();a.opisnot=g.down("[name=opisnot]").getValue();a.valuetype=j;a._d7=(j=="prompt")?true:false;a._d9=(j=="sql")?true:false;a._d8=true;a.delimiter=b||";";a.promptEditor=f;a.l_item=g.l_item;if(!a._d7&&!a._d9){if(h=="input"){if(g.m1.isVisible()){c=g.down("[name=normalvalue]").getValue();a.values=[{code:c,text:c}]}else{if(g.m2.isVisible()){c=g.down("[name=longvalue]").getValue();if(a.operator==6){c=c.split(b);a.values=[];for(d=0;d<c.length;d++){if(c[d]!=""){a.values.push({code:c[d],text:c[d]})}}}else{a.values=[{code:c,text:c}]}}}if(a.operator==8){var e=g.down("[name=secondvalue]").getValue();a.values.push({code:e,text:e})}}else{a._d8=false;a.values=g.selvalues}}else{c=g.down("[name=longvalue]").getValue();a.values=[{code:c,text:null}]}},setEditorLayout:function(){var q=this,u=q.down("[name=rbeditortype]").getGroupValue(),p=q.down("[name=fieldeditortype]"),m=q.down("[name=rbvaluetype]").getGroupValue(),h=q.down("[name=cop]").getValue(),b=q.down("[name=btnnormalvalue]"),e=q.down("[name=btnlongvalue]"),o=q.down("[name=btnsecondvalue]"),r=q.down("[name=delimiter]"),s=q.down("[name=normalvalue]"),k=q.down("[name=longvalue]"),f=q.down("[name=secondvalue]"),l=q.down("[name=prompttype]"),g=q.down("[name=csfield]"),j=q.down("[name=cs_f2]"),d=false,c=false,a=false;if(m=="normal"){p.show();l.hide();switch(h){case 1:case 2:case 3:case 4:case 5:switch(u){case"list":case"input":d=true;break;case"textarea":c=true;break;case"fileload":d=true;break}break;case 6:case 9:c=true;break;case 7:d=true;break;case 8:d=true;a=true;break}if(u=="input"){b.hide();e.hide();o.hide();s.setReadOnly(false);k.setReadOnly(false);f.setReadOnly(false);if(c){r.show()}else{r.hide()}}else{if(u=="list"){b.show();e.show();o.show();s.setReadOnly(true);k.setReadOnly(true);f.setReadOnly(true);r.hide()}}g.hide()}else{if(m=="field"){b.hide();e.hide();o.hide();r.hide();p.hide();k.setReadOnly(false);g.show();j.setVisible(h==8);l.hide()}else{b.hide();e.hide();o.hide();r.hide();p.hide();k.setReadOnly(false);if(m=="prompt"){l.show()}else{l.hide()}g.hide();c=true}}(d)?q.m1.show():q.m1.hide();(c)?q.m2.show():q.m2.hide();(a)?q.m3.show():q.m3.hide()},sK4:function(b){if(this._d6.length>0){var a=new IG$._Iac({field:this._d6[0],callback:new IG$._I3d(this,this.rs_sK4,b)});IG$._I_5(this,a)}},rs_sK4:function(c,a){var b=this.down("[name="+a+"]");if(c&&c.length>0){this.selvalues=c}this.setFilterDesc(b)},setFilterDesc:function(c){var a=this.m4,b=a._d2(this.selvalues);c.setValue(b)},_m1:function(a,d,c){var f=this,b,e=f._ILa;b=f.cubeuid||(e?e.cubeuid:"");var g=new IG$._I96({visibleItems:"workspace;folder;metric;measure;formulameasure;custommetric",u5x:{cubebrowse:true,rootuid:b},callback:new IG$._I3d(f,function(j){var h=this,k=new IG$._IE8();k._I1d(k,j);if(c){h[(d||a)]=h[(d||a)]||[];h[(d||a)].push(k)}else{h[(d||a)]=[k]}h.down("[name="+a+"]").setValue(k.name)})});IG$._I_5(this,g)},initComponent:function(){var a=[],b=this;b.addEvents("add_filter");$.each(IG$._IE1,function(c,d){if(typeof(d)!="function"){a.push({field:d[0],label:d[1]})}});$s.apply(this,{layout:{type:(b._cmode==1?"hbox":"vbox"),align:"stretch"},fieldDefaults:{labelWidth:150,anchor:"100%"},items:[{xtype:"fieldset",defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%",labelAlign:b._cmode==1?"top":"left"},items:[{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"itemname",xtype:"textfield",allowBlank:false,readOnly:true,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this._m1("itemname","_d6")},scope:this}]},{xtype:"fieldcontainer",layout:"hbox",items:[{fieldLabel:IRm$.r1("L_OPERATOR"),name:"cop",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:false,store:{fields:["field","label"],data:a},listeners:{select:function(){this.sK3()},scope:this}},{xtype:"checkbox",name:"opisnot",padding:"0 5 0",boxLabel:IRm$.r1("L_OP_NOT"),listeners:{change:function(e){var l=this,c=l.down("[name=cop]"),d=e.getValue(),f,h,g,o={},j=IG$._IE1,m=c.getValue();$.each(j,function(p,q){if(typeof(q)!="function"){o[q[0]]=q[4]}});for(h=0;h<c.store.data.items.length;h++){f=c.store.data.items[h];f.set("label",IRm$.r1(o[f.get("field")]+(d?"_NOT":"")))}c.setValue(m)},scope:this}}]},{name:"valuetype",xtype:"radiogroup",fieldLabel:IRm$.r1("L_VALUE_TYPE"),vertical:false,defaults:{width:70},items:[{boxLabel:"Normal",name:"rbvaluetype",inputValue:"normal",checked:true},{boxLabel:"SQL",name:"rbvaluetype",inputValue:"sql"},{boxLabel:"Column",name:"rbvaluetype",inputValue:"field"},{boxLabel:"Prompt",hidden:true,name:"rbvaluetype",inputValue:"prompt"}],listeners:{change:function(f,c,e,d){this.sK3()},scope:this}}]},{xtype:"panel",layout:"anchor",border:0,autoScroll:true,padding:b._cmode==1?"0 5 0":0,defaults:{labelAlign:b._cmode==1?"top":"left"},dockedItems:[b._cmode==1?{dock:"bottom",xtype:"toolbar",items:["->",{xtype:"button",text:"Add",handler:function(){this.fireEvent("add_filter",this)},scope:this}]}:null],items:[{fieldLabel:IRm$.r1("L_EDITOR_TYPE"),xtype:"fieldcontainer",layout:"anchor",name:"fieldeditortype",defaults:{flex:1,anchor:"100%",hideLabel:true},items:[{name:"editortype",xtype:"radiogroup",vertical:false,plain:true,items:[{boxLabel:IRm$.r1("L_E_VALUE"),name:"rbeditortype",inputValue:"input",checked:true},{boxLabel:IRm$.r1("L_E_LIST"),name:"rbeditortype",inputValue:"list"}],listeners:{change:function(){this.setEditorLayout()},scope:this}}]},{fieldLabel:IRm$.r1("L_VAL_DELIM"),xtype:"textfield",name:"delimiter",width:120},{fieldLabel:IRm$.r1("L_PROMPT_TYPE"),name:"prompttype",xtype:"combobox",queryMode:"local",valueField:"field",displayField:"label",editable:false,hidden:true,store:{fields:["field","label"],data:[{field:1,label:"Text input"},{field:2,label:"Combobox"},{field:3,label:"Date field"},{field:4,label:"Select window"}]},listeners:{select:function(){this.sK3()},scope:this}},{xtype:"fieldcontainer",name:"cnormalvalue",fieldLabel:IRm$.r1("L_F_VALUE"),layout:"hbox",items:[{name:"normalvalue",flex:1,xtype:"textfield"},{xtype:"button",name:"btnnormalvalue",text:"..",width:20,handler:function(){this.sK4("normalvalue")},scope:this}]},{xtype:"fieldcontainer",name:"clongvalue",fieldLabel:IRm$.r1("L_F_VALUE_LNG"),layout:"hbox",hidden:true,items:[{name:"longvalue",flex:1,height:120,xtype:"textarea"},{xtype:"button",name:"btnlongvalue",text:"..",width:20,handler:function(){this.sK4("longvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csecondvalue",fieldLabel:IRm$.r1("L_F_VALUE_TO"),layout:"hbox",hidden:true,items:[{name:"secondvalue",flex:1,xtype:"textfield",fieldLabel:"~"},{xtype:"button",name:"btnsecondvalue",text:"..",width:20,handler:function(){this.sK4("secondvalue")},scope:this}]},{xtype:"fieldcontainer",name:"csfield",hidden:true,layout:"vbox",items:[{xtype:"fieldcontainer",name:"cs_f1",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"l_item1",xtype:"textfield",allowBlank:false,readOnly:true,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this._m1("l_item1","l_item")},scope:this}]},{xtype:"fieldcontainer",name:"cs_f2",fieldLabel:IRm$.r1("L_ITEM"),layout:"hbox",items:[{name:"l_item2",xtype:"textfield",allowBlank:false,readOnly:true,flex:1},{xtype:"button",text:"..",width:20,handler:function(){this._m1("l_item2","l_item",1)},scope:this}]},]}]}]});IG$._Idba.superclass.initComponent.apply(this,arguments)}});IG$._Idb=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:500,height:450,_ILa:null,callback:null,_IFd:function(){var b=this,a=b._IH1;a._IFd.call(a)},_IG0:function(){this.close()},_IFf:function(){var b=this,a=b._IH1;a._IFf.call(a);b.callback&&b.callback.execute();b._IG0()},initComponent:function(){var a=this;a.title=IRm$.r1("T_FILTER");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},layout:"fit",items:[new IG$._Idba({m4:a.m4,name:"mainp",bodyStyle:"padding: 10px",targetitem:a.targetitem,cubeuid:a.cubeuid,_ILa:a._ILa})],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var b=this;a._IH1=b.down("[name=mainp]");setTimeout(function(){b._IFd()},300)}}});IG$._Idb.superclass.initComponent.apply(this,arguments)}});IG$._Iee=$s.extend($s.panel,{field:null,layout:{type:"hbox",align:"stretch"},_IFd:function(){this.down("[name=_3]").setValue("START")},_1:function(){if(this.prompt){var g=new IG$._I3d(this,this.rs__1,prompt);this.prompt.LD.call(this.prompt,this,g)}else{if(this.field){var a=this,e="",f,d=new IG$._I3e(),b=this.down("[name=_4]").getValue(),c=this.down("[name=_3]").getValue();this.field.uid=IG$._I06(this.field.uid);e="<smsg><info option='valuelist'>";if(b!=""){e+="<Filter operator='LIKE'>";switch(c){case"INCLUDE":e+="%"+b+"%";break;case"START":e+=""+b+"%";break;case"END":e+="%"+b+"";break}e+="</Filter>"}f=IG$._I2d({uid:(this.field?this.field.uid:this.prompt.name),option:"valuelist"},"uid;option");e+="</info></smsg>";d.init(a,{ack:"18",payload:f,mbody:e},a,a.rs__1,null,(this.field?this.field.uid:this.prompt.name));d._l()}}},rs__1:function(b,c){var a=new IG$._ICd(b,c),d=this.down("[name=_1]");d.store.loadData(a.data)},_2:function(a){var g,j=this.down("[name=_1]"),m=j.store,k=m.data.items,b=this.down("[name=_2]"),c=b.store,l=c.data.items,e,h;if(a==false){var f=j.selModel.selected.items;if(f&&f.length>0){for(g=f.length-1;g>=0;g--){h=f[g];m.remove(h);c.insert(0,h.data)}}}else{for(g=k.length-1;g>=0;g--){h=k[g];m.remove(h);c.insert(0,h.data)}}},_3:function(a){var g,j=this.down("[name=_1]"),m=j.store,k=m.data.items,b=this.down("[name=_2]"),c=b.store,l=c.data.items,e,h;if(a==false){var f=b.selModel.selected.items;if(f&&f.length>0){for(g=f.length-1;g>=0;g--){h=f[g];c.remove(h);m.insert(0,h.data)}}}else{for(g=l.length-1;g>=0;g--){h=l[g];c.remove(h);m.insert(0,h.data)}}},initComponent:function(){this.items=[{xtype:"container",layout:"anchor",flex:1,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",layout:"hbox",fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelWidth:35,items:[{xtype:"combobox",name:"_3",queryMode:"local",fieldLabel:"",displayField:"name",valueField:"value",editable:false,autoSelect:false,width:50,store:{fields:["name","value"],data:[{name:"Include",value:"INCLUDE"},{name:"Start",value:"START"},{name:"End",value:"END"}]}},{xtype:"textfield",name:"_4",width:100,enableKeyEvents:true,listeners:{keydown:function(a,c,b){if(c.keyCode==13){this._1()}},scope:this}},{xtype:"button",text:"..",width:20,handler:function(){this._1()},scope:this}]},{xtype:"grid",name:"_1",store:{fields:[{name:"code"},{name:"text"}]},stateful:true,flex:1,columnLines:true,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},height:280,columns:[{text:IRm$.r1("B_CODE"),flex:1,sortable:true,dataIndex:"code"},{text:IRm$.r1("B_TEXT"),flex:1,sortable:true,dataIndex:"text"}],viewConfig:{stripeRows:true}}]},{width:40,layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"button",text:">>",handler:function(){this._2(true)},scope:this},{xtype:"button",text:">",handler:function(){this._2(false)},scope:this},{xtype:"button",text:"<",handler:function(){this._3(false)},scope:this},{xtype:"button",text:"<<",handler:function(){this._3(true)},scope:this}]},{xtype:"grid",name:"_2",store:{fields:[{name:"code"},{name:"text"}]},stateful:true,flex:1,columnLines:true,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{text:"Code",flex:1,sortable:false,dataIndex:"code"},{text:"Text",flex:1,sortable:false,dataIndex:"text"}],viewConfig:{stripeRows:true}}];IG$._Iee.superclass.initComponent.apply(this)},listeners:{afterrender:function(){this._IFd()}}});IG$._Iac=$s.extend($s.window,{modal:true,region:"center",layout:"card",closable:false,resizable:false,width:560,height:400,field:null,callback:null,selmode:0,_IG0:function(){this.close()},_IFf:function(){var f=this,d=[],c;if(f.selmode==0){var a=this.down("[name=_2]"),e=a.store.data.items;if(e&&e.length>0){for(c=0;c<e.length;c++){d.push(e[c].data)}}}else{if(f.selmode==1){var b=f.down("[name=txtselvalues]"),g=b.getValue(),e;if(g){e=g.split(";");for(c=0;c<e.length;c++){if(e[c]){d.push({code:e[c],text:e[c]})}}}}}this.callback&&this.callback.execute(d);this._IG0()},sc:function(){var c=this,d=c.getLayout(),a=c.down("[name=btnSelMode]"),b;if(c.selmode==0){c.selmode=1;b=IRm$.r1("B_COMBO_VAL")}else{c.selmode=0;b=IRm$.r1("B_CUST_VAL")}a.setText(b);d.setActiveItem(c.selmode)},initComponent:function(){var a=new IG$._Iee({_ILb:this._ILb,prompt:this.prompt,field:this.field,bodyStyle:"padding: 10px"});this.title=IRm$.r1("T_VALUE_SELECT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[a,{xtype:"form",layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_CVAL_DESC")},{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"txtselvalues",labelAlign:"top",flex:1}]}],buttons:["->",{text:IRm$.r1("B_CUST_VAL"),name:"btnSelMode",handler:function(){var b=this;b.sc()},scope:this},{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Iac.superclass.initComponent.apply(this,arguments)}});IG$._IacU=$s.extend($s.window,{modal:true,region:"center",layout:"card",closable:false,resizable:false,width:500,height:400,field:null,callback:null,selmode:0,_IG0:function(){this.close()},_IFf:function(){var f=this,d=[],c;if(f.selmode==0){var a=this.down("[name=_2]"),e=a.store.data.items;if(e&&e.length>0){for(c=0;c<e.length;c++){d.push(e[c].data)}}}else{if(f.selmode==1){var b=f.down("[name=txtselvalues]"),g=b.getValue(),e;if(g){e=g.split(";");for(c=0;c<e.length;c++){if(e[c]){d.push({code:e[c],text:e[c]})}}}}else{if(f.selmode==2){}}}this.callback&&this.callback.execute({selmode:f.selmode,syntax:f.down("[name=_s1]").getValue(),selection:d});this._IG0()},_1:function(){var b=this,d=b.rec,a=0,c=b.down("[name=_s1]");if(d){if(d.get("ctype")=="formula"){a=2;c.setValue(d.get("syntax"))}}b.sc(a)},sc:function(c){var b=this,e=b.down("[name=_mpanel]"),d=e.getLayout(),a;b.selmode=c;d.setActiveItem(b.selmode)},initComponent:function(){var a=new IG$._Iee({_ILb:this._ILb,prompt:this.prompt,field:this.field});this.title=IRm$.r1("T_VALUE_SELECT");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",layout:"card",name:"_mpanel",tbar:[{text:IRm$.r1("B_COMBO_VAL"),handler:function(){var b=this;b.sc(0)},scope:this},{text:IRm$.r1("B_CUST_VAL"),handler:function(){var b=this;b.sc(1)},scope:this},{text:IRm$.r1("B_FORMULA"),handler:function(){var b=this;b.sc(2)},scope:this}],items:[a,{xtype:"form",layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:IRm$.r1("L_CVAL_DESC")},{xtype:"textarea",fieldLabel:IRm$.r1("B_VALUES"),name:"txtselvalues",labelAlign:"top",flex:1}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",flex:1,name:"_s1"}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Iac.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){a._1.call(a)}}});IG$._Id1=IG$.x_c(IG$.pbW,{modal:true,dm:null,layout:"fit",closable:true,resizable:false,uid:null,width:600,height:400,t:null,c:null,callback:null,_IG0:function(){this.close()},sK2:function(c){var a=this,b=a.down("[name=memo]"),d=new IG$._I3e();if(a.dm=="report"){a.uid=c;b.setValue(c);d.init(a,{ack:"16",payload:IG$._I2d({helpuid:c},"helpuid"),mbody:IG$._I2e({option:"get"})},a,a.rs_u4x,null);d._l()}},rs_u4x:function(f){var m=this,k=this.down("[name=helpdoc]"),p=this.down("[name=memo]"),g=this.down("[name=helptitle]"),c,a,e,d,b,j;m.u5x("cmd_cancel");m.u5m={i:{},c:{}};c=IG$._I18(f,"/smsg/item");IG$._I1f(m.u5m.i,c,"uid;name;nodepath;memo","s");m.uid=m.u5m.i.uid;p.setValue(m.u5m.i.memo);a=IG$._I26(c);for(e=0;e<a.length;e++){b=IG$._I18(a[e],"Title");j=IG$._I18(a[e],"Content");d={lang:IG$._I1b(a[e],"language"),t:IG$._I24(b),c:IG$._I24(j)};this.u5m.c[d.lang]=d}var o=window.useLocale||"en_US";if(!m.u5m.c.en_US){m.u5m.c.en_US={lang:"en_US",t:"",c:""}}if(!m.u5m.c.ko_KR){m.u5m.c.ko_KR={lang:"ko_KR",t:"",c:""}}if(!m.u5m.c[o]){m.u5m.c[o]={lang:o,t:"",c:""}}m.setTitle(m.u5m.c[o].t||IRm$.r1("B_HELP"));var q=m.down("[name=helpdoc]"),k=m.down("[name=helpdocedit]"),h=Base64.decode(m.u5m.c[o].c)||"";$(q.body.dom).html(h);k.setValue(h);g.setValue(m.u5m.c[o].t||"")},u5x:function(d){var g=this,f=g.win,b=f?f.down("[name=btnedit]"):null,h=f?f.down("[name=btnsave]"):null,c=f?f.down("[name=btncancel]"):null,a=g.down("[name=helpmain]"),e=-1,j=IG$._I83.jS2;switch(d){case"cmd_edit":e=1;break;case"cmd_save":g.u6x();break;case"cmd_cancel":if(b&&j){b.setVisible(true);h.setVisible(false)}e=0;break}if(e>-1){a.setActiveItem(e)}},u7l:function(){var c=this,f=this.down("[name=helpdocedit]"),b=this.down("[name=memo]"),d=this.down("[name=helptitle]"),a=window.useLocale||"en_US",e=(this.u5m)?this.u5m.c[a]:null;c.u5m.i.memo=b.getValue();if(e){e.c=Base64.encode(f.getValue());e.t=d.getValue()}},u6x:function(){var a=this,j,b,k,e,f,d,g=new IG$._I3e(),h=window.useLocale||"en_US";if(!a.u5m){d=a.u5m={i:{},c:{}};d.c.en_US={lang:"en_US",t:"",c:""};d.c.ko_KR={lang:"ko_KR",t:"",c:""};if(!d.c[h]){d.c[h]={lang:h,t:"",c:""}}}a.u7l();e="<smsg><item uid='"+(a.u5m.i.uid||"")+"'>";e+="<objinfo doctype='"+(a.dm||"")+"' memo='"+a.u5m.i.memo+"'/>";for(b in a.u5m.c){k=a.u5m.c[b];e+="<HelpContent language='"+k.lang+"'><Title><![CDATA["+(k.t||"")+"]]></Title><Content><![CDATA["+(k.c||"")+"]]></Content></HelpContent>"}e+="</item></smsg>";f={uid:a.u5m.i.uid,memo:a.u5m.i.memo};if(!f.uid){f.address="/SYS_Documents/"+f.memo;f.name=f.memo;f.type="Help"}j=IG$._I2d(f,"uid;memo;pid;name;type;address");g.init(a,{ack:"31",payload:j,mbody:e},a,a.rs_u6x,null);g._l()},rs_u6x:function(a){var b=this,d=IG$._I18(a,"/smsg/item"),c=(d)?IG$._I1b(d,"uid"):null;if(c){b.u5m.i.uid=c}IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},_ic:function(){var a=this;IG$.apply(this,{title:IRm$.r1("B_HELP"),items:[{xtype:"panel",layout:"fit",padding:10,items:[{xtype:"panel",name:"helpmain",layout:"card",items:[{xtype:"panel",name:"helpdoc"},{xtype:"panel",name:"helpedit",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",hidden:(a.dm=="report")?true:false,fieldLabel:"DOCID",name:"memo"},{xtype:"textfield",fieldLabel:"Title",name:"helptitle"},{xtype:"textarea",name:"helpdocedit",flex:1,enableColors:true,enableAlignments:true}]}]}]}],buttons:[{text:"Edit",hidden:this.dm!="report",name:"btnedit",handler:function(){var b=this,c=b.down("[name=peditor]");b.down("[name=btnsave]").setVisible(true);b.u5x.call(b,"cmd_edit")},scope:a},{text:IRm$.r1("L_SAVE_CONTENT"),name:"btnsave",hidden:true,handler:function(){var b=this,c=b.down("[name=peditor]");b.u5x.call(b,"cmd_save")},scope:a},{text:IRm$.r1("B_CLOSE"),name:"btncancel",handler:function(){a.close()},scope:a}],listeners:{afterrender:function(){var b=this;if(b.t!=null&&b.c!=null){b.setTitle(b.t||IRm$.r1("B_HELP"));var c=this.down("[name=helpdoc]");if(c.body){$(c.body.dom).html(b.c)}}else{if(b.uid){b.sK2(b.uid)}}}}});IG$._Id1.superclass._ic.apply(this,arguments)}});IG$.r___={};IG$.r___.a=function(b,c){if(!IG$.r___.C){$.ajax({type:"GET",url:"./data/tip.json?uniquekey="+IG$._I4a(),dataType:"json",timeout:10000,success:function(d){IG$.r___.C=d;IG$.r___.a(b,c)},error:function(g,d,f){}})}else{var a=IG$.r___.C?IG$.r___.C[c]:null;if(a&&window.Ext){Ext.tip.QuickTipManager.register({target:b.getId(),title:a.title,text:a.html})}}};IG$.r___.b=function(b,c){if(!IG$.r___.bC){$.ajax({type:"GET",url:"./data/manual.json?uniquekey="+IG$._I4a(),dataType:"json",timeout:10000,success:function(e){IG$.r___.bC=e;var d=IG$.r___.bC?IG$.r___.bC[b]:null;if(d){c.t=d.t;c.c=d.h;c.show()}else{IG$._I54("Error!","Document for ("+b+") is not prepared yet!",null,null,1,"error")}},error:function(g,d,f){}})}else{var a=IG$.r___.bC?IG$.r___.bC[b]:null;if(a){c.t=a.t;c.c=a.h;c.show()}else{IG$._I54("Error!","Document for ("+b+") is not prepared yet!",null,null,1,"error")}}};IG$._Ib5=$s.extend($s.panel,{region:"center",layout:"fit",closable:false,resizable:false,boder:0,autoHeight:true,callback:null,_d6:[],selvalues:null,prompts:null,valuetimer:-1,_IFd:function(){var g=this,f,b=this,c=[],e=0,d,a=this._IH1;a.removeAll();if(b.prompts&&b.prompts.length>0){$.each(b.prompts,function(k,h){var j="prompt_"+k;h.uid=j;h._ILa=g._ILa;h.sheetindex=g.sheetindex;d={fieldLabel:(h._d6&&h._d6.length>0?h._d6[0].name:h.name||"Prompt"),name:j};switch(h.type){case"selection":h.promptEditor=IG$._IE2.P_SELECT_WIN;break;case"combobox":h.promptEditor=IG$._IE2.P_COMBOBOX;break;case"textinput":h.promptEditor=IG$._IE2.P_TEXTBOX}switch(h.promptEditor){case IG$._IE2.P_COMBOBOX:d.xtype="combo";d.queryMode="local";d.labelAlign="left";d.valueField="code";d.labelField="text";d.editable=false;d.store={fields:["text","code"],data:[]};d.listeners={select:function(){},scope:b};break;case IG$._IE2.P_DATE:d.xtype="datefield";break;case IG$._IE2.P_SELECT_WIN:d.xtype="fieldcontainer";d.combineErrors=false;d.layout="hbox";d.defaults={hideLabel:true},d.name=null;d.items=[{name:j,flex:1,xtype:"textfield",editable:false},{xtype:"button",text:"..",width:20,handler:function(){b.sK4(h,h._d6,j)},scope:b}];break;default:d.xtype="textfield";break}c.push(d)})}for(f=0;f<c.length;f++){a.add(c[f])}if(this.valuetimer>-1){clearTimeout(b.valuetimer)}this.valuetimer=setTimeout(function(){b._IFdV.call(b)},500);a.doLayout();this.doLayout()},_IFdV:function(){var a=this,c=false,d,b,e;a.valuetimer=-1;if(a.prompts&&a.prompts.length>0){for(i=0;i<a.prompts.length;i++){prompt=a.prompts[i];b=prompt.uid;d=this.down("[name="+b+"]");switch(prompt.promptEditor){case IG$._IE2.P_COMBOBOX:prompt.ctrl=d;if(prompt.dataLoaded!==true){e=new IG$._I3d(this,this.r_IFdV,prompt);prompt.LD.call(prompt,a,e)}else{this.r_IFdV(prompt)}break}}}},r_IFdV:function(b,a){switch(a.promptEditor){case IG$._IE2.P_COMBOBOX:if(a.ctrl&&a.result){a.ctrl.store.loadData(a.result.data)}break}},_IG0:function(){this.setVisible(false)},_IFf:function(){if(this.prompts&&this.prompts.length>0){var d,b,a,c,f,e;for(d=0;d<this.prompts.length;d++){a=this.prompts[d];c=a.uid;f=this.down("[name="+c+"]");if(f){switch(a.promptEditor){case IG$._IE2.P_COMBOBOX:e=f.getValue();if(e){if(a.operator==7){e+="%"}}a.values=[{code:e,text:e}];break;case IG$._IE2.P_DATE:e=f.getValue();if(e){e=Ext.Date.format(e,"Ymd");if(a.operator==7){e+="%"}a.values=[{code:e,text:e}]}break;case IG$._IE2.P_SELECT_WIN:e=f.selvalues;a.values=[];if(e&&e.length>0){for(b=0;b<e.length;b++){a.values.push({code:e[b].code,text:e[b].value})}}break;default:e=f.getValue();if(a.operator==6){e=e.split(",");a.values=[];for(b=0;b<e.length;b++){if(e[b]!=""){a.values.push({code:e[b],text:e[b]})}}}else{a.values=[{code:e,text:e}]}break}}}}this.callback&&this.callback.execute()},sK4:function(a,d,c){var b=new IG$._Iac({prompt:a,field:d&&d.length>0?d[0]:null,callback:new IG$._I3d(this,this.rs_sK4,c)});IG$._I_5(this,b)},rs_sK4:function(c,a){var b=this.down("[name="+a+"]");b.selvalues=[];if(c&&c.length>0){b.selvalues=c}this.setFilterDesc(b,a)},setFilterDesc:function(e,d){var a=null,b;for(b=0;b<this.prompts.length;b++){if(this.prompts[b].uid==d){a=this.prompts[b];break}}if(a){var c=a._d2(e.selvalues);e.setValue(c)}},initComponent:function(){this.title=IRm$.r1("T_PROMPT_DLG");this._IH1=new $s.panel({xtype:"panel",autoHeight:true,layout:{type:"anchor",align:"stretch"},border:false,bodyPadding:3,fieldDefaults:{labelWidth:150,anchor:"100%"},items:[]});$s.apply(this,{defaults:{bodyStyle:"padding: 0px"},items:[this._IH1],buttons:["->",{text:IRm$.r1("B_EXECUTE"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this._IG0()},scope:this}],listeners:{afterrender:function(){var a=this;setTimeout(function(){},300)}}});IG$._Ib5.superclass.initComponent.apply(this,arguments)}});IG$._Ie2=$s.extend($s.window,{modal:false,layout:"fit",resizable:false,isWindow:true,closeAction:"destroy",width:500,autoHeight:true,callback:null,_IG0:function(){this.close()},_IFf:function(){this.sK6()},_IFd:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"5",payload:IG$._I2d({uid:this.uid}),mbody:IG$._I2e({option:"diagnostics"})},a,a.rs_sK5,null);b._l()},rs_sK5:function(a){var f=this,e=IG$._I18(a,"/smsg/item"),g,d=new IG$._I3e(),b,c;f.item=new IG$._IE8(e);c=f.item.celloption;this._ropt="basedatatype;valuemax;valuemin;cellwidth;cellheight".split(";");for(b=0;b<f._ropt.length;b++){g=f.down("[name="+f._ropt[b]+"]");g.setValue(c[f._ropt[b]])}$.each(["linecolor","fillcolor"],function(j,h){f.down("[name="+h+"]").setValue(IG$.$gv(c[h]))});g=f.down("[name=axismetric]");g.store.loadData(c.axismetric);if(c.valuemetric){g=f.down("[name=valuemetric]");f.valuemetric=IG$._I1e(c.valuemetric);g.setValue(c.valuemetric?c.valuemetric.name:"")}if(!f.item.cubeuid){d.init(f,{ack:"11",payload:IG$._I2d({uid:this.uid,parenttype:"Cube;DataCube",read:"F"},"uid;parenttype;read"),mbody:IG$._I2e({option:"parentcontent"})},f,f.rs_sK5s,null);d._l()}},rs_sK5s:function(a){var b=this,c=IG$._I18(a,"/smsg/item");if(c){b.item.cubeuid=IG$._I1b(c,"uid")}},sK6:function(){var f,e=this,g,a,d=this.item.celloption;for(a=0;a<this._ropt.length;a++){f=this.down("[name="+this._ropt[a]+"]");d[this._ropt[a]]=f.getValue()}$.each(["linecolor","fillcolor"],function(j,h){d[h]=IG$.$gc(e.down("[name="+h+"]").getValue())});this.item.celloption.axismetric=[];f=this.down("[name=axismetric]");this.item.celloption.valuemetric=this.valuemetric;for(a=0;a<f.store.data.items.length;a++){var c=f.store.data.items[a].data;this.item.celloption.axismetric.push(c)}g="<smsg>"+this.item.C_1()+"</smsg>";var b=new IG$._I3e();b.init(e,{ack:"31",payload:IG$._I2d({uid:this.uid}),mbody:g},e,e.rs_sK6,null,null);b._l()},rs_sK6:function(a){this.callback&&this.callback.execute();this.close()},changeOptionType:function(a){var b=this.down("[name=basedatatype]"),c},P2C:function(a){this.valuemetric=a;if(this.valuemetric){this.down("[name=valuemetric]").setValue(this.valuemetric.name)}},initComponent:function(){var a=this;a.title="Cell Chart Options";$s.apply(this,{items:[{xtype:"panel",border:0,layout:"anchor",bodyPadding:5,items:[{xtype:"combobox",name:"basedatatype",fieldLabel:"Draw Type",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"Percent gauge",value:0},{name:"Area",value:2},{name:"Line",value:3},{name:"Column",value:4},{name:"WinLose",value:7},{name:"Pie",value:8},{name:"BoxPlot",value:9}]},listeners:{afterrender:function(){},change:function(d,b,c){}}},{xtype:"fieldset",title:"Y Axis Setting",layout:"anchor",items:[{xtype:"numberfield",name:"valuemin",fieldLabel:"Minimum",flex:1},{xtype:"numberfield",name:"valuemax",fieldLabel:"Maximum",flex:1}]},{xtype:"fieldset",title:"Field Selections",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",fieldLabel:"Value Field",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"valuemetric"},{xtype:"button",text:"..",handler:function(){var b=new IG$._I96({visibleItems:"workspace;folder;metric;measure;formulameasure;custommetric;datemetric",u5x:{cubebrowse:true,rootuid:a.item.cubeuid}});b.callback=new IG$._I3d(this,this.P2C);IG$._I_5(this,b)},scope:this}]},{xtype:"container",layout:{type:"hbox",align:"stretch",pack:"center"},items:[{xtype:"gridpanel",name:"axismetric",title:"X-Axis Field",hideHeaders:true,stateful:true,store:{fields:["name","type","uid","nodepath"]},flex:1,height:110,viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(d,e,h,l,k){var c=false,g,f,j=false,b=(e.records&&e.records.length>0)?e.records[0]:null;(this==e.view)?e.copy=false:e.copy=true;g=(h)?this.panel.store.indexOf(h):0;if(b&&(b.data.type=="Metric"||b.data.type=="Measure"||b.data.type=="CustomMetric"||b.data.type=="FormulaMeasure"||b.data.type=="DateMetric")){for(f=0;f<this.store.data.items.length;f++){if(this.store.data.items[f].data.uid==b.data.uid){j=true;break}}if(j==false){this.store.add(b.data)}}return c},drop:function(d,e,f,b){var c=f?" "+b+" "+f.get("name"):" on empty view";return false}}},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name"},{text:IRm$.r1("B_TYPE"),flex:1,sortable:false,dataIndex:"type"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(d,f,c){var b=d.store,e=b.getAt(f);b.remove(b.data.items[f])}}]}]},{xtype:"button",text:"..",width:40,handler:function(){var b=new IG$._I96({visibleItems:"workspace;folder;metric;measure;formulameasure;custommetric;datemetric",u5x:{cubebrowse:true,rootuid:a.item.cubeuid},callback:new IG$._I3d(this,function(g){var c=this.down("[name=axismetric]"),h,d=c.store,e,f=false;for(e=0;e<d.data.items.length;e++){h=d.data.items[e];if(h.get("uid")==g.uid){f=true;break}}if(f==false){d.add(g)}})});IG$._I_5(this,b)},scope:this}]}]},{xtype:"fieldset",title:"Options",layout:"anchor",items:[{xtype:"fieldcontainer",anchor:"100%",fieldLabel:"Line Color",layout:"hbox",items:[{xtype:"textfield",name:"linecolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:false,items:[{xtype:"colorpicker",listeners:{select:function(c,b){this.down("[name=linecolor]").setValue("#"+b)},scope:a}},"-"]}}]},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:"Fill Color",layout:"hbox",items:[{xtype:"textfield",name:"fillcolor",width:120},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:false,items:[{xtype:"colorpicker",listeners:{select:function(c,b){this.down("[name=fillcolor]").setValue("#"+b)},scope:a}},"-"]}}]},{xtype:"numberfield",fieldLabel:"Width",name:"cellwidth",minValue:50,maxValue:400},{xtype:"numberfield",fieldLabel:"Height",name:"cellheight",minValue:20,maxValue:300}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this._IG0()},scope:this}],listeners:{afterrender:function(b){this._IFd()}}});IG$._Ie2.superclass.initComponent.apply(this,arguments)}});IG$._IB6=$s.extend($s.window,{modal:true,region:"center",layout:{type:"vbox",align:"stretch"},closable:false,resizable:false,width:500,height:400,_IG0:function(){this.close()},P2C:function(c){var b=this,a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d(c),mbody:IG$._I2e({option:"recent",btype:"L",mode:"register"})},b,function(d){});a._l()},_a1:function(){var c=this,e=c.cubeobj;if(e&&e.uid){var a=c.reporttype,b=e.type.toLowerCase(),d;c.P2C(e);d=IG$.xAM(b);c.p$2D(d,a);c.down("[name=fcube]").setValue(e.name)}},p$2D:function(a){this.reporttype=a},p$2E:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"11",payload:IG$._I2d({uid:a.cubeobj.uid}),mbody:IG$._I2e({option:"translate"})},a,a.rs_p$2E,null);b._l()},rs_p$2E:function(a){var b=this,c=IG$._I18(a,"/smsg/item"),d;if(c){d=IG$._I1c(c);b.cubeobj.name=d.name;b.cubeobj.nodepath=d.nodepath;b.cubeobj.itemtype=d.type;b.cubeobj.type=d.type;b._a1()}},a1:function(c,a){var b=this;$.each(c,function(e,d){var g=IG$._I1c(d),f;g.itemtype=g.type;f=$("<li class='ig-r-clist'><div></div><span title='"+g.nodepath+"'>"+g.name+"</span></li>");f.bind("click",function(){b.cubeobj=g;b._a1.call(b)});a.append(f)})},_d1:function(){var e=this,b=e.down("[name=m_k]").getValue(),j={option:"search",name:b,typelist:"Cube;MCube;DataCube;MDBCube;SQLCube;NoSQL",typemode:"1"},f=new IG$._I3e(),c=e.down("[name=recentitems]"),h=$(c.el.dom),d=$("<ul></ul>"),a=$("#search",h),g=$(".searchcontainer",h);a.hide();if(j.name){a.show();g.empty();d.appendTo(g);f.init(e,{ack:"11",payload:IG$._I2d({}),mbody:IG$._I2e(j)},e,function(k){var l=this,o=IG$._I18(k,"/smsg/result"),m=o?IG$._I26(o):null;if(m){l.a1(m,d,1)}},null,null);f._l()}},initComponent:function(){var b=this,a=IG$._I83.jS1.l3.charAt(0)=="P"?true:false;$s.apply(this,{defaults:{bodyStyle:"padding:10px"},title:IRm$.r1("L_T_CUBE_SEL"),items:[{html:IRm$.r1("L_M_CUBE_SEL"),height:30,border:false},{xtype:"panel",region:"center",flex:1,border:0,layout:{type:"vbox",align:"stretch"},region:"center",items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("L_M_SUBJ"),items:[{xtype:"textfield",width:160,name:"fcube",allowBlank:false},{xtype:"button",text:"..",handler:function(){var c=this,d=new IG$._I96({visibleItems:"workspace;folder;cube;mcube;datacube;nosql;sqlcube;mdbcube",callback:new IG$._I3d(c,function(f){var e=this;e.cubeobj=f;e._a1.call(e)})});d.show()},scope:this}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:IRm$.r1("B_SEARCH"),items:[{xtype:"textfield",name:"m_k",width:160,enableKeyEvents:true,listeners:{keyup:function(c,d){if(d.keyCode==13){this._d1()}},scope:this}},{xtype:"button",cls:"ig-link-btn",text:"Search",handler:function(){this._d1()},scope:this}]},{xtype:"fieldset",title:IRm$.r1("L_M_SUBJ_REC"),flex:1,layout:"fit",border:1,items:[{xtype:"panel",border:0,flex:1,html:"<div class='recentcube'><span class='title'>Recent Subject</span><div class='recentcontainer'></div><span id='search' class='title' style='display:none;'>Search Results</span><div class='searchcontainer'></div></div>",name:"recentitems"}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){var c=this;c._a1();c.callback&&c.callback.execute(c);c.close()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){var g=this,d=this._ILa,f=this.down("[name=recentitems]"),j=$(f.el.dom),c=$("<ul></ul>"),h=$(".recentcontainer",j),e=new IG$._I3e();if(d&&d.reportmode&&d.cubeuid){g.cubeobj={uid:d.cubeuid};g.p$2E()}c.appendTo(h);e.init(g,{ack:"11",payload:IG$._I2d({}),mbody:IG$._I2e({option:"recent",btype:"L"})},g,function(k){var m=IG$._I18(k,"/smsg"),l=m?IG$._I26(m):null;if(l){g.a1(l,c)}},null,null);e._l()}}});IG$._IB6.superclass.initComponent.apply(this,arguments)}});IG$._I96=$s.extend($s.window,{width:600,height:450,layout:"fit",modal:true,u5x:null,mode:"select",visibleItems:null,xtype:"window",selectedItem:null,selectedPath:null,_IG0:function(){this.close()},fV11:function(b){var a=IG$._I1c(b),c=IG$._I26(b);this.fm11(c,a)},fV10:function(g){var b=g.type.toLowerCase();var h=g.name;var f=g.nodepath;var a=g.uid||g.address;var e=false;if(/(folder|javapackage|workspace|metrics|root|datemetric)/.test(b)==true){var d=this;this.selectedPath={uid:a,nodepath:f,name:h};var c=new IG$._I3e();c.init(null,{ack:"5",payload:IG$._I2d({uid:a}),mbody:IG$._I2e()},d,d.rs_fV10,null);c._l();e=true}return e},rs_fV10:function(a){var c=IG$._I18(a,"/smsg/item"),b=IG$._I1c(c),d=IG$._I26(c);this.fm11(d,b)},_IQ5:IG$._IQ5,r_IQ5:function(k,e){var o=this,q=o.down("[name=datagrid]"),c=(e==4||e==0||e==5||e==1)?"/smsg/item":(e==6?"/smsg/result":"/smsg"),b=IG$._I18(k,c),m=IG$._I26(b),a,j,h,l,f=[],g=null,p,r;o._m1=null;o.l1=e;if(e==0||e==5||e==1){o._m1=IG$._I1c(b);j=o._m1.name;g=o._m1.nodepath;p=o._m1.uid;a=o._m1.type.toLowerCase()}o._IQ8(g,p);for(h=0;h<m.length;h++){l=IG$._I1c(m[h]);l.ltype=l.type.toLowerCase();l.iconcls=IG$._I11(l.ltype);f.push(l)}IG$._I10(f);q.store.loadData(f)},fm11:function(h,e){var a=[],d=this,c=d.down("[name=datagrid]"),f=false,b;d._IQ8(e.nodepath,e.uid);for(b=0;b<h.length;b++){var g=IG$._I1c(h[b]);g.itemtype=g.type||g.itemtype;f=(this.visibleItems==null||(this.visibleItems&&(this.visibleItems+";").indexOf((g.type+";").toLowerCase())>-1))?false:true;if(f==false){a.push(g)}}c.store.clearData();c.store.loadData(a)},_IQ8:function(d,m){if(!this.__ini){return}var l=this,g=l.down("[name=_bc]"),o=$(g.body.dom),a,k=[],h,e,b,f;o.empty();l.bcuid=m,l._gb=[];if(d){a=d.split("/");for(e=1;e<a.length;e++){h={name:a[e],cpath:""};for(b=1;b<e+1;b++){h.cpath+="/"+a[b]}k.push(h)}f=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(o);$.each(k,function(j,q){var p,c,r=j<k.length-1;if(j>0){p=$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(f)}c=$("<li class='"+(r?"qlink":"")+"'>"+(q.lname||q.name)+"</li>").appendTo(f);c.appendTo(f);l._gb.push(q);if(r){c.bind("click",function(){l._IQ5.call(l,0,q.cpath)})}})}},initComponent:function(){var c=this,a={showtoolbar:false,_IH9:this,_IHa:this.fV11,_IHb:this,_IHc:this.fV10,region:"center",name:"__mtree",flex:1,visibleItems:"workspace;folder;"};c.title=(c.mode=="newitem")?IRm$.r1("T_META_SAVE"):IRm$.r1("T_META_SELECT");if(c.u5x){for(var b in c.u5x){a[b]=c.u5x[b]}}a.initpath=c.initpath;c.tree=new IG$._I98(a);$s.apply(this,{items:[{xtype:"container",layout:"border",bodyStyle:"padding: 5px;",items:[{xtype:"container",width:180,region:"west",split:true,layout:{type:"vbox",align:"stretch"},margins:0,items:[{xtype:"panel",bodyPadding:4,layout:{type:"vbox",align:"stretch",defaultMargins:{top:4}},defaults:{xtype:"button",cls:"ig-link-btn",textAlign:"left",scope:this},items:[{text:IRm$.r1("L_C_PR"),cls:"ig-link-btn ig_n_p",handler:function(){this._IQ5(1)}},{text:IRm$.r1("L_C_AL"),cls:"ig-link-btn ig_n_a",handler:function(){this._IQ5(0,"/")}},{text:IRm$.r1("L_C_FC"),cls:"ig-link-btn ig_n_fav",handler:function(){this._IQ5(2)}},{text:IRm$.r1("L_C_MW"),cls:"ig-link-btn ig_n_mw",handler:function(){this._IQ5(5,"/")}},{text:IRm$.r1("L_C_LC"),cls:"ig-link-btn ig_n_rcnt",handler:function(){this._IQ5(3)}}]},c.tree]},{xtype:"panel",region:"center",flex:2,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",name:"_bc",height:22,border:0},{xtype:"grid",name:"datagrid",store:{xtype:"store",fields:["name","lname","description","type","nodepath","memo","uid"]},selModel:{mode:(c.multiselect)?"MULTI":"SINGLE"},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,renderer:function(f,e,d){return d.get("lname")||d.get("name")}},{header:IRm$.r1("B_TYPE"),dataIndex:"type"},{header:IRm$.r1("B_DESC"),dataIndex:"description"}],stripeRows:true,stateful:true,stateId:"grid",flex:1,listeners:{itemdblclick:function(f,d,j,g,l){var h=this,k=h.store.data.items[g].data;if(/workspace|folder|datemetric/.test(k.type.toLowerCase())==true){c.fV10(k)}},itemclick:function(f,d,j,g,l){if(g>-1){var h=this,k=h.store.data.items[g].data;if(/workspace|folder/.test(k.type.toLowerCase())==true){c.fV10(k)}else{c.selectedItem=k;c.txtItemName.setValue(k.name)}}}}}],bbar:[{hideLabel:false,name:"txtItemName",fieldLabel:"Name",xtype:"textfield",flex:3},"-"]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){var f=this,k=f.selectedItem,e=f.down("[name=datagrid]"),g=e.getSelectionModel().selected,d,j;if(f.mode=="select"){if(!k&&f.targetobj!="folder"){IG$._I54(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,f,1,"error");return}else{if(f.targetobj=="folder"){if(!f.selectedPath){IG$._I54(ig$.appname,IRm$.r1("L_SELECT_ITEM"),null,f,1,"error");return}k=f.selectedPath}}if(f.multiselect){k=[];for(d=0;d<g.length;d++){j=g.items[d];k.push(j.data)}}if(f.callback){f.callback.execute(k)}}else{if(this.mode=="newitem"){var h=this.txtItemName.getValue();if(h==""){IG$._I54(ig$.appname,IRm$.r1("L_TYPE_ITEM_NAME"),null,f,1,"error");return}else{if(!f.selectedPath){IG$._I54(ig$.appname,IRm$.r1("L_SELECT_PATH"),null,f,1,"error");return}}f.selectedPath.name=h;if(f.callback){f.callback.execute(f.selectedPath)}}}this.close()},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._I96.superclass.initComponent.call(this)},listeners:{afterrender:function(d,b){var c=d,a=c.tree.down("[name=m_0]");c.datagrid=c.down("[name=datagrid]");c.txtItemName=c.down("[name=txtItemName]");c.__ini=true}}});IG$.p_g1=function(b,a){this.name=b;this.value=a;this.defvalue=a};IG$.p_g1.prototype={set:function(a){this.value=a},get:function(){return this.value},val:function(b){var a=this;if(b){a.set(b)}else{return a.get()}}};IG$._ID0=function(b){var a=this;a.inherit=IG$._ICe;a.inherit(b)};IG$._ID0.prototype=new IG$._ICe();IG$._ID1=function(g,s,d){var r=this,o,m,a,f,q,l,e,c,k;r.properties={visible:"true",border:"0",bordercolor:"#e5e5e5",backgroundcolor:"#ffffff",padding:"2"};r.parentctrl=s;r.position={};r.layout=[];r.pname=(s&&s.name)?s.name:null;r.actionlist={};r._f_columns=[];if(g){r.type=IG$._I1b(g,"type");f=IG$._I18(g,"pos");IG$._I1f(r.position,f,"top;bottom;left;right;width;height;percentwidth;percentheight","i");f=IG$._I18(g,"Properties");q=IG$._I26(f);for(o=0;o<q.length;o++){l=IG$._I29(q[o]);e=IG$._I24(q[o]);e=IG$.trim12(e);r.properties[l]=e}r.name=r.properties.Name;c=IG$._I18(g,"appl/actevents");if(c){c=IG$._I26(c);for(o=0;o<c.length;o++){var h=IG$._I1b(c[o],"name"),u=IG$._I26(c[o]);r.actionlist[h]=[];for(m=0;m<u.length;m++){r.actionlist[h].push(IG$._I1c(u[m]))}}}c=IG$._I18(g,"appl/xparam");if(c&&c.hasChildNodes()){r._xparam=IG$._I17(c)}c=IG$._I18(g,"appl/f_columns");if(c){r._f_columns=[];c=IG$._I26(c);for(o=0;o<c.length;o++){var b=IG$._I1c(c[o]);b.hidden=b.hidden=="T";b.sortable=b.sortable=="T";b.columnwidth=(b.columnwidth?parseInt(b.columnwidth):0);r._f_columns.push(b)}}f=IG$._I18(g,"appl/item");if(f){r.item=new IG$._IE4(f);d.regReportContent.call(d,r.item)}k=IG$._I26(g,"wgt");for(o=0;o<k.length;o++){a=new IG$._ID1(k[o],r,d);a.updatePropertyValue.call(a);r.layout.push(a);if(d){d.controls[a.name]=a}}}};IG$._ID1.prototype={updatePropertyValue:function(h){var g=this,b,d={},j,c=new IG$._ICc(null,null,1),a=c.getControl(g.type.toLowerCase()),e=g.position,f;for(b=0;b<a.p.length;b++){d[a.p[b].name]=a.p[b]}for(j in g.properties){if(d[j]){value=g.properties[j];switch(d[j].datatype){case"boolean":g.properties[j]=(value=="true")?true:false;break;case"number":g.properties[j]=Number(value);break}}}if(h){f=IG$.getControl(g.type,false,true);e.width=f.width;e.height=f.height}},measurePosition:function(b,e){var d=this,c={x:-1,y:-1,w:-1,h:-1},f=d.position,a;f.percentwidth=(typeof f.percentwidth=="undefined")?null:f.percentwidth;f.percentheight=(typeof f.percentheight=="undefined")?null:f.percentheight;f.width=(typeof f.width=="undefined")?null:f.width;f.height=(typeof f.height=="undefined")?null:f.height;f.top=(typeof f.top=="undefined")?null:f.top;f.left=(typeof f.left=="undefined")?null:f.left;f.right=(typeof f.right=="undefined")?null:f.right;f.bottom=(typeof f.bottom=="undefined")?null:f.bottom;if(f.left!=null&&f.right!=null){c.x=f.left;c.w=e.w-f.left-f.right}else{if(f.left!=null){c.x=f.left;c.w=(f.percentwidth!=null)?(e.w-f.left)*f.percentwidth*0.01:(f.width!=null)?f.width:-1}else{if(f.right!=null){c.w=(f.percentwidth!=null)?(e.w-f.right)*f.percentwidth*0.01:(f.width!=null)?f.width:-1;c.x=e.w-c.w}}}if(f.top!=null&&f.bottom!=null){c.y=f.top;c.h=e.h-f.top-f.bottom}else{if(f.top!=null){c.y=f.top;c.h=(f.percentheight!=null)?(e.h-f.top)*f.percentheight*0.01:(f.height!=null)?f.height:-1}else{if(f.right!=null){c.h=(f.percentheight!=null)?(e.h-f.right)*f.percentheight*0.01:(f.height!=null)?f.height:-1;c.y=e.h-c.h}}}return c},getXML:function(){var d=this,b,e=d.actionlist,a,c="<wgt type='"+d.type+"'><pos "+IG$._I20(d.position,"top;bottom;left;right;width;height;percentwidth;percentheight","i")+"/><Properties>";for(b in d.properties){c+="<"+b+"><![CDATA["+d.properties[b]+"]]></"+b+">"}c+="</Properties>";c+="<appl>";if(d.item&&d.item.uid){c+="<item "+IG$._I20(d.item,"uid;description;memo;name;pid;type;updatedate","s")+"/>"}c+="<actevents>";for(b in d.actionlist){if(d.actionlist[b]){c+="<act name='"+b+"'>";for(a=0;a<d.actionlist[b].length;a++){c+="<actitem"+IG$._I20(d.actionlist[b][a],"name;uid","s")+"/>"}c+="</act>"}}c+="</actevents>";if(d._f_columns){c+="<f_columns>";for(a=0;a<d._f_columns.length;a++){c+="<column"+IG$._I20(d._f_columns[a],"name;kname","s")+IG$._I20(d._f_columns[a],"hidden;sortable","b")+IG$._I20(d._f_columns[a],"columnwidth","i")+"/>"}c+="</f_columns>"}if(d._xparam){c+="<xparam>";c+=IG$._I25(d._xparam);c+="</xparam>"}c+="</appl>";if(d.layout&&d.layout.length>0){for(a=0;a<d.layout.length;a++){c+=d.layout[a].getXML()}}c+="</wgt>";return c}};IG$.cdxml=function(a){var b=this;b.xdoc=a};IG$.cdxml.prototype={regReportContent:function(c){var b=this,a;for(a=0;a<b.dashboardreport.length;a++){if(b.dashboardreport[a].uid==c.uid){return}}b.dashboardreport.push(c)},parseContent:function(b){var x=this,p,d,u,s,r,w,o,g,q,k,m;p=IG$._I18(x.xdoc,"/smsg/item");x.tmpl=null;x.pobj=b;x.controls={};x.eventseq=0;x.events={};x._l21={onload:null,ontimer:null};x._l22="";x._l23=[];x.dashboardreport=[];x.page_params=[];x.page_param_map={};x.rcs=[];if(p){x.item=IG$._I1c(p);d=IG$._I18(p,"tmpl");if(d){x.tmpl=IG$._I1c(d)}x.layout=[];d=IG$._I18(p,"Layout");if(d!=null){m=IG$._I1c(d);x.autowidth=m.autowidth=="F"?false:true;x.autoheight=m.autoheight=="F"?false:true;x.vscroll=m.vscroll=="T";x.hscroll=m.hscroll=="T";x.width=m.width?parseInt(m.width):800;x.height=m.height?parseInt(m.height):600;x.minwidth=m.minwidth?parseInt(m.minwidth):500;x.minheight=m.minheight?parseInt(m.minheight):500;x.cls=m.cls||"";x.background=m.background||"";u=IG$._I26(d,"wgt");for(s=0;s<u.length;s++){g=new IG$._ID1(u[s],null,x);g.updatePropertyValue.call(g);x.layout.push(g);x.controls[g.name]=g}}d=IG$._I18(p,"ActiveScript");if(d){x._l22=IG$._I24(d)}d=IG$._I18(p,"ConditionScript");if(d){x._cs=IG$._I24(d)}b&&x._l24();d=IG$._I18(p,"page_params");if(d){u=IG$._I26(d);for(s=0;s<u.length;s++){q=IG$._I1a(u[s],"name");k=IG$._I1a(u[s],"value");m=new IG$.p_g1(q,k);m.type=IG$._I1b(u[s],"type")||"var";m.ctrltype=IG$._I1b(u[s],"ctrltype");x.page_params.push(m);x.page_param_map[m.name]=m}if(x.page_param_map.userid){x.page_param_map.userid.val(IG$._I83.jS1.u1)}else{m=new IG$.p_g1("userid",IG$._I83.jS1.u1);m.type="var";x.page_params.push(m);x.page_param_map[m.name]=m}}d=IG$._I18(p,"actevents");if(d){u=IG$._I26(d);var a,y,l,h,c;for(s=0;s<u.length;s++){a=IG$._I1b(u[s],"name");y=IG$._I1b(u[s],"desc");if(a.indexOf("_")>-1){c=a.substring(a.indexOf("_")+1);if(c!=""&&c.length>0){x.eventseq=Math.max(x.eventseq,Number(c)+1)}}h=[];l=IG$._I26(u[s]);for(r=0;r<l.length;r++){h.push(new IG$._ID0(l[r]))}x.events[a]={name:a,desc:y,actionlist:h}}}d=IG$._I18(p,"appl_acts");if(d){u=IG$._I26(d);for(s=0;s<u.length;s++){var f=IG$._I1b(u[s],"name"),e=IG$._I26(u[s]);x._l21[f]=[];for(r=0;r<e.length;r++){x._l21[f].push(IG$._I1c(e[r]))}}}d=IG$._I18(p,"applData");if(d){x.applicationdata=[];u=IG$._I26(d);for(s=0;s<u.length;s++){w=false;o=IG$._I1c(u[s]);for(r=0;r<x.applicationdata.length;r++){if(x.applicationdata[r].uid==o.uid){w=true;break}}if(w==false){x.applicationdata.push(o)}}}}},_l24:function(){var b=this,a=b.item.uid,c=Base64.decode(b._l22);b.m_d$$mj=new IG$.d$$mj("cls_"+a.replace("-","_"));b.m_d$$mj._l5.call(b.m_d$$mj,c);b.m_d$$mj._l6.call(b.m_d$$mj,b.controls,b.pobj);b._l23=b.m_d$$mj._l8.call(b.m_d$$mj)},getLayout:function(){var c=this,a,b=["<Layout"];b.push(IG$._I20(c,"autowidth;autoheight;vscroll;hscroll","b"));b.push(IG$._I20(c,"width;height;minwidth;minheight","i"));b.push(IG$._I20(c,"cls;background","s"));b.push(">");if(c.layout&&c.layout.length>0){for(a=0;a<c.layout.length;a++){b.push(c.layout[a].getXML())}}b.push("</Layout>");return b.join("")},setLayout:function(f){var d=this,a=IG$._I13(f),c=false,g,h,b,e;if(a){g=IG$._I18(a,"/Layout");if(g){c=true;h=IG$._I26(g,"wgt");d.layout=[];d.controls={};for(b=0;b<h.length;b++){e=new IG$._ID1(h[b],null,d);e.updatePropertyValue.call(e);d.layout.push(e);d.controls[e.name]=e}}}return c},getXML:function(){var e=this,c,b=e.events,a,d=["<smsg><item "+IG$._I20(e.item,"uid;name;nodepath;type","s")+">"];if(e.tmpl&&e.tmpl.uid){d.push("<tmpl"+IG$._I20(e.tmpl,"uid;name;nodepath;type","s")+"/>")}d.push(e.getLayout());d.push("<ActiveScript><![CDATA["+e._l22+"]]></ActiveScript>");d.push("<actevents>");$.each(b,function(f,h){var g,j=b[f];d.push("<actevent name='"+f+"' desc='"+j.desc+"'>");for(g=0;g<j.actionlist.length;g++){d.push(j.actionlist[g].getXML())}d.push("</actevent>")});d.push("</actevents>");d.push("<appl_acts>");for(a in e._l21){if(e._l21[a]){d.push("<act name='"+a+"'>");if(e._l21[a]){for(c=0;c<e._l21[a].length;c++){d.push("<actitem"+IG$._I20(e._l21[a][c],"name;uid","s")+"/>")}}d.push("</act>")}}d.push("</appl_acts>");d.push("<page_params>");for(c=0;c<e.page_params.length;c++){d.push("<param type='"+(e.page_params[c].type||"")+"' ctrltype='"+(e.page_params[c].ctrltype||"")+"'>");d.push("<name><![CDATA["+e.page_params[c].name+"]]></name>");d.push("<value><![CDATA["+(e.page_params[c].defvalue||"")+"]]></value>");d.push("</param>")}d.push("</page_params>");d.push("<applData>");if(e.applicationdata){for(c=0;c<e.applicationdata.length;c++){d.push("<item "+IG$._I20(e.applicationdata[c],"nodepath;lastupdatedate;memo;name;type;uid","s")+"/>")}}d.push("</applData>");d.push("</item></smsg>");return d.join("")}};IG$._maa=function(a){this.r1={};if(a){this.p1(a)}};IG$._maa.prototype={p1:function(l){var r=this,a,q,c,g,f,e,b,p,s,u,d,o,h;if(l){a=IG$._I18(l,"/smsg/item/output");q=(a?IG$._I26(a):null);if(q){for(g=0;g<q.length;g++){n=IG$._I1b(q[g],"name");t=IG$._I1b(q[g],"type");if(t=="dataset"){p=IG$._I18(q[g],"dataset");b=IG$._I1b(p,"ismapped");b=b=="T";v={ismapped:b,colcount:Number(IG$._I1b(p,"cols")),dbcols:Number(IG$._I1b(p,"cols")),cols:[],data:[]};u=IG$._I18(p,"cols");s=IG$._I26(u);for(f=0;f<s.length;f++){v.cols.push({name:IG$._I1b(s[f],"name")})}u=IG$._I18(p,"data");d=IG$._I24(u).split("\n");for(f=0;f<d.length;f++){if(d[f]){if(b){o={};h=d[f].split("\t");for(e=0;e<v.cols.length;e++){o[v.cols[e].name]=h[e]}v.data.push(o)}else{v.data.push(d[f].split("\t"))}}}}else{v=IG$._I24(q[g])}r.r1[n]={v:v,t:t}}}}}};IG$._I8f=function(e){var x=this,b=this.customMenu,y=e.data,g=y.type.toLowerCase(),p=y.name,w=y.nodepath||"",s=y.uid,r=y.type,k=(y.writable=="T"||y.manage=="T")?true:false,q=(y.manage=="T")?true:false,o=y.issubcube,u=y.isrfolder,l=y.isbo,h,j,c=false;b.removeAll();h=[{text:IRm$.r1("L_EXCEL_LOADER"),iconCls:"icon-excel",hidden:ig$.fm.ig_n_c_lc,handler:function(){this._I90.call(this,"DataCube",s,w,e)},scope:this},"-",{text:IRm$.r1("L_MENU_DB_MODEL"),iconCls:"icon-cubemodel",hidden:ig$.fm.ig_n_dbm,handler:function(){this._I90.call(this,"CubeModel",s,w,e)},scope:this},{text:IRm$.r1("L_ROLAP_CUBE"),iconCls:"icon-cube",hidden:ig$.fm.ig_n_c_rc,handler:function(){this._I90.call(this,"Cube",s,w,e)},scope:this},"-",{text:IRm$.r1("L_NOSQL_CUBE"),iconCls:"icon-nosql",hidden:ig$.fm.ig_n_c_b,handler:function(){this._I90.call(this,"NoSQL",s,w,e)},scope:this},{text:IRm$.r1("L_SQL_CUBE"),iconCls:"icon-sqlcube",hidden:ig$.fm.ig_n_c_sql,handler:function(){this._I90.call(this,"SQLCube",s,w,e)},scope:this},{text:IRm$.r1("L_MDB_CUBE"),iconCls:"icon-mdbcube",hidden:ig$.fm.ig_n_c_msa,handler:function(){this._I90.call(this,"MDBCube",s,w,e)},scope:this}];switch(g){case"root":j={text:IRm$.r1("L_WORKSPACE"),hidden:ig$.fm.ig_n_wks,handler:function(){this._I90.call(this,"Workspace",s,w,e)},scope:this};if(!j.hidden){b.add(j);c=true}break;case"workspace":case"folder":case"rfolder":case"javapackage":if(g=="javapackage"){l=g}var a;if(l){a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this},{text:"Make JavaClass",hidden:ig$.fm.ig_n_jc,handler:function(){this._I90.call(this,"JavaClass",s,w,e)},scope:this}]}else{if(o==null){a=[{text:IRm$.r1("B_FOLDER"),iconCls:"icon-folder",hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this},{text:IRm$.r1("L_MENU_CUBE_WORK"),hidden:ig$.fm.ig_n_cb,menu:h},{text:IRm$.r1("L_REPORT"),iconCls:"icon-report",hidden:ig$.fm.ig_n_rpt,handler:function(){this._I90.call(this,"Report",s,w,e)},scope:this},{text:IRm$.r1("L_UIPAGE"),hidden:true,handler:function(){this._I90.call(this,"UIPage",s,w,e)},scope:this},{text:IRm$.r1("L_DASHBOARD"),iconCls:"icon-dashboard",hidden:ig$.fm.ig_n_dbd,handler:function(){this._I90.call(this,"Dashboard",s,w,e)},scope:this},{text:IRm$.r1("L_HD_BPROC"),hidden:IG$._I83.jS1.l4==true||ig$.fm.ig_n_hb,handler:function(){this._I90.call(this,"BigData",s,w,e)},scope:this}]}else{if(o=="cube"||o=="mcube"||o=="nosql"||o=="mdbcube"||o=="datacube"||o=="sqlcube"){a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this},{text:IRm$.r1("L_CUSTOM_METRIC"),hidden:ig$.fm.ig_n_cm,handler:function(){this._I90.call(this,"CustomMetric",s,w,e)},scope:this},{text:IRm$.r1("L_HIERARCHY"),hidden:ig$.fm.ig_n_hm,handler:function(){this._I90.call(this,"Hierarchy",s,w,e)},scope:this},{text:IRm$.r1("L_DATE_METRIC"),hidden:ig$.fm.ig_n_dm,handler:function(){this._I90.call(this,"DateMetric",s,w,e)},scope:this},{text:IRm$.r1("L_MEASURE"),hidden:ig$.fm.ig_n_ms,handler:function(){this._I90.call(this,"Measure",s,w,e)},scope:this},{text:IRm$.r1("L_FORMULA"),hidden:ig$.fm.ig_n_fm,handler:function(){this._I90.call(this,"FormulaMeasure",s,w,e)},scope:this},{text:IRm$.r1("L_CHART_MEASURE"),hidden:ig$.fm.ig_n_cms,handler:function(){this._I90.call(this,"ChartMeasure",s,w,e)},scope:this},{text:IRm$.r1("L_UDG"),hidden:ig$.fm.ig_n_udg,handler:function(){this._I90.call(this,"GroupField",s,w,e)},scope:this},{text:IRm$.r1("L_GROUP_MEASURE"),hidden:ig$.fm.ig_n_gm,hidden:(o=="mcube"?false:true),handler:function(){this._I90.call(this,"MeasureGroup",s,w,e)},scope:this}]}else{if(u){a=[{text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this},{text:"Make RScript",hidden:ig$.fm.ig_n_f_r,handler:function(){this._I90.call(this,"RScript",s,w,e)},scope:this}]}}}}if(k==true){b.add({text:IRm$.r1("L_MAKEITEM_G"),hidden:ig$.fm.ig_n_f,menu:a,scope:this})}if(IG$._I83.jS2==true){b.add({text:IRm$.r1("L_EXPORT_META"),hidden:ig$.fm.ig_n_exp,handler:function(){this._I93.call(this,{uid:s,name:p,nodepath:w,type:g})},scope:this})}if(g!="folder"&&g!="workspace"&&g!="rfolder"&&g!="javapackage"){b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});b.add({text:IRm$.r1("L_COPY_ITEM",p),hidden:ig$.fm.ig_n_cp,handler:function(){IG$.cb={uid:s,name:p,nodepath:w,type:g}},scope:this})}if(g=="folder"&&(k==true||q==true)&&IG$.cb!=null){b.add({text:IRm$.r1("L_PASTE_ITEM"),handler:function(){this._II7(e)},scope:this})}c=true;break;case"cube":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});c=true;break;case"mcube":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});c=true;break;case"datacube":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});break;case"nosql":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});break;case"sqlcube":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});break;case"mdbcube":if(y.leaf==false&&(k==true||q==true)){b.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",s,w,e)},scope:this})}if(y.leaf==true){b.add({text:IRm$.r1("L_BROWSE_ITEM",p),handler:function(){var z=e;z.data.leaf=false;z.dirty=true;z.expand()},scope:this})}b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});break;case"report":case"compositereport":case"bigdata":case"javaclass":case"uipage":case"cubemodel":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(this.mainPanel){this.mainPanel.m1$7.call(this.mainPanel,s,g,p,w,true,k)}},scope:this});break;case"dashboard":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){this.mainPanel.m1$7.call(this.mainPanel,s,(k?"dashboardedit":"dashboard"),p,w,true,true)},scope:this});c=true;break;case"measure":case"hierarchy":case"measuregroup":case"measuregroupdimension":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(!IG$._Ie1){IG$.x03(ig$.scmap.igcn,new IG$._I3d(this,function(){if(IG$._Ie1){var A=new IG$._Ie1({uid:s,name:p});IG$._I_5(x,A)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}else{var z=new IG$._Ie1({uid:s,name:p});IG$._I_5(x,z)}}});break;case"formulameasure":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){var z=new IG$._Id8({uid:s,name:p});IG$._I_5(x,z)}});break;case"chartmeasure":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){var z=new IG$._Ie2({uid:s,name:p});IG$._I_5(x,z)}});break;case"datemetric":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){var D=e.get("type").toLowerCase(),F=e.get("name"),E=e.get("nodepath"),A=e.get("uid"),C=(e.get("writable")=="T"||e.get("manage")=="T")?true:false,B=(e.get("manage")=="T")?true:false,z=e.get("issubcube");if(x.mainPanel){x.mainPanel.m1$7.call(x.mainPanel,A,D,F,E,true,C)}}});break;case"custommetric":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(!IG$._Ie0){IG$.x03(ig$.scmap.igcn,new IG$._I3d(this,function(){if(IG$._Ie0){var A=new IG$._Ie0({uid:s,name:p});IG$._I_5(x,A)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}else{var z=new IG$._Ie0({uid:s,name:p});IG$._I_5(x,z)}}});break;case"groupfield":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(!IG$._Iae){IG$.x03(ig$.scmap.igcn,new IG$._I3d(this,function(){if(IG$._Ie0){var A=new IG$._Iae({uid:s,name:p});IG$._I_5(x,A)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}else{var z=new IG$._Iae({uid:s,name:p});IG$._I_5(x,z)}}});case"metric":b.add({text:IRm$.r1((k==true?"L_EDIT_ITEM":"L_VIEW_ITEM"),p),handler:function(){if(!IG$._Idf){IG$.x03(ig$.scmap.igcn,new IG$._I3d(this,function(){if(IG$._Idf){var A=new IG$._Idf({uid:s,name:p});IG$._I_5(x,A)}else{IG$._I52(IRm$.r1("L_ERR_L_MOD"))}}))}else{var z=new IG$._Idf({uid:s,name:p});IG$._I_5(x,z)}}});break;case"qicustom":var d=e.get("stype"),f;if(d&&window.qicustom_menus.popupmenu&&window.qicustom_menus.popupmenu[d]){f=window.qicustom_menus.popupmenu[d];if(f.length>0){$.each(f,function(A,z){b.add({text:z.text,handler:function(){if(window.qicustom_menus.popupmenu.handler){var B=window.qicustom_menus.menuitems[e.get("uid")];window.qicustom_menus.popupmenu.handler.call(window,B,z)}}})});c=true}}break;default:break}var m=IG$._I83.jS2;if(g!="qicustom"&&((k==true||q==true)&&((g=="workspace"&&m==true)||g!="workspace"))){b.add({text:IRm$.r1("L_RENAME_ITEM",p),hidden:ig$.fm.ig_n_ren,handler:function(){this._I91.call(this,p,s,w,e)},scope:this});b.add({text:IRm$.r1("L_DELETE_ITEM",p),hidden:ig$.fm.ig_n_del,handler:function(){this._IHf.call(this,s,e)},scope:this});c=true}if(g!="qicustom"&&g!="folder"&&g!="workspace"&&(!e.isRoot||(e.isRoot&&e.isRoot()==false))){b.add({text:IRm$.r1("L_COPY_ITEM",p),handler:function(){IG$.cb={uid:s,name:p,nodepath:w,type:g}},scope:this});c=true}if(g!="qicustom"&&q==true){b.add({text:IRm$.r1("L_OBJECT_AUTH"),hidden:ig$.fm.ig_n_oauth,handler:function(){this._II0.call(this,s,r)},scope:this});b.add({text:IRm$.r1("L_REVISION"),hidden:ig$.fm.ig_n_rev,handler:function(){IG$._I65("CMD_REVISION",s)},scope:this});c=true}if(g!="qicustom"&&(g=="folder"||g=="workspace"||y.leaf==false)){b.add({text:IRm$.r1("L_REFRESH"),handler:function(){this._I92(e)},scope:this})}if(g!="qicustom"&&(q==true&&g=="workspace")){b.add({text:IRm$.r1("L_MGR_FD"),hidden:ig$.fm.ig_n_mgf,handler:function(){this._II8(e)},scope:this})}return c};IG$._IHf=function(c,b){var a=this;IG$._I55(ig$.appname,"Confirm to delete content?",function(f){if(f=="yes"){var d=new IG$._I3e();d.init(a,{ack:"7",payload:"<smsg><item uid='"+c+"'/></smsg>",mbody:IG$._I2e()},a,a.r_IHf,null,b);d._l()}},a,a)};IG$.r_IHf=function(a,c){var b=this;if(c){b._I92(c.parentNode)}b.selectedNode=[];IG$._I54(ig$.appname,IRm$.r1("M_DELETED"),null,b,0,"success")};IG$._I90=function(c,f,b,e,g){var d=this,a=new IG$._I6e({parentnodepath:b,itemtype:c,parentuid:f,callback:new IG$._I3d(d,d.r_I90,[e,g])});IG$._I_5(this,a)},IG$.r_I90=function(c){var b=this,a=c[0],d=c[1];a&&b._I92(a);!a&&b._IQa();d&&d.execute()};IG$._I91=function(e,b,d,c){var a=new IG$._Icd({itemname:e,uid:b,nodepath:d,itemtype:c.data.itemtype||c.data.type,memo:c.data.memo||""});a.callback=new IG$._I3d(this,this.r_I91,c);IG$._I_5(this,a)};IG$.r_I91=function(a){a&&a.parentNode&&this._I92(a.parentNode);!a&&this._IQa()};IG$._II7=function(b){var a=this,c=new IG$._I3e();this.setLoading(true);c.init(a,{ack:"31",payload:IG$._I2d({pid:b.get("uid"),address:IG$.cb.uid},"pid;address"),mbody:IG$._I2e({option:"copy"})},a,a.r_II7,null,b);c._l()};IG$.r_II7=function(a,b){this._I92(b)};IG$._IQ5=function(d,c,a){var g=this,f=new IG$._I3e(),b,h="11",a,e;switch(d){case 0:case 5:h="5";break;case 1:h="5";c=IG$._I83.jS1.sid;e="Workspace";break;case 2:b="favorites";break;case 3:b="recent";break;case 4:b="trashbin";break;case 6:break}f.init(g,{ack:h,payload:IG$._I2d({uid:c,type:(c=="/"?"Workspace":e)}),mbody:IG$._I2e(a||{option:b})},g,g.r_IQ5,null,d);f._l()};IG$._Idd=$s.extend($s.treepanel,{border:0,hideHeaders:true,gridupdate:null,rootuid:null,enableDragDrop:true,enableDD:true,useArrows:true,ddGroup:"_I$RD_G_1",viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"_I$RD_G_1"},listeners:{drop:function(c,d,e,a){var b=e?" "+a+" "+e.get("name"):" on empty view"}}},_IQ3:function(){var c=this,a=c.getRootNode(),d=a.get("uid");if(d!="/"){var b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({uid:d}),mbody:IG$._I2e({option:"translate"})},c,c.r_IQ3,false);b._l()}},r_IQ3:function(a){var d=this,e=IG$._I18(a,"/smsg/item"),b=d.getRootNode(),c;if(e){c=IG$._I1c(e);b.set("name",d.rootname||c.name);b.set("subcube",c.subcube);b.set("nodepath",c.nodepath);b.set("type",c.type);b.set("writable",c.writable);b.set("manage",c.manage);b.set("pnode_type",c.pnode_type);b.set("pnode_uid",c.pnode_uid);b.expand()}},i2:function(){var a=this,b=a.getRootNode();a.ca={};b.dirty=true;b.data.loaded=false;b.data.expanded=false;while(b.firstChild){b.removeChild(b.firstChild)}b.expand()},columns:[{xtype:"treecolumn",text:IRm$.r1("B_NAME"),flex:2,sortable:false,dataIndex:"name",renderer:function(c,b,a){return a.get("lname")||a.get("name")}}],_I8f:IG$._I8f,_I90:IG$._I90,r_I90:IG$.r_I90,_I91:IG$._I91,r_I91:IG$.r_I91,_IHf:IG$._IHf,r_IHf:IG$.r_IHf,_II7:IG$._II7,r_II7:IG$.r_II7,_I92:function(c){var b=c,a=this;if(c.isLeaf()==true){b=c.parentNode}a.selectedNode=[];this.getSelectionModel().select(b);b.dirty=true;b.data.loaded=false;b.data.expanded=false;while(b.firstChild){b.removeChild(b.firstChild)}b.expand(false);a.doComponentLayout()},_I93:function(b){var a=this;a.meta=b;IG$._I55(IRm$.r1("T_EXP_MC"),IRm$.r1("T_EXP_MC_Q"),a.do__I93,a,a)},do__I93:function(d){var a=this,c=a.meta,b=new IG$._I3e();if(c&&d=="yes"){a.setLoading(true);b.init(a,{ack:"5",payload:"<smsg><item"+IG$._I20({uid:c.uid,nodepath:c.nodepath,name:c.name,type:c.type},"uid;nodepath;name;type","s")+"/></smsg>",mbody:IG$._I2e({output:"file"})},a,a.r_I93,null);b._l()}},r_I93:function(a){var d=IG$._I18(a,"/smsg/item"),c,b;if(d){c=IG$._I1b(d,"luid");b=IG$._I1b(d,"filename");if(c&&b){$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:c},{name:"mbody",value:b},{name:"_mts_",value:(IG$._g$a||"")}],"POST")}}},_II8:function(b){var a=new IG$._Ic6({root:{uid:b.get("uid"),name:b.get("name"),type:b.get("type")}});IG$._I_5(this,a)},_II0:function(c,b){var a;a=new IG$._Ic7({uid:c,itemtype:b});a.callback=new IG$._I3d(this,this.r_II0);IG$._I_5(this,a)},r_II0:function(){},c1:function(e){var h=this,d=h.ca,f=e.get("uid"),c=e.get("type").toLowerCase(),j=c=="root"||IG$._I0e(c)<5?true:false,a,g=ig$.c_menus;if(c=="c_menu"){var b=g&&g.menuitems?g.menuitems[f]:null;if(b&&b.handler){b.handler.call(window,b)}}else{if(h._i3){h._i3.execute(e)}else{if(j==false){a=IG$._I7d;a.m1$7.call(a,f,c,e.get("name"),e.get("nodepath"),true,e.get("writable")=="T")}else{if(d[f]){if(h.gridupdate&&h.gridupdate.handler){h.gridupdate.handler.call(h.gridupdate.scope,d[f].datas,d[f].item)}}else{if(!e.isExpanded()){e.expand()}}}}}},initComponent:function(){var a=this,c=a,b=0;a.customMenu=new $s.menu({items:[]});a.mainPanel=IG$._I7d;a.ca={};a.root={name:IRm$.r1("B_WORKSPACE"),expanded:true,type:"Root",uid:a.rootuid||"/"};ig$.uiconfig=ig$.uiconfig||{};ig$.uiconfig.navigator=ig$.uiconfig.navigator||{};$s.apply(this,{store:{xtype:"treestore",pobj:a,requestMethod:"POST",fields:["uid","nodepath","description","manage","memo","name","type","writable","citems","updatedate","pid","pnode_type","pnode_uid","lname"],proxy:{type:"ajax",pobj:a,url:ig$.servlet,extraParams:{cacheid:"",refresh:"T",ack:"5",payload:"",mbody:"",uniquekey:""},actionMethods:{create:"POST",read:"POST",update:"POST",destroy:"POST"},processResponse:function(o,r,h,e,k,f){var z=this,d,q,w,j,A,g,u;if(o===true){d=z.getReader();q=d.readRecords(z.extractResponseData(e));w=q.records;j=w.length;if(q.success!==false){var s=null,y=null,l=null,p=r.node?r.node.get("pnode_type"):null,m=r.node?r.node.get("type"):null,x=p?p.toLowerCase():null;m=m?m.toLowerCase():null;if((/cube|mcube|datacube|nosql|mdbcube|sqlcube/).test(x)){s=x}else{if((/cube|mcube|datacube|nosql|mdbcube|sqlcube/).test(m)){s=x}else{if(x=="rfolder"){y=x}else{if(x=="javapackage"){l=x}}}}if(window.Ext){A=Ext.create("Ext.util.MixedCollection",true,function(B){return B.getId()});A.addAll(w)}for(u=0;u<j;u++){w[u].data.issubcube=s;w[u].data.isrfolder=y;w[u].data.isbo=l;if(window.Ext){g=A.get(w[u].getId());if(g){g.beginEdit();g.set(g.data);g.endEdit(true)}}}$s.apply(r,{response:e,resultSet:q});r.setCompleted();r.setSuccessful()}else{r.setException(q.message);z.fireEvent("exception",this,e,r)}}else{z.setException(r,e);z.fireEvent("exception",this,e,r)}if(typeof k=="function"){k.call(f||z,r)}z.afterRequest(h,o)},reader:{type:"xml",root:"smsg,item",pobj:a,record:"item",show_tree_items:a.show_tree_items,getResponseData:function(d){var f=d.responseText;var e=IG$._I13(f);if(!e){Ext.Error.raise({response:d,msg:"XML data not found in the response"})}return e},c1:function(g){var f=this,h=IG$._I83.jS1,d,e=false;for(d=0;d<h.auth.length;d++){if(g[h.auth[d].name.toLowerCase()]){e=true;break}}return e},prS:function(m,f,h){var k=this,g,l,e,d=ig$.c_menus;for(g=0;g<m.length;g++){l=m[g];l.type="c_menu";l.itemtype=l.type;l.uid="qc_"+(k.muid++);l.leaf=(l.children&&l.children.length>0)?false:true;if(l.auth&&k.c1(l.auth)==false){continue}d.menuitems[l.uid]=l;e=new h(l,b++);e.raw=l;e.iconCls=l.iconCls;e.data.stype=l.stype;f.appendChild(e);if(l.children){k.prS(l.children,e,h)}if(k.implicitIncludes){k.readAssociated(e,l)}}},readRecords:function(j){var k,p=this,u,g,e,r,q,s,l=p.model,x,s,m;p.rawData=j;this.xmlData=j.responseXML;if(j.responseText){this.xmlData=IG$._I13(j.responseText)}var d=(this.xmlData?IG$._I18(this.xmlData,"/smsg/item"):null),h=(this.xmlData?IG$._I27(this.xmlData):null);var w=false;u=true;g=0;e=[];if(d){e=this.extractData(d);g=e.length;w=IG$._I1b(d,"uid")=="/"?true:false}else{if(h=="0x1300"){IG$._I89(null,2)}g=0;e=[]}p.muid=0;m=ig$.c_menus;if(w==true&&m&&m.menus){m.menuitems=m.menuitems||{};for(k=0;k<m.menus.length;k++){s=m.menus[k];s.type="c_menu";s.uid="qc_"+(p.muid++);if(s.auth&&p.c1(s.auth)==false){continue}m.menuitems[s.uid]=s;record=new l(s,b++);record.raw=s;record.hidden=true;record.data.stype=s.stype;record.dirty=true;record.visible=false;e.push(record);if(s.children){p.prS(s.children,record,l)}if(p.implicitIncludes){p.readAssociated(record,s)}}}if(p.model.prototype.fields&&p.lastFieldGeneration!==p.model.prototype.fields.generation){p.buildExtractors(true)}if(this.treepanel&&this.treepanel._IH9&&this.treepanel._IHa){this.treepanel._IHa.call(this.treepanel._IH9,d)}if(p.successProperty){s=p.getSuccess(j);if(s===false||s==="false"){u=false}}if(p.messageProperty){x=p.getMessage(j)}if(window.Ext&&(p.readRecordsOnFailure||u)){r=typeof(j.length)!="undefined"?j:p.getRoot(j);if(r){q=r.length}if(p.totalProperty){s=parseInt(p.getTotal(j),10);if(!isNaN(s)){q=s}}if(r){e=p.extractData(r);g=e.length}}var f={total:q||g,count:g,records:e,success:u,message:x},o=(window.Ext)?new Ext.data.ResultSet(f):f;return o},extractData:function(p){var j=[],s=[],r,f,m=this,h=m.model,d=IG$._I26(p),l,q,e=false,o=false,k,g=IG$._I1c(p);for(l=0;l<d.length;l++){r=m.extractValues(d[l]);s.push(r)}IG$._I10(s);c.ca[g.uid]={datas:s,item:g};if(m.pobj.gridupdate&&m.pobj.gridupdate.handler){m.pobj.gridupdate.handler.call(m.pobj.gridupdate.scope,s,g)}for(l=0;l<s.length;l++){r=s[l];f=r.uid;k=r.type.toLowerCase();e=(!m.visibleItems||(m.visibleItems&&m.visibleItems.indexOf(k+";")>-1))?false:true;if(e==false){o=IG$._I0e(k)<5?true:false}if(e==false&&(o==true||m.show_tree_items==true)){m.processAttributes(r);record=new h(r,b++);record.raw=d[l];record.hidden=true;record.dirty=true;record.visible=false;j.push(record);if(m.implicitIncludes){m.readAssociated(record,d[l])}}}return j},extractValues:function(e){var d=IG$._I1c(e);d.ltype=d.type.toLowerCase();d.iconcls=IG$._I11(d.ltype);return d},processAttributes:function(e){if(!e.name&&!e.uid){e.text="Workspace"}else{e.text=e.name;if(e.type){var g=e.type.toLowerCase();var f=e.memo.toLowerCase(),h=IG$._I0e(g);if(h<5){e.leaf=false}else{if(g=="help"){e.leaf=true;var d=ig$.useLocale||"en_US",j=e["title_"+d];if(j){e.name=Base64.decode(j)||e.name}}else{if(/(folder|workspace|datemetric)/.test(g)==false){e.leaf=true;e.allowDrag=true}}}e.iconCls=(g=="c_menu"?e.iconCls:IG$._I11(g,f))}}}}},listeners:{beforeload:function(e,d){var j;var h=d.node.data,g={},f={excludeprivate:"T",subfolder:"T"};if(h.root==true){if(this.rootuid){if(!h.uid){d.node.set("uid",this.rootuid)}g.uid=this.rootuid}else{if(h.uid&&h.uid.length>0){g.uid=h.uid;j=IG$._I2d(g)}else{g.uid="/";j=IG$._I2d(g)}}g.type=g.uid=="/"?"Workspace":null;j=IG$._I2d(g)}else{g.uid=h.uid;j=IG$._I2d(g)}this.proxy.extraParams={cacheid:"",refresh:"T",ack:"5",payload:j,mbody:IG$._I2e(f),_mts_:IG$._g$a}},load:function(d,e){}}}});IG$._Idd.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._IQ3.call(a)},beforeitemcontextmenu:function(h,a,l,b,d){var f=this,c=false,j=d.pageX,g=d.pageY,k=d.getTarget();d.stopEvent();c=f._s1?f._s1.call(f,a):f._I8f(a);c==true&&f.customMenu.showBy(k);return false},cellclick:function(b,j,c,a,f,h,g,d){this.c1(a)},celldblclick:function(b,j,h,a,f,c,g,d){this.c1(a);return false},itemexpand:function(c,b){var a=this;if(a._i4){a._i4.execute(c,1)}}}});IG$._Ide=$s.extend($s.window,{modal:true,resizable:false,width:400,autoHeight:true,bodyPadding:10,layout:{type:"vbox",align:"stretch"},_IFd:function(){var g=this,f=g._i0,c=this.down("[name=fltsetdate]"),b=this.down("[name=fltfromdate]"),j=this.down("[name=flttodate]"),a=this.down("[name=fltypegrid]"),h={},d,e,k=[{name:"Workspace",type:"Workspace"},{name:"Folder",type:"Folder"},{name:"Cube",type:"Cube"},{name:"Report",type:"Report"},{name:"Dimension",type:"Dimension"},{name:"Measure",type:"Measure"}];a.store.loadData(k);if(f){c.setValue(f.fltsetdate);f.fltfromdate&&b.setValue(f.fltfromdate.join("-"));f.flttodate&&j.setValue(f.flttodate.join("-"));if(f.typelist&&f.typelist.length>0){for(e=0;e<f.typelist.length;e++){h[f.typelist[e]]=1}for(e=0;e<a.store.data.items.length;e++){d=a.store.data.items[e];if(h[d.get("type")]==1){d.set("selected",true)}}}}},c1:function(){var e=this,h=e._i0,g=e.down("[name=fltsetdate]").getValue(),b=e.down("[name=fltfromdate]").getRawValue().split("-"),a=e.down("[name=flttodate]").getRawValue().split("-"),d=e.down("[name=fltypegrid]"),c,f=[];for(c=0;c<d.store.data.items.length;c++){if(d.store.data.items[c].get("selected")==true){f.push(d.store.data.items[c].get("type"))}}h.fltsetdate=g;h.fltfromdate=b;h.flttodate=a;h.typelist=f;if(e.callback){e.callback.execute()}e.close()},initComponent:function(){var a=this;a.title=IRm$.r1("I_EXP_SCH");$s.apply(this,{defaults:{bodyStyle:"padding:0px"},items:[{xtype:"fieldset",title:"Show only..",collapsible:false,autoHeight:true,collapsed:false,defaults:{labelWidth:80,anchor:"100%",layout:"anchor",defaults:{anchor:"100%"}},items:[{xtype:"combobox",name:"fltypegroup",labelField:"Type",queryMode:"local",displayField:"name",valueField:"gcode",editable:false,store:{fields:["name","gcode"],data:[{name:"----- Quick Select -----",gcode:""},{name:"All",gcode:"all"},{name:"Folder and Workspace",gcode:"folder"},{name:(IG$.level==1)?"Report or dashboard":"Report",gcode:"report"},{name:"Analysis item",gcode:"dimensions"}]},listeners:{select:function(e,f,j){var c=e.getValue(),b=this.down("[name=fltypegrid]"),l=b.store,h,d,g=null,k=null;switch(c){case"all":g=null;break;case"report":g="Report|Dashboard";break;case"folder":g="Workspace|Folder";break;case"dimensions":g="Dimension|Measure";break}if(g!=null){k=new RegExp(g)}for(h=0;h<l.data.items.length;h++){d=l.data.items[h].get("type");if(g==null||(k!=null&&k.test(d)==true)){l.data.items[h].set("selected",true)}else{l.data.items[h].set("selected",false)}}},afterrender:function(b){b.setValue("")},scope:this}},{xtype:"gridpanel",name:"fltypegrid",region:"center",layout:"fit",hideHeaders:true,flex:1,height:140,scroll:"vertical",stateful:false,store:{fields:["selected","name","type","nodepath","uid","iconimg"]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{header:"",dataIndex:"iconimg",sortable:false,hideable:false,width:20},{header:"Name",dataIndex:"name",sortable:false,hideable:false,flex:1}],listeners:{afterrender:function(b){}}}],listeners:{}},{xtype:"fieldset",title:"Date period",layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",name:"fltsetdate",fieldLabel:"",boxLabel:"Enable date period",listeners:{change:function(h,b,g,e){var f=h.getValue(),d=this.down("[name=fltfromdate]"),c=this.down("[name=flttodate]");d.setDisabled(!f);c.setDisabled(!f)},scope:this}},{xtype:"datefield",name:"fltfromdate",disabled:true,labelWidth:70,fieldLabel:"From",maxValue:new Date(),format:"Y-m-d",value:new Date()},{xtype:"datefield",name:"flttodate",disabled:true,labelWidth:70,fieldLabel:"To",maxValue:new Date(),format:"Y-m-d",value:new Date()}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.c1()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._Ide.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){this._IFd()}}});IG$._I8e=$s.extend($s.panel,{bodyPadding:"0 0 0 0",layout:"border",_i0:{},_IPe:function(a){var b=this;IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_CHS"),function(c){if(c=="yes"){b._IPf.call(b,a)}})},gs:function(b){var c={items:[],length:0},a;for(a=0;a<b.store.data.items.length;a++){rec=b.store.data.items[a];if(rec.get("selected")==true){c.items.push(rec)}}c.length=c.items.length;return c},_IPf:function(c){var b=this,e=b.down("[name=mg]"),a="<smsg>",g=b.gs(e),h,d=0,f=new IG$._I3e();if(g.length>0){for(i=0;i<g.length;i++){h=g.items[i];if(h.get("name")!=".."&&(h.get("manage")=="T"||h.get("writable")=="T")){a+="<item uid='"+h.get("uid")+"'/>";d++}else{if(h.get("name")!=".."){d=0;IG$._I52(IRm$.r1("E_PV_L",h.get("name")),b);break}}}a+="</smsg>";if(d>0){f.init(b,{ack:"30",payload:a,mbody:IG$._I2e({option:"delete"})},b,b.r_IPe,null,c);f._l()}}},r_IPe:function(a,b){this._IQa()},_IHf:function(c,b){var a=this,d=new IG$._I3e();d.init(a,{ack:"7",payload:"<smsg><item uid='"+c+"'/></smsg>",mbody:IG$._I2e()},a,a.r_IHf,null,b);d._l()},r_IHf:function(a,c){var b=this;if(c){c.store.remove(c)}IG$._I54(ig$.appname,IRm$.r1("M_DELETED"),null,b,0,"success")},_II0:function(c,b){var a;a=new IG$._Ic7({uid:c,itemtype:b});a.callback=new IG$._I3d(this,this.r_II0);IG$._I_5(this,a)},r_II0:function(){},_IQ0:function(b,g){var l=this,h=l._m1,a=l.mainPanel,e,k;switch(b){case"cmd_c_workspace":IG$._I65("CMD_MAKE_WORKSPACE");break;case"cmd_c_folder":h&&l._I90("Folder",h.uid,h.nodepath,g);break;case"cmd_c_reports":h&&l._I90("Report",h.uid,h.nodepath,g);break;case"cmd_c_dbd":h&&l._I90("Dashboard",h.uid,h.nodepath,g);break;case"cmd_c_upload":h&&l._I90("DataCube",h.uid,h.nodepath,g);break;case"cmd_c_cube":h&&l._I90("Cube;SQLCube;NoSQL;MDBCube",h.uid,h.nodepath,g);break;case"cmd_c_dbmodel":h&&l._I90("CubeModel",h.uid,h.nodepath,g);break;case"cmd_c_metrics":g&&h&&l._I90(g,h.uid,h.nodepath,g);break;case"cmd_c_workflow":h&&l._I90("BigData",h.uid,h.nodepath,g);break;case"cmd_c_java":h&&l._I90("JavaClass",h.uid,h.nodepath,g);break;case"cmd_up":l._gb&&l._gb.length>1&&l._IQ5(0,l._gb[l._gb.length-2].cpath);break;case"cmd_moveto":l._IQ1();break;case"cmd_remove":l._IPe(g);break;case"cmd_open":if(h&&a&&(/cube|datacube|sqlcube|nosql|mcube|mdbcube/).test(h.type.toLowerCase())){a.m1$7.call(a,h.uid,h.type.toLowerCase(),h.name,h.nodepath,true,h.writable)}else{var j=l.down("[name=mg]"),f=j.getSelectionModel(),d,c;for(e=0;e<j.store.data.items.length;e++){d=j.store.data.items[e];if(f.isFocused(d)){c=d;break}}if(c&&(/cube|datacube|sqlcube|nosql|mcube|mdbcube/).test(c.get("type").toLowerCase())){a.m1$7.call(a,c.get("uid"),c.get("type").toLowerCase(),c.get("name"),c.get("nodepath"),true,c.get("writable"))}}break;case"cmd_edit":var j=l.down("[name=mg]"),f=j.getSelectionModel(),d,c;for(e=0;e<j.store.data.items.length;e++){d=j.store.data.items[e];if(f.isFocused(d)){c=d;break}}c&&a.m1$7.call(a,c.get("uid"),c.get("type").toLowerCase(),c.get("name"),c.get("nodepath"),true,c.get("writable"));break;case"cmd_recover":l._IQ2(false);break;case"cmd_delete":l._IQ2(true);break;case"cmd_detail":break}},_IQ1:function(){var a=this,b=new IG$._I96({visibleItems:"workspace;folder",targetobj:"folder",u5x:{cubebrowse:false,rootuid:null},callback:new IG$._I3d(a,a.m__IQ1)});IG$._I_5(this,b)},m__IQ1:function(b){var a=this;if(b){IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",b.name),function(c){if(c=="yes"){a.r__IQ1.call(a,b)}})}},r__IQ1:function(l){var g=this,f=g.down("[name=mg]"),j=g.gs(f),c;if(j&&j.length>0){var h,k="<smsg>",a=this,e=0,b=false,d;for(d=0;d<j.length;d++){c=j.items[d];if(c.get("writable")=="T"||c.get("manage")=="T"){k+="<item uid='"+c.get("uid")+"'/>";e++}}k+="</smsg>";if(e>0){g.setLoading(true);h=new IG$._I3e();h.init(a,{ack:"11",payload:k,mbody:IG$._I2e({option:(b==true?"copy":"move"),target:l.uid})},a,a.s__IQ1,null,null);h._l()}}},s__IQ1:function(a){this._IQa()},_IQ2:function(a){var b=this,h="<smsg>",g=new IG$._I3e(),e=0,d=b.down("[name=mg]"),f=b.gs(d).items,c;for(c=0;c<f.length;c++){h+="<item"+IG$._I20({uid:f[c].get("uid")},"uid","s")+"/>";e++}h+="</smsg>";if(e>0){b.setLoading(true);g.init(b,{ack:"11",payload:h,mbody:IG$._I2e({option:a?"remove_trash":"recover_trash"})},b,b.r_IQ2,null,null);g._l()}},r_IQ2:function(a){this._IQa()},_IQ3:function(){var k=this,h=k.down("[name=pl1]"),a=$(h.body.dom),f,b,g,d,c,e;a.empty();ig$.fm&&ig$.fm.ig_n_lst&&h.hide();k._i1={items:[{name:"btn_refresh"},{name:"btn_moveto",fcls:"ig_n_mv"},{name:"btn_remove",fcls:"ig_n_del"},{name:"btn_recover"},{name:"btn_open"},{name:"btn_up"},{name:"btn_delete"},{name:"btn_edit"},{name:"btn_create",cls:"ig_n_f"}],c_menu:[]};for(d=0;d<k._i1.items.length;d++){b=k._i1.items[d];b.obj=k.down("[name="+b.name+"]");b.obj.setVisible(false);b.ltype=b.obj.ltype;b.ctype=b.obj.ctype;b.sroot=b.obj.sroot;b.fcls=b.cls;if(b.name=="btn_create"){for(c=0;c<b.obj.menu.items.length;c++){e=b.obj.menu.items.items[c];k._i1.c_menu.push({obj:e,name:e.name,ltype:e.ltype,mtype:e.mtype,sroot:e.sroot,fcls:e.fcls})}}k._i1[b.name]=b}f=[{text:IRm$.r1("L_C_PR"),cls:"ig_n_p",handler:function(){this._IQ5(1)}},{text:IRm$.r1("L_C_AL"),cls:"ig_n_a",handler:function(){this._IQ5(0,"/")}},{text:IRm$.r1("L_C_FC"),cls:"ig_n_fav",handler:function(){this._IQ5(2)}},{text:IRm$.r1("L_C_MW"),cls:"ig_n_mw",handler:function(){this._IQ5(5,"/")}},{text:IRm$.r1("L_C_LC"),cls:"ig_n_rcnt",handler:function(){this._IQ5(3)}},{text:IRm$.r1("L_C_CD"),cls:"ig_n_del",handler:function(){this._IQ5(4)}}];g=$("<ul class='ig-navi-list'></ul>").appendTo(a);$.each(f,function(l,m){if(m.hidden!=true){var j=$("<li class='"+(m.cls||"")+(m.iconCls?" ig-navi-icon "+m.iconCls:"")+"'><span>"+m.text+"</span></li>").appendTo(g);if(m.handler){j.bind("click",function(){m.handler.call(k)})}}});if(k._I2&&k.rendered){k.mtree.i2.call(k.mtree)}},_IQ4:function(){var a=this;if(!a._I2&&a.rendered){a.mtree.i2.call(a.mtree);a._I2=true}else{if(!a.rendered){a._IQc=true}}},_IQ5:IG$._IQ5,_IQ6:function(a,b,d,g){var f=this,e=a.ltype.indexOf(b+";")>-1?true:false,c=f._m1&&f._m1.nodepath=="/";if(e&&a.fcls&&ig$.fm[a.fcls]){e=false}e=(a.sroot==false&&c==true)?false:e;if(e&&a.ctype&&d){e=(a.ctype.indexOf(d+";")>-1)?true:false}if(e&&a.name=="btn_up"&&(!g||(g&&g.split("/").length<2))){e=false}return e},_IQ7:function(j,d,h){var f=this,e=j.ltype.indexOf(d+";")>-1?true:false,a,g,b=f._m1&&f._m1.nodepath=="/";e=e&&!ig$.fm[j.fcls]?true:false;e=(b==true&&j.sroot==false)?false:e;if(e==true&&j.mtype){if(j.mtype=="nvl"&&h){e=false}else{if(j.mtype!="nvl"&&!h){e=false}else{if(h){a=h.indexOf(";");g=(a>-1)?h.substring(a+1).toLowerCase():"formaterror";e=(h&&j.mtype.indexOf(g+";")>-1)?true:false}}}}if(j.name=="c_workspace"&&b&&(IG$._I83.jS2==true||!ig$.fm[j.fcls])){e=true}return e},_IHd:function(a){var d=this,c=d.mtree,b=c.getRootNode();this.ntritem=a;this.ntrnode=b;this.ntrseq=1;this._IHe()},_IHe:function(){var h=this,f=h.mtree,b=this.ntritem.nodepath||this.ntritem,g=b.split("/"),d,c,a,j=this.ntrseq,e=this.ntrnode;if(e&&g.length>j){d=g[j];for(c=0;c<e.childNodes.length;c++){a=e.childNodes[c];if(a.data.name==d){if(a.isLeaf()==false){this.ntrnode=a;this.ntrseq++;a.expand(false,this._IHe,this);if(a.get("nodepath")==b){f.getSelectionModel().select(a)}}else{this.ntrnode=null;this.ntrseq=0;f.getSelectionModel().select(a)}break}}}},r_IQ5:function(r,p){var w=this,u=w.down("[name="+(w.vmode=="tree"?"mg_t":"mg")+"]"),g=(p==4||p==0||p==5||p==1)?"/smsg/item":(p==6?"/smsg/result":"/smsg"),e=IG$._I18(r,g),s=IG$._I26(e),f,b,m,q,k=[],l=null,a,c=w._i1.items,o=w._i1.c_menu,j=w.mtree.ca,h;w._m1=null;w.l1=p;if(p==0||p==5||p==1){w._m1=IG$._I1c(e);b=w._m1.name;l=w._m1.nodepath;a=w._m1.uid;f=w._m1.type.toLowerCase()}for(m=0;m<o.length;m++){h=w._IQ7(o[m],f,(w._m1!=null?w._m1.subcube:null));o[m].obj.setVisible(h)}for(m=0;m<c.length;m++){h=w._IQ6(c[m],p,f,l);c[m].obj.setVisible(h)}w._IQ8(l,a);for(m=0;m<s.length;m++){q=IG$._I1c(s[m]);q.ltype=q.type.toLowerCase();q.iconcls=IG$._I11(q.ltype);k.push(q)}IG$._I10(k);if(w._m1){j[w._m1.uid]={datas:k,item:w._m1}}u.store.loadData(k)},_IQ8:function(d,m){var l=this,g=l.down("[name=bc]"),o=$(g.body.dom),a,k=[],h,e,b,f;o.empty();l.bcuid=m,l._gb=[];if(d){a=d.split("/");for(e=1;e<a.length;e++){h={name:a[e],cpath:""};for(b=1;b<e+1;b++){h.cpath+="/"+a[b]}k.push(h)}f=$("<ul class='ig-navi-breadcrumb'></ul>").appendTo(o);$.each(k,function(j,q){var p,c,r=j<k.length-1;if(q.name!="SYS_Config"){if(l._gb.length){p=$("<li class='ig-navi-breadcrumb-sep'>&gt;</li>").appendTo(f)}c=$("<li class='"+(r?"qlink":"")+"'>"+q.name+"</li>").appendTo(f);c.appendTo(f);l._gb.push(q);if(r){c.bind("click",function(){l._IQ5.call(l,0,q.cpath)})}}})}},_IQ9:function(j,p){var m=this,l=m.down("[name=mg]"),f=p&&p.nodepath?p.nodepath:null,o=p&&p.uid?p.uid:null,h,a,k,e=m._i1,d=e?e.items:null,c=e?e.c_menu:null,b=0,g;if(!e){return}m.l1=b;k=m._m1=p;if(k){h=m._m1.name;a=m._m1.type.toLowerCase()}for(g=0;g<c.length;g++){v=m._IQ7(c[g],a,(m._m1!=null?m._m1.subcube:null));c[g].obj.setVisible(v)}for(g=0;g<d.length;g++){v=m._IQ6(d[g],b,a,f);d[g].obj.setVisible(v)}m._IQ8(f,o);l.store.loadData(j)},_IQa:function(c){var b=this,d=c||b.bcuid,a=b.mtree.ca;if(d){if(a[d]){delete a[d]}}b._IQ5(b.l1,d)},_I8f:IG$._I8f,_I90:IG$._I90,r_I90:IG$.r_I90,_I91:IG$._I91,r_I91:IG$.r_I91,_II7:IG$._II7,r_II7:IG$.r_II7,_I92:function(b){var a=this;a._IQa(b.get("uid"))},_IPd:function(c){var f=this,h=f.down("[name=kword]"),e=f.down("[name=pl2]"),a=f.down("[name=b_csch]"),d=h.getValue(),g=new IG$._I3e(),b=f._i0,j;if(c){h.setValue(c);d=c}if(f.vmode=="tree"){e.getLayout().setActiveItem(c?1:0);a.setVisible(c)}if(d||b.fltsetdate==true){j={option:"search",name:d};if(b.fltsetdate==true){j.fromdate=b.fltfromdate.join("")+"000000";j.todate=b.flttodate.join("")+"240000"}if(b.typelist&&b.typelist.length>0){j.typelist=b.typelist.join(";")}f._IQ5(6,null,j)}},_IQb:function(){var a=this,b;b=new IG$._Ide({_i0:a._i0,callback:new IG$._I3d(this,function(){this._IPd()})});IG$._I_5(this,b)},_I93:function(c){var b=this,a=b.mtree;a._I93.call(a,c)},initComponent:function(){var b=this,a;b.mainPanel=IG$._I7d;b.customMenu=new $s.menu({items:[]});a=new IG$._Idd({gridupdate:{handler:b._IQ9,scope:b},show_tree_items:b.show_tree_items});b.mtree=a;ig$.uiconfig=ig$.uiconfig||{};ig$.uiconfig.navigator=ig$.uiconfig.navigator||{};b.items=[{xtype:"panel",region:this.vmode=="tree"?"center":"west",layout:"border",border:0,width:this.vmode=="tree"?null:200,collapsible:true,split:false,titleCollapse:false,header:false,collapseMode:"mini",items:[{xtype:"panel",border:0,hidden:ig$.uiconfig.navigator.list_hidden||this.vmode=="tree"||false,region:ig$.uiconfig.navigator.list_pos||"north",name:"pl1",height:180,margin:"0 0 0 0",title:"List",cls:"igc-f-dec"},{xtype:"panel",flex:1,border:0,margin:"0 0 0 0",bodyPadding:0,region:"center",title:IRm$.r1("B_FOLDER"),layout:"card",cls:"igc-f-dec",name:"pl2",tools:[{type:"close",name:"b_csch",tooltip:"Close",hidden:true,handler:function(e,c,f){var d=this;d._IPd()},scope:this},{type:"refresh",tooltip:"Refresh",handler:function(e,c,f){var d=this;d.mtree.i2.call(d.mtree)},scope:this}],items:[a,{xtype:"grid",flex:1,name:"mg_t",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:false,enableDrag:true}]},columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:true,flex:1,minWidth:160,tdCls:"ig-navi-namecol",tpl:"<div class='ig-navi-itemicon-p'><div class='ig-navi-itemicon {iconcls}'></div></div><span class='ig-navi-text' title='{name} ({type})'>{name} <br /> {description} </span><br /> <span>{updatedatefm} <br /><br /> "+IRm$.r1("B_OWNER")+" : {owner} <br />"+IRm$.r1("B_MODI")+" : {modifier}</span>"},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:true,flex:1,dataIndex:"nodepath"}],listeners:{cellclick:function(y,m,o,g,c,q,z,d){var A=this,w=A.down("[name=pl2]"),h=A._i1,s=false,f=false,x=g.get("type").toLowerCase(),k=IG$._I0e(x),l=g.get("uid"),j=g.get("type"),p=A.down("[name=b_csch]"),u;if(o==0&&k<5){w.getLayout().setActiveItem(0);p.hide();A._IHd({nodepath:g.get("nodepath")})}else{if(k>4){IG$._n1(l)}}return u},beforeitemcontextmenu:function(k,c,o,f,g){g.stopEvent();var h=this,l=g.pageX,j=g.pageY,m=g.getTarget();var d=this._I8f(c);if(d==true&&h.l1!=4){this.customMenu.showBy(m)}return false},scope:this}}]}]},{xtype:"panel",region:this.vmode=="tree"?"east":"center",hidden:this.vmode=="tree"?true:false,flex:1,border:0,layout:"border",items:[{xtype:"panel",border:0,margin:"0 5 0 0",region:"north",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",hidden:ig$.uiconfig.navigator.search_hidden||false,layout:{type:"hbox"},items:[{xtype:"textfield",name:"kword",fieldLabel:IRm$.r1("L_BTN_SEARCH"),labelPosition:"right",enableKeyEvents:true,width:300,labelWidth:60,listeners:{keyup:function(c,f,d){if(f.keyCode==13){this._IPd()}},scope:this}},{xtype:"button",text:"..",handler:function(){this._IQb()},scope:this},{xtype:"button",text:IRm$.r1("B_GO"),handler:function(){this._IPd()},scope:this}]},{xtype:"panel",name:"bc",height:22},{xtype:"toolbar",defaults:{xtype:"button",scope:this},items:[{xtype:"button",text:IRm$.r1("B_CR"),ltype:"0;1;2;3;5;",ctype:"folder;workspace;cube;sqlcube;datacube;javapackage;",sroot:true,name:"btn_create",menu:{xtype:"menu",defaults:{scope:this,sroot:false},items:[{text:IRm$.r1("B_WORKSPACE"),name:"c_workspace",fcls:"ig_n_cw",sroot:true,ltype:";",mtype:"nvl",handler:function(){this._IQ0("cmd_c_workspace")}},{text:IRm$.r1("B_FOLDER"),name:"c_folder",fcls:"ig_n_f_f",ltype:"workspace;folder;cube;sqlcube;datacube;javapackage;",handler:function(){this._IQ0("cmd_c_folder")}},{text:IRm$.r1("L_REPORT"),name:"c_report",fcls:"ig_n_rpt",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_reports")}},{text:IRm$.r1("L_DASHBOARD"),name:"c_dashboard",fcls:"ig_n_dbd",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_dbd")}},{text:IRm$.r1("L_B_ADC"),name:"c_dcube",fcls:"ig_n_c_lc",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_upload")}},{text:IRm$.r1("L_B_AC"),name:"c_cube",fcls:"ig_n_cb",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_cube")}},{text:IRm$.r1("L_MENU_DB_MODEL"),name:"c_dbmodel",fcls:"ig_n_dbm",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_dbmodel")}},{text:IRm$.r1("L_B_CM"),name:"c_metrics",fcls:"ig_n_cm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","CustomMetric")}},{text:IRm$.r1("D_MEASURE"),name:"c_measure",fcls:"ig_n_ms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","Measure")}},{text:IRm$.r1("D_FORMULA"),name:"c_fmr",fcls:"ig_n_fm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","FormulaMeasure")}},{text:IRm$.r1("D_DATEMETRIC"),name:"c_dmetric",fcls:"ig_n_dm",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","DateMetric")}},{text:IRm$.r1("D_CHARTMEASURE"),name:"c_cmeasure",fcls:"ig_n_cms",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","ChartMeasure")}},{text:IRm$.r1("D_UDG"),name:"c_udg",fcls:"ig_n_udg",ltype:"cube;sqlcube;datacube;folder;",mtype:"cube;sqlcube;datacube;",handler:function(){this._IQ0("cmd_c_metrics","UDG")}},{text:IRm$.r1("L_B_BW"),name:"c_workflow",fcls:"ig_n_hb",ltype:"workspace;folder;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_workflow")}},{text:IRm$.r1("L_B_JV"),name:"c_javaclass",fcls:"ig_n_jc",ltype:"folder;javapackage;",mtype:"nvl",handler:function(){this._IQ0("cmd_c_java")}}]}},{text:IRm$.r1("L_REFRESH"),ltype:"0;1;2;3;5;",sroot:true,name:"btn_refresh",handler:function(){this._IQa()}},"-",{text:IRm$.r1("L_B_U"),ltype:"0;1;2;3;5;",sroot:false,name:"btn_up",handler:function(){this._IQ0("cmd_up")}},{text:IRm$.r1("L_B_MVT"),sroot:false,ltype:"0;1;2;3;5;6;",name:"btn_moveto",fcls:"ig_n_mv",handler:function(){this._IQ0("cmd_moveto")}},{text:IRm$.r1("L_REMOVE"),sroot:true,ltype:"0;1;2;3;5;6;",name:"btn_remove",fcls:"ig_n_del",handler:function(){this._IQ0("cmd_remove")}},{name:"btn_recover",ltype:"4;",sroot:false,text:IRm$.r1("L_RECOVER"),handler:function(){this._IQ0("cmd_recover")}},{name:"btn_open",ltype:"0;1;2;3;5;6;",ctype:"cube;sqlcube;datacube;nosql;mcube;mdbcube",sroot:false,text:IRm$.r1("L_E_CB"),handler:function(){this._IQ0("cmd_open")}},{name:"btn_edit",ltype:";",sroot:false,text:IRm$.r1("L_E_IT"),handler:function(){this._IQ0("cmd_edit")}},{name:"btn_delete",ltype:"4;",sroot:false,fcls:"ig_n_del",text:IRm$.r1("L_E_DEL"),handler:function(){this._IQ0("cmd_delete")}},"->",{text:"Show detail",sroot:false,hidden:true,handler:function(){this._IQ0("cmd_detail")}}]}]},{xtype:"panel",region:"center",margin:"0 5 0 0",flex:1,border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"grid",flex:1,name:"mg",store:{xtype:"store",fields:["selected","uid","nodepath","name","type","description","iconcls","updatedate","owner","modifier","updatedatefm","writable","manage"]},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:false,enableDrag:true}]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:28,listeners:{checkchange:function(e,u,q,g){var l=this,k=l.down("[name=mg]"),h=l._i1,s=false,p=false,f=record.get("type").toLowerCase(),o=IG$._I0e(f),j=record.get("uid"),d=record.get("type"),c,m=k.getView();p=l._m1&&(/cube|datacube|sqlcube|nosql|mcube|mdbcube/).test(l._m1.type.toLowerCase())?true:false;if(l.l1==4){return}if(o>4){s=true}else{if(o==2){p=true}}m.select(u);h.btn_edit.obj.setVisible(s);h.btn_open.obj.setVisible(p)},scope:this}},{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:true,flex:1,minWidth:160,tdCls:"ig-navi-namecol",tpl:"<div class='ig-navi-itemicon-p'><div class='ig-navi-itemicon {iconcls}'></div></div><span class='ig-navi-text' title='{name} ({type})'>{name}</span>"},{xtype:"gridcolumn",text:IRm$.r1("B_DESC"),minWidth:120,menuDisabled:true,flex:1,dataIndex:"description"},{xtype:"gridcolumn",text:IRm$.r1("B_LOC"),minWidth:200,menuDisabled:true,flex:1,dataIndex:"nodepath"},{xtype:"gridcolumn",text:IRm$.r1("B_LASTUPD"),menuDisabled:true,width:100,dataIndex:"updatedatefm"},{xtype:"gridcolumn",text:IRm$.r1("B_OWNER"),menuDisabled:true,width:80,dataIndex:"owner"},{xtype:"gridcolumn",text:IRm$.r1("B_MODI"),menuDisabled:true,width:80,dataIndex:"modifier"}],listeners:{cellclick:function(f,h,s,k,q,w,m,o){var p=this,j=p._i1,y=false,x=false,g=k.get("type").toLowerCase(),u=IG$._I0e(g),l=k.get("uid"),d=k.get("type"),c;x=p._m1&&(/cube|datacube|sqlcube|nosql|mcube|mdbcube/).test(p._m1.type.toLowerCase())?true:false;if(s==0){return c}if(p.l1==4){return}if(s==1){c=false;if(u<5){this._IQ5(0,l)}else{IG$._n1(l)}}else{if(u>4){y=true}else{if(u==2){x=true}}}j.btn_edit.obj.setVisible(y);j.btn_open.obj.setVisible(x);return c},beforeitemcontextmenu:function(k,c,o,f,g){g.stopEvent();var h=this,l=g.pageX,j=g.pageY,m=g.getTarget();var d=this._I8f(c);if(d==true&&h.l1!=4){this.customMenu.showBy(m)}return false},scope:this}}]},{xtype:"panel",border:0,width:150,layout:"fit",title:"Detail",region:"east",hidden:true}]}];IG$._I8e.superclass.initComponent.call(this)},listeners:{afterrender:function(a){var b=this;b.rendered=true;b._I2=true;a._IQ3.call(a);if(b._IQc==true){b._IQ4()}}}});IG$._Id2=$s.extend($s.gridpanel,{cpath:null,mpath:null,L1:function(a){var c=this,b,d;c.root=a;c.mpath=[c.root];d=c.root;b=new IG$._I3e();b.init(c,{ack:"5",payload:"<smsg><item"+IG$._I20({uid:d.uid,nodepath:d.nodepath,name:d.name,type:d.type},"uid;nodepath;name;type","s")+"/></smsg>",mbody:IG$._I2e({})},c,c.rs_L1,null);b._l()},L2:function(){this.L1({uid:"/",nodepath:"/",name:"Workspace",type:"Workspace"})},L3:function(a){var d=this,b=a.get("type").toLowerCase(),c;if(b=="workspace"||b=="folder"||b=="mcube"||b=="datacube"||b=="cube"||b=="nosql"||b=="mdbcube"){meta={uid:a.get("uid"),type:a.get("type"),nodepath:a.get("nodepath"),name:a.get("oname")||a.get("name"),manage:a.get("manage"),writable:a.get("writable")};if(a.get("name")==".."){d.mpath.splice(d.mpath.length-1,1)}else{d.mpath.push(meta)}c=new IG$._I3e();c.init(d,{ack:"5",payload:"<smsg><item"+IG$._I20({uid:meta.uid,nodepath:meta.nodepath,name:meta.name,type:meta.type},"uid;nodepath;name;type","s")+"/></smsg>",mbody:IG$._I2e({subfolder:"T"})},d,d.rs_L1,null);c._l()}},rs_L1:function(f){var h=this,b=IG$._I18(f,"/smsg/item"),m=IG$._I1c(b),d=(b?IG$._I26(b):null),e,g=[],l,j,a;j=h.mpath.length>1?h.mpath[h.mpath.length-2]:null;h.cpath={uid:m.uid,name:m.name,nodepath:m.nodepath,type:m.type,writable:m.writable,manage:m.manage};if(m.uid!=h.root.uid){j.oname=j.name;j.name="..";g.push(j)}if(d){for(e=0;e<d.length;e++){l=IG$._I1c(d[e]);a=l.updatedate;a=a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8)+" "+a.substring(8,10)+":"+a.substring(10,12);l.updatedate=a;l.iconcls=IG$._I11(l.type.toLowerCase());g.push(l)}var k={workspace:1,folder:2,cube:3,cubemodel:4,nosql:5,mcube:6,mdbcube:7,metric:10,measure:11};var c={global:1,"public":2,"private":4};g.sort(function(y,x){var o=0,q=y.type.toLowerCase(),p=x.type.toLowerCase(),u=y.name,s=x.name,z,w;if(q!=p){z=k[q]||99;w=k[p]||99;o=z-w}else{if(q==p&&q=="workspace"){z=c[(y.memo||"global").toLowerCase()]||99;w=c[(x.memo||"global").toLowerCase()]||99;if(z!=w){o=z-w}else{o=u-s}}else{o=u-s}}return o})}h.store.loadData(g)},L4:function(){var b=this,a,c=b.cpath;a=new IG$._I3e();a.init(b,{ack:"5",payload:"<smsg><item"+IG$._I20({uid:c.uid,nodepath:c.nodepath,name:c.name,type:c.type},"uid;nodepath;name;type","s")+"/></smsg>",mbody:IG$._I2e({})},b,b.rs_L1,null);a._l()},_I90:function(c,e,b,d){var a=new IG$._I6e({parentnodepath:b,itemtype:c,parentuid:e});a.callback=new IG$._I3d(this,this.r_I90,d);IG$._I_5(this,a)},r_I90:function(){var a=this;a.L4()},_I91:function(e,c,d,b){var a=new IG$._Icd({itemname:e,uid:c,nodepath:d,itemtype:b});a.callback=new IG$._I3d(this,this.r_I91,null);IG$._I_5(this,a)},r_I91:function(){var a=this;a.L4()},_t$:function(d){var a=this;switch(d){case"cmd_new_folder":a._I90("Folder",a.cpath.uid,a.cpath.nodepath,null);break;case"cmd_refresh":a.L4();break;case"cmd_gotop":a.L1(a.root);break;case"cmd_top_ws":a.L2();break;case"cmd_delete":a._IHf();break;case"cmd_rename":var c=a.getSelectionModel(),b;if(c.selected.items.length>0){b=c.selected.items[0];if(b.get("name")!=".."&&(b.get("writable")=="T"||b.get("manage")=="T")){a._I91(b.get("name"),b.get("uid"),b.get("nodepath"),b.get("type"))}}break}},_IHf:function(){var e=this,c,d,a="<smsg>",b=0;d=e.L5();if(d.length>0){for(c=0;c<d.length;c++){if(d[c].name!=".."&&(d[c].manage=="T"||d[c].writable=="T")){a+="<item uid='"+d[c].uid+"'/>";b++}else{if(d[c].name!=".."){b=0;IG$._I52("Privilege error on content: "+d[c].name,e);break}}}if(b>0){a+="</smsg>";req=new IG$._I3e();req.init(e,{ack:"30",payload:a,mbody:IG$._I2e({option:"delete"})},e,e.r_IHf,null);req._l()}}},r_IHf:function(a){var b=this;b.L4()},L5:function(){var d=this,c=[],a,b;for(a=0;a<d.store.data.items.length;a++){if(d.store.data.items[a].get("selected")){b=d.store.data.items[a];c.push({uid:b.get("uid"),type:b.get("type"),nodepath:b.get("nodepath"),name:b.get("name"),manage:b.get("manage"),writable:b.get("writable")})}}return c},initComponent:function(){var a=this;$s.apply(this,{store:{xtype:"store",fields:["uid","name","oname","nodepath","type","writable","manage","updatedate","selected","iconcls"]},columns:[{xtype:"checkcolumn",dataIndex:"selected",width:30,editor:{xtype:"checkbox",cls:"x-grid-checkheader-editor"}},{xtype:"templatecolumn",text:"",tpl:"<div class='{iconcls}' style='width:16px;height:16px'></div>",dataIndex:"iconcls",width:24},{text:"Name",dataIndex:"name",flex:1},{text:"Type",dataIndex:"type",width:60},{text:"Updated",dataIndex:"updatedate",width:120}],tbar:[{xtype:"splitbutton",text:"New",menu:[{text:"Folder",handler:function(){this._t$("cmd_new_folder")},scope:this}]},{text:"Rename",handler:function(){this._t$("cmd_rename")},scope:this},{iconCls:"icon-toolbar-remove",text:"Delete",handler:function(){this._t$("cmd_delete")},scope:this},{text:"Refresh",handler:function(){this._t$("cmd_refresh")},scope:this},{text:"Go Top",handler:function(){this._t$("cmd_gotop")},scope:this},{text:"Workspace",handler:function(){this._t$("cmd_top_ws")},scope:this}],listeners:{cellclick:function(c,k,d,b,g,j,h,f){if(d==2){a.L3.call(a,b)}}}});IG$._Id2.superclass.initComponent.apply(this,arguments)}});IG$._Ic6=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:950,autoHeight:true,dbscan:1,callback:null,serverNode:null,modelcontent:null,_IG0:function(){this.close()},in$t:function(){var c=this,a=c.grd_l,b=c.grd_r;a.L1.call(a,c.root);b.L1.call(b,c.root)},L6:function(g,c){var h=this,d=h.grd_l,b=h.grd_r,k;k=(g)?d.L5.call(d):b.L5.call(b);if(d.cpath.uid==b.cpath.uid){IG$._I54(ig$.appname,IRm$.r1("E_DUP_FOLDER"),null,null,1,"error");return}if(k&&k.length>0){var j,l="<smsg>",a=this,f=0,e;for(e=0;e<k.length;e++){if(k[e].name!=".."&&(k[e].writable=="T"||k[e].manage=="T")){l+="<item uid='"+k[e].uid+"'/>";f++}}l+="</smsg>";if(f>0){h.setLoading(true);j=new IG$._I3e();j.init(a,{ack:"11",payload:l,mbody:IG$._I2e({option:(c==true?"copy":"move"),target:(g?b.cpath.uid:d.cpath.uid)})},a,a.r_II2,null,null);j._l()}}},r_II2:function(a){var d=this,b=d.grd_l,c=d.grd_r;d.setLoading(false);IG$._I54(ig$.appname,"Moved items successfully",null,d,0,"success");b.L4.call(b);c.L4.call(c)},initComponent:function(){var a=this;a.title=IRm$.r1("T_MGR_FOLDER");a.grd_l=new IG$._Id2({name:"grd_l",height:500,flex:1});a.grd_r=new IG$._Id2({name:"grd_r",height:500,flex:1});$s.apply(this,{defaults:{bodyStyle:"padding:10px"},layout:"fit",items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},border:0,items:[a.grd_l,{width:60,layout:{type:"vbox",align:"stretch",pack:"center"},items:[{xtype:"displayfield",value:"Move"},{xtype:"button",text:">>",tooltip:"Move items",handler:function(){this.L6(true,false)},scope:this},{xtype:"button",text:"<<",tooltip:"Move items",handler:function(){this.L6(false,false)},scope:this},{xtype:"container",height:10},{xtype:"displayfield",value:"Copy"},{xtype:"button",text:">",tooltip:"Copy items",handler:function(){this.L6(true,true)},scope:this},{xtype:"button",text:"<",tooltip:"Copy items",handler:function(){this.L6(false,true)},scope:this}]},a.grd_r]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(c){var b=this;b.in$t()}}});IG$._Ic6.superclass.initComponent.apply(this,arguments)}});