if(window.Ext){IG$._IA0=$s.extend($s.window,{title:IRm$.r1("T_FILTER"),modal:true,layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:400,height:420,fitem:null,_9:null,callback:null,_IFe:function(){var A=this,p,s=[],t,x=this.down("[name=operator]"),v=this.down("[name=filterdim]"),q=this.down("[name=ctrlvalue]"),u=[],o=this.down("[name=valuetype]"),y,z=this.down("[name=valuetext]");for(p in IG$._IE1){t=IG$._IE1[p];s.push({value:t[3],label:t[1]})}x.store.loadData(s);for(p in this._9.controls){u.push({name:p,type:this._9.controls[p].type})}q.store.loadData(u);y=[{name:"control",value:"control"},{name:"value",value:"value"}];o.store.loadData(y);if(this.fitem){v.setValue(this.fitem.itemname||"");q.setValue(this.fitem.valuefield||"");o.setValue(this.fitem.valuemode||"control");x.setValue(this.fitem.operator||"IN");z.setValue(this.fitem.valuetext||"")}this.sK3()},P2C:function(c){var d=this.down("[name=filterdim]");this.fitem.nodepath=c.nodepath;this.fitem.itemuid=c.uid;this.fitem.itemtype=c.type;this.fitem.itemname=c.name;d.setValue(this.fitem.itemname)},_IG0:function(){this.close()},_IFf:function(){if(this.updateDashboardFilter()==true){this.callback&&this.callback.execute(this.fitem);this._IG0()}},updateDashboardFilter:function(){var c=this,d=true;opctrl=c.down("[name=operator]"),filterdim=c.down("[name=filterdim]"),ctrlvalue=c.down("[name=ctrlvalue]"),valuetype=c.down("[name=valuetype]"),valuetext=c.down("[name=valuetext]"),fitem=c.fitem;if(fitem){fitem.operator=opctrl.getValue();fitem.valuefield=ctrlvalue.getValue()||"";fitem.valuemode=valuetype.getValue()||"";fitem.valuetext=valuetext.getValue()||""}return d},sK3:function(){var q=this,v=q.down("[name=operator]"),u=q.down("[name=filterdim]"),t=q.down("[name=filterdimpanel]"),s=q.down("[name=filtertype]"),o=q.down("[name=rbfiltertype]").getGroupValue(),u=q.down("[name=filterdim]"),p=q.down("[name=ctrlvalue]"),n=q.down("[name=valuetype]"),x=q.down("[name=valuetext]"),y=q.down("[name=operator]");switch(o){case"metric":y.show();t.show();n.show();switch(n.getValue()){case"control":x.hide();p.show();break;case"value":x.show();p.hide();break}break;case"control":t.hide();y.hide();n.hide();p.show();break}},initComponent:function(){var l=[],o=this,q,m,n,p;n={fields:[{name:"name"},{name:"value"}]};p={fields:[{name:"name"},{name:"label"},{name:"value"}]};_ctstore={fields:[{name:"name"},{name:"type"}]};var j=new $s.formpanel({xtype:"form",plain:true,border:0,bodyPadding:5,fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"radiogroup",vertical:false,fieldLabel:"Filter Type",name:"filtertype",plain:true,items:[{boxLabel:"Select item",name:"rbfiltertype",inputValue:"metric",checked:true},{boxLabel:"Control",name:"rbfiltertype",inputValue:"control"}],listeners:{change:function(d,c,a,b){this.sK3()},scope:this}},{xtype:"fieldcontainer",name:"filterdimpanel",fieldLabel:IRm$.r1("L_ITEM"),combineErrors:false,layout:"hbox",defaults:{hideLabel:true},items:[{xtype:"textfield",name:"filterdim",readOnly:true},{xtype:"button",text:"..",width:20,handler:function(){var b=this,c=b.fitem.cubeuid;if(!c){return}var a=new IG$._I96({visibleItems:"workspace;folder;metric;measure",u5x:{cubebrowse:true,rootuid:c}});a.callback=new IG$._I3d(b,b.P2C);IG$._I_5(b,a)},scope:this}]},{xtype:"combo",fieldLabel:"Operator",name:"operator",store:p,displayField:"label",valueField:"value",editable:false,queryMode:"local",selectOnTab:false},{xtype:"combo",fieldLabel:"Value type",name:"valuetype",store:n,displayField:"name",valueField:"value",editable:false,queryMode:"local",selectOnTab:false,listeners:{select:function(){this.sK3()},scope:this}},{xtype:"textfield",fieldLabel:"Value text",name:"valuetext"},{xtype:"combo",fieldLabel:"Control value",name:"ctrlvalue",store:_ctstore,displayField:"name",valueField:"name",editable:false,queryMode:"local",selectOnTab:false}],listeners:{afterrender:function(a){var b=this;b._IFe()},scope:this}});$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[j],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._IA0.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$._IAe=$s.extend($s.panel,{modal:true,layout:{type:"fit",align:"stretch"},_9:null,callback:null,_IG0:function(){this.close()},m1$9:function(){if(this.m1$12()==true){this.callback&&this.callback.execute();this._IG0()}},_IFe1:function(){var j=this,f=j.down("[name=script]"),g=$(".idv-jcl-edtr",f.el.dom),e;g.empty();w=IG$.x_10._w(g);h=IG$.x_10._h(g);jview=$("<div class='idv-jcl-view'></div>").appendTo(g);IG$.x_10._w(jview,w);IG$.x_10._h(jview,h);if(!window.ace){IG$.x03(ig$.scmap.igcg,new IG$._I3d(j,function(){var a=this,b;b=ace.edit(jview[0]);b.getSession().setMode("ace/mode/java");a.scripteditor=b;a.scriptview=jview}))}else{e=ace.edit(jview[0]);e.getSession().setMode("ace/mode/java");j.scripteditor=e;j.scriptview=jview}},commitCode:function(){var c=this,d;d=c.m1$12();return d},refreshCode:function(){var f=this,d=f.scripteditor,e;e=Base64.decode(this._9._l22);d.setValue(e)},_IFe:function(){var f=this,d=f.scripteditor;var e=Base64.decode(this._9._l22);d.setValue(e)},m1$12:function(){var j=this,g=j.scripteditor,e=Base64.encode(g.getValue()),f=j._9;f._l22=e;f._l24.call(f);return true},initComponent:function(){var b=this;$s.apply(this,{items:[{xtype:"panel",layout:"border",items:[{xtype:"panel",region:"center",layout:"fit",title:"Script content",border:0,items:[{name:"script",html:"<div class='idv-jcl-edtr'></div>",listeners:{afterrender:function(a){b._IFe1.call(b)},resize:function(o,a,m,n,j,l){if(b.scriptview&&b.scripteditor){IG$.x_10._w(b.scriptview,a);IG$.x_10._h(b.scriptview,m);b.scripteditor.resize(true)}}}}]}]}]});IG$._IAe.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$.cm1=$s.extend($s.panel,{modal:true,layout:{type:"fit",align:"stretch"},_9:null,callback:null,_IG0:function(){this.close()},m1$9:function(){if(this.m1$12()==true){this.callback&&this.callback.execute();this._IG0()}},commitCode:function(){var b=this.m1$12();return b},refreshCode:function(){var f=this,d,e=f.scripteditor;d=f._9.getLayout();d=f.formatXml(d);e.setValue(d)},formatXml:function(N){var L=/(>)(<)(\/*)/g,A=/ *(.*) +\n/g,M=/(<.+>)(.+\n)/g,C=0,P="",Q,I=0,D="other",j={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},E,F,J,z,K,G,O,B,H;N=N.replace(L,"$1\n$2$3").replace(A,"$1\n").replace(M,"$1\n$2");Q=N.split("\n");for(var E=0;E<Q.length;E++){J=Q[E];z=Boolean(J.match(/<.+\/>/));K=Boolean(J.match(/<\/.+>/));G=Boolean(J.match(/<[^!].*>/));O=z?"single":K?"closing":G?"opening":"other";B=D+"->"+O;D=O;H="";I+=j[B];for(F=0;F<I;F++){H+="\t"}if(B=="opening->closing"){P=P.substr(0,P.length-1)+J+"\n"}else{P+=H+J+"\n"}}return P},_IFe1:function(){var j=this,f=j.down("[name=script]"),g=$(".idv-jcl-edtr",f.el.dom),e;g.empty();w=IG$.x_10._w(g);h=IG$.x_10._h(g);jview=$("<div class='idv-jcl-view'></div>").appendTo(g);IG$.x_10._w(jview,w);IG$.x_10._h(jview,h);e=ace.edit(jview[0]);e.setTheme("ace/theme/textmate");e.getSession().setMode("ace/mode/java");this.scripteditor=e;this.scriptview=jview},_IFe:function(){var f=this,e=f.scripteditor,d;d=this._9.getLayout();d=this.formatXml(d);e.setValue(d)},m1$12:function(){var d=this,f=d.scripteditor,e=f.getValue();r=d._9.setLayout(e);return r},initComponent:function(){var b=this;$s.apply(this,{items:[{xtype:"panel",layout:"border",items:[{xtype:"panel",region:"center",layout:"fit",border:0,items:[{name:"script",html:"<div class='idv-jcl-edtr'></div>",listeners:{afterrender:function(a){b._IFe1.call(b)},resize:function(o,a,m,n,j,l){if(b.scriptview&&b.scripteditor){IG$.x_10._w(b.scriptview,a);IG$.x_10._h(b.scriptview,m);b.scripteditor.resize(true)}}}}]}]}]});IG$.cm1.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$.D_=$s.extend($s.window,{modal:true,closable:false,resizable:true,layout:"fit",autoHeight:true,width:400,i1:function(){},initComponent:function(){var b=this;$s.apply(this,{title:IRm$.r1("T_DBD_VAR"),items:[{xtype:"panel",bodyPadding:10,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:"Variables"},{xtype:"gridpanel",flex:1,minHeight:400,store:{xtype:"store",fields:["name","uid","nodepath","type"]},columns:[{text:"",width:25},{text:"Name",flex:1},{text:"Bind Control",flex:1},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-delete",tooltip:"Delete variable",handler:function(j,f,a){var g=j.store.getAt(f);j.store.removeAt(f)}}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.close()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e,a){var f=this;setTimeout(function(){f.i1.call(f)},10)}}});IG$.D_.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$._IAa=$s.extend($s.window,{modal:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:true,width:500,height:400,_9:null,callback:null,caction:null,_IG0:function(){this.close()},m1$9:function(){var c=this,d=c._IH1;if(d.m1$12.call(d)==true){c.callback&&c.callback.execute();c._IG0()}},m1$9a:function(){this.cardNav(0)},m1$9b:function(){var l=this,m=l.down("[name=actionname]"),f=m.getValue(),g=l._9,j=l.caction.name;if(f==""){return}l.caction.desc=f;g.events[j]=l.caction;l._l13();l.cardNav(0)},m1$9m:function(){var l=this,m=l.down("[name=actionname]"),f=m.getValue(),g=l._9,j=l.caction.name;if(f==""){return}delete g.events[j];l._l13();l.caction=null;l.cardNav(0)},m1$9c:function(){var o=this,p=o.down("[name=controllist]").store.data,s,t,u,q=o._9,n,v,j;for(s=0;s<p.items.length;s++){u=p.items[s].data;if(/(onloadevents|timerevents)/.test(u.type)==true){q._l21[u.event]=u.action||""}else{n=u.name;j=u.event;v=q.controls[n];v.actionlist[j]=u.action||""}}o.cardNav(0)},m1$9d:function(){this.cardNav(0)},cardNav:function(d){var f=this._IH1,e=f.getLayout();e.setActiveItem(d)},_l10:function(m){var l=m,f=this;switch(m){case 0:f.cardNav(0);break;case 1:var g=f._9,j;j="action_"+g.eventseq;g.eventseq++;f.caction={name:j,desc:"",actionlist:[]};f._l11();break;case 2:f.cardNav(2);break}},_l11:function(){var j=this,g=[],f=j.caction,e=j.down("[name=actionname]");e.setValue(j.caction.desc||j.caction.name);j._l16();j.cardNav(1)},_l12:function(){var e=this,g=$("#action_wizard_step"),j=$("<li class='m-link'><b><span>Create new action.</span></b></li>"),f=$("<li class='m-link'><span>Bind action to control.</span></li>");g.append(j);g.append(f);j.bind("click",function(){e._l10.call(e,1)});f.bind("click",function(){if(e._9.events){var b,a=0;for(b in e._9.events){a++}if(a==0){return}}e._l10.call(e,2)});e._l13()},_l13:function(){var o=this,m,j=o._9,g,n=$("#m-action-list");n.empty();for(m in j.events){g=j.events[m];var l=$("<li id='"+m+"' class='m-link'><img src='./images/s.gif' class='item-icon icon-pkg'/><span>"+g.desc+"</span></li>");l.bind("click",function(){var b=this,a=b.id;if(o._9.events[a]){o.caction=o._9.events[a];o._l11.call(o)}});l.appendTo(n)}},_l14:function(){var e=this,j,f,g=[];for(j in e._9.events){f=e._9.events[j];g.push({name:f.desc,value:j})}e._l20.loadData(g)},_l15:function(){var f=this,e=f.down("[name=purpose]").getValue();if(!e||e==""){return}var d=new IG$._ID0(null);d.type=e;d.purpose=e;f.caction.actionlist.push(d);f._l18(d)},_l16:function(){var p=this,n=[],s,t,q,j,o=p.down("[name=cactionlist]"),m=p.caction;for(s=0;s<m.actionlist.length;s++){j=m.actionlist[s];j.uid="action_"+s;q={name:p._l17(j.purpose),type:j.purpose,uid:j.uid};switch(q.type){case"onlinereport":q.desc="";if(j.item&&j.item.uid){for(t=0;t<p._9.dashboardreport.length;t++){if(p._9.dashboardreport[t].uid==j.item.uid){q.desc=p._9.dashboardreport[t].name;break}}}break;case"valuelist":q.desc="";break;case"execute_script":q.desc=j.script;break;case"servercall":q.desc=j.jmethod+"("+j.jmodule_name+")";break;case"sql":break}n.push(q)}o.store.loadData(n)},_l17:function(f){var g=this,e,j="";for(e=0;e<g.eventdata.length;e++){if(g.eventdata[e].purpose==f){j=g.eventdata[e].desc;break}}return j},_l18:function(m){var n=this,l=null,j=n._9,o=null,g;for(g=0;g<n.caction.actionlist.length;g++){if(n.caction.actionlist[g].uid==m.uid){o=n.caction.actionlist[g];break}}l=new IG$._IAc({_9:j,ritem:o,qmode:m.purpose,callback:new IG$._I3d(n,n.fV5)});IG$._I_5(n,l)},fV5:function(){this._l16()},_l19:function(e,g){var f=this._9,j=f.controls[e];if(j){j.actionlist[g]=null}},initComponent:function(){var b=this;b.title=IRm$.r1("L_EVENT_WIZARD");b.eventdata=IG$.iU0;b._IH1=new $s.panel({layout:"card",activeItem:0,_9:b._9,_IFe:function(){var j=this,B,D,O=j._9,F=[],I=j.down("[name=controllist]"),C,M,J,N,a;var K={name:"OnLoad Action",type:"onloadevents",event:"onload",action:"",actiondesc:""},p={name:"Timer Action",type:"timerevents",event:"ontimer",action:"",actiondesc:""};M=O._l21.onload;K.action=(O.events[M]&&O.events[M]!="")?M:"";K.actiondesc=(O.events[M]&&O.events[M]!="")?O.events[M].desc:"";M=O._l21.ontimer;p.action=(O.events[M]&&O.events[M]!="")?M:"";p.actiondesc=(O.events[M]&&O.events[M]!="")?O.events[M].desc:"";F.push(K);F.push(p);if(O){for(a in O.controls){var A,L=O.controls[a];if(L&&IG$._IE0[L.type]&&IG$._IE0[L.type].p){var G=IG$._IE0[L.type].p,E=[];for(D=0;D<G.length;D++){if(G[D].type=="event"){var H={name:L.name,type:L.type,event:G[D].name,action:""};M=G[D].name;J=L.actionlist[M];if(J&&O.events[J]){H.action=J;H.actiondesc=O.events[J].desc}E.push(H)}}for(D=0;D<E.length;D++){F.push(E[D])}}}}I.store.loadData(F)},m1$12:function(){return true},items:[{id:"card-0",xtype:"panel",border:false,autoLoad:{url:"./html/action_wizard.html",callback:this._l12,scope:this},autoScroll:true},{id:"card-1",xtype:"form",plain:true,border:0,bodyPadding:5,fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:"Action name",name:"actionname"},{xtype:"fieldcontainer",fieldLabel:"Add Action",labelStyle:"font-weight:bold",layout:"hbox",defaultType:"textfield",items:[{xtype:"combo",store:{fields:[{name:"purpose",mapping:"purpose",type:"String"},{name:"desc",mapping:"desc",type:"String"}],data:this.eventdata},displayField:"desc",valueField:"purpose",editable:false,queryMode:"local",selectOnTab:false,name:"purpose"},{xtype:"button",text:"Append",handler:function(){this._l15()},scope:this}]},{xtype:"grid",height:210,store:{fields:[{name:"name"},{name:"type"},{name:"uid"},{name:"desc"},{name:"delete"}]},name:"cactionlist",columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name"},{text:IRm$.r1("B_DESC"),flex:1,sortable:false,dataIndex:"desc"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:"Edit",handler:function(m,g,a){var j=m.store.getAt(g),l=b.caction.actionlist[g];b._l18.call(b,l)}},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(j,f,a){var g=j.store.getAt(f);b.caction.actionlist.splice(f,1);j.store.remove(g)}}]}],viewConfig:{stripeRows:true},listeners:{itemdblclick:function(q,e,p,t,n,s){var a=q.store.getAt(t),o=b.caction.actionlist[t];b._l18.call(b,o)}}}],buttons:[{text:"Remove Action",handler:function(){this.m1$9m()},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9b()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.m1$9a()},scope:this}]},{id:"card-2",xtype:"panel",layout:"fit",items:[{xtype:"grid",store:{fields:[{name:"name"},{name:"type"},{name:"event"},{name:"action"},{name:"actiondesc"}]},name:"controllist",stateful:true,height:120,plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name",editable:false},{text:IRm$.r1("B_TYPE"),flex:1,sortable:false,dataIndex:"type",editable:false},{text:IRm$.r1("B_TYPE"),flex:1,sortable:false,dataIndex:"event",editable:false},{xtype:"gridcolumn",width:120,text:"Action",dataIndex:"action",editable:true,editor:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,triggerAction:"all",selectOnTab:true,store:{fields:["name","value"]},lazyRender:true,listClass:"x-combo-list-small",listeners:{afterrender:function(a){b._l20=a.store;b._l14.call(b)}}}},{xtype:"actioncolumn",width:50,editable:false,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(n,j,a){var l=n.store.getAt(j),o=l.get("name"),m=l.get("event");b._l19.call(b,o,m);l.set("action","")}}]}],viewConfig:{stripeRows:true}}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9c()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.m1$9d()},scope:this}]},{id:"card-3",xtype:"panel",border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[]}],listeners:{afterrender:function(d){var a=this;a._IFe()},cardswitch:function(){}}});$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[this._IH1],buttons:[{id:"card-prev",text:"Guide",handler:function(){this.cardNav(0)},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._IAa.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$._m2a=$s.extend($s.window,{modal:false,isWindow:true,region:"center",layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:560,height:400,_9:null,callback:null,_IG0:function(){this.close()},_IFf:function(){var m=this,n=true,g=m.fctrl,o,l,j=m.down("[name=g_store]");if(g){g._f_columns=[];for(o=0;o<j.store.data.items.length;o++){l=j.store.data.items[o];g._f_columns.push({name:l.get("name"),title:l.get("title"),hidden:l.get("hidden"),sortable:l.get("sortable"),kname:l.get("kname"),cstyle:l.get("cstyle"),columnwidth:l.get("columnwidth")})}}if(n==true){m.callback&&m.callback.execute();m._IG0()}},_IFe1:function(){var m=this,j=m._9,n=j.events,o,l=[],g=m.down("[name=g_store]");g.store.loadData(m.fctrl._f_columns);$.each(n,function(d,a){var c,b;for(c=0;c<a.actionlist.length;c++){if(a.actionlist[c].purpose=="sql"){b=a.actionlist[c];l.push({actiongroup:d,purpose:b.purpose,seq:b.seq,uid:b.uid,name:b.name,description:b.description})}}});m.down("[name=g_actions]").store.loadData(l)},i1:function(o){var q=this,m=q._9,s=m.events,p,l,t,n;l=s[o.get("actiongroup")];if(l){for(t=0;t<l.actionlist.length;t++){if(l.actionlist[t].seq==o.get("seq")){p=l.actionlist[t]}}}if(p){n=[];if(p.purpose=="sql"&&p.columns){for(t=0;t<p.columns.length;t++){n.push({name:p.columns[t].name,kname:p.columns[t].kname})}}q.down("[name=g_store]").store.loadData(n)}},initComponent:function(){var b=this;b.title="Grid Store Configuration",$s.apply(this,{items:[{xtype:"panel",layout:"card",name:"mcard",bodyPadding:10,items:[{xtype:"gridpanel",name:"g_store",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},store:{xtype:"store",fields:["name","title","hidden","sortable","kname","cstyle","columnwidth"]},columns:[{text:"Name",dataIndex:"name",flex:1,minWidth:120},{text:"Title",dataIndex:"title",flex:1,minWidth:120},{text:"Hidden",xtype:"checkcolumn",width:60,dataIndex:"hidden"},{text:"Sortable",xtype:"checkcolumn",width:60,dataIndex:"sortable"},{text:"Column Style",flex:1,minWidth:120,dataIndex:"cstyle"},{text:"Column Width",width:80,dataIndex:"columnwidth"}],tbar:[{text:"Move Up",handler:function(){},scope:this},{text:"Move Down",handler:function(){},scope:this},"->",{text:"Import from Action",handler:function(){this.down("[name=mcard]").getLayout().setActiveItem(1)},scope:this}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"g_actions",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},store:{xtype:"store",fields:["actiongroup","purpose","eventtype","uid","name","description","seq"]},columns:[{text:"Group",dataIndex:"actiongroup"},{text:"Type",dataIndex:"eventtype"},{text:"Name",dataIndex:"name"},{text:"Description",dataIndex:"description",flex:1}]},{xtype:"toolbar",layout:{type:"hbox",align:"stretch"},items:["->",{text:"Import Columns",handler:function(){var a=this,f=a.down("[name=g_actions]").getSelectionModel().selected,e;if(f&&f.length>0){e=f.items[0];a.i1(e)}a.down("[name=mcard]").getLayout().setActiveItem(0)},scope:this}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(a){b._IFe1.call(b)}}});IG$._m2a.superclass.initComponent.apply(this,arguments)}})}if(window.Ext){IG$._IAc=$s.extend($s.window,{modal:true,layout:{type:"fit",align:"stretch"},closable:false,resizable:false,width:600,height:500,_9:null,ritem:null,callback:null,qmode:null,_l15:function(){var p=this,n=p.down("[name=trpt_ol]").getValue(),q,s=null,l=p._9,o,t,m;o=l.controls[n];if(o&&o.item){for(q=0;q<p._9.dashboardreport.length;q++){if(p._9.dashboardreport[q].uid==o.item.uid){s=p._9.dashboardreport[q].cubeuid;break}}}if(!s){IG$._I52("Control have no valid cube information!");return}m=new IG$._IEf(null,"Report",false);m.filter=p.ritem.__sfilter;m.havingfilter=p.ritem.__shavingfilter;t=new IG$._Ia1({_ILb:m,cubeuid:s,callback:new IG$._I3d(p,function(){var g=this,c=[],d=[],a={},e=[],j,b=g.down("[name=filterlist]"),f={};g.ritem.__sfilter=m.filter;g.ritem.__shavingfilter=m.havingfilter;c=g.a1(g.ritem.__sfilter);d=g.a1(g.ritem.__shavingfilter);for(j=0;j<b.store.data.items.length;j++){rec=b.store.data.items[j];f[rec.get("name")]={map_param:rec.get("map_param"),map_type:rec.get("map_type")}}$.each([c,d],function(z,u){var y;for(y=0;y<u.length;y++){if(!a[u[y]]){a[u[y]]=1;if(f[u[y]]){e.push({name:u[y],map_param:f[u[y]].map_param,map_type:f[u[y]].map_type})}else{e.push({name:u[y],map_param:"",map_type:""})}}}});g.down("[name=filterlist]").store.loadData(e)})});IG$._I_5(this,t)},a1:function(e){var f=this,d=[];$.each(e.subGroups,function(a,b){var c=f.a1.call(f,b),j;for(j=0;j<c.length;j++){d.push(c[j])}});$.each(e.subConditions,function(a,b){var n,m,a=0,o,c;if(b.values&&b.values.length>0){for(n=0;n<b.values.length;n++){m=b.values[n].code;if(m){a=m.indexOf("${");while(a>-1){c=m.indexOf("}",a+1);if(c>-1){o=m.substring(a+2,c);d.push(o)}else{break}a=m.indexOf("${",a+1)}}}}});return d},_IG0:function(){this.close()},_l1a:function(){var d=this,c=new IG$._I96({visibleItems:"workspace;folder;dashboard",u5x:{cubebrowse:false,rootuid:null}});c.callback=new IG$._I3d(d,function(a){var b=this.down("[name=t_dlgitem]");d.ritem.item={uid:a.uid,name:a.name,nodepath:a.nodepath,type:a.type};b.setValue(d.ritem.item.name)});IG$._I_5(this,c)},_l16:function(){var d=this;var c=new IG$._I96({visibleItems:"workspace;folder;codemap;",u5x:{cubebrowse:false,rootuid:"/SYS_Lookup"}});c.callback=new IG$._I3d(d,d.rs__l16);IG$._I_5(this,c)},rs__l16:function(d){var e=this,f=e.down("[name=dimension]");e.sel_cmap=d;f.setValue(d.name)},j_1:function(){var c=this,d=new IG$._I3e();d.init(c,{ack:"11",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"jasper"})},c,function(q){var v=IG$._I18(q,"/smsg"),p=IG$._I26(v),s,x,t=[],b,u,a=c.down("[name=exp_tmpl]");t.push({name:IRm$.r1("B_SEL"),value:""});for(s=0;s<p.length;s++){x=IG$._I1c(p[s]);x.value=x.name;t.push(x)}a.store.loadData(t);a.setValue(c.ritem?c.ritem.exp_tmpl||"":"")},false);d._l()},_IFe:function(){var t=this,A,C=[],z=t._9,s,G,y,B,u=t.qmode,D;t.down("[name=e_name]").setValue(t.ritem.name||"");t.down("[name=e_desc]").setValue(t.ritem.description||"");t.j_1();switch(u){case"onlinereport":y=t.down("[name=trpt_ol]");C.push({name:"Select Control",uid:""});for(A in z.controls){G=z.controls[A];if(G.type=="olapreport"){C.push({name:G.name,uid:G.name})}}y.store.loadData(C);y.setValue(t.ritem.item?t.ritem.item.uid:"");var v=[];if(t.ritem.s_iparams){for(A=0;A<t.ritem.s_iparams.length;A++){v.push(t.ritem.s_iparams[A])}t.down("[name=filterlist]").store.loadData(v)}break;case"valuelist":B=t.down("[name=dimension]");t.ritem.item&&B.setValue(t.ritem.item.name);break;case"sql":t.down("[name=sqlsyntax]").setValue(t.ritem.sqlsyntax);t.down("[name=dsource]").setValue(t.ritem.dsource);t.down("[name=rmode]").setValue(t.ritem.rmode||"");var F=[],v=[],E=[],x=[],D,A;if(t.ritem.s_oparams){for(A=0;A<t.ritem.s_oparams.length;A++){D=t.ritem.s_oparams[A];v.push({name:D.name,kname:D.kname||D.name})}}if(t.ritem.s_iparams){for(A=0;A<t.ritem.s_iparams.length;A++){D=t.ritem.s_iparams[A];v.push({name:D.name,kname:D.kname||D.name})}}if(t.ritem.columns){for(A=0;A<t.ritem.columns.length;A++){E.push(t.ritem.columns[A])}}if(t.ritem.prompts){for(A=0;A<t.ritem.prompts.length;A++){x.push(t.ritem.prompts[A])}}t.down("[name=s_iparams]").store.loadData(F);t.down("[name=s_oparams]").store.loadData(v);t.down("[name=columngrid]").store.loadData(E);t.down("[name=promptgrid]").store.loadData(x);t._l2(t.ritem.dsource);break;case"execute_script":s=this.down("[name=scriptname]");for(A=0;A<z._l23.length;A++){C.push({name:z._l23[A]})}s.store.loadData(C);s.setValue(this.ritem.script);break;case"export":t.down("[name=exp_out]").setValue(t.ritem.exp_out||"");break;case"open_win":t.down("[name=ispopup]").setValue(t.ritem.ispopup);t.down("[name=t_dlgitem]").setValue(t.ritem.item?t.ritem.item.name:"");break;case"open_dlg":C.push({name:"Select",value:""});for(A=0;A<z._l23.length;A++){C.push({name:z._l23[A],value:z._l23[A]})}t.down("[name=btnclose]").store.loadData(C);IG$.x02(t,t.ritem,"btntype;dlgtitle;dlgmsg".split(";"));t.down("[name=btnclose]").setValue(t.ritem.btnclose||"");break;case"servercall":t._l1();break}},_l2:function(f){var d=this,e=new IG$._I3e();e.init(d,{ack:"25",payload:IG$._I2d({address:"/"}),mbody:IG$._I2e({option:"standard"})},d,function(p){var b=this,t=[],q,c=IG$._I18(p,"/smsg/item"),s,v,a=false,u=b.down("[name=dsource]");t.push({name:"-- Select Pool --",poolname:""});if(c){s=IG$._I26(c);a=IG$._I83.jS2;for(q=0;q<s.length;q++){v=IG$._I1c(s[q]);if(a==true||(a==false&&v.name.toUpperCase()!="MECBASE")){t.push({name:v.disp,poolname:v.name,uid:v.uid||"",isuserdb:(v.isuserdb=="T"?true:false),savepwd:(v.isuserdb=="T"&&v.savepwd=="F"?false:true)})}}}u.store.loadData(t);u.setValue(f||"")},false);e._l()},_l1:function(){var f=this,e=f.ritem._jmodule||f.ritem.jmodule,d;if(e){d=new IG$._I3e();d.init(f,{ack:"5",payload:IG$._I2d({uid:e}),mbody:IG$._I2e({option:"standard"})},f,function(m){var l=new IG$.ifg(m),a=[{name:"Select Method",value:""}],c,b;for(c=0;c<l.modules.length;c++){a.push({name:l.modules[c].name,value:l.modules[c].name})}b=l.ditem.nodepath.split("/");b.splice(0,1);b.splice(0,1);b=b.join(".");f.ritem._jmodule_name=b;f.down("[name=jmodule]").setValue(l.ditem.name);f.down("[name=jmethod]").store.loadData(a);f.down("[name=jmethod]").setValue(f.ritem.jmethod)},false);d._l()}},m1$9:function(){var y=this,A,H,I=this.ritem,B,v,F=null,A,x=y.qmode,K=y.down("[name=e_name]"),z,C,D;K.clearInvalid();y.ritem.name=K.getValue();y.ritem.description=y.down("[name=e_desc]").getValue();if(!y.ritem.name){K.markInvalid("Required Value");return false}switch(x){case"onlinereport":A=y.down("[name=trpt_ol]").getValue();y.ritem.item=null;if(A){y.ritem.item={uid:A}}z=y.down("[name=filterlist]");y.ritem.s_iparams=y.ritem.s_iparams||[];y.ritem.s_iparams.length&&y.ritem.s_iparams.splice(0,y.ritem.s_iparams.length);for(B=0;B<z.store.data.items.length;B++){C=z.store.data.items[B];y.ritem.s_iparams.push({name:C.get("name")})}break;case"sql":y.ritem.sqlsyntax=y.down("[name=sqlsyntax]").getValue();y.ritem.dsource=y.down("[name=dsource]").getValue();y.ritem.rmode=y.down("[name=rmode]").getValue();y.ritem.columns=[];y.ritem.prompts=[];y.ritem.s_iparams=[];y.ritem.s_oparams=[];var u=y.down("[name=columngrid]"),J=y.down("[name=promptgrid]"),G=y.down("[name=s_iparams]"),E=y.down("[name=s_oparams]"),C;for(B=0;B<u.store.data.items.length;B++){y.ritem.columns.push(u.store.data.items[B].data)}for(B=0;B<J.store.data.items.length;B++){y.ritem.prompts.push(J.store.data.items[B].data)}for(B=0;B<G.store.data.items.length;B++){C=G.store.data.items[B];if(C.get("name")){y.ritem.s_iparams.push({name:C.get("name"),kname:C.get("kname")})}}for(B=0;B<E.store.data.items.length;B++){C=E.store.data.items[B];if(C.get("name")){y.ritem.s_oparams.push({name:C.get("name"),kname:C.get("kname")})}}break;case"valuelist":if(y.sel_cmap){y.ritem.item={name:y.sel_cmap.name,nodepath:y.sel_cmap.nodepath,uid:y.sel_cmap.uid,type:y.sel_cmap.type}}break;case"execute_script":H=IG$.x01(this,"scriptname".split(";"));if(!H.b){return}I.script=H.v.scriptname;break;case"export":H=IG$.x01(this,"exp_tmpl;exp_out".split(";"));if(!H.b){return}I.exp_tmpl=H.v.exp_tmpl;I.exp_out=H.v.exp_out;break;case"servercall":H=IG$.x01(this,"jmethod".split(";"));if(!H.b){return}I.jmodule=I._jmodule||I.jmodule;I.jmodule_name=I._jmodule_name||I.jmodule_name;I.jmethod=H.v.jmethod;break;case"open_win":if(!I.s_iparams||(I&&I.s_iparams.length==0)){I.s_iparams=[{name:"target_window"}]}I.ispopup=y.down("[name=ispopup]").getValue();break;case"open_dlg":H=IG$.x01(this,"btntype;dlgtitle;dlgmsg".split(";"));if(!H.b){return}I.btntype=H.v.btntype;I.dlgtitle=H.v.dlgtitle;I.dlgmsg=H.v.dlgmsg;I.btnclose=y.down("[name=btnclose]").getValue();break}y.callback&&y.callback.execute();y._IG0()},_t1:function(){var j=this,l=new IG$._I3e(),m,g,f;m="<smsg><ExecuteSQL dbpool='"+j.down("[name=dsource]").getValue()+"' runmode='"+j.down("[name=rmode]").getValue()+"'>";m+="<SQL><![CDATA["+j.down("[name=sqlsyntax]").getValue()+"]]></SQL>";m+="<prompts>";m+="</prompts>";m+="</ExecuteSQL></smsg>";l.init(j,{ack:"18",payload:IG$._I2d({uid:this.uid,option:"sqlcubemeta"},"uid;option;active"),mbody:m},j,function(b){var G=this,d,p=IG$._I18(b,"/smsg/columns"),I=p?IG$._I26(p):null,F=[],e,a=[],A,E=G.down("[name=columngrid]"),D=G.down("[name=promptgrid]"),H={},c;if(I){for(d=0;d<I.length;d++){e=IG$._I1c(I[d]);e.fieldinfo=e.uid;e.uid=null;e.name=e.fieldname;e.name=e.name.replace(/\(/g,"");e.name=e.name.replace(/\)/g,"");e.name=e.name.replace(/\//g,"");e.fieldname=e.fieldinfo;e.sqlfield=e.name;if(!e.name){e.name="column_"+(d+1)}c="column_"+(d+1);e.kname=c;e.type=IG$._I34(e.datatype)==true?"Measure":"Metric";F.push(e)}}E.store.loadData(F);p=IG$._I18(b,"/smsg/prompts");I=(p?IG$._I26(p):null);if(I){for(d=0;d<I.length;d++){A=IG$._I1c(I[d]);if(!H[A.name]){var B=new IG$._Ib4(null);B.name=A.name;H[B.name]=B;a.push(A)}else{var B=H[A.name];a.push({name:B.name,datatype:B.datatype,type:B.type,allownullvalue:B.allownullvalue,defaultvalue:B.defaultvalue,datadelimiter:B.datadelimiter,coldelimiter:B.coldelimiter,valuetype:B.valuetype})}}}D.store.loadData(a);var C=G.down("[name=psql_c]");C.getLayout().setActiveItem(2)},null);l._l()},u1:function(){var s=this,q=s.down("[name=columngrid]"),p=s.down("[name=promptgrid]"),A=s.down("[name=s_iparams]"),y=s.down("[name=s_oparams]"),v,x,o=s.down("[name=psql_c]"),z=[],t=[],u=s.down("[name=rmode]").getValue();if(u=="map"){for(v=0;v<q.store.data.items.length;v++){x=q.store.data.items[v];t.push({name:x.get("name"),kname:x.get("kname")})}}else{if(u=="list"){for(v=0;v<5;v++){t.push({name:"output_control_"+(v+1),kname:"output_control_"+(v+1)})}}}for(v=0;v<p.store.data.items.length;v++){x=p.store.data.items[v];z.push({name:x.get("name")})}A.store.loadData(z);y.store.loadData(t);o.getLayout().setActiveItem(1)},initComponent:function(){var b=this;b.title=IRm$.r1("L_EVENT_WIZARD");b.opdata=[{name:"Equal",value:"=",dt_num:true,dt_str:true},{name:"Greater then",value:">",dt_num:true,dt_str:false},{name:"Less then",value:"<",dt_num:true,dt_str:false},{name:"Greater or Equal",value:">=",dt_num:true,dt_str:false},{name:"Less or Equal",value:"<=",dt_num:true,dt_str:false},{name:"Like compare",value:"LIKE",dt_num:false,dt_str:true},{name:"Between",value:"BETWEEN",dt_num:true,dt_str:false}];$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"panel",border:0,bodyPadding:5,fieldDefaults:{labelWidth:140,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"General Info",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",fieldLabel:"Name",name:"e_name"},{xtype:"textarea",name:"e_desc",height:50,fieldLabel:"Description"}]},{xtype:"form",hidden:this.qmode!="onlinereport",border:0,bodyPadding:5,flex:1,fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",name:"trpt_ol",queryMode:"local",store:{fields:["name","uid"]},displayField:"name",valueField:"uid",fieldLabel:"Target Control"},{xtype:"fieldcontainer",layout:{type:"hbox",align:"middle"},defaultType:"textfield",items:[{xtype:"displayfield",value:"Filter conditions"},{xtype:"button",margin:"0 0 0 5",text:"Edit Filter Condition",handler:function(){this._l15()},scope:this}]},{xtype:"grid",flex:1,title:"Filter Input Params",store:{fields:["name","map_param","map_type"]},name:"filterlist",columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name"},{text:IRm$.r1("B_VALUE"),flex:1,sortable:false,dataIndex:"map_param"}],viewConfig:{stripeRows:true}}]},{xtype:"panel",border:0,hidden:this.qmode!="open_win",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"checkbox",boxLabel:"Popup Dialog",name:"ispopup"},{xtype:"fieldcontainer",layout:{type:"hbox"},fieldLabel:"Open Dialog Item",items:[{xtype:"textfield",readOnly:true,name:"t_dlgitem",flex:1},{xtype:"button",text:"..",handler:function(){this._l1a()},scope:this}]}]},{xtype:"panel",border:0,hidden:(this.qmode!="open_dlg"),flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:"Button Type",name:"btntype",store:{xtype:"store",fields:["name","value"],data:[{name:"1 Buttons",value:"close"},{name:"2 Buttons",value:"yesno"},{name:"3 Buttons",value:"yesnocancel"}]},displayField:"name",valueField:"value",editable:false,queryMode:"local",selectOnTab:true},{xtype:"textfield",fieldLabel:"Title",name:"dlgtitle"},{xtype:"textarea",name:"dlgmsg",fieldLabel:"Message"},{xtype:"combobox",fieldLabel:"Close Action",name:"btnclose",store:{xtype:"store",fields:["name","value"]},displayField:"name",valueField:"value",editable:false,queryMode:"local",selectOnTab:true}]},{xtype:"panel",border:0,hidden:this.qmode!="valuelist",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:"Select CodeMap for patch data"},{xtype:"fieldcontainer",fieldLabel:"CodeMap name",labelStyle:"font-weight:bold",layout:"hbox",defaultType:"textfield",items:[{xtype:"textfield",name:"dimension"},{xtype:"button",text:"Select",handler:function(){this._l16()},scope:this}]}]},{xtype:"panel",border:0,name:"psql_c",hidden:this.qmode!="sql",flex:1,layout:"card",deferredRender:false,dockedItems:[{xtype:"toolbar",dock:"top",items:[{xtype:"button",text:"Query View",handler:function(){var a=this.down("[name=psql_c]");a.getLayout().setActiveItem(0)},scope:this},{xtype:"button",text:"Parameter View",handler:function(){var a=this.down("[name=psql_c]");a.getLayout().setActiveItem(1)},scope:this},{xtype:"button",text:"Column View",handler:function(){var a=this.down("[name=psql_c]");a.getLayout().setActiveItem(2)},scope:this},"->",{xtype:"button",text:"Test Query",handler:function(){this._t1()},scope:this}]}],items:[{xtype:"panel",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",name:"rmode",fieldLabel:"Run Mode",queryMode:"local",editable:false,displayField:"name",valueField:"value",store:{fields:["name","value"],data:[{name:"Select",value:""},{name:"Single Line Query",value:"map"},{name:"Data Grid",value:"list"},{name:"Insert / Update",value:"update"}]}},{xtype:"combobox",name:"dsource",fieldLabel:"Source",queryMode:"local",editable:false,displayField:"name",valueField:"poolname",store:{fields:["name","uid","poolname"]}},{xtype:"textarea",flex:1,name:"sqlsyntax",fieldLabel:"SQL Syntax"}]},{xtype:"panel",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",title:"Input Parameter",name:"s_iparams",store:{xtype:"store",fields:["name"]},flex:1,tbar:[{xtype:"button",text:"Add",handler:function(){},scope:this},{xtype:"button",text:"Remove",handler:function(){},scope:this},{xtype:"button",text:"Generate Parameter",handler:function(){},scope:this}],columns:[{text:"Name",dataIndex:"name",flex:1}]},{xtype:"gridpanel",flex:1,title:"Output Parameter",name:"s_oparams",store:{xtype:"store",fields:["name","kname"]},tbar:[{xtype:"button",text:"Add",handler:function(){},scope:this},{xtype:"button",text:"Remove",handler:function(){},scope:this},{xtype:"button",text:"Generate Parameter",handler:function(){},scope:this}],columns:[{text:"Name",dataIndex:"name",flex:1},{text:"Key name",dataIndex:"kname",flex:1}]}]},{xtype:"panel",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"grid",title:"Column Outputs",name:"columngrid",stateful:true,columnLines:true,flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:["name","fieldname","sqlfield","type","datatype","tablename","dataoption_data","dataoption_valuetype","dataoption_datadelimiter","dataoption_coldelimiter","uid","mapto","kname"]},initialized:false,layout:"fit",plugins:[{ptype:"cellediting",clicksToEdit:1}],viewConfig:{plugins:[{ptype:"gridviewdragdrop",dragText:"Drag and drop to filter area",enableDrop:false,enableDrag:true,ddGroup:"_I$RD_G_"}]},columns:[{xtype:"gridcolumn",text:"Metric Name",dataIndex:"name",flex:1,editor:{allowBlank:false}},{xtype:"gridcolumn",text:"Column Name",dataIndex:"fieldname",flex:1},{xtype:"gridcolumn",text:"Data Type",dataIndex:"type",width:60,field:{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:false,autoSelect:true,triggerAction:"all",selectOnTab:true,store:{fields:["name","value"],data:[{name:"Metric",value:"Metric"},{name:"Measure",value:"Measure"}]},lazyRender:true,listClass:"x-combo-list-small"}}]},{xtype:"grid",title:"Prompts",name:"promptgrid",flex:1,stateful:true,columnLines:true,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:["name","defaultvalue","type","datatype","allownullvalue","valuetype","datadelimiter","coldelimiter"]},initialized:false,layout:"fit",plugins:window.Ext?[{ptype:"cellediting",clicksToEdit:1}]:null,columns:[{xtype:"gridcolumn",text:"Name",dataIndex:"name",flex:1,editor:{allowBlank:false}},{xtype:"gridcolumn",text:"Default value",dataIndex:"defaultvalue",flex:1},{xtype:"gridcolumn",text:"Data Type",dataIndex:"datatype",width:60},{xtype:"gridcolumn",text:"Value Type",dataIndex:"type",width:60}]},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:" Click button to view query"},{xtype:"fieldcontainer",flex:1},{xtype:"button",text:"Update parameter",handler:function(){this.u1()},scope:this}]}]}]},{xtype:"form",border:0,bodyPadding:5,hidden:this.qmode!="execute_script",fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:"Select script function to execute"},{xtype:"combo",fieldLabel:"Script Function",name:"scriptname",store:{fields:["name"]},displayField:"name",valueField:"name",editable:false,queryMode:"local",selectOnTab:false}]},{xtype:"form",border:0,bodyPadding:5,hidden:this.qmode!="export",fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:"Select Jasper Report"},{xtype:"combo",fieldLabel:"Templates",name:"exp_tmpl",store:{fields:["name"]},displayField:"name",valueField:"name",editable:false,queryMode:"local"},{xtype:"combo",fieldLabel:"Output Type",name:"exp_out",store:{fields:["name","value"],data:[{name:IRm$.r1("L_EXPORT_EXCEL"),value:"excel"},{name:IRm$.r1("L_EXPORT_PDF"),value:"pdf"},{name:IRm$.r1("L_EXPORT_DOCX"),value:"word"},{name:IRm$.r1("L_EXPORT_RTF"),value:"rtf"},{name:IRm$.r1("L_EXPORT_PPT"),value:"ppt"},{name:IRm$.r1("L_EXPORT_HTML"),value:"html"},{name:IRm$.r1("L_EXPORT_XML"),value:"xml"}]},displayField:"name",valueField:"value",editable:false,queryMode:"local"},{xtype:"gridpanel",minHeight:200,name:"exp_target",selType:"checkboxmodel",selModel:{mode:"MULTI",checkSelector:".x-grid-cell"},columns:[{text:"Name",flex:1},{text:"Sequence",flex:1,editor:{xtype:"textfield"}}]}]},{xtype:"panel",border:0,bodyPadding:5,hidden:this.qmode!="servercall",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Call function",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},fieldLabel:"Class Module",items:[{xtype:"textfield",flex:1,readOnly:true,name:"jmodule"},{xtype:"button",text:"..",handler:function(){var a=new IG$._I96({visibleItems:"workspace;folder;classmodule",u5x:{cubebrowse:true,rootuid:"/BusinessProcess"},callback:new IG$._I3d(this,function(d){if(d){this.down("[name=jmodule]").setValue(d.name);this.ritem._jmodule=d.uid;this._l1()}})});IG$._I_5(this,a)},scope:this}]},{xtype:"combobox",flex:1,editable:false,fieldLabel:"Method",name:"jmethod",flex:1,queryMode:"local",store:{xtype:"store",fields:["name","value"]},valueField:"value",displayField:"name"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(d){var a=this;a._IFe()},scope:this}});IG$._IAc.superclass.initComponent.apply(this,arguments)}})}IG$.iU0=null;if(window.Ext){IG$.__Ifd0=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:true,width:550,height:450,_1:function(){var B,u=this,y=u._9,v,C=[],A=[],x=u.down("[name=grd_src]"),s=u.down("[name=grd_tgt]"),E=u.ctrl,t=u.actionlist,q,z,D={};for(B in y.events){v=y.events[B];q={name:v.desc,uid:B,type:"action"};D[B]=q;C.push(q)}if(t){for(z=0;z<t.length;z++){if(D[t[z].uid]){A.push(D[t[z].uid])}}}x.store.loadData(C);s.store.loadData(A);s.frc=null},m1$9b:function(){var f=this,m=f.actionlist,j=f.down("[name=grd_tgt]"),g,l;m.splice(0,m.length);for(g=0;g<j.store.data.items.length;g++){l=j.store.data.items[g];m.push({name:l.get("name"),uid:l.get("uid")})}f.callback&&f.callback.execute(f);f.close()},initComponent:function(){var b=this;b.title=IRm$.r1("L_EVENT_WIZARD");$s.apply(b,{items:[{xtype:"panel",bodyPadding:5,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,border:0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_src",title:"All Actions",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},store:{xtype:"store",fields:["name","description","uid"]},columns:[{text:"Actin Name",dataIndex:"name",flex:1},{text:"Description",dataIndex:"description",flex:1}],tbar:[{xtype:"displayfield",value:"Check actions and register",height:22}]},{xtype:"fieldcontainer",padding:5,layout:{type:"vbox",pack:"center",padding:5},items:[{xtype:"button",text:">",handler:function(){var o=this,l=o.down("[name=grd_src]"),j=o.down("[name=grd_tgt]"),n=l.getSelectionModel().selected,a,m;for(a=0;a<n.length;a++){m=n.items[a];j.store.add(m.data)}},scope:this},{xtype:"container",height:5},{xtype:"button",text:"<",handler:function(){var o=this,l=o.down("[name=grd_src]"),j=o.down("[name=grd_tgt]"),n=j.getSelectionModel().selected,a,m;for(a=n.length-1;a>=0;a--){m=n.items[a];j.store.remove(m);if(j.frc==m){j.frc=null}}},scope:this}]},{xtype:"gridpanel",name:"grd_tgt",title:"Selected Actions",flex:1,store:{xtype:"store",fields:["name","description","uid"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},columns:[{text:"Actin Name",dataIndex:"name",flex:1},{text:"Description",dataIndex:"description",flex:1}],listeners:{cellclick:function(y,v,p,u,q,e,t,x){var s=this,a=s.down("[name=grd_tgt]");a.frc=u},scope:this},tbar:[{xtype:"button",text:"Go Up",handler:function(){var j=this,f=j.down("[name=grd_tgt]"),a,g;if(f.frc){g=f.store.indexOf(f.frc);if(g>0){f.store.remove(f.frc);f.store.insert(g-1,f.frc)}}},scope:this},{xtype:"button",text:"Go Down",handler:function(){var j=this,f=j.down("[name=grd_tgt]"),a,g;if(f.frc){g=f.store.indexOf(f.frc);if(g>-1&&g<f.store.data.items.length-1){f.store.remove(f.frc);f.store.insert(g+1,f.frc)}}},scope:this}]}]}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9b()},scope:b},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:b}]});IG$.__Ifd0.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(b){this._1()}}})}IG$.$Ifd=IG$.$Ifd||{};IG$.$Ifd._l17=function(j){var q,s,m=this,v="",t="",o="",u=j.purpose,p=IG$.iU0;for(q=0;q<p.length;q++){if(p[q].purpose==u){t=p[q].desc;break}}v="("+j.name+":"+t+")";switch(u){case"onlinereport":if(j.item&&j.item.uid){for(s=0;s<m._9.dashboardreport.length;s++){if(m._9.dashboardreport[s].uid==j.item.uid){o=m._9.dashboardreport[s].name;break}}}break;case"export":break;case"valuelist":o="";break;case"execute_script":o=j.script;break;case"servercall":o=j.jmethod+":"+j.jmodule_name+")";break}if(o){v="*"+o+" "+v}return v};if(window.Ext){IG$.__Ifd=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:true,width:600,height:500,_l11:function(){var j=this,g=[],f=j.caction,e=j.down("[name=actionname]");e.setValue(j.caction.desc||j.caction.name);j._l16()},_l15:function(){var f=this,e=f.down("[name=purpose]").getValue();if(!e||e==""){return}var d=new IG$._ID0(null);d.type=e;d.purpose=e;f.caction.actionlist.push(d);f._l18(d)},_l18:function(m){var n=this,l,j=n._9,o=null,g;n.citem=null;for(g=0;g<n.caction.actionlist.length;g++){if(n.caction.actionlist[g].uid==m.uid){o=n.caction.actionlist[g];break}}l=new IG$._IAc({_9:j,ritem:o,qmode:m.purpose,callback:new IG$._I3d(n,n.fV5)});IG$._I_5(this,l)},fV5:function(){var b=this;b._l16()},_l17:IG$.$Ifd._l17,_l16:function(){var o=this,m=[],q,j,p,l,n=o.down("[name=cactionlist]");for(q=0;q<o.caction.actionlist.length;q++){l=o.caction.actionlist[q];l.uid="action_"+q;p={name:l.name,aname:o._l17(l),type:l.purpose,uid:l.uid};p.name=p.name||p.aname;m.push(p)}n.store.loadData(m);if(o.citem){o._l18.call(o,o.citem)}},m1$9b:function(){var n=this,t=n.down("[name=actionname]"),s=t.getValue(),o=n._9,m=n.caction.name,u=n.down("[name=cactionlist]"),v={},p,q;if(s==""){return}for(p=0;p<n.caction.actionlist.length;p++){v[n.caction.actionlist[p].uid]=n.caction.actionlist[p]}n.caction.actionlist=[];for(p=0;p<u.store.data.items.length;p++){q=u.store.data.items[p];if(v[q.get("uid")]){n.caction.actionlist.push(v[q.get("uid")])}}n.caction.desc=s;o.events[m]=n.caction;n.callback&&n.callback.execute();n.close()},m1:function(n){var g=this,l=g.down("[name=cactionlist]"),o=l.getSelectionModel().selected,m,j;if(o&&o.length>0){m=o.items[0];j=l.store.indexOf(m);if(n==-1&&j>0){l.store.remove(m);l.store.insert(j-1,m)}else{if(n==1&&j+1<l.store.data.items.length){l.store.remove(m);l.store.insert(j+1,m)}}}},initComponent:function(){var b=this;b.title=IRm$.r1("L_EVENT_WIZARD");$s.apply(b,{items:[{xtype:"form",border:0,bodyPadding:5,fieldDefaults:{labelWidth:100,anchor:"100%"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",fieldLabel:"Action name",name:"actionname"},{xtype:"fieldcontainer",fieldLabel:"Add Action",labelStyle:"font-weight:bold",layout:"hbox",defaultType:"textfield",items:[{xtype:"combo",name:"purpose",store:{xtype:"store",fields:["purpose","desc"],data:IG$.iU0},displayField:"desc",valueField:"purpose",editable:false,queryMode:"local",selectOnTab:false},{xtype:"button",text:"Append",handler:function(){this._l15()},scope:b}]},{xtype:"grid",flex:1,tbar:[{xtype:"button",text:"Up",handler:function(){this.m1(-1)},scope:this},{xtype:"button",text:"Down",handler:function(){this.m1(1)},scope:this}],store:{fields:["name","type","uid","desc","delete","aname"]},name:"cactionlist",columns:[{text:IRm$.r1("B_NAME"),width:120,sortable:false,dataIndex:"name"},{text:"Action type",sortable:false,dataIndex:"aname",flex:1},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:"Edit",handler:function(m,g,a){var j=m.store.getAt(g),l=b.caction.actionlist[g];b._l18.call(b,l)}},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(j,f,a){var g=j.store.getAt(f);b.caction.actionlist.splice(f,1);j.store.remove(g)}}]}],viewConfig:{stripeRows:true},listeners:{itemdblclick:function(q,e,p,t,n,s){var a=q.store.getAt(t),o=b.caction.actionlist[t];b._l18.call(b,o)}}}]}],buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.m1$9b()},scope:b},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:b}]});IG$.__Ifd.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(b){this._l11()}}})}if(window.Ext){IG$._Ifd=$s.extend($s.panel,{layout:"fit",border:0,_l19:function(f,j){var m=this,g=m._9,l;if(j=="onload"||j=="ontimer"){l=g._l21;l[j]=null}else{l=g.controls[f];if(l){l.actionlist[j]=null}}},_gl:function(l,m){var n=this,j=n._9,g,o;for(g=0;g<m.length;g++){o=j.events[m[g].uid];if(o){l.action=(g==0)?o.name:l.action+","+o.name;l.actiondesc=(g==0)?o.desc:l.actiondesc+","+o.desc}}},_l17:IG$.$Ifd._l17,_e1:function(q){var s=this,m=s.down("[name=p_grd_inp]"),n=s.down("[name=p_grd_out]"),t,o,p=[],l=[];s._c1();m.store.loadData([]);n.store.loadData([]);if(q.purpose=="servercall"||q.purpose=="open_win"){s._e2(q)}else{if(q.s_iparams){for(t=0;t<q.s_iparams.length;t++){o=q.s_iparams[t].name;p.push({name:o,map_param:q.iparams&&q.iparams[o]?q.iparams[o].map_param:null,map_type:q.iparams&&q.iparams[o]?q.iparams[o].map_type:null})}}if(q.s_oparams){for(t=0;t<q.s_oparams.length;t++){o=q.s_oparams[t].name;l.push({name:o,map_param:q.oparams&&q.oparams[o]?q.oparams[o].map_param:null,map_type:q.oparams&&q.oparams[o]?q.oparams[o].map_type:null})}}m.store.loadData(p);n.store.loadData(l)}s._c1d=q},_c1:function(){var n=this,o=n._c1d,j=n.down("[name=p_grd_inp]"),l=n.down("[name=p_grd_out]"),m,g;if(o){o.iparams={};o.oparams={};o.s_iparams=[];o.s_oparams=[];for(g=0;g<j.store.data.items.length;g++){m=j.store.data.items[g];if(m.get("map_param")){o.iparams[m.get("name")]={name:m.get("name"),map_param:m.get("map_param"),map_type:m.get("map_type")}}if(m.get("name")){o.s_iparams.push({name:m.get("name"),type:m.get("type")})}}for(g=0;g<l.store.data.items.length;g++){m=l.store.data.items[g];if(m.get("map_param")){o.oparams[m.get("name")]={name:m.get("name"),map_param:m.get("map_param"),map_type:m.get("map_type")}}if(m.get("name")){o.s_oparams.push({name:m.get("name"),type:m.get("type")})}}n._c1d=null}},_e2:function(s){var o=this,n,q=o.down("[name=p_grd_inp]"),v=o.down("[name=p_grd_out]"),t=s.purpose,p="servercall",u="open_win",m=(t==p)?s.jmodule:s.item.uid;o._c1();q.store.loadData([]);v.store.loadData([]);if(!m){return}n=new IG$._I3e();n.init(o,{ack:"5",payload:IG$._I2d({uid:m}),mbody:IG$._I2e({option:"standard"})},o,function(g){var d=(t==p?new IG$.ifg(g):null),l,A,a=[],f=[],b,c,e,j;if(t==p){for(l=0;l<d.modules.length;l++){if(d.modules[l].name==s.jmethod){A=d.modules[l];break}}if(A!=null){for(l=0;l<A.iparams.length;l++){b=A.iparams[l].name;a.push({name:b,map_param:s.iparams&&s.iparams[b]?s.iparams[b].map_param:null,map_type:s.iparams&&s.iparams[b]?s.iparams[b].map_type:null})}for(l=0;l<A.oparams.length;l++){b=A.oparams[l].name;f.push({name:b,map_param:s.oparams&&s.oparams[b]?s.oparams[b].map_param:null,map_type:s.oparams&&s.oparams[b]?s.oparams[b].map_type:null})}o._c1d=s}}else{c=IG$._I18(g,"/smsg/item/page_params");e=c?IG$._I26(c):null;if(e){for(l=0;l<e.length;l++){j=IG$._I1b(e[l],"type");if(j=="var"){b=IG$._I1a(e[l],"name");a.push({name:b,map_param:s.iparams&&s.iparams[b]?s.iparams[b].map_param:null,map_type:s.iparams&&s.iparams[b]?s.iparams[b].map_type:null});f.push({name:b,map_param:s.oparams&&s.oparams[b]?s.oparams[b].map_param:null,map_type:s.oparams&&s.oparams[b]?s.oparams[b].map_type:null})}}}}q.store.loadData(a);v.store.loadData(f)},false);n._l()},_IFe:function(){var I=this,X=I._9,Y=X.events,T=I.down("[name=g_actions]"),Q=I.down("[name=controllist]"),n,t,S,H=[],G=[],M,K,P,j,N,W,R,O,V,J,p;for(n in X.events){K=X.events[n];S={name:K.desc,uid:n,leaf:false,type:"action",children:[]};H.push(S);for(t=0;t<K.actionlist.length;t++){M=K.actionlist[t];M.seq=t;S.children.push({name:I._l17(M),type:"actionitem",uid:n,seq:t,leaf:true})}}P={name:"Actions",children:H,expanded:true};T.store.setRootNode(P);I.s1(false);var U={name:"OnLoad Action",type:"onloadevents",event:"onload",action:"",actiondesc:""},L={name:"Timer Action",type:"timerevents",event:"ontimer",action:"",actiondesc:""};X._l21.onload=X._l21.onload||[];X._l21.ontimer=X._l21.ontimer||[];W=X._l21.onload;I._gl(U,W);W=X._l21.ontimer;I._gl(L,W);G.push(U);G.push(L);for(n in X.controls){V=X.controls[n];if(V&&IG$._IE0[V.type]&&IG$._IE0[V.type].p){J=IG$._IE0[V.type].p;p=[];for(j=0;j<J.length;j++){if(J[j].type=="event"){N={name:V.name,type:V.type,event:J[j].name,action:""};W=J[j].name;V.actionlist[W]=V.actionlist[W]||[];R=V.actionlist[W];I._gl(N,R);p.push(N)}}for(j=0;j<p.length;j++){G.push(p[j])}}}Q.store.loadData(G);I.u()},u:function(){var p=this,q=p.down("[name=grd_pparam]"),m=[],l=p._9,n=l.page_params,j,o;for(j=0;j<n.length;j++){if(n[j].type=="var"){m.push({name:n[j].name,defvalue:n[j].defvalue,type:n[j].type||"var",ctrltype:n[j].ctrltype})}}for(k in l.controls){o=l.controls[k];m.push({name:k,type:"ctrl",defvalue:"",ctrltype:o.type})}q.store.loadData(m)},commitCode:function(){return true},refreshCode:function(){var b=this;b._IFe()},_l14:function(){var j=this,e,f,g=[];for(e in j._9.events){f=j._9.events[e];g.push({name:f.desc,value:e})}j._l20&&j._l20.loadData(g)},_f1:function(){var n=this,j=n._9,o=n.down("[name=grd_pparam]"),g,m,l;j.page_params=[];j.page_param_map={};for(g=0;g<o.store.data.items.length;g++){l=o.store.data.items[g];if(l.get("name")){m=new IG$.p_g1(l.get("name"),l.get("defvalue"));m.type=l.get("type")||"var";m.ctrltype=l.get("ctrltype");j.page_params.push(m);j.page_param_map[m.name]=m}}this._c1()},_t$:function(n){var o=this,j=o._9,m,l,g;switch(n){case"cmd_new_action":m="action_"+j.eventseq;j.eventseq++;l=new IG$.__Ifd({_9:j,callback:new IG$._I3d(o,function(){var a=this;a._IFe();a._l14()}),caction:{name:m,desc:"",actionlist:[]}});IG$._I_5(this,l);break;case"cmd_new_param":g=o.down("[name=grd_pparam]");g.store.add({name:"",value:"",type:"var"});break}},_g1:function(u,p,n){var q=this,m,s=q._9,t=s.controls,v,o;if(n=="onload"||n=="ontimer"){v=s._l21;v[n]=v[n]||[];o=v[n]}else{v=t[p];v.actionlist[n]=v.actionlist[n]||[];o=v.actionlist[n]}m=new IG$.__Ifd0({_9:q._9,ctrl:v,actionlist:o,callback:new IG$._I3d(q,function(b){var a="";adesc="",i;for(i=0;i<o.length;i++){a=(i==0)?o[i].uid:a+","+o[i].uid;adesc=(i==0)?o[i].name:adesc+","+o[i].name}u.set("action",a);u.set("actiondesc",adesc)})});IG$._I_5(this,m)},s1:function(m){var l=this,g=l.down("[name=p_param]"),f=l.down("[name=p_grd_inp]"),j=l.down("[name=p_grd_out]");g.setDisabled(!m);if(!m){f.store.loadData([]);j.store.loadData([])}},initComponent:function(){var d=this,e,f;if(!IG$.iU0){IG$.iU0=[{purpose:"onlinereport",desc:IRm$.r1("L_P_onlinereport")},{purpose:"valuelist",desc:IRm$.r1("L_P_valuelist")},{purpose:"sql",desc:IRm$.r1("L_P_sql")},{purpose:"execute_script",desc:IRm$.r1("L_P_execute_script")},{purpose:"open_win",desc:IRm$.r1("L_P_open_win")},{purpose:"open_dlg",desc:IRm$.r1("L_P_open_dlg")},{purpose:"export",desc:IRm$.r1("L_P_export")},{purpose:"servercall",desc:IRm$.r1("L_P_inv_svc")},{purpose:"close",desc:IRm$.r1("L_P_cls")}]}e=function(y,u,s,a,b){var z=false,A,t,v,c,x=u.records&&u.records.length>0?u.records[0]:null;c=u.view.ownerCt.name;if(c=="grd_pparam"&&x&&s){s.set("map_param",x.get("name"));s.set("map_type",x.get("type"))}return z};f=function(l,c,a,m){var b=false;return b};$s.apply(d,{items:[{xtype:"panel",layout:"border",border:0,tbar:[{xtype:"button",text:"New Action",handler:function(){this._t$("cmd_new_action")},scope:d},{xtype:"button",text:"New Parameter",handler:function(){this._t$("cmd_new_param")},scope:d}],items:[{xtype:"treepanel",region:"center",name:"g_actions",title:"Actions",flex:1,store:{xtype:"treestore",fields:["name","uid","type","seq"]},columns:[{xtype:"treecolumn",flex:1,text:"Name",dataIndex:"name"},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:"Edit Action",handler:function(y,c,b){var q=this,v=y.store.getAt(c),x=q._9.events[v.get("uid")],s,u,a,t;var a=v.get("seq"),u,t;if(v.get("type")=="actionitem"){a=v.get("seq");for(t=0;t<x.actionlist.length;t++){if(x.actionlist[t].seq==a){u=x.actionlist[t];break}}}s=new IG$.__Ifd({_9:q._9,callback:new IG$._I3d(q,function(){var g=this;g._IFe();g._l14()}),caction:x,citem:u});IG$._I_5(this,s)},scope:d},{iconCls:"icon-grid-delete",tooltip:"Delete Action",handler:function(n,a,o){var c=this,b=n.store.getAt(a),p=b.get("uid"),q;if(b.get("type")=="action"){c.s1(false);IG$._I55(null,null,function(g){if(g=="yes"){n.store.removeAt(a);delete c._9.events[p];c._l14.call(c)}},c,c)}else{if(b.get("type")=="actionitem"){c.s1(true);n.store.removeAt(a);q=c._9.events[p];q.actionlist.splice(b.get("seq"),1)}}},scope:this}]}],listeners:{itemclick:function(z,v,B,b,u,t){var c=this,A;A=c._9.events[v.get("uid")];if(v.get("type")=="action"){v.expand();if(A){dlg=new IG$.__Ifd({_9:c._9,callback:new IG$._I3d(c,function(){var g=this;g._IFe();g._l14()}),caction:A});IG$._I_5(this,dlg)}}else{if(v.get("type")=="actionitem"){c.s1(true);if(A){var a=v.get("seq"),y,x;for(x=0;x<A.actionlist.length;x++){if(A.actionlist[x].seq==a){y=A.actionlist[x];break}}if(y){c._e1(y)}}}}},scope:d}},{xtype:"gridpanel",region:"east",title:"Binded Controls",name:"controllist",flex:1,store:{fields:["name","type","event","action","actiondesc"]},stateful:true,height:120,plugins:[{ptype:"cellediting",clicksToEdit:1}],viewConfig:{stripeRows:true},columns:[{text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name",editable:false,minWidth:120},{text:IRm$.r1("B_TYPE"),flex:1,sortable:false,dataIndex:"type",editable:false,minWidth:80},{text:IRm$.r1("B_TYPE"),flex:1,sortable:false,dataIndex:"event",editable:false,minWidth:80},{xtype:"gridcolumn",width:120,text:"Action",dataIndex:"actiondesc"},{xtype:"actioncolumn",width:50,editable:false,items:[{iconCls:"icon-grid-config",tooltip:"Bind Event",handler:function(m,a,o){var b=m.store.getAt(a),n=b.get("name"),c=b.get("event");d._g1(b,n,c)}},{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(m,a,o){var b=m.store.getAt(a),n=b.get("name"),c=b.get("event");d._l19.call(d,n,c);b.set("action","");b.set("actiondesc","")}}]}],listeners:{cellclick:function(B,z,b,x,c,D,v,A){if(b==2){var u=this,y=x,a=y.get("name"),C=y.get("event");u._g1(y,a,C)}},scope:this}},{xtype:"panel",region:"south",flex:1,collapsible:false,collapseMode:"mini",hideCollapseTool:true,header:0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",name:"grd_pparam",title:"Page Parameters",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTIPLE"},store:{xtype:"store",fields:["name","defvalue","type","ctrltype"]},enableDD:true,plugins:[{ptype:"cellediting",clicksToEdit:1}],viewConfig:{plugins:[{ptype:"gridviewdragdrop",dragGroup:"_I$RD_G_"}],listeners:{beforedrop:e,drop:f}},columns:[{text:"Type",dataIndex:"type",width:50},{text:"Name",flex:1,dataIndex:"name",editor:{xtype:"textfield",allowBlank:false}},{text:"Default Value",flex:1,dataIndex:"defvalue",editor:{xtype:"textfield",allowBlank:true}},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete Action",handler:function(l,a,m){var c=this,b=l.store.getAt(a);if(b.get("type")=="var"){l.store.removeAt(a)}},scope:this}]}]},{xtype:"panel",name:"p_param",disabled:true,flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"p_grd_inp",title:"Input parameter",emptyText:"No Action Item selected or no Input parameter",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTIPLE"},store:{xtype:"store",fields:["name","map_param","map_type","type"]},tbar:[{text:"Add",handler:function(){var a=this.down("[name=p_grd_inp]");a.store.add({name:"",map_param:"",map_type:"",type:"custom"})},scope:this},{text:"Remove",handler:function(){},scope:this}],plugins:[{ptype:"cellediting",clicksToEdit:1}],viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"}],listeners:{beforedrop:e,drop:f}},columns:[{text:"Name",flex:1,dataIndex:"name",editor:{xtype:"textfield",allowBlank:false}},{text:"Value",flex:1,dataIndex:"map_param"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete Action",handler:function(l,a,m){var c=this,b=l.store.getAt(a);b.set("map_param","");b.set("map_type","")},scope:this}]}]},{xtype:"gridpanel",name:"p_grd_out",title:"Output parameter",emptyText:"No Action Item selected or no Output parameter",flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTIPLE"},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"}],listeners:{beforedrop:e,drop:f}},tbar:[{text:"Add",handler:function(){var a=this.down("[name=p_grd_out]");a.store.add({name:"",map_param:"",map_type:"",type:"custom"})},scope:this},{text:"Remove",handler:function(){},scope:this}],plugins:[{ptype:"cellediting",clicksToEdit:1}],store:{xtype:"store",fields:["name","map_param","map_type","type"]},columns:[{text:"Name",flex:1,dataIndex:"name",editor:{xtype:"textfield",allowBlank:false}},{text:"Value",flex:1,dataIndex:"map_param"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete Action",handler:function(l,a,m){var c=this,b=l.store.getAt(a);b.set("map_param","");b.set("map_type","")},scope:this}]}]}]}]}]}]});IG$._Ifd.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(){}}})}IG$._dRp=$s.extend($s.window,{title:IRm$.r1("L_PRV_DATA"),modal:true,width:400,height:350,layout:"fit",_1:function(){var c=this,d=new IG$._I3e();d.init(c,{ack:"5",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:""})},c,function(b){var a=IG$._I18(b,"/smsg/item")},false);d._l()},initComponent:function(){var b=this;$s.apply(this,{items:[{xtype:"panel",bodyPadding:10,layout:{type:"vbox",align:"stretch"},items:[{html:"<div style='height: 200px;overflow: auto;'><img src='"+ig$.servlet+"?sreq=resource&_rcs_="+b.uid+"&_mts_="+IG$._g$a+"'></img></div>",name:"img_prev"}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._dRp.superclass.initComponent.call(this)},listeners:{afterrender:function(b){if(b.uid){b._1.call(b)}}}});IG$._dR=$s.extend(IG$._I57,{layout:"fit",_9:null,m1$9:function(){if(this.m1$12()==true){this.callback&&this.callback.execute();this._IG0()}},_IFe1:function(){},commitCode:function(){var q=this,s=true,l=q._9,m=l?l.rcs:null,t,n=q.down("[name=dgrid]"),p,o;if(l){if(m.length){m.splice(0,m.length)}for(t=0;t<n.store.data.items.length;t++){o=n.store.data.items[t];p={uid:o.get("uid"),name:o.get("name")};m.push(p)}}return s},refreshCode:function(){},_IFe:function(){var b=this;b._m3(9)},_t$:function(c){var d=this;switch(c){case"cmd_import":d.down("[name=d_file]").show();break;case"cmd_reload":d._m3();break;case"cmd_mgr_rcs":break;case"cmd_c_files":d._m2();break}},_m1:function(){var q=this,s=q.down("[name=d_file]"),o=s.el.dom,t=$(".m_fileupload",o),l=q.down("[name=d_upfiles]"),p,m,n;t.empty();p=$("<input type='file' name='files[]' data-url='upload' multiple></input>").appendTo(t);m=$("<div class='filedropzone fade well'>Drop files here</div>").appendTo(t);n=$("<div class='file-progress'><div class='bar' style='width: 0%;'></div></div>").appendTo(t);p.fileupload({url:ig$.servlet,dataType:"text",done:function(j,a){var f=a.result||'<smsg errorcode="0xffff" errormsg="Server incorrect responding"/>',y=IG$._I13(f),e=IG$._I27(y),c,g,z,b=[],d;if(e){IG$._I51(y,q,null)}else{c=IG$._I18(y,"/smsg");if(c){g=IG$._I26(c);for(z=0;z<g.length;z++){d=IG$._I1c(g[z]);b.push(d)}}}if(b&&b.length){l.show();for(z=0;z<b.length;z++){l.store.add(b[z])}}},progressall:function(c,d){var b=parseInt(d.loaded/d.total*100,10),a=$(".bar",n);a.css("width",b+"%");a.text("Loaded "+d.loaded+" / "+d.total)},dropZone:m}).bind("fileuploadsubmit",function(a,b){});p.fileupload("option","url",ig$.servlet);q._m3()},_m2:function(){var q=this,t,y=q.down("[name=d_upfiles]"),v=q.down("[name=dgrid]"),o=y.store,u,s=[],p=new IG$._I3e(),x=v.store,n={};for(t=0;t<x.data.items.length;t++){u=x.data.items[t];n[u.get("name")]=u.get("uid")}for(t=0;t<o.data.items.length;t++){u=o.data.items[t];s.push("<item uid='"+u.get("uid")+"' name='"+u.get("filename")+"'"+(n[u.get("filename")]?" ouid='"+n[u.get("filename")]+"'":"")+"/>")}if(s.length){s="<smsg>"+s.join("")+"</smsg>";p.init(q,{ack:"11",payload:s,mbody:IG$._I2e({option:"reg_rcs",buid:q.uid})},q,function(a){q._m3(1)},false);p._l()}},_m3:function(g){var m=this,j=m.down("[name=dgrid]"),f=new IG$._I3e(),l="DashboardResources";if(g==1){d_upfiles=m.down("[name=d_upfiles]");d_upfiles.store.removeAll();d_upfiles.hide();m.down("[name=d_file]").hide()}if(!m.gobj){f.init(m,{ack:"11",payload:IG$._I2d({uid:"/"+l,name:l,type:"Workspace",post:"create",duty:"everyone",mode:"s"},"uid;type;name;post;duty;mode"),mbody:IG$._I2e({option:"translate"})},m,function(b){var a=IG$._I18(b,"/smsg/item");if(a){m.gobj=IG$._I1c(a);m._m3a(m.gobj.uid,g,"global",new IG$._I3d(m,function(){var c=this;if(c.uid&&c.cmode=="page"){c._m3a(c.gobj.uid,g,"page")}}))}},false);f._l()}else{m._m3a(m.gobj.uid,g,"global",new IG$._I3d(m,function(){var a=this;if(a.uid&&a.cmode=="page"){a._m3a(a.gobj.uid,g,"page")}}))}},_m3a:function(o,l,j,m){var p=this,q=new IG$._I3e(),n=p.down("[name=dgrid]");q.init(p,{ack:"5",payload:IG$._I2d({uid:o}),mbody:IG$._I2e({option:"folder"})},p,function(c){var e=IG$._I18(c,"/smsg/item"),f=e?IG$._I26(e):null,b,d=[],a,g;if(f){for(b=0;b<f.length;b++){a=IG$._I1c(f[b]);a.btype=j;if(a.name.indexOf(".")>-1){a.fileext=a.name.substring(a.name.lastIndexOf(".")+1)}d.push(a)}}for(b=n.store.data.items.length-1;b>=0;b--){g=n.store.data.items[b];if(g.get("btype")==j){n.store.remove(g)}}for(b=0;b<d.length;b++){n.store.add(d[b])}if(l==9){p.commitCode()}m&&m.execute()},false);q._l()},_l2:function(l){var m=this,f=new IG$._I3e(),g="<smsg><item uid='"+l.get("uid")+"'/></smsg>",j=m.down("[name=dgrid]");f.init(m,{ack:"30",payload:g,mbody:IG$._I2e({option:"delete"})},m,function(a){j.store.remove(l)},null);f._l()},initComponent:function(){var b=this;$s.apply(this,{tbar:[{iconCls:"icon-toolbar-import",tooltip:IRm$.r1("L_IMPORT_FILE"),text:IRm$.r1("L_IMPORT_FILE"),handler:function(){this._t$("cmd_import")},scope:this},{iconCls:"icon-refresh",tooltip:"Reload",handler:function(){this._t$("cmd_reload")},scope:this},"-",{iconCls:"icon-toolbar-runreport",tooltip:"Open Dashboard Resources",handler:function(){this._t$("cmd_mgr_rcs")},scope:this}],items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{html:"<div class='m_fileupload'></div>",name:"d_file",height:120,hidden:true,bodyPadding:10},{name:"d_upfiles",xtype:"gridpanel",height:120,hidden:true,selType:"checkboxmodel",selModel:{mode:"MULTI"},store:{fields:["uid","filename","fileext"]},columns:[{text:IRm$.r1("L_FILENAME"),dataIndex:"filename",flex:1},{text:IRm$.r1("L_FILEEXT"),dataIndex:"fileext",flex:1},{xtype:"actioncolumn",width:20,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(j,f,a){var g=j.store.getAt(f);j.store.remove(g)}}]}],fbar:["->",{xtype:"button",text:"Commit All Files",handler:function(){this._t$("cmd_c_files")},scope:this},{xtype:"button",text:"Cancel All Files",handler:function(){var d=this,a=d.down("[name=d_upfiles]");a.store.removeAll();a.hide();d.down("[name=d_file]").hide()},scope:this}]},{xtype:"gridpanel",name:"dgrid",flex:1,selType:"checkboxmodel",selModel:{mode:"MULTI"},store:{fields:["uid","name","type","filename","btype","memo","imgwidth","imgheight","fileext"]},columns:[{text:IRm$.r1("B_TYPE"),width:100,dataIndex:"btype"},{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"},{text:IRm$.r1("L_FILENAME"),flex:1,dataIndex:"memo"},{text:IRm$.r1("L_FILEEXT"),width:120,dataIndex:"fileext"},{text:IRm$.r1("B_WIDTH"),dataIndex:"imgwidth",width:80},{text:IRm$.r1("B_HEIGHT"),dataIndex:"imgheight",width:80},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(m,g,a){var l=this,j=m.store.getAt(g);IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",j.get("name")),function(c){if(c=="yes"){j&&l._l2(j)}})},scope:this}]}],listeners:{cellclick:function(C,B,s,A,t,e,y,x){var u=this,z=A.get("fileext"),a=(/png|gif|jpg|jpeg/).test(z);if(s==2&&a){var v=new IG$._dRp({uid:A.get("uid")});IG$._I_5(this,v)}},scope:this}}]}]});IG$._dR.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(b){b._m1()}}});IG$.Y$1=function(e,d){var f=this;this.panel=e;this.html=d};IG$.Y$1.prototype={initDrawing:function(){var v=this,t=5,s=$(this.html),q=$("<div></div>"),p=$("<table class='idv-dpm'><tr><td>Width</td><td class='mec-wfm'></td></tr><tr><td>Height</td><td class='mec-wfm'></td></tr></table>"),o="<input type='checkbox' class='idv-poic'/>",n="<input type='text' class='idv-poi'/>",u;this.hbox=$("<div></div>");this.chelp=$("<div></div>");s.append(p);var l=p.find(".mec-wfm");q.css({position:"absolute",top:40,right:0,bottom:0,left:0});s.append(q);this.hbox.css({position:"absolute",background:"#cecece"});q.append(this.hbox);this.chelp.css({position:"relative",background:"#ffffff",padding:0,margin:0,width:100,height:70,display:"none"});this.hbox.append(this.chelp);u=$("<table class='idv-dp-tb'><tr><td><input id='tw' type='checkbox' class='cbox'/><span>Width</span></td><td><input type='text' id='tw_value' class='idv-poiw' value=''></td></tr><tr><td><input id='th' type='checkbox' class='cbox'/><span>Height</span></td><td><input type='text' id='th_value' class='idv-poiw' value=''></td></tr></table>");s.prepend(u);this.tw=$("#tw",u);this.tw_value=$("#tw_value",u);this.th=$("#th",u);this.th_value=$("#th_value",u);$.each(["tw","th"],function(a,b){v[b].bind("change",function(){var c=this;v.checkChanged.call(v,c)})});$.each(["tw_value","th_value"],function(a,b){v[b].bind("blur",function(){var c=this;v.valueChanged.call(v,c)});v[b].bind("keydown",function(c){if(c.keyCode==13){var d=this;v.valueChanged.call(v,d)}})});$.each(["t1","t2","t3","l1","l2","l3"],function(a,b){v[b]=$(o,s);v[b][0].name=b;v[b+"_value"]=$(n);v[b+"_value"][0].name=b+"_value";v[b].css({position:"absolute",top:t,left:t,display:(b=="t2"||b=="l2")?"none":"inline"});v[b+"_value"].css({position:"absolute",top:t,left:t});q.append(v[b]);q.append(v[b+"_value"]);v[b].bind("change",function(){var c=this;v.checkChanged.call(v,c)});v[b+"_value"].bind("blur",function(){var c=this;v.valueChanged.call(v,c)});v[b+"_value"].bind("keydown",function(c){if(c.keyCode==13){var d=this;v.valueChanged.call(v,d)}})});this.validatePosition()},valueChanged:function(j){var f=j.name,g=this.pos,e=j.value;switch(f){case"t1_value":g.left=e;break;case"t2_value":g.center=e;break;case"t3_value":g.right=e;break;case"l1_value":g.top=e;break;case"l2_value":g.middle=e;break;case"l3_value":g.bottom=e;break;case"tw_value":g.width=e;break;case"th_value":g.height=e;break}this.updateValues()},updateValues:function(){var b=this;$.each([{l:"t1",v:"left"},{l:"t2",v:"center"},{l:"t3",v:"right"},{l:"l1",v:"top"},{l:"l2",v:"middle"},{l:"l3",v:"bottom"},{l:"tw",v:"width"},{l:"th",v:"height"}],function(m,l){if(b[l.l][0].checked==true){var a=b[l.l+"_value"][0].value,g=l.v;if(l.l=="tw"||l.l=="th"){if(a.indexOf("%")>-1){var j=a.split("%")[0];a=j;b.pos[g]=null;g="percent"+g;a=Number(a);a=Math.round(a*100)/100;b.pos[g]=a}else{a=Number(a);a=Math.round(a*100)/100;b.pos[g]=a;b.pos["percent"+g]=null}}else{a=Number(a);a=Math.round(a*100)/100;b.pos[g]=a}}});this.updatePreviewer();if(this.panel.positionchanged){this.panel.positionchanged.call(this.panel)}},updateBoxValue:function(f){var e=this,g=this.pos;var j={x:10,y:10,width:null,height:null,percentwidth:null,percentheight:null,x1:10,y1:10};j.x=(g.left!=null)?g.left:(g.right!=null&&g.width!=null)?f.width-g.right-g.width:(g.right!=null&&g.percentwidth!=null)?f.width-g.right-(f.width-g.right)*0.01*g.percentwidth:-1;j.y=(g.top!=null)?g.top:(g.bottom!=null&&g.height!=null)?f.height-g.bottom-g.height:(g.bottom!=null&&g.percentheight!=null)?f.height-g.bottom-(f.height-g.bottom)*0.01*g.percentheight:-1;if(g.percentwidth!=null){j.percentwidth=g.percentwidth;j.width=(g.left!=null)?g.percentwidth*0.01*(f.width-g.left):(g.right!=null)?g.percentwidth*0.01*(f.width-g.right):-1}else{j.width=(g.width!=null)?g.width:(g.left!=null&&g.right!=null)?f.width-g.left-g.right:-1}if(g.percentheight!=null){j.percentheight=g.percentheight;j.height=(g.top!=null)?g.percentheight*0.01*(f.height-g.top):(g.bottom!=null)?g.percentheight*0.01*(f.height-g.bottom):-1}else{j.height=(g.height!=null)?g.height:(g.top!=null&&g.bottom!=null)?f.height-g.bottom-g.top:-1}j.width=(j.width!=-1)?Math.abs(j.width):-1;j.height=(j.height!=-1)?Math.abs(j.height):-1;j.x=(j.x!=-1)?Math.abs(j.x):-1;j.x1=f.width-(j.x+j.width);j.y1=f.height-(j.y+j.height);return j},checkChanged:function(o){var g=o.name,m=o.checked,l=this.pos,j=this.upos,n;n=this.updateBoxValue(this.upos);switch(g){case"t1":if(m==true){l.left=n.x}else{l.left=null;if(l.right==null){l.right=n.x1}if(l.width==null&&l.percentwidth==null){l.width=n.width}}break;case"t2":break;case"t3":if(m==true){l.right=n.x1}else{l.right=null;if(l.left==null){l.left=n.x}if(l.width==null&&l.percentwidth==null){l.width=n.width}}break;case"l1":if(m==true){l.top=n.y}else{l.top=null;if(l.bottom==null){l.bottom=n.y1}if(l.height==null&&l.percentheight==null){l.height=n.height}}break;case"l2":break;case"l3":if(m==true){l.bottom=n.y1}else{l.bottom=null;if(l.top==null){l.top=n.y}if(l.height==null&&l.percentheight==null){l.height=n.height}}break;case"tw":if(m==true){l.width=n.width;if(l.left!=null&&l.right!=null){l.right=null}}else{l.width=null;l.percentwidth=null;if(l.left==null||l.right==null){l.left=n.x;l.right=n.x1}}break;case"th":if(m==true){l.height=n.height;if(l.top!=null&&l.bottom!=null){l.bottom=null}}else{l.height=null;l.percentheight=null;if(l.top==null||l.bottom==null){l.top=n.y;l.bottom=n.y1}}break}this.setControlInput()},validatePosition:function(){var p=$(this.html),o=IG$.x_10._w(p),q=IG$.x_10._h(p)-40,u=IG$.x_10._w($(this.t1)),l=IG$.x_10._h($(this.t1)),s=IG$.x_10._w($(this.t1_value)),v=IG$.x_10._h($(this.t1_value)),t=10;this.hbox.css({left:u+t,right:s+t,top:l+t,bottom:v+t});var n={x:u+t,y:l+t,w:IG$.x_10._w(this.hbox),h:IG$.x_10._h(this.hbox)};n.x1=n.w+n.x;n.y1=n.h+n.y;this.t1.css({left:n.x});this.t2.css({left:n.x+(n.w-u)/2});this.t3.css({left:n.x1-u});this.t1_value.css({top:n.y1,left:n.x});this.t2_value.css({top:n.y1,left:n.x+(n.w-s)/2});this.t3_value.css({top:n.y1,left:(o-s-t)});this.l1.css({top:n.y});this.l2.css({top:n.y+(n.h-l)/2});this.l3.css({top:n.y1-l});this.l1_value.css({left:n.x1,top:n.y});this.l2_value.css({left:n.x1,top:n.y+(n.w-v)/2});this.l3_value.css({left:n.x1,top:n.y1-v})},setControlPosition:function(c,d){this.pos=c;this.upos=d;this.setControlInput()},setControlInput:function(){var d=this,f=d.pos,e=d.upos;f.left=(typeof f.left=="undefined")?null:f.left;f.right=(typeof f.right=="undefined")?null:f.right;f.center=(typeof f.center=="undefined")?null:f.center;f.top=(typeof f.top=="undefined")?null:f.top;f.middle=(typeof f.middle=="undefined")?null:f.middle;f.bottom=(typeof f.bottom=="undefined")?null:f.bottom;f.width=(typeof f.width=="undefined")?null:f.width;f.height=(typeof f.height=="undefined")?null:f.height;f.percentwidth=(typeof f.percentwidth=="undefined")?null:f.percentwidth;f.percentheight=(typeof f.percentheight=="undefined")?null:f.percentheight;if(f.left==null&&f.right==null&&f.width==null){f.left=10;f.width=f.percentwidth==null?50:null}if(f.top==null&&f.bottom==null&&f.height==null){f.top=10;f.height=f.percentheight==null?50:null}if(f.left!=null&&f.right!=null){f.width=null;f.percentwidth=null}if(f.top!=null&&f.bottom!=null){f.height=null;f.percentheight=null}if(f.left!=null&&(f.width!=null||f.percentwidth!=null)){f.right=null}if(f.right!=null&&(f.width!=null||f.percentwidth!=null)){f.left=null}if(f.top!=null&&(f.height!=null||f.percentheight!=null)){f.bottom=null}if(f.bottom!=null&&(f.height!=null||f.percentheight!=null)){f.top=null}this.updatePreviewer();this.setSelection("tw",(f.width!=null)?f.width:(f.percentwidth!=null)?f.percentwidth+"%":-1);this.setSelection("th",(f.height!=null)?f.height:(f.percentheight!=null)?f.percentheight+"%":-1);this.setSelection("t1",(f.left!=null)?f.left:-1);this.setSelection("t3",(f.right!=null)?f.right:-1);this.setSelection("l1",(f.top!=null)?f.top:-1);this.setSelection("l3",(f.bottom!=null)?f.bottom:-1)},updatePreviewer:function(){var e=IG$.x_10._w(this.hbox),d=IG$.x_10._h(this.hbox),f=this.updateBoxValue({width:e,height:d});this.chelp.css({left:f.x,top:f.y,width:f.width,height:f.height});this.chelp.show()},setSelection:function(c,d){if(d==-1){this[c][0].checked=false;if(this[c+"_value"]){this[c+"_value"].css({display:"none"})}}else{this[c][0].checked=true;if(this[c+"_value"]){this[c+"_value"].css({display:"inline"});this[c+"_value"][0].value=d}}}};IG$.cM9=function(g,e){var f=e,j=e;this.panel=e;this.el=g;this.dragZone=Ext.create("Ext.dd.DragZone",g,{ddGroup:"_I$RD_G_",getDragData:function(s){var b=s.browserEvent.pageX,c=s.browserEvent.pageY,a=f.getRendererByPoint(b,c),p,q,d;if(a){p=a.cl;if(p.position==1||p.position==2||(p.position==3&&p.title==1)){j.isDragging=true;d=a[0];q=d.cloneNode(true);q.id=Ext.id();return j.dragData={sourceEl:d,repairXY:Ext.fly(d).getXY(),ddel:q,cellData:p}}}},afterInvalidDrop:function(a){if(this.dragData&&this.dragData.cellData&&j._ILb){}},getRepairXY:function(){j.isDragging=false;return this.dragData.repairXY}});this.dropZone=Ext.create("Ext.dd.DropZone",g,{ddGroup:"_I$RD_G_",nodeouttimer:-1,getTargetFromEvent:function(a){var c=a.browserEvent.pageX,d=a.browserEvent.pageY,b=j.getRendererByPoint(c,d);if(b==null){b=g}return b},notifyOut:function(c,a,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,c,a,b);this.lastOverNode=null}j.isDragging=false;j.hideDropFeedback.call(j,a);if(this.accept==true){if(j.sheetobj){if(this.nodeouttimer>-1){clearTimeout(this.nodeouttimer)}this.nodeouttimer=setTimeout(function(){j.hideDropFeedback.call(j,a)},100)}}},onNodeEnter:function(t,q,u,a){j.isDragging=true;var c,b,s,d=false;if(a.records&&a.records.length>0){b=a.records[0].data;s=b.type.toLowerCase();d=true}if(d==true){j.showDropHelper.call(j,b)}this.accept=d},onNodeOut:function(a,d,b,c){},onNodeOver:function(p,o,a,b){var c,d=((this.accept==true)?Ext.dd.DropZone.prototype.dropAllowed:Ext.dd.DropZone.prototype.dropNotAllowed);if(this.accept==true){if(b.records&&b.records.length>0){c=b.records[0].data}else{c=b.cellData}j.showDropFeedback.call(j,a,c)}return d},onNodeDrop:function(a,d,b,c){j.hideDropFeedback.call(j,b);if(this.accept==true){if(c.records&&c.records.length>0){dt=c.records[0].data}else{dt=c.cellData}j.onDropWidget.call(j,b,dt)}this.accept=false;return true}})};if(window.Ext){IG$._IC8=$s.extend(IG$._I57,{closable:true,ecname:null,layout:"fit",iconCls:"icon-dashboard",listeners:{afterrender:function(c){var d=this;d._IFd()}},_IFd:function(){var d=this,e=d.down("[name=pnl_position]"),f=new IG$.Y$1(d,e.body.dom);d.in$d();d.pot=f;f.initDrawing();if(d.uid&&d.uid.length>0){d.F1()}else{d.setLoading(false)}},in$d:function(){var d=this,f=d.down("[name=layout_preview]"),e=f.body.dom;d.dd=new IG$.cM9(e,d)},getRendererByPoint:function(){return null},hideDropFeedback:function(){},showDropHelper:function(){},showDropFeedback:function(){},onDropWidget:function(l,n){var o=this,m=o.down("[name=layout_preview]"),e=new IG$._ID1(null,null),j;e.type=n.type;e.name=e.type+"_"+o.F9(n.type);e.position={top:l.browserEvent.offsetY,left:l.browserEvent.offsetX,width:100,height:100};$.each(o._9.layout,function(b,a){if(a.type=="panel"||a.type=="tabpanel"){var c=a.position;if(c.top<e.position.top&&e.position.top<c.top+c.height&&c.left<e.position.left&&e.position.left<c.left+c.width){j=a}}});e.properties.Name=e.name;e.updatePropertyValue.call(e,true);if(j){e.position.top-=j.position.top;e.position.left-=j.position.left;j.layout.push(e)}else{o._9.layout.push(e)}m.M3.call(m);o.F5(null,o._9.layout);o.refreshControl()},refreshControl:function(){var g=this,n=g.down("[name=ctrl_layout]"),o=g.down("[name=layout_preview]"),l=$(o.body.dom),j={x:0,y:0,w:IG$.x_10._w(l),h:IG$.x_10._h(l)},m={t:0,b:0,l:0,r:0};g.rootctrl=[];g.F3(null,g._9.layout,g.rootctrl);n.store.setRootNode({expanded:true,text:"Root Layout",name:"Root Layout",children:g.rootctrl});if(g.dummyInfo){g.dummyInfo.remove()}g.F2(null,g._9.layout,l,j,m);g.dummyInfo=$("<div class='dummyinfo'></div>");g.dummyInfo.appendTo(l);g.dummyInfo.hide()},positionchanged:function(){var f=this,m=f.down("[name=layout_preview]");if(f._9&&f._9.layout){var j=$(m.body.dom),g={x:0,y:0,w:IG$.x_10._w(j),h:IG$.x_10._h(j)},l={t:0,b:0,l:0,r:0};m.M3.call(m)}},F1:function(){var c=this,d;c.setLoading(true);d=new IG$._I3e();d.init(c,{ack:"5",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({})},c,c._IM9,false);d._l()},_IM9:function(f){var e=this,g=e.down("[name=ctrl_layout]"),j=e.down("[name=layout_preview]");e.setLoading(false);e._9=new IG$.cdxml(f);e._9.parseContent.call(e._9,e);e.down("[name=b_tmpl_name]").setValue(e._9.tmpl?e._9.tmpl.name:"");e.updateCubeUID();e.updateScript();e.rootctrl=[];e.F3(null,e._9.layout,e.rootctrl);g.store.setRootNode({expanded:true,text:"Root Layout",name:"Root Layout",children:e.rootctrl});j.M3.call(j,e._9)},updateCubeUID:function(){var n=this,o,l=[],m=0,g,j;if(n._9.dashboardreport.length>0){l.push("<smsg><item uid='"+n.uid+"'>");for(g=0;g<n._9.dashboardreport.length;g++){j=n._9.dashboardreport[g];if(!j.detail){l.push("<Report"+IG$._I20(j,"uid;name;nodepath;type")+"/>");m++}}l.push("</item></smsg>")}if(m>0){n.setLoading(true);o=new IG$._I3e();o.init(n,{cacheid:"",refresh:"",ack:"11",payload:l.join(""),mbody:IG$._I2e({option:"reportdetail"})},n,n.rs_updateCubeUID,false);o._l()}},rs_updateCubeUID:function(p){var n=this,s=n._9,j=s.dashboardreport,t,u,v,o,q;n.setLoading(false);if(j.length>0){v=IG$._I18(p,"/smsg/item");if(v){o=IG$._I26(v);for(t=0;t<o.length;t++){q=IG$._I1c(o[t]);for(u=0;u<j.length;u++){if(j[u].uid==q.uid){j[u].name=q.name;j[u].nodepath=q.nodepath;j[u].cubeuid=q.cubeuid;j[u].detail=q;break}}}}}},updateScript:function(){var m=this,l=m.down("[name=m_code]"),j=m.down("[name=l_code]"),f=m.down("[name=m_code_]"),g=m.down("[name=l_3]");l._9=m._9;l._IFe.call(l);j._9=m._9;j._IFe.call(j);f._9=m._9;f._IFe.call(f);g._9=m._9;g.uid=m.uid;g._IFe.call(g)},_f1:function(){var d=this,e=d.down("[name=m_code_]"),f=d.down("[name=m_code]");f.commitCode.call(f);e._f1.call(e)},F2:function(v,t,u,p,o){var q=this,n=q.down("[name=layout_preview]"),s=$(".dashboardview",n.body.dom),m=q.down("[name=l_code]");n.Mm11.call(n,"",IG$.x_10._w(s),IG$.x_10._h(s),null);m.refreshCode.call(m)},F3:function(B,u,E){var v,A,y,x,H=(B)?B.type.toLowerCase():"",j=(B)?B.properties.layout:"fit",C;for(v=0;v<u.length;v++){C=u[v];y={name:C.name,type:C.type,pname:C.pname};x=y.type.toLowerCase();if(x=="panel"){y.children=[];y.leaf=false;var D=C.properties.layout||"fit";switch(D){case"border":var G={center:{name:"Center",type:"blank",pname:y.name,region:"center"},north:{name:"North",type:"blank",pname:y.name,region:"north"},south:{name:"South",type:"blank",pname:y.name,region:"south"},east:{name:"East",type:"blank",pname:y.name,region:"east"},west:{name:"West",type:"blank",pname:y.name,region:"west"}};if(C.layout&&C.layout.length>0){var F=false;for(A=0;A<C.layout.length;A++){if(C.layout[A].properties.region=="center"){F=true;break}}if(F==false){C.layout[0].properties.region="center";G.center.name=C.layout[0].name;G.center.type=C.layout[0].type}for(A=0;A<C.layout.length;A++){var I=C.layout[A].properties.region;if(I){G[I].layout=C.layout[A];G[I].name=C.layout[A].name;G[I].type=C.layout[A].type;if(C.layout[A].layout&&C.layout[A].layout.length>0){G[I].children=[];this.F3(C,C.layout[A].layout,G[I].children)}}}}$.each(["center","north","east","south","west"],function(c,a){var b=G[a];if(b){y.children.push(b)}});break;case"portal":for(A=0;A<C.layout.length;A++){var I=C.layout[A];var z={name:I.name,type:I.type};if(I.layout&&I.layout.length>0){z.children=[];this.F3(I,I.layout,z.children)}}break;default:if(C.layout&&C.layout.length>0){this.F3(C,C.layout,y.children)}break}}else{if(x=="tabpanel"){y.leaf=false;y.children=[];this.F3(C,C.layout,y.children)}else{if(C.layout&&C.layout.length>0){y.children=[];this.F3(C,C.layout,y.children)}else{if(x!="panel"){y.leaf=true}}}}E.push(y)}},_t$:function(x){var o=this,s,p,y,v,q,u=o._9,n,t;switch(x){case"cmd_save":o._f1();s=u.getXML();o.fV6(o.uid,s);break;case"cmd_reload":o._IFd();break;case"cmd_run":o._f1();if(o.uid){IG$._I7d.m1$7.call(IG$._I7d,o.uid,u.item.type.toLowerCase(),u.item.name,u.item.nodepath,false,false,null,{bt:{content:u.getXML()}})}break;case"cmd_saveas":o.$f1();break;case"cmd_wizard":p=new IG$._Ifd({callback:new IG$._I3d(o,o.fV5)});IG$._I_5(this,p);break;case"cmd_event":p=new IG$._IAa({_9:o._9,callback:new IG$._I3d(o,o.fV5a)});IG$._I_5(this,p);break;case"cmd_scripting":p=new IG$._IAe({_9:o._9,callback:new IG$._I3d(o,o.fV5b)});IG$._I_5(this,p);break;case"cmd_map":v=o.ecname;y=o._9.controls[v];q=y.type=="olapreport"||y.type=="dashboard"?false:true;n=o.down("[name=b_itemname]");p=new IG$._I96({visibleItems:"workspace;folder"+(q?";metric":";report")+(y.type=="dashboard"?";dashboard":""),u5x:{cubebrowse:q},callback:new IG$._I3d(o,function(a){if(y.type!="dashoard"){o._9.regReportContent.call(o._9,a)}y.item=a;n.setValue(a.name)})});IG$._I_5(this,p);break;case"cmd_map_tmpl":t=o.down("[name=b_tmpl_name]");p=new IG$._I96({visibleItems:"workspace;folder;dashboard",u5x:{cubebrowse:false},callback:new IG$._I3d(o,function(a){o._9.tmpl=a;t.setValue(a.name)})});IG$._I_5(this,p);break;case"cmd_cstore":v=o.ecname;y=o._9.controls[v];p=new IG$._m2a({_9:o._9,fctrl:y,callback:new IG$._I3d(o,function(){})});IG$._I_5(this,p);break;case"cmd_var":p=new IG$.D_({callback:new IG$._I3d(o,function(){})});IG$._I_5(this,p);break}},fV5b:function(){var b=this._9;b._l24.call(b)},fV5a:function(b){},fV5:function(B){var G=B,L;if(G){var A=this.down("[name=ctrl_layout]"),M=this.down("[name=layout_preview]");var H=[];L=new IG$._ID1(null,null);L.type="titlelabel";L.name="title_1";L.position={top:5,left:5,width:100,height:22};L.properties.Name="title_1";L.updatePropertyValue.call(L);switch(G.layouttype){case"absolute":H=[L];break;case"2row":var K=new IG$._ID1(null,null);K.type="panel";K.name="panel_main";K.position={top:30,left:5,right:5,bottom:5};K.properties.Name="panel_main";K.properties.layout="vertical";K.updatePropertyValue.call(K);var D=new IG$._ID1(null,null);D.type="panel";D.name="panel_top";D.position={top:0,left:0,percentwidth:100,percentheight:100};D.properties.Name="panel_top";D.properties.layout="fit";D.updatePropertyValue.call(D);var F=new IG$._ID1(null,null);F.type="panel";F.name="panel_bottom";F.position={top:0,left:0,percentwidth:100,percentheight:100};F.properties.Name="panel_bottom";F.properties.layout="fit";F.updatePropertyValue.call(F);K.layout.push(D);K.layout.push(F);H=[L,K];break;case"2by1table":var K=new IG$._ID1(null,null);K.type="panel";K.name="panel_main";K.position={top:30,left:5,right:5,bottom:5};K.properties.Name="panel_main";K.properties.layout="vertical";K.updatePropertyValue.call(K);var D=new IG$._ID1(null,null);D.type="panel";D.name="panel_top";D.position={top:0,left:0,percentwidth:100,percentheight:100};D.properties.Name="panel_top";D.properties.layout="horizontal";D.updatePropertyValue.call(D);var x=new IG$._ID1(null,null);x.type="panel";x.name="panel_top_left";x.position={top:0,left:0,percentwidth:100,percentheight:100};x.properties.Name="panel_top_left";x.properties.layout="fit";x.updatePropertyValue.call(x);var E=new IG$._ID1(null,null);E.type="panel";E.name="panel_top_right";E.position={top:0,left:0,percentwidth:100,percentheight:100};E.properties.Name="panel_top_right";E.properties.layout="fit";E.updatePropertyValue.call(E);D.layout.push(x);D.layout.push(E);var F=new IG$._ID1(null,null);F.type="panel";F.name="panel_bottom";F.position={top:0,left:0,percentwidth:100,percentheight:100};F.properties.Name="panel_bottom";F.properties.layout="fit";F.updatePropertyValue.call(F);K.layout.push(D);K.layout.push(F);H=[L,K];break;case"collapseborder":var K=new IG$._ID1(null,null);K.type="panel";K.name="panel_main";K.position={top:30,left:5,right:5,bottom:5};K.properties.Name="panel_main";K.properties.layout="border";K.updatePropertyValue.call(K);H=[L,K];break;case"portal":var K=new IG$._ID1(null,null);K.type="panel";K.name="panel_main";K.position={top:30,left:5,right:5,bottom:5};K.properties.Name="panel_main";K.properties.layout="portal";K.updatePropertyValue.call(K);H=[L,K];break;case"3by1table":var K=new IG$._ID1(null,null);K.type="panel";K.name="panel_main";K.position={top:30,left:5,right:5,bottom:5};K.properties.Name="panel_main";K.properties.layout="vertical";K.updatePropertyValue.call(K);var D=new IG$._ID1(null,null);D.type="panel";D.name="panel_top";D.position={top:0,left:0,percentwidth:100,percentheight:100};D.properties.Name="panel_top";D.properties.layout="vertical";D.updatePropertyValue.call(D);var z=new IG$._ID1(null,null);z.type="panel";z.name="panel_1";z.position={top:0,left:0,percentwidth:100,percentheight:100};z.properties.Name="panel_1";z.properties.layout="fit";z.updatePropertyValue.call(z);var J=new IG$._ID1(null,null);J.type="panel";J.name="panel_2";J.position={top:0,left:0,percentwidth:100,percentheight:100};J.properties.Name="panel_2";J.properties.layout="fit";J.updatePropertyValue.call(J);var I=new IG$._ID1(null,null);I.type="panel";I.name="panel_3";I.position={top:0,left:0,percentwidth:100,percentheight:100};I.properties.Name="panel_3";I.properties.layout="fit";I.updatePropertyValue.call(I);D.layout.push(z);D.layout.push(J);D.layout.push(I);var F=new IG$._ID1(null,null);F.type="panel";F.name="panel_bottom";F.position={top:0,left:0,percentwidth:100,percentheight:100};F.properties.Name="panel_bottom";F.properties.layout="fit";F.updatePropertyValue.call(F);K.layout.push(D);H=[L,K];break}this._9.controls={};this._9.layout=H;M.M3.call(M);this.F5(null,this._9.layout);this.rootctrl=[];this.F3(null,this._9.layout,this.rootctrl);A.store.setRootNode({expanded:true,text:"Root Layout",name:"Root Layout",children:this.rootctrl});var C=$(M.body.dom),y={x:0,y:0,w:IG$.x_10._w(C),h:IG$.x_10._h(C)},v={t:0,b:0,l:0,r:0};C.empty();if(this.dummyInfo){this.dummyInfo.remove()}this.F2(null,this._9.layout,C,y,v);this.dummyInfo=$("<div class='dummyinfo'></div>");this.dummyInfo.appendTo(C);this.dummyInfo.hide()}},_l2:function(u,D){var B,z=false,G=this,F=this._l4(u,this._9.layout),A;if(F!=null){for(B=0;B<F.length;B++){if(F[B].name==u){A=F[B];A.dummy.html.remove();this._l3(A);F.splice(B,1);delete this._9.controls[u];var E=this.F8(A.pname);if(E!=null&&E.type=="panel"&&E.properties.layout=="border"){var v=A.properties.region,y;switch(v){case"center":y="Center";break;case"north":y="North";break;case"south":y="South";break;case"east":y="East";break;case"west":y="West";break}D.set("type","blank");D.set("region","region");D.set("name",y);D.removeAll();z=false}else{z=true}break}}}var s=G.down("[name=layout_preview]"),C=$(s.body.dom),x={x:0,y:0,w:IG$.x_10._w(C),h:IG$.x_10._h(C)},t={t:0,b:0,l:0,r:0};G.F2.call(G,null,G._9.layout,C,x,t);return z},_l3:function(f){var d,e;if(f&&f.layout&&f.layout.length>0){for(d=f.layout.length-1;d>=0;d--){e=this._9.controls[f.layout[d].name];e.dummy.html.remove();delete this._9.controls[f.layout[d].name];if(f.layout[d].layout&&f.layout[d].layout.length>0){this._l3(f.layout[d])}f.layout.splice(d,1)}}},_l4:function(e,g){var j=null,f;for(f=0;f<g.length;f++){if(g[f].name==e){j=g}else{if(g[f].layout&&g[f].layout.length>0){j=this._l4(e,g[f].layout)}}if(j!=null){break}}return j},F5:function(f,d){var e;for(e=0;e<d.length;e++){d[e].pname=(f)?f.name:null;this._9.controls[d[e].name]=d[e];if(d[e].layout&&d[e].layout.length>0){this.F5(d[e],d[e].layout)}}},fV6:function(e,g){var f=this;var j=new IG$._I3e();j.init(f,{ack:"31",payload:IG$._I2d({uid:e}),mbody:g},f,f.rs_fV6,null);j._l()},rs_fV6:function(b){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},$f1:function(){var b=new IG$._I96({mode:"newitem"});b.callback=new IG$._I3d(this,this.$f2);IG$._I_5(this,b)},$f2:function(g){var f=this,e=this._9.getXML(),j=new IG$._I3e();j.init(f,{ack:"31",payload:"<smsg><item address='"+g.nodepath+"/"+g.name+"' name='"+g.name+"' type='"+(this.itemtype?this.itemtype:"Dashboard")+"' pid='"+g.uid+"' description=''/></smsg>",mbody:e},f,f._IO5,g.name);j._l()},_IO5:function(g,j){var m,l=IG$._I18(g,"/smsg/item"),f=IG$._I1b(l,"name");this.uid=IG$._I1b(l,"uid");this.setTitle(f)},F6:function(C){var z=this,H=z.down("[name=propgrid]"),y,K,I,G={},F={},x=z.down("[name=layout_preview]"),D=z.down("[name=b_report]"),A=z.down("[name=b_tmpl]"),u=z.down("[name=b_grid]"),J=z.down("[name=b_itemname]"),E=$(x.body.dom),v,B={width:IG$.x_10._w(E),height:IG$.x_10._h(E)};if(z.ecname!=null){z.F7a(z.ecname)}D.hide();A.hide();u.hide();J.setValue("");if(C.root==false){y=C.name;I=z._9.controls[y];if(I){switch(I.type){case"olapreport":case"compositereport":D.setFieldLabel(IRm$.r1("L_SEL_RPT"));D.show();break;case"dashboard":D.setFieldLabel(IRm$.r1("L_SEL_DBD"));D.show();break;case"intgrid":u.show();break;case"combobox":break;case"picture":case"image":break;case"sheetfilter":break}x.showDummyInfo.call(x,I);v=z.F7(I.type,I.properties);G=v.prop;F=v.conf;I.item&&J.setValue(I.item.name);z.pot.setControlPosition.call(z.pot,I.position,(I.parentctrl)?I.parentctrl.position:B)}z.ecname=y}else{A.show();G={minwidth:z._9.minwidth||500,minheight:z._9.minheight||500,autowidth:typeof(z._9.autowidth)=="undefined"?true:z._9.autowidth,autoheight:typeof(z._9.autoheight)=="undefined"?true:z._9.autoheight,vscroll:typeof(z._9.vscroll)=="undefined"?true:z._9.vscroll,hscroll:typeof(z._9.hscroll)=="undefined"?true:z._9.hscroll,width:z._9.width||800,height:z._9.height||600,background:z._9.background||"",cls:z._9.cls||""};z.ecname="__dashboard__"}H.setSource(G,F)},F7a:function(f){var m=this,g=m.down("[name=propgrid]"),j=g.getSource(),l=(f=="__dashboard__")?null:m._9.controls[f];if(l){$.each(j,function(b,a){l.properties[b]=j[b]});l.dummy&&l.dummy.__pcinit.call(l.dummy)}else{if(f=="__dashboard__"){$.each(j,function(b,a){m._9[b]=j[b]})}}},F7:function(z,j){var F={},t={},v=new IG$._ICc(null,null),C=v.getControl(z.toLowerCase()),x,D,y,u=this._9,A,E,G,B;F.Name=j.Name;j.visible=(typeof(j.visible)=="undefined"||j.visible==null)?true:j.visible;j.border=(typeof(j.border)=="undefined"||j.border==null)?1:j.border;j.bordercolor=(typeof(j.bordercolor)=="undefined"||j.bordercolor==null)?"#e5e5e5":j.bordercolor;j.backgroundcolor=(typeof(j.backgroundcolor)=="undefined"||j.backgroundcolor==null)?"#ffffff":j.backgroundcolor;j.padding=(typeof(j.padding)=="undefined"||j.padding==null)?2:j.padding;if(C&&C.p){for(x=0;x<C.p.length;x++){D=C.p[x];if(D.type=="property"){A=D.name;G=D.datatype;E=C[A];if(j[A]!=null&&typeof j[A]!="undefined"){E=j[A]}switch(G){case"string":E=(E)?E:"";if(D["enum"]){if(D["enum"]=="resources"){B=[];for(y=0;y<u.rcs.length;y++){B.push({name:u.rcs[y].name,value:u.rcs[y].uid})}t[A]={editor:{xtype:"combobox",displayField:"name",valueField:"value",queryMode:"local",editable:false,store:{fields:[{name:"name",mapping:"name"},{name:"value",mapping:"value"}],data:B}}}}else{if(D["enum"].length>0){t[A]={editor:{xtype:"combobox",displayField:"name",valueField:"value",queryMode:"local",editable:false,store:{fields:["name","value"],data:D["enum"]}}}}}}break;case"number":E=(E!=null&&typeof E!="undefined")?Number(E):Number.NaN;break;case"boolean":E=(E!=null&&typeof E!="undefined"&&E==true)?true:false;break}F[A]=E}}}return{prop:F,conf:t}},F8:function(d){var f=null,e=this._9.controls;$.each(e,function(b,a){if(e[b].name==d){f=e[b];return false}});return f},F9:function(j){var l,f=0,m,g=this._9.controls;$.each(g,function(b,a){if(g[b].type==j||g[b].name.substring(0,j.length)==j){m=g[b].name;if(m.indexOf("_")>-1){m=m.substring(m.indexOf("_")+1);if(m!=""&&IG$._I37(m)==true){f=Math.max(Number(m)+1,f)}}}});return f},_1:function(e){var d=this,f={root:false,name:e.name};d.F6(f)},_2:function(e){var d=this,f={root:false,name:e.name};d.F6(f)},initComponent:function(){var c=this;var d={children:[{text:"Static Widget",iconCls:"task-folder",expanded:false,children:[{text:"Picture",type:"image",leaf:true},{text:"Label",type:"label",leaf:true},{text:"Title",type:"titlelabel",leaf:true}]},{text:"Form Widget",expanded:false,children:[{text:"Text input",type:"textbox",leaf:true},{text:"Text area",type:"textarea",leaf:true},{text:"Combobox",type:"combobox",leaf:true},{text:"Checkbox",type:"checkbox",leaf:true},{text:"Date chooser",type:"datechooser",leaf:true},{text:"Month chooser",type:"monthchooser",leaf:true},{text:"Button",type:"button",leaf:true}]},{text:"Data Viewers",expanded:false,children:[{text:"Report view",type:"olapreport",leaf:true},{text:"Dashboard",type:"dashboard",leaf:true},{text:"Filter view",type:"sheetfilter",leaf:true},{text:"Prompt Filters",type:"promptfilter",leaf:true},{text:"Interactive Grid",type:"grid",leaf:true},{text:"Pivot Filter",type:"pivotfilter",leaf:true},{text:"Pivot Design",type:"pivotdesign",leaf:true}]},{text:"Container",expanded:false,children:[{text:"Panel",type:"panel",leaf:true},{text:"TabPanel",type:"tabpanel",leaf:true},{text:"Browser",type:"browser",leaf:true}]}]};$s.apply(this,{tbar:[{iconCls:"icon-toolbar-save",tooltip:IRm$.r1("L_SAVE_REPORT"),hidden:this.writable==true||this.uid==""?false:true,handler:function(){this._t$("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),handler:function(){this._t$("cmd_saveas")},scope:this},"-",{iconCls:"icon-refresh",tooltip:"Reload",hidden:false,handler:function(){this._t$("cmd_reload")},scope:this},{iconCls:"icon-toolbar-runreport",tooltip:"Test",hidden:false,handler:function(){this._t$("cmd_run")},scope:this}],items:[{layout:"border",border:0,items:[{layout:"border",region:"west",split:true,collapsible:true,border:true,title:"Widgets",width:180,items:[{xtype:"treepanel",title:"Widget",preventHeader:true,region:"north",split:true,border:false,flex:1,rootVisible:false,hideHeaders:true,autoScroll:true,store:{xtype:"treestore",fields:["name","text","type","pname","region","custom"],proxy:{type:"memory",reader:{type:"json",root:"children"}},root:{expanded:true,text:"Controls",children:d.children},folderSort:true},enableDragDrop:true,enableDD:true,useArrows:true,ddGroup:"_I$RD_G_",viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(j,b,a,l,m){},drop:function(g,b,a,j){}}},columns:[{xtype:"treecolumn",text:"text",flex:2,sortable:false,dataIndex:"text"}]},{xtype:"treepanel",name:"ctrl_layout",title:"Layout",region:"center",split:true,flex:1,rootVisible:true,autoScroll:true,hideHeaders:true,enableDragDrop:true,enableDD:true,useArrows:true,ddGroup:"_I$RD_G_",store:{xtype:"treestore",fields:["name","text","type","pname","region","custom"],proxy:{type:"memory",reader:{type:"json",root:"children"}},root:{expanded:true,text:"Controls",children:[]},folderSort:false},columns:[{xtype:"treecolumn",text:"Name",flex:1,sortable:false,dataIndex:"name"},{xtype:"actioncolumn",width:20,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(p,a,q){var b=p.store.getAt(a),o,n,m=null;if(b){o=b.data;n=c.F8.call(c,o.name);if(c._l2.call(c,o.name,b)==true){b.remove()}}}}]}],viewConfig:{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_"},listeners:{beforedrop:function(ai,a,U,V,an){var Z=false,ap=c.down("[name=ctrl_layout]"),ag=a.records[0],X=ag.data,ab=U.data,aa,Q=false,b=false,am=false,aj,S,O=null,R,T,ad=ap.store.getProxy(),ar=ad.getReader(),P=0,W=0,al=c.F8.call(c,X.name),ae=c.F8.call(c,U.get("name")),ah=false;if(!ar){ar=ad.getReader()}(this==a.view)?a.copy=false:a.copy=true;if((X.type=="Report"||X.type=="CompositeReport")&&(ab.type=="chart"||ab.type=="olapreport")){ae.item={name:X.name,uid:X.uid,updatedate:X.updatedate,nodepath:X.nodepath,cubeuid:null};c._9.regReportContent.call(c._9,ae.item);c.updateCubeUID.call(c)}else{if(ab.type=="blank"&&a.copy==false){b=false}else{if(ab.type=="blank"&&a.copy==true){am=true;O=new IG$._ID1(null,null);O.type="panel";O.name="panel_"+c.F9.call(c,"panel");O.position={top:0,left:0,percentwidth:100,percentheight:100};switch(a.region){case"east":O.position.percentwidth=null;O.position.width=100;break;case"west":O.position.percentwidth=null;O.position.width=100;break;case"north":O.position.percentheight=null;O.position.height=100;break;case"south":O.position.percentheight=null;O.position.height=100;break;case"center":break}O.properties.Name=O.name;O.properties.region=ab.region;O.updatePropertyValue.call(O);U.set("type","panel");U.set("name",O.name);var af=c.F8.call(c,U.get("pname"));if(af){O.pname=af.name;c._9.controls[O.name]=O;af.layout.push(O)}T=U;if(X.type!="panel"&&X.type!="tabpanel"){P=1;W=0}b=false}else{if(a.copy==true){if((ae.type=="panel"||ae.type=="tabpanel")&&(U.isExpanded()==true||U.hasChildNodes()==false)&&V=="after"){T=U}else{T=U.parentNode}O=(T.data.root==true)?c._9:c.F8.call(c,T.get("name"));P=1;b=false}else{if(a.copy==false){if(X.root==false){W=0;if((ae.type=="panel"||ae.type=="tabpanel")&&(U.isExpanded()==true||U.hasChildNodes()==false)&&V=="after"){T=U;W=0}else{T=U.parentNode;W=T.indexOf(U);if(V=="after"){W++}}var af=c.F8.call(c,al.pname);if(!af&&(al.pname==null||al.pname=="")){af=c._9}O=(T.data.root==true)?c._9:c.F8.call(c,T.get("name"));for(aa=0;aa<af.layout.length;aa++){if(af.layout[aa].name==al.name){af.layout.splice(aa,1);break}}al.pname=(T.data.root==true)?null:O.name;O.layout.splice(W,0,al);ag.remove();T.insertChild(W,ag);ah=true}b=false}}}}}if(P==1){var ak=(T.data.root==true)?null:c.F8.call(c,T.get("name"));if(ak!=null&&(ak.type=="panel"||ak.type=="tabpanel")){switch(ak.properties.layout){case"portal":break;case"border":break;case"fit":break}}S=X.type+"_"+c.F9.call(c,X.type);aj={name:S,type:X.type,pname:(ak!=null)?O.name:"",leaf:(X.type=="panel"||X.type=="tabpanel"?false:true)};R=new IG$._ID1(null,null);R.type=aj.type;R.name=S;R.position={top:0,left:0,percentwidth:100,percentheight:100};R.properties.Name=R.name;R.updatePropertyValue.call(R);R.pname=aj.pname;c._9.controls[R.name]=R;O.layout.push(R);var at=ar.extractData.call(ar,[aj],true);ap.store.fillNode.call(ap.store,T,at);ah=true}if(ah==true){var ao=c.down("[name=layout_preview]"),Y=$(ao.body.dom),aq={x:0,y:0,w:IG$.x_10._w(Y),h:IG$.x_10._h(Y)},ac={t:0,b:0,l:0,r:0};c.F2.call(c,null,c._9.layout,Y,aq,ac)}return b},drop:function(m,l,a,o){var b=false,n=l.records[0].data;return b}}},listeners:{itemclick:function(p,q,e,o,a){var n=this,b=q.data;n.F6.call(n,b)},scope:this}}]},{region:"center",border:0,name:"m_mview",layout:{type:"card",deferredRender:false},items:[{name:"l_1",sl:"layout_preview",border:0,layout:{type:"card",deferredRender:false},items:[new IG$._IBf({name:"layout_preview",_dE:this,dsmode:1,border:0,header:false,sm:0}),new IG$.cm1({name:"l_code",sm:1})]},{name:"l_2",sl:"m_code",layout:{type:"card",deferredRender:false},items:[new IG$._Ifd({name:"m_code_",sm:0}),new IG$._IAe({name:"m_code",sm:1})]},new IG$._dR({name:"l_3",sl:"m_res",cmode:"page"})],tbar:[{text:IRm$.r1("L_DESIGN"),name:"t_m1",pressed:1,handler:function(){var t=c,p=t.down("[name=m_mview]"),q=p.getLayout(),s,a,b=c.down("[name=t_c1]"),l=c.down("[name=t_c2]"),o=q.getActiveItem().name;if(o!="l_1"){if(o=="l_3"){a=q.getActiveItem().commitCode()}else{a=q.getActiveItem().getLayout().getActiveItem().commitCode()}if(a){this.toggle(true);c.down("[name=t_m2]").toggle(false);c.down("[name=t_m3]").toggle(false);q.setActiveItem(0);p.sl="l_1";s=c.down("[name="+p.sl+"]").getLayout().getActiveItem().sm;b.setVisible(true);l.setVisible(true);b.toggle(s==0?true:false);l.toggle(s==1?true:false);q.getActiveItem().getLayout().getActiveItem().refreshCode()}}}},{text:IRm$.r1("L_CONTROLLER"),name:"t_m2",handler:function(){var o=c.down("[name=m_mview]"),p=o.getLayout(),q,a,b=c.down("[name=t_c1]"),l=c.down("[name=t_c2]"),n=p.getActiveItem().name;if(n!="l_2"){if(n=="l_3"){a=p.getActiveItem().commitCode()}else{a=p.getActiveItem().getLayout().getActiveItem().commitCode()}if(a){this.toggle(true);c.down("[name=t_m1]").toggle(false);c.down("[name=t_m3]").toggle(false);p.setActiveItem(1);o.sl="l_2";q=c.down("[name="+o.sl+"]").getLayout().getActiveItem().sm;b.setVisible(true);l.setVisible(true);b.toggle(q==0?true:false);l.toggle(q==1?true:false);p.getActiveItem().getLayout().getActiveItem().refreshCode()}}}},{text:IRm$.r1("L_RESOURCES"),name:"t_m3",handler:function(){var b=c.down("[name=m_mview]"),g=b.getLayout(),j,a;if(g.getActiveItem().name!="l_3"){a=g.getActiveItem().getLayout().getActiveItem().commitCode();if(a){this.toggle(true);c.down("[name=t_m1]").toggle(false);c.down("[name=t_m2]").toggle(false);g.setActiveItem(2);b.sl="l_3";c.down("[name=t_c1]").setVisible(false);c.down("[name=t_c2]").setVisible(false);g.getActiveItem().refreshCode()}}}},"->",{text:"Design",name:"t_c1",pressed:true,handler:function(){var j=c.down("[name=m_mview]"),l=j.getLayout(),m=l.getActiveItem(),a,b;a=m.getLayout();if(a.getActiveItem().sm!=0){b=a.getActiveItem().commitCode();if(b){this.toggle(true);c.down("[name=t_c2]").toggle(false);a.setActiveItem(0);a.getActiveItem().refreshCode()}}}},{text:"Code",name:"t_c2",handler:function(){var j=c.down("[name=m_mview]"),l=j.getLayout(),m=l.getActiveItem(),a,b;a=m.getLayout();if(a.getActiveItem().sm!=1){b=a.getActiveItem().commitCode();if(b){this.toggle(true);c.down("[name=t_c1]").toggle(false);a.setActiveItem(1);a.getActiveItem().refreshCode()}}}}]},{region:"east",name:"panelProp",border:false,split:true,collapsible:true,minSize:100,width:220,title:"Config",layout:{type:"vbox",align:"stretch"},items:[{title:"Property",xtype:"propertygrid",name:"propgrid",flex:1,preventHeader:true,propertyNames:{tested:"QA",borderWidth:"Border Width"},source:{},listeners:{propertychange:function(a,j,b,m,l){if(this.ecname!=null){this.F7a(this.ecname)}},scope:this}},{xtype:"fieldcontainer",fieldLabel:"Bind Report",padding:"0 2 0 2",name:"b_report",hidden:true,labelWidth:60,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",readOnly:true,name:"b_itemname",flex:1},{xtype:"button",text:"..",handler:function(){this._t$("cmd_map")},scope:this}]},{xtype:"fieldcontainer",fieldLabel:"Template",padding:"0 2 0 2",name:"b_tmpl",hidden:true,labelWidth:60,layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",readOnly:true,name:"b_tmpl_name",flex:1},{xtype:"button",text:"..",handler:function(){this._t$("cmd_map_tmpl")},scope:this}]},{xtype:"fieldcontainer",fieldLabel:"Setting",padding:"0 2 0 2",name:"b_grid",hidden:true,labelWidth:60,layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",text:"Column Store",handler:function(){this._t$("cmd_cstore")},scope:this}]},{title:"Position",name:"pnl_position",height:240,listeners:{resize:function(a){if(c.pot){c.pot.validatePosition.call(c.pot)}},scope:this}}]}]}]});IG$._IC8.superclass.initComponent.call(this)}})};