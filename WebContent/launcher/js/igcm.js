IG$.__C=$s.extend($s.panel,{closable:true,layout:"border",bodyPadding:0,_IFd:function(){var a=this;a.L1()},L1:function(){var b=this,a=new IG$._I3e();a.init(b,{ack:"25",payload:IG$._I2d({address:"/"}),mbody:IG$._I2e({option:"standard"})},b,function(g){var k=this,d=[],f,j=IG$._I18(g,"/smsg/item"),e,c,l,h=k.down("[name=t_ds]");d.push({name:"Select Database Instance",poolname:""});if(j){e=IG$._I26(j);l=IG$._I83.jS2;for(f=0;f<e.length;f++){c=IG$._I1c(e[f]);if(l==true||(l==false&&c.name.toUpperCase()!="IGCBASE")){d.push({name:c.disp,poolname:c.name,uid:c.uid||"",isuserdb:(c.isuserdb=="T"?true:false),savepwd:(c.isuserdb=="T"&&c.savepwd=="F"?false:true)})}}}h.store.loadData(d);h.setValue("");k.a2()},function(){b.a2()});a._l()},a2:function(){var a=this,b;b=new IG$._I3e();b.init(a,{ack:"5",payload:IG$._I2d({uid:a.uid}),mbody:IG$._I2e({option:"standard"})},a,a.rs_a2,false);b._l()},rs_a2:function(f){var k=this,n=new IG$.ifg(f),l,e,d,m,c,b,a=[],g,j=k.down("[name=t_ds]");k.item=n;j.setValue(n.objinfo.ds||"");if(!window.ace){IG$.x03(ig$.scmap.igcg,new IG$._I3d(k,function(){this.rs_a2(f)}));return}l=$(k.down("[name=javasrc]").el.dom);e=$(".idv-jcl-edtr",l);e.empty();m=IG$.x_10._w(l);c=IG$.x_10._h(l);d=$("<div class='idv-jcl-view'></div>").appendTo(e);IG$.x_10._w(d,m);IG$.x_10._h(d,c);g=ace.edit(d[0]);g.getSession().setMode("ace/mode/java");k.scripteditor=g;k.scriptview=d;k.scriptview=d;k.scripteditor=g;l=$(k.down("[name=javasrc_all]").el.dom);e=$(".idv-jcl-edtr",l);e.empty();m=IG$.x_10._w(l);c=IG$.x_10._h(l);d=$("<div class='idv-jcl-view'></div>").appendTo(e);IG$.x_10._w(d,m);IG$.x_10._h(d,c);g=ace.edit(d[0]);g.getSession().setMode("ace/mode/java");k.scriptview_all=d;k.scripteditor_all=g;for(b=0;b<n.modules.length;b++){a.push({name:n.modules[b].name,description:n.modules[b].description})}k.down("[name=g_m]").store.loadData(a)},a3:function(e){var d=this,c=new IG$._I3e(),a,f="31",b=d.down("[name=t_ds]");d._c1();d.item.objinfo.ds=b.getValue();a=d.item.p2();if(e=="source"){f="73"}c.init(d,{ack:f,payload:IG$._I2d({uid:d.uid,option:(e=="source"?e:null)},"uid;option"),mbody:a},d,d.rs_a3,null,e);c._l()},rs_a3:function(a,d){var c=this,e,b;if(d=="source"){e=IG$._I18(a,"/smsg/item/source");b=(e?IG$._I24(e):"");c.scripteditor_all.setValue(b)}else{if(d=="compile"){c.a4()}else{IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}}},a4:function(){var a=this,c=new IG$._I3e(),b;b=a.item.p2();c.init(a,{ack:"73",payload:IG$._I2d({uid:a.uid,option:"compile"},"uid;option"),mbody:b},a,a.rs_a4,null);c._l()},rs_a4:function(a){var b=this,c=IG$._I18(a,"/smsg/item/errormessage"),d;if(c){d=IG$._I24(c);d=Base64.decode(d);b.down("[name=compileres]").setValue(d);b._m1(1)}else{b.down("[name=compileres]").setValue("");IG$._I54(ig$.appname,"Compiled Successfully",null,null,0,"success")}},_t$:function(e){var c=this,h=c.down("[name=g_m]"),d,g,b,a;switch(e){case"cmd_save":c.a3();break;case"cmd_compile":c.a3("compile");break;case"cmd_source":c.a3("source");break;case"cmd_rename":case"cmd_delete":d=h.getSelectionModel().selected;if(d&&d.length>0){g=d.items[0]}if(g&&g.get("name")){for(a=0;a<c.item.modules.length;a++){if(c.item.modules[a].name==g.get("name")){if(e=="cmd_delete"){c.item.modules.splice(a,1)}else{b=c.item.modules[a]}break}}if(e=="cmd_delete"){h.store.remove(g);c._module=null;c.scripteditor.setValue("")}else{var f=new IG$._Icd({itemtype:"Module",itemname:b.name,description:b.description,$f3:function(){var k=this,o=k.down("[name=fitemname]"),q=k.down("[name=fitemname]").getValue(),n=k.down("[name=fdesc]").getValue(),j=k.down("[name=fhelpuid]").getValue()||null,m=k.down("[name=selitemtype]"),l;o.clearInvalid();if(!q){o.markInvalid([o.blankText]);return}if(q.indexOf(" ")>-1){o.markInvalid(["Space not allowed"]);return}g.set("name",q);g.set("description",n);b.name=q;b.description=n;k.close()}});IG$._I_5(this,f)}}break}},_c1:function(){var a=this;if(a._module){a._module.script=a.scripteditor.getValue();a._module.iparams=[];a._module.oparams=[];$.each(["iparams","oparams"],function(c,b){var d=a.down("[name=g_"+b+"]"),c,f,e=a._module[b];for(c=0;c<d.store.data.items.length;c++){f=d.store.data.items[c];if(f.get("name")){e.push({name:f.get("name")})}}})}},_e1:function(f){var e=this,c=f.get("name"),b,d=e.item,a;if(e._module){e._c1()}for(b=0;b<d.modules.length;b++){if(d.modules[b].name==c){a=d.modules[b];break}}if(a){e.down("[name=m_s]").show();e.scripteditor.setValue(a.script||"");e._module=a;$.each(["iparams","oparams"],function(j,h){var l=e.down("[name=g_"+h+"]"),j,n=[],m=e._module[h];if(m){for(j=0;j<m.length;j++){n.push({name:m[j].name})}}l.store.loadData(n)})}},_a1:function(f,e){var c=this,d=c.down("[name=g_m]"),b=true,a;if(c._module){c._c1()}for(a=0;a<c.item.modules.length;a++){if(c.item.modules[a].name==f){b=false;break}}if(b==true){d.store.add({name:f,description:e});c.item.modules.push({name:f,description:e,script:null,iparams:[],oparams:[]})}return b},_m1:function(d){var b=this,c=b.down("[name=mcard]"),a=b.down("[name=t_source]");if(d>-1){b.vcard=d}else{b.vcard=(b.vcard==0)?1:0}if(b.vcard==0){c.getLayout().setActiveItem(0);a.setText("View Source")}else{c.getLayout().setActiveItem(1);a.setText("Edit Code");b._t$("cmd_source")}},initComponent:function(){var a=this;a.vcard=0;$s.apply(this,{items:[{xtype:"panel",layout:"card",region:"center",flex:1,name:"mcard",items:[{xtype:"panel",layout:"border",items:[{xtype:"panel",title:"Module Functions",region:"west",layout:"fit",split:true,collapsible:true,collapseMode:"mini",width:300,tbar:[{text:"New",handler:function(){var b=new IG$._I6e({itemtype:"Module",$f3:function(){var d=this,h=d.down("[name=fitemname]"),j=d.down("[name=fitemname]").getValue(),g=d.down("[name=fdesc]").getValue(),c=d.down("[name=fhelpuid]").getValue()||null,f=d.down("[name=selitemtype]"),e;h.clearInvalid();if(!j){h.markInvalid([h.blankText]);return}if(j.indexOf(" ")>-1){h.markInvalid(["Space not allowed"]);return}e=a._a1.call(a,j,g);if(e==true){d.close()}}});IG$._I_5(this,b)},scope:this},{text:"Rename",handler:function(){this._t$("cmd_rename")},scope:this},{text:"Delete",handler:function(){this._t$("cmd_delete")},scope:this}],items:[{xtype:"gridpanel",name:"g_m",store:{xtype:"store",fields:["name","description"]},columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"},{text:IRm$.r1("B_DESC"),flex:1,dataIndex:"description"},{xtype:"actioncolumn",width:30,menuDisabled:true,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,g,d){var b=e,c=b.store,f=c.getAt(g);this._e1(f)},scope:this}]}],listeners:{cellclick:function(d,k,c,b,g,j,h,f){if(c!=2){this._e1(b)}},scope:this}}]},{region:"center",xtype:"panel",flex:1,title:"Module Sources",layout:"fit",items:[{xtype:"panel",border:0,layout:"border",name:"m_s",hidden:true,items:[{name:"javasrc",region:"center",flex:1,html:"<div class='idv-jcl-edtr'></div>",split:true,listeners:{resize:function(c,b,e,d,g,f){if(a.scriptview&&a.scripteditor){IG$.x_10._w(a.scriptview,b);IG$.x_10._h(a.scriptview,e);a.scripteditor.resize(true)}}}},{xtype:"panel",region:"east",width:200,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"g_iparams",title:"Input Parameters",flex:1,store:{xtype:"store",fields:["name"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",editor:{xtype:"textfield",allowBlank:false}}],tbar:[{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){var c=this,b;b=c.down("[name=g_iparams]");b.store.add({name:"",value:""})},scope:this},{xtype:"button",text:IRm$.r1("B_REMOVE"),handler:function(){var e=this,c=e.down("[name=g_iparams]"),b=c.store,f=c.getSelectionModel().selected,d;for(d=f.length-1;d>=0;d--){b.remove(f.items[d])}},scope:this}]},{xtype:"gridpanel",title:"Output Parameters",name:"g_oparams",flex:1,store:{xtype:"store",fields:["name"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name",editor:{xtype:"textfield",allowBlank:false}}],tbar:[{xtype:"button",text:IRm$.r1("B_ADD"),handler:function(){var b=this,c;c=b.down("[name=g_oparams]");c.store.add({name:"",value:""})},scope:this},{xtype:"button",text:IRm$.r1("B_REMOVE"),handler:function(){var c=this,e=c.down("[name=g_oparams]"),f=e.store,d=e.getSelectionModel().selected,b;for(b=d.length-1;b>=0;b--){f.remove(d.items[b])}},scope:this}]}]}]}]}]},{xtype:"panel",title:"Source View (ReadOnly)",layout:"border",items:[{name:"javasrc_all",flex:1,region:"center",html:"<div class='idv-jcl-edtr'></div>",split:true,listeners:{resize:function(c,b,e,d,g,f){if(a.scriptview_all&&a.scripteditor_all){IG$.x_10._w(a.scriptview_all,b);IG$.x_10._h(a.scriptview_all,e);a.scripteditor_all.resize(true)}}}},{xtype:"panel",title:"Compile Messages",height:200,region:"south",layout:"fit",items:[{xtype:"textarea",name:"compileres"}]}]}]}],tbar:[{iconCls:"icon-toolbar-save",name:"t_save",tooltip:IRm$.r1("L_SAVE_CONTENT"),handler:function(){this._t$("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",tooltip:IRm$.r1("L_SAVE_CONTENT_AS"),handler:function(){this._t$("cmd_compile")},scope:this},{xtype:"combobox",name:"t_ds",tooltip:IRm$.r1("L_DATA_SOURCE"),fieldLabel:IRm$.r1("L_DATA_SOURCE"),labelPosition:"right",queryMode:"local",displayField:"name",valueField:"poolname",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","uid","poolname","isuserdb","savepwd"]}},{text:"Package Lists",handler:function(){var b=this,c=new IG$.__C_({litem:b.item});c.show()},scope:this},"->",{name:"t_source",text:"View Source",handler:function(){this._m1(-1)},scope:this}]});IG$.__C.superclass.initComponent.call(this)},listeners:{afterrender:function(a){var b=this;b._IFd()}}});IG$.__C_=$s.extend($s.window,{width:300,height:200,modal:true,layout:"fit",closable:false,resizable:false,title:"Package Lists",_i1:function(){var b=this,c=b.down("[name=ltx]"),a=b.litem;if(a){c.setValue(a.cls||"")}},_IFf:function(){var b=this,c=b.down("[name=ltx]"),a=b.litem;if(a){a.cls=c.getValue()}b.close()},items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"ltx",flex:1},{xtype:"displayfield",value:"* Add class lists with Java : import java.util.*;"}]}],initComponent:function(){$s.apply(this,{buttons:["->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$.__C_.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._i1()}}});(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(a.jQuery)}}}(this,function(c){var a=function(e,o){var m;var f=document.createElement("canvas");e.appendChild(f);if(typeof(G_vmlCanvasManager)!=="undefined"){G_vmlCanvasManager.initElement(f)}var n=f.getContext("2d");f.width=f.height=o.size;var l=1;if(window.devicePixelRatio>1){l=window.devicePixelRatio;f.style.width=f.style.height=[o.size,"px"].join("");f.width=f.height=o.size*l;n.scale(l,l)}n.translate(o.size/2,o.size/2);n.rotate((-1/2+o.rotate/180)*Math.PI);var j=(o.size-o.lineWidth)/2;if(o.scaleColor&&o.scaleLength){j-=o.scaleLength+2}Date.now=Date.now||function(){return +(new Date())};var k=function(s,q,t){t=Math.min(Math.max(-1,t||0),1);var r=t<=0?true:false;n.beginPath();n.arc(0,0,j,0,Math.PI*2*t,r);n.strokeStyle=s;n.lineWidth=q;n.stroke()};var d=function(){var s;var r;n.lineWidth=1;n.fillStyle=o.scaleColor;n.save();for(var q=24;q>0;--q){if(q%6===0){r=o.scaleLength;s=0}else{r=o.scaleLength*0.6;s=o.scaleLength-r}n.fillRect(-o.size/2+s,0,r,1);n.rotate(Math.PI/12)}n.restore()};var h=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(q){window.setTimeout(q,1000/60)}}());var g=function(){if(o.scaleColor){d()}if(o.trackColor){k(o.trackColor,o.lineWidth,1)}};this.getCanvas=function(){return f};this.getCtx=function(){return n};this.clear=function(){n.clearRect(o.size/-2,o.size/-2,o.size,o.size)};this.draw=function(r){if(!!o.scaleColor||!!o.trackColor){if(n.getImageData&&n.putImageData){if(!m){g();m=n.getImageData(0,0,o.size*l,o.size*l)}else{n.putImageData(m,0,0)}}else{this.clear();g()}}else{this.clear()}n.lineCap=o.lineCap;var q;if(typeof(o.barColor)==="function"){q=o.barColor(r)}else{q=o.barColor}k(q,o.lineWidth,r/100)}.bind(this);this.animate=function(t,s){var q=Date.now();o.onStart(t,s);var r=function(){var v=Math.min(Date.now()-q,o.animate.duration);var u=o.easing(this,v,t,s-t,o.animate.duration);this.draw(u);o.onStep(t,s,u);if(v>=o.animate.duration){o.onStop(t,s)}else{h(r)}}.bind(this);h(r)}.bind(this)};var b=function(g,h){var d={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,size:110,rotate:0,animate:{duration:1000,enabled:true},easing:function(l,m,k,o,n){m=m/(n/2);if(m<1){return o/2*m*m+k}return -o/2*((--m)*(m-2)-1)+k},onStart:function(l,k){return},onStep:function(m,l,k){return},onStop:function(l,k){return}};if(typeof(a)!=="undefined"){d.renderer=a}else{if(typeof(SVGRenderer)!=="undefined"){d.renderer=SVGRenderer}else{throw new Error("Please load either the SVG- or the CanvasRenderer")}}var e={};var f=0;var j=function(){this.el=g;this.options=e;for(var k in d){if(d.hasOwnProperty(k)){e[k]=h&&typeof(h[k])!=="undefined"?h[k]:d[k];if(typeof(e[k])==="function"){e[k]=e[k].bind(this)}}}if(typeof(e.easing)==="string"&&typeof(jQuery)!=="undefined"&&jQuery.isFunction(jQuery.easing[e.easing])){e.easing=jQuery.easing[e.easing]}else{e.easing=d.easing}if(typeof(e.animate)==="number"){e.animate={duration:e.animate,enabled:true}}if(typeof(e.animate)==="boolean"&&!e.animate){e.animate={duration:1000,enabled:e.animate}}this.renderer=new e.renderer(g,e);this.renderer.draw(f);if(g.dataset&&g.dataset.percent){this.update(parseFloat(g.dataset.percent))}else{if(g.getAttribute&&g.getAttribute("data-percent")){this.update(parseFloat(g.getAttribute("data-percent")))}}}.bind(this);this.update=function(k){k=parseFloat(k);if(e.animate.enabled){this.renderer.animate(f,k)}else{this.renderer.draw(k)}f=k;return this}.bind(this);this.disableAnimation=function(){e.animate.enabled=false;return this};this.enableAnimation=function(){e.animate.enabled=true;return this};j()};c.fn.easyPieChart=function(d){return this.each(function(){var e;if(!c.data(this,"easyPieChart")){e=c.extend({},d,c(this).data());c.data(this,"easyPieChart",new b(this,e))}})}}));IG$._I72=$s.extend($s.window,{modal:true,closable:false,resizable:true,layout:"fit",width:600,autoHeight:true,layout:{type:"fit"},bodyPadding:0,_1:function(c,b){var d=this,a=new IG$._I3e();a.init(d,{ack:"11",payload:IG$._I2d({uid:c||d.uid}),mbody:IG$._I2e({option:"relations",isdown:(d.isdown?"T":"F"),detail:"info"})},d,function(k){var n=this,h=n.down("[name="+(b||"grd_rel")+"]"),e=IG$._I18(k,"/smsg/item"),l=IG$._I26(e),g,m,j,o=n.down("[name=txtrel]"),f=[];if(!c){j=IG$._I1c(e);o.setValue("Relations : "+j.name+"("+j.nodepath+")")}for(g=0;g<l.length;g++){m=IG$._I1c(l[g]);m.iconcls=IG$._I11(m.type.toLowerCase());f.push(m)}h.store.loadData(f)},false);a._l()},initComponent:function(){var a=this;$s.apply(this,{title:IRm$.r1("T_Resources"),items:[{xtype:"panel",bodyPadding:10,minHeight:500,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",name:"txtrel",value:"Relations"},{xtype:"gridpanel",name:"grd_rel",flex:1,store:{xtype:"store",fields:["name","nodepath","uid","type","iconcls"]},columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:true,flex:1,minWidth:160,tdCls:"ig-navi-namecol",tpl:"<div class='ig-navi-itemicon {iconcls}'></div><span title='{name} ({type})'>{name}</span>"},{text:"Location",flex:1,minWidth:200,dataIndex:"nodepath"}],listeners:{cellclick:function(c,d,m,f,l,n,h,j){var k=this,b=k.down("[name=png_rel_sub]"),g=f.get("uid");if(m==0){b.show();k._1(g,"grd_rel_sub")}},scope:this}},{xtype:"panel",name:"png_rel_sub",flex:1,hidden:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"displayfield",value:"Sub relations"},{xtype:"gridpanel",flex:1,name:"grd_rel_sub",store:{xtype:"store",fields:["name","nodepath","uid","type","iconcls"]},columns:[{xtype:"templatecolumn",text:IRm$.r1("B_NAME"),menuDisabled:true,flex:1,minWidth:160,tdCls:"ig-navi-namecol",tpl:"<div class='ig-navi-itemicon {iconcls}'></div><span title='{name} ({type})'>{name}</span>"},{text:"Location",flex:1,minWidth:200,dataIndex:"nodepath"}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.close()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._I72.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._1()}}});IG$._I76a=$s.extend(IG$._I57,{scroll:false,closable:true,layout:"border",userinfo:null,groupinfo:null,iconCls:"icon-group",_1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/Auth"},"address"),mbody:IG$._I2e({option:"select"})},a,a._r1,false);b._l()},_r1:function(e){var c,a=IG$._I18(e,"/smsg/item"),d,j=[],g,f=this.down("[name=gridduty]"),h=f.getSelectionModel(),b;if(a){d=IG$._I26(a);for(c=0;c<d.length;c++){g=IG$._I1c(d[c]);g.active=g.status=="1"?"Active":"Disabled";switch(g.dutytype){case"A":b="Default";break;case"G":b="Group";break;case"C":b="Custom";break;case"U":b="User";break;default:b=g.dutytype;break}g.dutytype_d=b;j.push(g)}}f.store.loadData(j);this._2()},_2:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/Features"},"address"),mbody:IG$._I2e({option:"get"})},a,a._r2,false);b._l()},_r2:function(xdoc){var me=this,tf=me.down("[name=tf]"),tnode=IG$._I18(xdoc,"/smsg/item"),tval=tnode?IG$._I24(tnode):null,mroot;if(tval){tval=Base64.decode(tval);tval=eval("("+tval+")");if(tval.menus){mroot={name:"Root",children:[]};this._r3(tval,mroot,"");tf.store.setRootNode(mroot);tf.store.getRootNode().expand(true);me._7=[];me._8(tf.store.getRootNode())}}},_r3:function(f,d,b){if(f.menus){d.children=d.children||[];var c,a,e;d.leaf=false;for(c=0;c<f.menus.length;c++){a=f.menus[c];a.clspath=(b?b+"-"+a.cls:a.cls);e={name:a.name,mcls:a.cls,clspath:a.clspath,leaf:true};d.children.push(e);this._r3(f.menus[c],e,f.menus[c].clspath)}}},_4:function(){var g=this,h=g.down("[name=gridduty]"),c=h.getSelectionModel().selected,d=g.down("[name=tf]"),f=d.store.getRootNode(),k=[],e,b;if(c&&c.length>0){b=c.items[0].get("sid");k.push("<smsg><item uid='"+b+"'><features>");g._5(f,k);k.push("</features></item></smsg>");var a=this,j=new IG$._I3e();j.init(a,{ack:"31",payload:IG$._I2d({uid:b,type:"feature"}),mbody:k.join("")},a,a._r4,false);j._l()}},_r4:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},_5:function(a,c){if(a.childNodes){var d=this,b,e;for(b=0;b<a.childNodes.length;b++){e=a.childNodes[b];if(e.get("mshow")){c.push("<feat cls='"+e.get("mcls")+"' clspath='"+e.get("clspath")+"' show='"+(e.get("mshow")?"T":"F")+"'/>")}d._5(e,c)}}},_6:function(){var f=this,c=f.down("[name=dfn]"),h=f.down("[name=btn_save]"),d=f.down("[name=gridduty]"),g=d.getSelectionModel().selected,b;if(g.length>0){f.setLoading(true);b=g.items[0].get("sid");c.setValue("Duty: "+g.items[0].get("name"));h.setDisabled(false);var a=this,e=new IG$._I3e();e.init(a,{ack:"28",payload:IG$._I2d({address:"/Features",sid:b},"address;sid"),mbody:IG$._I2e({option:"content"})},a,a._r6,false);e._l()}},_r6:function(j){var l=this,f=l._7,d=l.down("[name=tf]"),c=IG$._I18(j,"/smsg/item/features"),k=(c)?IG$._I26(c):null,g,b,e,m={},a,h;l.setLoading(false);if(k){for(g=0;g<k.length;g++){b=IG$._I1c(k[g]);m[b.clspath]=b}}d.suspendLayouts();d.suspendEvents(false);d.store.suspendEvents(false);for(g=0;g<f.length;g++){e=f[g];b=m[e.get("clspath")];a=b?b.show=="T":false;e.get("mshow")!=a&&e.set("mshow",a)}d.store.resumeEvents();d.resumeEvents();d.resumeLayouts()},_8:function(a){if(a.childNodes){var b,c=this,d;for(b=0;b<a.childNodes.length;b++){d=a.childNodes[b];c._7.push(d);c._8(d)}}},initComponent:function(){var a=this;a.title=IRm$.r1("T_FEATURES");$s.apply(this,{items:[{xtype:"panel",width:270,region:"west",title:"Duties",layout:"fit",items:[{xtype:"grid",name:"gridduty",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},store:{xtype:"store",fields:["sid","name","active","status","dutytype","dutytype_d"]},columns:[{dataIndex:"dutytype_d",text:"Type",width:60},{dataIndex:"name",text:"Name",flex:1},{dataIndex:"active",width:80,text:"Status"}],tbar:[{text:"Load Auth",handler:function(){this._1()},scope:this},{text:"Refresh",handler:function(){this._2()},scope:this}],listeners:{selectionchange:function(b,d,c){this._6()},scope:this}}]},{xtype:"panel",region:"center",flex:1,title:"Features",layout:"fit",items:[{xtype:"treepanel",name:"tf",store:{xtype:"treestore",fields:["name","mcls","clspath","mshow"]},columns:[{xtype:"treecolumn",text:"Name",dataIndex:"name",flex:1},{xtype:"gridcolumn",dataIndex:"mcls"},{xtype:"checkcolumn",dataIndex:"mshow",text:"Show",width:80}],tbar:[{xtype:"displayfield",name:"dfn",value:"Click Duty to set features"},"-",{text:"Save",name:"btn_save",xtype:"button",disabled:true,iconCls:"icon-toolbar-save",handler:function(){this._4()},scope:this}]}]}]});IG$._I76a.superclass.initComponent.call(this)},listeners:{afterrender:function(){this._1()}}});IG$._I76b=$s.extend(IG$._I57,{scroll:false,closable:true,layout:"border",iconCls:"icon-group",_1:function(a){var c=this,b=new IG$._I3e();c.setLoading(true);b.init(c,{ack:"11",payload:IG$._I2d({uid:a}),mbody:IG$._I2e({option:"translate"})},c,function(d){c.setLoading(false);var e=IG$._I18(d,"/smsg/item");if(e){c._a=IG$._I1c(e);c._2.call(c)}},false);b._l()},_2:function(){var f=this,e=f._a,b=e.type.toLowerCase(),g=f.down("[name=f_1]"),d=f.down("[name=f_2]"),a=f.down("[name=_f1]"),c;c=f._6(b);f._k=[];g.setVisible(c!=0);if(c!=0){f._k.push(e);a.setValue(e.name);d.store.loadData([]);c==2&&f.down("[name=_f3]").show();this._5()}else{f._3(e.uid)}},_3:function(a){var c=this,b=new IG$._I3e();c.setLoading(true);c.__m=a;b.init(c,{ack:"72",payload:IG$._I2d({uid:a}),mbody:IG$._I2e({option:"get"})},c,function(h){c.setLoading(false);var f=IG$._I18(h,"/smsg/item"),k,m,r=c.down("[name=f_3]"),q=c.down("[name=f_4]"),o=c.down("[name=f_5]"),n=c.down("[name=f_6]"),l=c.down("[name=f_7]"),e=[],j,g;if(f){m=IG$._I1c(f);q.setValue(m.name);o.setValue(m.nodepath);n.setValue(m.description);l.setValue(m.rev);f=IG$._I18(f,"hist");if(f){k=IG$._I26(f);for(g=0;g<k.length;g++){j=IG$._I1c(k[g]);j.uid=m.uid;j.description=IG$._I24(k[g]);j.iscurrent=(m.rev==j.revision)?"YES":"";j.writable=m.writable;e.push(j)}}m.rh=e;c._c=m;r.store.loadData(e)}},false);b._l()},_4:function(){var h=this,c=h._c,b=h.down("[name=f_7]"),a,f=false,e,g,d=h._c.uid;b.clearInvalid();if(c){a=""+b.getValue();for(e=0;e<c.rh.length;e++){if(c.rh[e].revision==a){f=true;break}}if(f==false){b.markInvalid("Not valid revision");return}g=new IG$._I3e();h.setLoading(true);g.init(h,{ack:"72",payload:IG$._I2d({uid:d,revision:a},"uid;revision"),mbody:IG$._I2e({option:"setrevision"})},h,function(j){h.setLoading(false);h._3.call(h,d);IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},false);g._l()}},_5:function(){var d=this,c=d._a,b=new IG$._I3e(),a=d.down("[name=_f1]");d.setLoading(true);a.setValue(c.name);b.init(d,{ack:"5",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({})},d,function(e){d.setLoading(false);var l=IG$._I18(e,"/smsg/item"),k=l?IG$._I26(l):null,j=d._k,f,m=[],h,g=d.down("[name=f_2]");if(k){for(f=0;f<k.length;f++){h=IG$._I1c(k[f]);m.push(h)}}g.store.loadData(m)},false);b._l()},_6:function(a){var b=0;if(a=="cubemodel"){b=0}else{if((/folder|workspace|javapackage/).test(a)){b=1}else{if((/datacube|cube|metrics|mcube|nosql|sqlcube|mdbcube/).test(a)){b=2}}}return b},_7:function(c){var b=this,a=new IG$._I3e();a.init(b,{ack:"72",payload:IG$._I2d({uid:c.get("uid"),revision:c.get("revision")},"uid;revision"),mbody:IG$._I2e({option:"updatedesc"},null,{name:"desc",value:c.get("description")})},b,function(d){},false);a._l()},_8:function(g,b){var e=this,c=e.down("[name=f_3]"),a=e._c,f=c.store.data.items[g],d=IG$._I7d;if(d&&a&&f&&f.get("uid")){d.m1$7.call(d,a.uid,a.type.toLowerCase(),a.name,a.nodepath,true,a.writable,{revision:f.get("revision")})}},mm3:function(f,a){var d=this,b=d.down("[name=f_3]"),e=b.store.ata.items[f],c;if(e&&e.get("uid")){c=new IG$._I3e();c.init(d,{ack:"72",payload:IG$._I2d({uid:e.get("uid"),revision:e.get("revision")},"uid;revision"),mbody:IG$._I2e({option:"clear_rev"},null,{})},d,function(g){if(d.__m){d._3(d.__m)}},false);c._l()}},initComponent:function(){var a=this;a.title=IRm$.r1("T_REVISION");$s.apply(this,{border:0,bodyPadding:5,items:[{xtype:"panel",title:"List of Items",region:"west",width:420,name:"f_1",layout:{type:"vbox",align:"stretch"},hidden:true,split:true,collapseMode:"mini",collapsible:true,items:[{xtype:"fieldset",title:"Folder Info",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",flex:1,fieldLabel:null,readOnly:true,name:"_f1"},{xtype:"button",text:"Up",hidden:true,name:"_f2",handler:function(){var e=this,f=e._k,c=e.down("[name=_f2]"),b=e.down("[name=_f3]"),d;f.splice(f.length-1,1);e._a=f[f.length-1];d=e._6(e._a.type.toLowerCase());c.setVisible(f.length>1);b.setVisible(d==2);e._5();(d==2)&&e._3(e._a.uid)},scope:this},{xtype:"button",text:"->",hidden:true,name:"_f3",handler:function(){var c=this,b=c._k[c._k.length-1];b&&c._3(b.uid)},scope:this}]},{xtype:"fieldset",title:"Search",hidden:true,layout:{type:"vbox",align:"stretch"},defaults:{labelWidth:70},items:[{xtype:"textfield",fieldLabel:"Keyword"},{xtype:"combobox",queryMode:"local",displayField:"name",valueField:"value",editable:false,fieldLabel:"Last Modified",value:"",store:{xtype:"store",fields:["name","value"],data:[{name:"Select",value:""},{name:"1 Day",value:"1d"},{name:"2 Day",value:"2d"},{name:"3 Day",value:"3d"},{name:"1 Week",value:"1w"}]}},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"container",flex:1},{xtype:"button",text:"Run",handler:function(){this._5()},scope:this}]}]},{xtype:"gridpanel",name:"f_2",store:{xtype:"store",fields:["name","nodepath","revision","updatedate","updatedatefm","uid","type"]},flex:1,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},$v:{scrollX:true},columns:[{text:"Name",dataIndex:"name",minWidth:120},{text:"Revision",dataIndex:"revision",minWidth:80},{text:"Path",dataIndex:"nodepath",flex:1,minWidth:300},{text:"Last Updated",dataIndex:"updatedatefm",minWidth:160}],listeners:{cellclick:function(b,d,n,g,l,q,j,c){var k=this,h=g.get("uid"),f=g.get("type"),m,r=k.down("[name=_f2]"),o=k.down("[name=_f3]");m=k._6(f.toLowerCase());if(m==0){k._3(h)}else{k._a={uid:h,name:g.get("name"),type:f,nodepath:g.get("nodepath")};k._k.push(k._a);r.setVisible(k._k.length>1);o.setVisible(m==2);k._5();(m==2)&&k._3(h)}},scope:this}}]},{xtype:"panel",region:"center",title:"Revision Management",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"Information",layout:{type:"hbox",align:"stretch"},items:[{xtype:"panel",layout:"anchor",flex:1,border:1,padding:"0 5 0",bodyPadding:4,defaults:{labelAlign:"right"},items:[{xtype:"textfield",fieldLabel:"Name",readOnly:true,name:"f_4"},{xtype:"textfield",anchor:"100%",fieldLabel:"Location",readOnly:true,name:"f_5"},{xtype:"textarea",anchor:"100%",height:120,fieldLabel:"Description",readOnly:true,name:"f_6"}]},{xtype:"panel",layout:{type:"vbox",align:"stretch"},width:240,flex:1,border:1,padding:"0 5 0",bodyPadding:4,defaults:{labelAlign:"right"},items:[{xtype:"fieldcontainer",fieldLabel:"Current Revision",anchor:"100%",layout:"anchor",items:[{xtype:"numberfield",width:60,maxWidth:80,minValue:0,name:"f_7"},{xtype:"fieldcontainer",layout:"hbox",fieldLabel:null,items:[{xtype:"button",text:"Change Revision",handler:function(){this._4()},scope:this}]}]},{xtype:"container",flex:1}]}]},{xtype:"fieldcontainer",layout:{type:"hbox"},items:[{xtype:"button",text:"Refresh",width:80,margin:"0 4 0",handler:function(){var b=this;if(b.__m){b._3(b.__m)}},scope:this},{xtype:"button",text:"Clear",width:80,handler:function(){var c=this,b;if(c.__m){b=new IG$._I3e();b.init(c,{ack:"72",payload:IG$._I2d({uid:c.__m},"uid;revision"),mbody:IG$._I2e({option:"clear_hist"},null,{})},c,function(d){if(c.__m){c._3(c.__m)}},false);b._l()}},scope:this},{xtype:"displayfield",flex:1,value:"Clear previous revision history",padding:"0 5 0"}]},{xtype:"gridpanel",name:"f_3",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},store:{xtype:"store",fields:["uid","revision","updatedate","updatedatefm","description","username","userid","iscurrent","writable"]},defaults:{menuDisabled:true},plugins:[{ptype:"cellediting",clicksToEdit:1}],columns:[{text:"Revision",dataIndex:"revision"},{text:"Updated Date",dataIndex:"updatedatefm",width:150},{text:"Modified By",dataIndex:"username"},{text:"Description",dataIndex:"description",flex:1,editor:{xtype:"textfield",allowBlank:true}},{text:"Current",dataIndex:"iscurrent"},{xtype:"actioncolumn",width:50,menuDisabled:true,items:[{iconCls:"icon-grid-add",tooltip:"Open This Revision",handler:function(c,d,b){a._8.call(a,d,b)}},{iconCls:"icon-grid-delete",tooltip:"Remove History",handler:function(c,d,b){a.mm3.call(a,d,b)}}]}],listeners:{edit:function(b,f,d){var c=this,g=f.record;c._7(g)},scope:this}}]}]});IG$._I76b.superclass.initComponent.call(this)},listeners:{afterrender:function(a){var b=this;b._1(b.uid)}}});IG$._Id3=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:300,autoHeight:true,callback:null,c1:function(){var a=this,d=a.fielditems,f,c,b;for(b=0;b<d.length;b++){f=d[b].fname;c=a.down("[name="+f+"]").getValue();d[b].uvalue=c;if(d[b].optional!=true){if(!c){IG$._I54(ig$.appname,IRm$.r1("T_DB_BLANK"),null,a,null,null,1,"error");return}}}var e=a.c3();if(a.callback){a.callback.execute(e);a.close()}},c3:function(){var e=this,a=e.fieldvalue,f=e.fielditems,h,d,b,g={},c;for(b=0;b<f.length;b++){g[f[b].fname]=f[b].uvalue}c=e.c3a(a,g,false);return c},c3a:function(f,e,j){var l=this,n=[],h,k,o=false,g=false,m,d,b=false;for(h=0;h<f.length;h++){k=f[h];switch(k){case"<":if(g==true){d+=k}else{o=true;m=""}break;case"[":g=true;o=false;d="";break;case">":if(g==false&&o==true){if(e[m]){n.push(e[m]);b=true}o=false}else{if(g==true){d+=k}}break;case"]":g=false;var a=l.c3a(d,e,true);n.push(a);break;default:if(g==true){d+=k}else{if(o==true){m+=k}else{n.push(k)}}break}}if(b==false&&j==true){return""}return n.join("")},c2:function(g){var f=[],d,j,e,b,a=false,h=false;for(d=0;d<g.length;d++){j=g[d];switch(j){case"<":h=true;b=j;break;case"[":a=true;break;case">":if(h==true){h=false;b+=j;f.push({field:b,fname:b.substring(1,b.length-1),optional:a})}break;case"]":a=false;break;default:if(h==true){b+=j}break}}return f},_IG0:function(){this.close()},initComponent:function(){var d=this,b=[],a=d.fieldvalue,e,c;d.title=IRm$.r1("T_DB_TMPL");d.fielditems=e=d.c2(a);for(c=0;c<e.length;c++){b.push({fieldLabel:e[c].fname,name:e[c].fname,value:"",allowBlank:e[c].optional,blankText:"Item name is required!"})}var f=new IG$._I57({region:"center",flex:3,border:true,region:"center",id:"dlgmakemetaform",defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%",labelWidth:80},items:b});$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[f],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.c1()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Id3.superclass.initComponent.apply(this,arguments)}});IG$._Id4=function(){};IG$._Id4.prototype={pX:function(b){var e=this,d,a;e.dbtype="";e.jdbcurl="";e.driver="";e.username="";e.passwd="";e.name="";e.savepwd=false;e.schemaname="";e.charset_out="";e.charset_db="";e.userowlimit=0;e.mongodb_hosts="";e.c_rule="min";e.cache=false;e.c_int=5;e.query_timeout=0;e.schedule_query_timeout=0;e.max_pool_size=0;e.c_dbmon=false;if(b){var g=IG$._I18(b,"/smsg/item"),f,h,c;e.uid=IG$._I1b(g,"uid");e.name=IG$._I1b(g,"name");e.memo=IG$._I1b(g,"memo");g=IG$._I18(b,"/smsg/item/connection");f=IG$._I26(g);for(d=0;d<f.length;d++){h=IG$._I29(f[d]);c=IG$._I24(f[d]);if(h=="savepwd"){c=(c=="T")?true:false}else{if(h=="userowlimit"){c=parseInt(c)}else{if(h=="cache"){c=(c=="T")?true:false}else{if(h=="c_int"){c=parseInt(c)||5}else{if(h=="c_dbmon"){c=(c=="T")?true:false}else{if(h=="max_pool_size"||h=="schedule_query_timeout"||h=="query_timeout"){c=parseInt(c)||0}}}}}}e[h]=c}}},gX:function(b){var d=[],c=this,a,e=c.mongodb_hosts;d.push("<smsg><item uid='"+c.uid+"'><connection>");d.push("<dbtype>"+c.dbtype+"</dbtype>");d.push("<jdbcurl><![CDATA["+c.jdbcurl+"]]></jdbcurl>");d.push("<driver><![CDATA["+c.driver+"]]></driver>");d.push("<username>"+c.username+"</username>");d.push("<savepwd>"+(c.savepwd?"T":"F")+"</savepwd>");d.push("<schemaname>"+(c.schemaname||"")+"</schemaname>");d.push("<charset_out>"+(c.charset_out||"")+"</charset_out>");d.push("<charset_db>"+(c.charset_db||"")+"</charset_db>");d.push("<userowlimit>"+(c.userowlimit||"0")+"</userowlimit>");if(b==false||c.savepwd==true){d.push("<passwd>"+c.passwd+"</passwd>")}d.push("<mongodb_hosts><![CDATA["+(c.mongodb_hosts||"")+"]]></mongodb_hosts>");d.push("<validateSql><![CDATA["+(c.validateSql||"")+"]]></validateSql>");d.push("<cache>"+(c.cache?"T":"F")+"</cache>");d.push("<c_rule>"+(c.c_rule||"min")+"</c_rule>");d.push("<c_int>"+(c.c_int||"5")+"</c_int>");d.push("<query_timeout>"+(c.query_timeout||"0")+"</query_timeout>");d.push("<schedule_query_timeout>"+(c.schedule_query_timeout||"0")+"</schedule_query_timeout>");d.push("<max_pool_size>"+(c.max_pool_size||"0")+"</max_pool_size>");d.push("<c_dbmon>"+(c.c_dbmon?"T":"F")+"</c_dbmon>");d.push("</connection></item></smsg>");return d.join("")}};IG$._I74=$s.extend(IG$._I57,{scroll:false,initialized:false,closable:true,hideMode:"offsets",layout:"fit",bodyPadding:5,iconCls:"icon-ing-docdef",_IFd:function(){if(window.dbtypelist){var a=this,b,f,d,c=[];for(d=0;d<window.dbtypelist.length;d++){b=window.dbtypelist[d];f={};IG$._I1d(b,f,"id;desc;driver;url");c.push(f)}a.dblist=c;a.ld2()}else{var a=this,e=new IG$._I3e();e.init(a,{ack:"11",payload:IG$._I2d({}),mbody:IG$._I2e({option:"dblist"})},a,a.rs_ld1,false);e._l()}},rs_ld1:function(a){var b=this,g=IG$._I18(a,"/smsg"),f=IG$._I26(g),e,d=[],c,h;window.dbtypelist=[];for(e=0;e<f.length;e++){c={id:IG$._I1b(f[e],"name"),desc:IG$._I24(IG$._I18(f[e],"desc")),driver:IG$._I24(IG$._I18(f[e],"driver")),url:IG$._I24(IG$._I18(f[e],"url"))};h={};IG$._I1d(c,h,"id;desc;driver;url");window.dbtypelist.push(h);d.push(c)}b.dblist=d;b.ld2()},ld2:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"29",payload:IG$._I2d({address:"/Connections",option:"list"},"address;option"),mbody:IG$._I2e({})},a,a.rs_ld2,false);b._l()},rs_ld2:function(a){var e=this,h=e.down("[name=dbgrid]"),g=IG$._I18(a,"/smsg/item"),f,b=[],d,c;if(g){e.rootnode=IG$._I1b(g,"uid");f=IG$._I26(g);for(c=0;c<f.length;c++){d=IG$._I1c(f[c]);b.push(d)}h.store.loadData(b)}},_t$:function(b){var a=this;switch(b){case"cmd_add_db":var c;c=new IG$.AkX({dbinfo:null,dblist:a.dblist,callback:new IG$._I3d(a,a.rs_MM)});c.show();break}},ld4:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"5",payload:IG$._I2d({address:b}),mbody:IG$._I2e({})},a,a.rs_ld4,false);c._l()},rs_ld4:function(a){var b=this,d,c;c=new IG$._Id4();c.pX(a);d=new IG$.AkX({dbinfo:c,dblist:b.dblist,callback:new IG$._I3d(this,this.rs_MM)});d.show()},rs_MM:function(b){var a=this;a.dbinfo=null;a.ld2();b=="saved"&&IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success");b=="deleted"&&IG$._I54(ig$.appname,IRm$.r1("M_DELETED"),null,null,0,"success")},initComponent:function(){var a=this;a.items=[{xtype:"panel",region:"center",layout:{type:"vbox",align:"stretch"},bodyPadding:4,items:[{xtype:"panel",flex:1,border:false,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"dbgrid",flex:1,store:{xtype:"store",fields:["name","uid","memo","writable","manage","type","owner","modifier","updatedate"]},columns:[{text:IRm$.r1("B_TYPE"),width:80,sortable:false,hideable:false,dataIndex:"type"},{text:IRm$.r1("B_NAME"),flex:1,sortable:false,hideable:false,dataIndex:"memo"},{text:IRm$.r1("B_OWNER"),width:120,dataIndex:"owner"},{text:IRm$.r1("B_MODI"),width:120,dataIndex:"modifier"}],listeners:{itemclick:function(d,c,h,f,j,g){var b=c.get("uid");this.ld4(b)},scope:this}}],tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("L_ADD_DB_INST"),handler:function(){this._t$("cmd_add_db")},scope:this}]}]}];this.listeners={afterrender:function(b){b._IFd.call(b)}};IG$._I74.superclass.initComponent.call(this)}});IG$.AkX=$s.extend($s.window,{name:"paneludetail",width:500,height:520,layout:"fit",defaults:{anchor:"100%"},in$t:function(){var b=this,c=b.down("[name=tdbtype]"),a=b.dblist;c.store.loadData(a);b.ld5()},ld5:function(){var q=this,j=q.dbinfo,s=IG$._I83.jS1,n=q.down("[name=tname]"),g=q.down("[name=tdbtype]"),A=q.down("[name=tdriver]"),x=IRm$.r1("L_LAST_UPD"),k=q.down("[name=turl]"),h=q.down("[name=tuname]"),o=q.down("[name=tpwd]"),d=q.down("[name=tusave]"),f=q.down("[name=tudate]"),r=q.down("[name=charset_out]"),w=q.down("[name=charset_db]"),v=q.down("[name=userowlimit]"),a=q.down("[name=c_rule]"),m=q.down("[name=cache]"),e=q.down("[name=c_int]"),b=q.down("[name=gm1]"),B=q.down("[name=qt1]"),z=q.down("[name=qt2]"),y=q.down("[name=qt3]"),t=q.down("[name=c_dbmon]"),c=q.down("[name=validateSql]");n.setReadOnly((j)?true:false);n.setValue(j?j.memo||"":"");g.setValue(j?j.dbtype||"":"");A.setValue(j?j.driver||"":"");k.setValue(j?j.jdbcurl||"":"");h.setValue(j?j.username||"":"");o.setValue(j?j.passwd||"":"");d.setValue(j?j.savepwd:false);m.setValue(j?j.cache:false);e.setValue(j?j.c_int||5:5);B.setValue(j?j.query_timeout||0:0);z.setValue(j?j.schedule_query_timeout||0:0);y.setValue(j?j.max_pool_size||0:0);c.setValue(j?j.validateSql||"":"");t.setValue(j?j.c_dbmon:false);r.setValue(j?j.charset_out||"":"");w.setValue(j?j.charset_db||"":"");v.setValue(j?j.userowlimit||0:0);a.setValue(j?j.c_rule||"min":"min");x=(j&&j.updatedate)?x+IG$._I40(j.updatedate):x;f.setValue(x);b.setValue(j&&j.mongodb_hosts?j.mongodb_hosts:"")},cH:function(){var c,e=this,b=window.dbtypelist,a,h=e.down("[name=tdbtype]"),d=e.down("[name=tdriver]"),f=e.down("[name=turl]"),g;if(e.changelock==true){return}g=h.getValue();for(c=0;c<b.length;c++){if(b[c].id==g){a=b[c];break}}d.setValue(a?a.driver:"");f.setValue(a?a.url:"")},cH1:function(){var a=this,b;b=new IG$._Id4();b.pX(null);a.lda(b);var a=this,c=new IG$._I3e();c.init(a,{ack:"29",payload:IG$._I2d({address:"/Connections",option:"testcon"},"address;option"),mbody:b.gX(false)},a,a.rs_cH1,false);c._l()},rs_cH1:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SUC_DBCON"),null,null,0,"success")},cH2:function(c){var b=this,a=b.down("[name="+c+"]"),e=a.getValue(),d;d=new IG$._Id3({fieldvalue:e,callback:new IG$._I3d(this,this.rs_cH2,c)});IG$._I_5(this,d)},rs_cH2:function(d,c){var b=this,a=b.down("[name="+c+"]");a.setValue(d)},ld6:function(c){var a=this,g=new IG$._I3e(),b,j,e,h=a.dbinfo,k=a.down("[name=tname]"),d="",f;if(c=="confirm"){f=k.getValue();b="31";j=IG$._I2d({address:(h?h.uid:"/Connections/"+f),name:f,type:"UserDB",pid:a.rootnode,memo:k.getValue(),description:d},"address;name;type;pid;description;memo");if(!h){h=new IG$._Id4();h.pX(null)}a.lda(h);e=h.gX(true);g.init(a,{ack:b,payload:j,mbody:e},a,a.rs_ld6a,false);g._l()}else{if(c=="delete"){IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_C_DELETE"),function(l){if(l=="yes"){if(!h){return}b="7";j=IG$._I2d({address:h.uid,name:f,type:"UserDB",description:d},"address;name;type;pid;description;memo");e=IG$._I2e({});g.init(a,{ack:b,payload:j,mbody:e},a,a.rs_ld6b,false);g._l()}},this,this)}}},rs_ld6b:function(a){var b=this;b.callback&&b.callback.execute("saved");b.close()},rs_ld6a:function(a){var b=this;b.callback&&b.callback.execute("saved");b.close()},lda:function(f){var k=this,h=k.down("[name=tdbtype]"),v=k.down("[name=tdriver]"),l=k.down("[name=turl]"),j=k.down("[name=tuname]"),n=k.down("[name=tpwd]"),d=k.down("[name=tusave]"),o=k.down("[name=charset_out]"),t=k.down("[name=charset_db]"),s=k.down("[name=userowlimit]"),b=k.down("[name=gm1]"),a=k.down("[name=c_rule]"),m=k.down("[name=cache]"),e=k.down("[name=c_int]"),x=k.down("[name=qt1]"),w=k.down("[name=qt2]"),u=k.down("[name=qt3]"),c=k.down("[name=validateSql]"),q=k.down("[name=c_dbmon]"),g,r;f.dbtype=h.getValue();f.jdbcurl=l.getValue();f.driver=v.getValue();f.username=j.getValue();f.passwd=n.getValue();f.savepwd=true;f.charset_out=o.getValue();f.charset_db=t.getValue();f.userowlimit=s.getValue();f.mongodb_hosts=b.getValue();f.c_rule=a.getValue();f.cache=m.getValue();f.c_int=e.getValue();f.c_dbmon=q.getValue();f.query_timeout=x.getValue();f.schedule_query_timeout=w.getValue();f.max_pool_size=u.getValue();f.validateSql=c.getValue()},m1:function(){var c=this,e=c.down("[name=tdbtype]").getValue(),b=c.down("[name=m1]"),a=c.down("[name=m2]"),d=c.down("[name=m_a1]");b.setVisible(e!="mongodb");a.setVisible(e=="mongodb");d.setVisible(e!="mongodb")},initComponent:function(){var a=this;$s.apply(a,{title:IRm$.r1("T_DB_CON"),items:[{xtype:"panel",layout:"anchor",bodyPadding:10,autoScroll:true,items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_DB_NAME"),name:"tname"},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_DB_TYPE"),layout:"hbox",items:[{xtype:"combobox",labelField:"desc",valueField:"gid",name:"tdbtype",queryMode:"local",displayField:"desc",valueField:"id",editable:false,autoSelect:true,store:{fields:["id","desc","driver","url"]},listeners:{change:function(b,e,c,d){this.m1()},scope:this}},{xtype:"button",name:"m_a1",text:IRm$.r1("L_APPLY_TMPL"),handler:function(){var b=this;b.cH.call(b)},scope:this}]},{xtype:"fieldcontainer",layout:"anchor",hidden:true,name:"m1",defaults:{anchor:"100%"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_JDBC_DRV"),name:"tdriver"},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_JDBC_URL"),layout:"hbox",items:[{xtype:"textfield",fieldLabel:"",name:"turl",width:280},{xtype:"button",text:"Set",handler:function(){var b=this.down("[name=turl]");if(b.getValue()!=""){this.cH2("turl")}},scope:this}]},{xtype:"textfield",fieldLabel:IRm$.r1("L_DB_UNAME"),name:"tuname"},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_DB_PWD"),layout:"hbox",items:[{xtype:"textfield",fieldLabel:"",inputType:"password",name:"tpwd",width:220},{xtype:"button",text:"Test",handler:function(){var b=this;b.cH1.call(b)},scope:this}]},{xtype:"checkbox",fieldLabel:"Save password",hidden:true,name:"tusave"},{xtype:"displayfield",value:IRm$.r1("L_LAST_UPD"),name:"tudate"},{xtype:"fieldset",title:IRm$.r1("L_ADV_OPTION"),layout:"anchor",items:[{xtype:"textarea",height:80,fieldLabel:IRm$.r1("L_DB_VAL"),name:"validateSql"},{xtype:"numberfield",name:"qt3",fieldLabel:"Max pool size",minValue:0,maxValue:1000},{xtype:"numberfield",name:"qt1",fieldLabel:IRm$.r1("L_DB_QUERYTIMEOUT"),minValue:0,maxValue:100000},{xtype:"numberfield",name:"qt2",fieldLabel:IRm$.r1("L_DB_SCHEDULE_QUERYTIMEOUT"),minValue:0,maxValue:100000},{xtype:"combobox",labelField:"name",valueField:"value",name:"charset_db",queryMode:"local",displayField:"name",editable:false,autoSelect:true,fieldLabel:IRm$.r1("L_DB_CHARSET"),store:{xtype:"store",fields:["name","value"],data:[{name:"Not use",value:""},{name:"UTF-8",value:"utf-8"},{name:"ksc5601",value:"ksc5601"},{name:"x-windows-949",value:"x-windows-949"},{name:"iso-8859-1",value:"iso-8859-1"},{name:"euc-kr",value:"euc-kr"}]}},{xtype:"combobox",labelField:"name",valueField:"value",name:"charset_out",queryMode:"local",displayField:"name",editable:false,autoSelect:true,fieldLabel:IRm$.r1("L_OUTPUT_CHARSET"),store:{xtype:"store",fields:["name","value"],data:[{name:"Not use",value:""},{name:"UTF-8",value:"utf-8"},{name:"ksc5601",value:"ksc5601"},{name:"x-windows-949",value:"x-windows-949"},{name:"iso-8859-1",value:"iso-8859-1"},{name:"euc-kr",value:"euc-kr"}]}},{xtype:"numberfield",name:"userowlimit",anchor:"50%",fieldLabel:IRm$.r1("L_ROW_LIMIT_COUNT"),minValue:0,maxValue:10000000},{xtype:"checkbox",fieldLabel:IRm$.r1("L_USE_CACHE"),name:"cache",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"combobox",fieldLabel:IRm$.r1("L_CACHE_RULE"),name:"c_rule",displayField:"name",valueField:"value",queryMode:"local",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:IRm$.r1("L_EV_MIN"),value:"min"},{name:IRm$.r1("L_EV_HOUR"),value:"hour"},{name:IRm$.r1("L_EV_DAY"),value:"day"}]},listeners:{change:function(b){var e=this,d=e.down("[name=c_int]"),c=b.getValue();d.setFieldLabel(c=="day"?IRm$.r1("L_CLC_HOUR"):IRm$.r1("L_CLC_PERI"))},scope:this}},{xtype:"numberfield",fieldLabel:IRm$.r1("L_CACHE_PERI"),name:"c_int",value:5,minValue:1,maxValue:1000},{xtype:"checkbox",fieldLabel:IRm$.r1("L_DB_MON"),boxLabel:IRm$.r1("B_ENABLED"),name:"c_dbmon"}]}]},{xtype:"fieldcontainer",layout:"fit",height:280,hidden:true,name:"m2",items:[{xtype:"textarea",name:"gm1",flex:1,fieldLabel:"Connection String"}]},{xtype:"fieldcontainer",hidden:(a.dbinfo?false:true),items:[{xtype:"button",text:"Remove Connection",handler:function(){this.ld6("delete")},scope:this}]}]}],buttons:[{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this.ld6("confirm")},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$.AkX.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a.in$t()}}});IG$._Ice=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:300,autoHeight:true,callback:null,poolname:null,c1:function(){var d=this,b=d.down("[name=tpwd]"),e=b.getValue();if(!e){IG$._I54(ig$.appname,IRm$.r1("T_DB_BLANK"),null,d,null,null,1,"error");return}var a=this,c=new IG$._I3e();c.init(a,{ack:"25",payload:IG$._I2d({address:d.poolname,pwd:e},"address;pwd"),mbody:IG$._I2e({option:"standard"})},a,a.rs_c1);c._l()},rs_c1:function(a){var c=this,b=c.down("[name=tpwd]"),d=b.getValue();if(c.callback){c.callback.execute(d);c.close()}},initComponent:function(){var a=this;a.title=IRm$.r1("T_DB_PWD");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"textfield",fieldLabel:"Password",inputType:"password",enableKeyEvents:true,name:"tpwd",allowBlank:false,listeners:{keyup:function(c,d,b){if(d.keyCode==13){a.c1.call(a)}}}}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.c1()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Ice.superclass.initComponent.apply(this,arguments)}});IG$.Idm=$s.extend(IG$._I57,{closable:true,hideMode:"offsets",layout:"fit",bodyPadding:0,iconCls:"icon-ing-docdef",_b1:function(){var e=this,d=e.down("[name=_m4]"),g=d.body.dom,b,f,a,h,c;f=$("#fileupload",g);a=$("#dropzone",g);h=$("#d_progress",g);f.fileupload({url:ig$.servlet,dataType:"text",formData:{_mts_:IG$._g$a||""},done:function(r,n){var t=n.result||'<smsg errorcode="0xffff" errormsg="Server incorrect responding"/>',q=IG$._I13(t),j=IG$._I27(q),l,s,o,m=[],k;if(j){IG$._I51(q,e,null)}else{l=IG$._I18(q,"/smsg");if(l){s=IG$._I26(l);for(o=0;o<s.length;o++){k=IG$._I1c(s[o]);m.push(k)}}}e._l1.call(e,m)},progressall:function(m,l){var j=parseInt(l.loaded/l.total*100,10),k=$(".bar",h);k.css("width",j+"%");k.text("Loaded "+l.loaded+" / "+l.total)},dropZone:a}).bind("fileuploadsubmit",function(k,j){});f.fileupload("option","url",ig$.servlet)},_l1:function(e){var d=this,c=d.down("[name=_m5]"),b,a;if(e){for(b=0;b<e.length;b++){a=e[b];if(a.filename.substring(0,"{ENC}".length)=="{ENC}"){a.filename=a.filename.substring("{ENC}".length);a.filename=Base64.decode(a.filename)}}}c.store.loadData(e)},_l2:function(e,g){var d=this,c=new IG$._I3e(),a=null,f=null,b=null;d.setLoading(true,true);c.init(d,{ack:"27",payload:IG$._I2d({uid:e.uid,delimiter:a,uploadmode:"F",deletemode:"F",regfile:f,rowlimit:100,file_encoding:b},"uid;delimiter;uploadmode;deletemode;regfile;file_encoding;rowlimit"),mbody:IG$._I2e({option:"previewdatacontent"})},d,function(r){var h=IG$._I18(r,"/smsg"),s=h?IG$._I26(h):null,n,m,l=$("td",g),q=[],k,o,v,u,t;l.empty();for(n=0;n<s.length;n++){k=$("<div class='sh-info'><div class='sh-summary'></div><div class='sh-columns'></div></div>").appendTo(l);t=$(".sh-columns",k);o=IG$._I18(s[n],"Header");v=IG$._I26(o);u="";for(m=0;m<v.length;m++){u+=(m>0?", ":"")+IG$._I1b(v[m],"name")}t.text(u)}});c._l()},_l3:function(){var b=this,a=new IG$._I3e();b.setLoading(true,true);a.init(b,{ack:"11",payload:IG$._I2d({},""),mbody:IG$._I2e({option:"ftables"})},b,function(c){var h=IG$._I18(c,"/smsg/item"),g=h?IG$._I26(h):null,d=b.down("[name=m1]"),j=[],f,e;if(g){for(e=0;e<g.length;e++){f=IG$._I1c(g[e]);j.push(f)}}d.store.loadData(j)});a._l()},_l4:function(c){var b=this,a=new IG$._I3e(),d={uid:c.get("uid"),option:"StoredContent"};b._sb1=c;a.init(b,{ack:"25",payload:IG$._I2d(d,"uid;option"),mbody:IG$._I2e({option:d.option})},b,function(l){var f=IG$._I18(l,"/smsg/item"),m=f?IG$._I18(f,"objinfo"):null,o=f?IG$._I26(f,"Field"):null,j=m?IG$._I1c(m):null,k,e,h=[],g=0,q=b.down("[name=_mt]"),r=b.down("[name=m3]"),s=[];if(o){for(k=0;k<o.length;k++){e=IG$._I1c(o[k]);if(e.name==j.file_field||e.name==j.seq_field){continue}e.seq=++g;s.push(e.name);h.push(e)}}b._ltb={item:IG$._I1c(f),fields:h};r.store.loadData(h);q.setValue(s.join("\t"));b._l6(d.uid)},false);a._l()},_l6:function(a){var c=this,b=new IG$._I3e();c.setLoading(true,true);b.init(c,{ack:"11",payload:IG$._I2d({uid:a,option:"ftable_hist"},"uid;option"),mbody:IG$._I2e({option:"ftable_hist"})},c,function(k){var n=this,e=IG$._I18(k,"/smsg/item"),l=e?IG$._I26(e):null,s=n.down("[name=m2]"),h,g,f=[],d,r,m,q,o;if(l){for(h=0;h<l.length;h++){o=l[h];d=IG$._I1c(o);r=IG$._I26(o);if(r){for(g=0;g<r.length;g++){m=IG$._I29(r[g]);q=IG$._I24(r[g]);d[m]=q}}f.push(d)}}s.store.loadData(f)});b._l()},d1:function(d,a){var c=this,b=new IG$._I3e();c.setLoading(true,true);b.init(c,{ack:"11",payload:IG$._I2d({uid:d.get("uid"),option:"ftable_rm"},"uid;option"),mbody:IG$._I2e({option:"ftable_rm"})},c,function(e){if(c._sb1){c._l4(c._sb1)}});b._l()},_l7:function(d){var h=this,a=h._ltb,f=h.down("[name=_m5]"),j=f.getSelectionModel().selected,k=new IG$._I3e(),b=null,c=null,g=null,l=[],e;h.setLoading(true,true);if(d){l.push(d.get("uid"))}else{for(e=0;e<j.length;e++){l.push(j.items[e].get("uid"))}}if(l.length==0){return}k.init(h,{ack:"27",payload:IG$._I2d({tuid:a.item.uid,uid:l.join(";")},"uid;tuid"),mbody:IG$._I2e({option:"loaddatacontent"})},h,function(m){f.store.loadData([]);if(h._sb1){h._l4(h._sb1)}});k._l()},initComponent:function(){var a=this;$s.apply(a,{layout:"border",tbar:[{iconCls:"icon-refresh",tooltip:"Refresh",handler:function(){var b=this;b._l3.call(b)},scope:this}],items:[{xtype:"gridpanel",name:"m1",title:"Table List",region:"center",flex:1,store:{xtype:"store",fields:["type","name","uid"]},columns:[{text:"Type",dataIndex:"type",width:80},{text:"Name",dataIndex:"name",tdCls:"igc-td-link",flex:1},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-config",tooltip:"Config item",handler:function(c,f,b){var d=this,e=c.store.getAt(f);d._l4.call(d,e)},scope:this}]}],listeners:{cellclick:function(b,c,k,d,j,l,f,g){var h=this;if(k==1){h._l4.call(h,d)}},scope:this}},{xtype:"panel",region:"south",flex:1,flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"panel",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",title:"Uploaded File",flex:1,name:"_m5",store:{fields:["filename","uid"]},selType:"checkboxmodel",selModel:{mode:"MULTI"},tbar:[{iconCls:"icon-refresh",tooltip:"Load File",handler:function(){var b=this;b._l7()},scope:this}],columns:[{text:"Name",flex:1,dataIndex:"filename",tdCls:"igc-td-link"},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-config",tooltip:"Config item",handler:function(c,f,b){var d=this,e=c.store.getAt(f);d._l7.call(d,e)},scope:this}]}]},{html:"<div class='igc-o-dzone' id='_tb_f'><input type='file' id='fileupload' name='files[]' data-url='upload' multiple></input><div class='filedropzone fade well' id='dropzone'>Drop files here</div><div class='file-progress' id='d_progress'><div class='bar' style='width: 0%;'></div></div></div>",name:"_m4",height:150}]},{xtype:"gridpanel",title:"File History",name:"m2",flex:1,store:{xtype:"store",fields:["tuid","cdate","mdate","cdate_user","mdate_user","cname","uname","fname","uid","type","rowcount"]},columns:[{text:"Name",dataIndex:"fname",flex:1},{text:"Updated",dataIndex:"mdate_user",width:150},{text:"Rows",dataIndex:"rowcount",width:80},{xtype:"actioncolumn",width:30,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(c,e,b){var d=c.store.getAt(e);a.d1.call(a,d,c)}}]}]},{xtype:"panel",title:"Column Fields",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",name:"m3",flex:1,store:{xtype:"store",fields:["seq","name","datatype","datasize","alias","decimaldigits","iskey","nodepath","tablename","type"]},columns:[{text:"No",dataIndex:"seq",width:40},{text:"Key",dataIndex:"iskey",width:40},{text:"Name",dataIndex:"name",minWidth:120,flex:1},{text:"DataType",dataIndex:"datatype",width:80},{text:"Size",width:60,dataIndex:"datasize"}]},{xtype:"textarea",fieldLabel:"Field Template",name:"_mt",height:100}]}]}]});IG$.Idm.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._b1.call(a);a._l3.call(a)}}});IG$._Icb=$s.extend($s.window,{modal:true,layout:"fit",closable:false,resizable:false,width:500,autoHeight:true,bodyPadding:10,bodyStyle:{background:"#ffffff"},callback:null,sel:null,_IG0:function(){this.close()},mm1:function(){if(this.callback){var c=this.down("[name=gridduty_sel]"),a,b=[];for(a=0;a<c.store.data.length;a++){b.push(c.store.data.items[a])}this.callback.execute(b)}this.close()},mm2:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/Auth"},"address"),mbody:IG$._I2e({option:"select"})},a,a.rs_mm2,false);b._l()},rs_mm2:function(g){var e,b=IG$._I18(g,"/smsg/item"),f,l=[],c=[],d,j,h=this.down("[name=gridduty]"),k=this.down("[name=gridduty_sel]"),a={};if(this.sel){for(e=0;e<this.sel.length;e++){a[this.sel[e].sid]=this.sel[e]}}if(b){f=IG$._I26(b);for(e=0;e<f.length;e++){j=IG$._I1c(f[e]);if(a[j.sid]){c.push(j)}else{l.push(j)}}}h.store.loadData(l);k.store.loadData(c)},m1:function(a){var e=this,d,b=e.down("[name=gridduty"+(a==false?"_sel":"")+"]"),c=e.down("[name=gridduty"+(a==true?"_sel":"")+"]"),f=b.getSelectionModel().getSelection();if(f.length>0){for(d=0;d<f.length;d++){b.store.remove(f[d]);c.store.add(f[d])}}},initComponent:function(){this.title=IRm$.r1("L_MGR_UD");var a=[{xtype:"form",layout:"anchor",defaults:{anchor:"100%"},border:0,items:[{xtype:"displayfield",value:IRm$.r1("L_UD_DESC")},{xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"gridpanel",name:"gridduty",flex:1,height:300,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},multiSelect:true,store:{fields:["name","dutytype","sid","status","type"]},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,sortable:true,hideable:false},{header:IRm$.r1("B_TYPE"),dataIndex:"type",flex:1,sortable:true,hideable:false}]},{xtype:"container",bodyPadding:"0 4 0 4",border:0,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:">>",handler:function(){this.m1(true)},scope:this},{xtype:"button",text:"<<",handler:function(){this.m1(false)},scope:this},{xtype:"container",flex:1}]},{xtype:"gridpanel",name:"gridduty_sel",flex:1,height:300,selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},multiSelect:true,store:{fields:["name","dutytype","sid","status","type"]},columns:[{header:IRm$.r1("B_NAME"),dataIndex:"name",flex:1,sortable:true,hideable:false},{header:IRm$.r1("B_TYPE"),dataIndex:"type",flex:1,sortable:true,hideable:false}]}]}]}];var b=[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.mm1()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}];$s.apply(this,{items:a,buttons:b});IG$._Icb.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){this.mm2()}}});IG$._Icc=$s.extend($s.window,{title:"Group Privilege Setting",modal:true,layout:"fit",closable:false,resizable:false,width:400,autoHeight:true,plain:true,bodyPadding:10,bodyStyle:{background:"#ffffff"},callback:null,_IG0:function(){this.close()},mm1:function(){this.close()},mm2_:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:28,payload:{address:"/usergroup",gid:b,action:"privilege"},mbody:{option:"standard"}},a,a.rs_mm2_,false);c._l()},rs_mm2_:function(a){},mm2:function(b){var a=this,e=new IG$._I3e(),c=this.groupname,d=this.gid;e.init(a,{ack:28,payload:{address:"/usergroup",action:b},mbody:{gid:d}},a,a.rs_mm2,false,[b]);e._l()},rs_mm2:function(a,f){var e=this,c=f[0],d=e.ugroup,b=e.down("[name=btn_erase]");switch(c){case"activate":d.set("status","Active");d.set("active","1");b.setVisible(false);break;case"delete":d.set("status","Blocked");d.set("active","0");b.setVisible(true);break;case"erase":d.remove();e.close();break}},initComponent:function(){$s.apply(this,{items:[{xtype:"form",layout:"anchor",defaults:{anchor:"100%"},border:0,items:[{xtype:"displayfield",value:"Check to allow each priviege."},{xtype:"textfield",readOnly:true,fieldLabel:"Group name",name:"groupname"},{xtype:"fieldset",title:"Options",collapsible:false,autoHeight:true,defaults:{labelWidth:80,anchor:"100%",layout:{type:"hbox",defaultMargins:{top:0,right:5,bottom:0,left:0}}},items:[{xtype:"checkbox",boxLabel:"Save data to file"},{xtype:"checkbox",boxLabel:"Add/edit user defined group"},{xtype:"checkbox",boxLabel:"Show chart"},{xtype:"checkbox",boxLabel:"Use dashboard"}]},{xtype:"fieldset",title:"Enable/Disable",name:"p_activate",hidden:false,layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",iconCls:"icon-toolbar-activate",flex:1,text:"Activate",handler:function(){this.mm2("activate")},scope:this},{xtype:"container",width:10},{xtype:"button",iconCls:"icon-toolbar-deprivation",flex:1,text:"Deprivate",handler:function(){this.mm2("delete")},scope:this}]}]}],buttons:[{text:"Erase Group",name:"btn_erase",hidden:this.ugroup.get("active")=="1"?true:false,handler:function(){this.mm2("erase")},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){this.mm1()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(b){if(this.gid){this.mm2_(this.gid);var a=this.down("[name=groupname]");a.setValue(this.groupname||"")}}}});IG$._Icc.superclass.initComponent.apply(this,arguments)}});IG$._IcT=$s.extend($s.window,{title:"Tenant Setting",modal:true,layout:"fit",closable:false,resizable:false,width:400,autoHeight:true,plain:true,bodyPadding:10,bodyStyle:{background:"#ffffff"},callback:null,_IG0:function(){this.close()},mm1:function(){this.close()},mm2:function(b){var a=this,f=new IG$._I3e(),e,c=this.down("[name=tenantname]"),d=a.gid,g=a.mts;e="<smsg><tenant mts='"+g.get("uid")+"'"+(b=="rename"&&c.getValue()?" name='"+c.getValue()+"'":"")+" a1='"+this.down("[name=a1]").getValue()+"' a2='"+this.down("[name=a2]").getValue()+"'/></smsg>";f.init(a,{ack:"28",payload:IG$._I2d({address:"/tenants/"+g.get("name"),action:b},"address;action"),mbody:e},a,function(h,j){if(b=="rename"){g.set("a1",this.down("[name=a1]").getValue());g.set("a2",this.down("[name=a2]").getValue());g.set("name",c.getValue())}a.rs_mm2(h,j)},false,[b]);f._l()},rs_mm2:function(a,f){var e=this,c=f[0],d=e.mts,b=e.down("[name=btn_erase]");switch(c){case"activate":d.set("pstatname","Active");d.set("pstatus","1");b.setVisible(false);break;case"delete":d.set("pstatname","Blocked");d.set("pstatus","0");b.setVisible(true);break;case"erase":d.remove();e.close();break;case"rename":e.close();break}},_l1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"11",payload:IG$._I2d({}),mbody:IG$._I2e({option:"timezone"})},a,function(k){var m=this,g,l,j,c=[],h=[],f,e=m.down("[name=a1]"),d=m.down("[name=a2]");g=IG$._I18(k,"/smsg/app_tmpl");c.push({name:"Select",value:""});if(g){l=IG$._I26(g);for(j=0;j<l.length;j++){f=IG$._I1c(l[j]);f.value=f.name;c.push(f)}}e.store.loadData(c);e.setValue(m.mts?m.mts.get("a1")||"":"");g=IG$._I18(k,"/smsg/themes");h.push({name:"Select",value:""});if(g){l=IG$._I26(g);for(j=0;j<l.length;j++){f=IG$._I1c(l[j]);f.value=f.name;h.push(f)}}d.store.loadData(h);d.setValue(m.mts?m.mts.get("a2")||"":"")});b._l()},initComponent:function(){$s.apply(this,{items:[{xtype:"form",layout:"anchor",defaults:{anchor:"100%"},border:0,items:[{xtype:"textfield",readOnly:this.mts&&this.mts.get("pstatus")=="A",fieldLabel:"Tenant name",name:"tenantname"},{xtype:"combobox",fieldLabel:"Templates",name:"a1",editable:false,queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"combobox",fieldLabel:"Themes",name:"a2",editable:false,queryMode:"local",valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"fieldset",title:"Enable/Disable",name:"p_activate",hidden:this.mts&&this.mts.get("pstatus")=="A",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",iconCls:"icon-toolbar-activate",flex:1,text:"Activate",handler:function(){this.mm2("activate")},scope:this},{xtype:"container",width:10},{xtype:"button",iconCls:"icon-toolbar-deprivation",flex:1,text:"Deprivate",handler:function(){this.mm2("delete")},scope:this}]},{xtype:"textfield",name:"turl",fieldLabel:"URL",readOnly:true}]}],buttons:[{text:"Erase Tenant",name:"btn_erase",hidden:this.mts.get("pstatus")=="1"||this.mts.get("pstatus")=="A"?true:false,handler:function(){this.mm2("erase")},scope:this},"->",{text:IRm$.r1("B_CONFIRM"),handler:function(){var a=this.down("[name=tenantname]");this.mm2("rename")},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(e){var c=this;if(c.mts){var b=c.down("[name=tenantname]"),d=c.down("[name=turl]"),a=c.mts.get("name");a=a.split(" ");a=a.join("%20");b.setValue(c.mts.get("name")||"");d.setValue("http://hostname.com/ingecep/?lang=en_US&mts="+a);c._l1()}}}});IG$._IcT.superclass.initComponent.apply(this,arguments)}});IG$._Ica=$s.extend($s.window,{modal:true,layout:"fit",closable:false,resizable:false,width:480,autoHeight:true,plain:true,bodyPadding:10,bodyStyle:{background:"#ffffff"},callback:null,i$:function(){var a=this,b=a.down("[name=pusergroup]");b.store.loadData(this.groupinfo);a.u1();a.ld5();a._l1()},u1:function(){var e=this,d=e.down("[name=c_area]"),b=IG$.uform,a,f,c;for(a=0;a<b.length;a++){f=b[a];c={xtype:f.type,fieldLabel:f.displayname,name:f.fieldname};d.add(c)}},ld5:function(){var e=this,r=e.userinfo,h=IG$._I83.jS1,d=e.down("[name=puserid]"),s=e.down("[name=pusername]"),j=e.down("[name=puseremail]"),n=e.down("[name=puserpasswd]"),o=e.down("[name=pusergroup]"),a=e.down("[name=pupdatedate]"),f=IRm$.r1("L_LAST_UPD"),t=e.down("[name=pdutygrid]"),g=(r&&r.auth)?r.auth:[],c=e.down("[name=btnaddduty]"),k=e.down("[name=fieldstatus]"),m,q,b;c.setVisible((r&&h.userid==r.id)?false:true);d.setReadOnly((r)?true:false);d.setValue(r?r.id||"":"");s.setValue(r?r.name||"":"");n.setValue(r?"":IG$._I45(10));j.setValue(r?r.email||"":"");o.setValue(r?r.gid||"":(e.Ld3||""));k.setVisible(r?true:false);f=(r&&r.updatedate)?f+r.updatedatefm:f;a.setValue(f);t.store.loadData(g);if(IG$.uform){for(m=0;m<IG$.uform.length;m++){b=IG$.uform[m];q=e.down("[name="+b.fieldname+"]");if(q){q.setValue(r?r[b.fieldname]:"")}}}},ld6:function(t){var z=this,j,c,s,h=false,k=this,r=IG$._I83.jS1,v,w=k.down("[name=puserid]"),b=k.down("[name=pusername]"),n=k.down("[name=puseremail]"),f=k.down("[name=puserpasswd]"),e=k.down("[name=pusergroup]"),q=k.down("[name=pdutygrid]"),u,x,o,d=f.getValue(),y=false,m;if(t=="confirm"){if(!IG$._I3a){var g=this,a=new IG$._I3e();a.init(g,{ack:"23",payload:"<smsg></smsg>",mbody:"<smsg></smsg>"},g,function(l){var C=IG$._I18(l,"/smsg/item"),B=(C?IG$._I1a(C,"p1"):null),A=(C?IG$._I1a(C,"p2"):null);if(B&&A){IG$._I3a=B;IG$._I3b=A;this.ld6("confirm")}},null);a._l();return}j="28";c=IG$._I2d({address:"/user/"+w.getValue(),updatemode:"change"},"address;updatemode");s="<smsg><user";$.each([w,b,e],function(A,l){l.clearInvalid();if(!l.getValue()){l.markInvalid("Required");y=true}});if(y){return}if(d){d=IG$._I3c([d])[0]}s+=IG$._I20({sid:(this.userinfo?this.userinfo.sid:""),wid:(this.userinfo?this.userinfo.wid:""),id:w.getValue(),name:b.getValue(),password:d,email:n.getValue(),gid:e.getValue(),a1:this.down("[name=a1]").getValue()},"sid;wid;id;name;password;email;gid;a1","s")+"";if(IG$.uform){for(u=0;u<IG$.uform.length;u++){m=IG$.uform[u];x=m.fieldname;o=z.down("[name="+x+"]");if(o){if(m.optional=="F"){o.clearInvalid();if(!o.getValue()){o.markInvalid("Required");return}}s+=" "+x+"='"+o.getValue()+"'"}}}s+=">";for(u=0;u<q.store.data.items.length;u++){v=q.store.data.items[u];s+="<auth"+IG$._I20({dutytype:v.get("dutytype"),name:v.get("name"),sid:v.get("sid"),status:v.get("status")},"dutytype;name;sid;status")+"/>"}s+="</user></smsg>"}else{if(t=="delete"){if(w.getValue()==r.userid){IG$._I52("You cannot remove yourself.",k);return}j="28";c=IG$._I2d({address:"/user/"+w.getValue(),updatemode:"delete"},"address;updatemode");s="<smsg><user sid='"+(this.userinfo?this.userinfo.sid:"")+"'";s+=">";s+="</user></smsg>"}else{return}}var g=this,a=new IG$._I3e();g.setLoading(true);a.init(g,{ack:j,payload:c,mbody:s},g,g.rs_ld6,null);a._l()},rs_ld6:function(a){var b=this;b.setLoading(false);if(b.callback){b.callback.execute()}IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success");b.close()},mm2b:function(c,b){var a=this,e=new IG$._I3e(),d;if(b!="activate"&&(c.name=="admin")){IG$._I54(ig$.appname,IRm$.r1("M_NA"),null,null,0,"error");return}d=IG$._I2e({option:"changestatus",status:b,uid:c.sid},"option;status;uid");e.init(a,{ack:"28",payload:IG$._I2d({address:"/user/"+c.name},"address;action"),mbody:d},a,a.rs_mm2b,false,b);e._l()},rs_mm2b:function(a,b){if(this.drow){this.drow.set("status",(b=="1"?"Active":"Blocked"))}IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},_t$:function(e){var a=this,b,g;switch(e){case"cmd_activate_user":b=this.userinfo;if(b){this.mm2b(b,"1")}break;case"cmd_deprivate_user":b=this.userinfo;if(b){this.mm2b(b,"2")}break;case"cmd_add_duty":var h=[],f,d=this.down("[name=pdutygrid]").store.data.items,c;for(c=0;c<d.length;c++){f=d[c];h.push({dutytype:f.get("dutytype"),name:f.get("name"),sid:f.get("sid"),type:f.get("type"),status:f.get("status")})}g=new IG$._Icb({sel:h,callback:new IG$._I3d(a,a.rs_mm3)});g.show(a);break}},rs_mm3:function(c){var b=this.down("[name=pdutygrid]"),e=[],d,a;for(a=0;a<c.length;a++){d=c[a];e.push({dutytype:d.get("dutytype"),name:d.get("name"),sid:d.get("sid"),type:d.get("type"),status:d.get("status")})}b.store.loadData(e)},_l1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"11",payload:IG$._I2d({}),mbody:IG$._I2e({option:"timezone"})},a,function(c){var f=this,k,j,e,g=[],h,d=f.down("[name=a1]");k=IG$._I18(c,"/smsg/app_tmpl");j=IG$._I26(k);g.push({name:"Select",value:""});for(e=0;e<j.length;e++){h=IG$._I1c(j[e]);h.value=h.name;g.push(h)}d.store.loadData(g);d.setValue(f.userinfo?f.userinfo.a1||"":"")});b._l()},initComponent:function(){this.title=IRm$.r1("T_REG_USER");$s.apply(this,{items:[{xtype:"panel",layout:"anchor",bodyPadding:4,autoScroll:false,defaults:{anchor:"100%"},items:[{xtype:"textfield",fieldLabel:IRm$.r1("L_USERID"),name:"puserid"},{xtype:"textfield",fieldLabel:IRm$.r1("L_USERNAME"),name:"pusername"},{xtype:"textfield",fieldLabel:IRm$.r1("L_EMAIL"),name:"puseremail"},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_INPUT_PASSWORD"),layout:"hbox",items:[{xtype:"textfield",name:"puserpasswd",readOnly:false,flex:1},{xtype:"button",name:"pgetpwd",text:"Generate",width:70,handler:function(){var c=this,b=c.down("[name=puserpasswd]"),a=IG$._I45(10);b.setValue(a)},scope:this}]},{xtype:"combobox",fieldLabel:IRm$.r1("L_GROUP_NAME"),labelField:"name",valueField:"gid",name:"pusergroup",queryMode:"local",displayField:"name",valueField:"gid",editable:false,autoSelect:true,store:{fields:["name","gid"]}},{xtype:"container",name:"c_area",layout:{type:"vbox",align:"stretch"}},{xtype:"combobox",name:"a1",fieldLabel:IRm$.r1("L_APPL_TMPL"),queryMode:"local",editable:false,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"displayfield",value:IRm$.r1("L_LAST_UPD"),name:"pupdatedate"},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("L_USER_DUTY"),layout:"hbox",items:[{xtype:"gridpanel",fieldLabel:"User Duty",flex:1,height:160,hideLabel:true,name:"pdutygrid",store:{xtype:"store",fields:["dutytype","name","sid","status"]},columns:[{header:IRm$.r1("B_NAME"),flex:1,sortable:false,hideable:false,dataIndex:"name"}]},{xtype:"button",iconCls:"icon-toolbar-add",tooltip:"Add Duty",name:"btnaddduty",hidden:true,handler:function(){this._t$("cmd_add_duty")},scope:this}]},{xtype:"fieldcontainer",fieldLabel:IRm$.r1("B_STATUS"),name:"fieldstatus",hidden:true,layout:"hbox",items:[{xtype:"button",text:IRm$.r1("L_ACTIVATE"),name:"btnactuser",handler:function(){this._t$("cmd_activate_user")},scope:this},{xtype:"button",text:IRm$.r1("L_DEPRIVATE"),name:"btndeprivuser",handler:function(){this._t$("cmd_deprivate_user")},scope:this}]}]}],buttons:[{xtype:"button",text:IRm$.r1("L_E_DEL"),handler:function(){this.ld6("delete")},scope:this},"->",{xtype:"button",text:IRm$.r1("B_CONFIRM"),handler:function(){this.ld6("confirm")},scope:this},{xtype:"button",text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(a){this.i$()}}});IG$._Ica.superclass.initComponent.call(this)}});IG$._I76=$s.extend(IG$._I57,{scroll:false,closable:true,layout:"border",userinfo:null,groupinfo:null,iconCls:"icon-group",Ld3:null,_IFd:function(){this.ld1()},ld1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/userform"}),mbody:IG$._I2e({option:"standard"})},a,function(c){var f=this,j=IG$._I18(c,"/smsg/item"),h=(j?IG$._I26(j):null),g=IG$._I83.jS1,e,d=[],k;if(h){for(e=0;e<h.length;e++){k=IG$._I1c(h[e]);if(k.type=="textinput"){k.type="textfield"}d.push(k)}}IG$.uform=d;if(g.jS1("admins","A")==true){f.down("[name=mtsgrd]").show()}f.ldM();f.ldG();f.ld2("",null)},false);b._l()},ldM:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/tenants",action:"get"},"address;action"),mbody:IG$._I2e({option:"select"})},a,function(d){var f,g=IG$._I18(d,"/smsg/item"),e,h,c=[];if(g){e=IG$._I26(g);for(f=0;f<e.length;f++){h=IG$._I1c(e[f]);switch(h.pstatus){case"A":h.pstatname="App";break;case"1":h.pstatname="Active";break;default:h.pstatname="Disabled";break}c.push(h)}}this.down("[name=mtsgrd]").store.loadData(c)},false);b._l()},ldG:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"28",payload:IG$._I2d({address:"/Auth"},"address"),mbody:IG$._I2e({option:"select"})},a,function(d){var h,j=IG$._I18(d,"/smsg/item"),g,k=[],f,e=this.down("[name=gridduty]"),c=e.getSelectionModel();if(j){g=IG$._I26(j);for(h=0;h<g.length;h++){f=IG$._I1c(g[h]);f.active=f.status=="1"?"Active":"Disabled";k.push(f)}}e.store.loadData(k)},false);b._l()},mm3:function(){var a=this,b=new IG$._I6e({itemtype:"Auth",callback:new IG$._I3d(a,a.rs_mm3)});b.show(a)},rs_mm3:function(a){this.ldG()},mm4:function(){var a=this,b=new IG$._I6e({itemtype:"tenant",callback:new IG$._I3d(a,function(c){this.ldM()})});b.show(a)},l1G:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"28",payload:IG$._I2d({address:"/user"},"address"),mbody:IG$._I2e({option:"get",sid:b})},a,a.rs_ld3,null,true);c._l()},ld2:function(b,c){var a=this,d=new IG$._I3e(),e=IG$._I83.jS1;if(e.jS1("admins","A")==false&&e.jS1("LocalAdmin","A")==true){b=auth.gid}this.groupinfo=[];d.init(a,{ack:"28",payload:IG$._I2d({address:"/usergroup",action:"get",pid:b},"address;action;pid"),mbody:IG$._I2e({option:"standard"})},a,a.rs_ld2,null,[b,c]);d._l()},rs_ld2:function(k,d){var a=this,h=d[0],b=d[1],c=IG$._I18(k,"/smsg/item"),f,j=this.down("[name=grouptree]"),g,m,l,e;if(c){m=IG$._I1c(c);this.groupinfo.push(IG$._I1c(c));m.children=[];g=IG$._I26(c);this.ld2a(g,m,1);if(b==null){j.store.setRootNode(m)}}},ld2a:function(d,h,f){var c,b,e,g,a;for(c=0;c<d.length;c++){b=IG$._I1c(d[c]);b.loadData=false;e=IG$._I1c(d[c]);for(a=0;a<f;a++){e.name=(a==0?". ":"  ")+e.name}this.groupinfo.push(e);h.children.push(b);switch(b.active){case"1":b.status="Active";break;case"2":b.status="Blocked";break;default:b.status="Error";break}g=IG$._I26(d[c]);if(g&&g.length>0){b.children=[];this.ld2a(g,b,f+1)}}},ld3:function(b){var a=this,c=new IG$._I3e();c.init(a,{ack:"28",payload:IG$._I2d({address:"/user"},"address"),mbody:IG$._I2e({option:"get",gid:b})},a,a.rs_ld3,null);c._l()},rs_ld3:function(b,c){var g=IG$._I18(b,"/smsg/item"),f,e,d,h=[],a=this.down("[name=usergrid]");if(g){e=IG$._I26(g);for(f=0;f<e.length;f++){d=IG$._I1c(e[f]);switch(d.active){case"1":d.status="Active";d.change="Block user";break;case"3":d.status="Email Valid";d.change="Activate user";break;case"4":d.status="Email Process";d.change="Deprivate";break;default:d.status="Blocked";d.change="Activate";break}h.push(d)}}a.store.loadData(h)},ld4:function(c,b){var a=this,d=new IG$._I3e();d.init(a,{ack:"28",payload:IG$._I2d({address:"/user"},"address"),mbody:IG$._I2e({option:"detail",uid:c})},a,function(j,h){var e=this,f=IG$._I18(j,"/smsg/item");if(f){var k=IG$._I1c(f),m=IG$._I18(f,"d"),n=IG$._I26(m),g;k.auth=[];for(g=0;g<n.length;g++){k.auth.push(IG$._I1c(n[g]))}var l=new IG$._Ica({groupinfo:this.groupinfo,userinfo:k,drow:h,Ld3:this.Ld3,callback:new IG$._I3d(e,e.rs_um3)});IG$._I_5(this,l)}},null,b);d._l()},sKK:function(){var b=this.down("[name=grouptree]"),a=b.getSelectionModel();if(a&&a.selected&&a.selected.items&&a.selected.items.length>0){return a.selected.items[0]}return null},_t$:function(f){var a=this,d,b,g;switch(f){case"cmd_add_group":d=a.sKK();if(d){g=new IG$._I6e({itemtype:"Group",parentuid:d.get("gid"),parentnodepath:"",callback:new IG$._I3d(a,a.rs_mm1,d)});g.show(a)}break;case"cmd_edit_group":d=a.sKK();if(d){if(!d.isRoot()){g=new IG$._Icd({uid:d.get("gid"),itemname:d.get("name"),itemtype:"Group",groupid:d.get("groupid"),callback:new IG$._I3d(a,a.rs_mm1,d)});g.show(a)}else{IG$._I52(IRm$.r1("M_NOT_EDITABLE"),this)}}else{IG$._I52(IRm$.r1("M_SEL_ITEM"),this)}break;case"cmd_priv_group":d=a.sKK();if(d){if(!d.isRoot()){g=new IG$._Icc({gid:d.get("gid"),groupname:d.get("name"),ugroup:d});g.show(a)}else{IG$._I52(IRm$.r1("M_NOT_EDITABLE"),this)}}else{IG$._I52(IRm$.r1("M_SEL_ITEM"),this)}break;case"cmd_add_user":d=a.sKK();g=new IG$._Ica({groupinfo:a.groupinfo,userinfo:null,Ld3:a.Ld3,callback:new IG$._I3d(a,a.rs_um3)});IG$._I_5(a,g);break;case"cmd_sync_user":IG$._I65("CMD_SYNC_USER");break;case"cmd_new_duty":this.mm3();break;case"cmd_add_mts":this.mm4();break;case"cmd_edit_mts":var c=this.down("[name=mtsgrd]"),e=c.getSelectionModel().selected;if(e&&e.length>0){g=new IG$._IcT({mts:e.items[0],callback:new IG$._I3d(a,function(){this.ldM()})});IG$._I_5(this,g)}else{IG$._I52(IRm$.r1("M_SEL_ITEM"),this)}break}},rs_um3:function(){var a=this;a.Ld3&&a.ld3(a.Ld3)},rs_mm1:function(a,b){this.ld2("",null)},initComponent:function(){$s.apply(this,{items:[{xtype:"panel",border:0,layout:"accordion",region:"west",split:true,width:240,collapsible:false,hideHeaders:true,items:[{xtype:"treepanel",border:0,name:"grouptree",layout:"fit",title:IRm$.r1("T_USER_GROUP"),rootVisible:true,store:{xtype:"store",fields:["name","active","description","gid","updatedate","loadData","status","groupid"],data:[]},columns:[{xtype:"treecolumn",text:IRm$.r1("B_NAME"),flex:1,sortable:false,dataIndex:"name"},{text:"GroupID",width:60,sortable:false,dataIndex:"groupid"},{text:IRm$.r1("B_STATUS"),width:60,sortable:false,dataIndex:"status"}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{iconCls:"icon-toolbar-add",text:IRm$.r1("L_ADD_GROUP"),tooltip:"Add",handler:function(){this._t$("cmd_add_group")},scope:this},{iconCls:"icon-toolbar-edit",tooltip:IRm$.r1("L_EDIT"),handler:function(){this._t$("cmd_edit_group")},scope:this},{iconCls:"icon-toolbar-grouppriv",tooltip:IRm$.r1("L_PRIVILEGE"),handler:function(){this._t$("cmd_priv_group")},scope:this}]}],listeners:{itemclick:function(b,a,g,c,h,d){var f=a.get("gid");this.Ld3=f;this.ld3(f)},beforeitemexpand:function(b,a){if(b.hasChildNodes()==false&&b.get("loadData")==false){}},scope:this}},{xtype:"gridpanel",title:IRm$.r1("T_DUTY_LIST"),name:"gridduty",hideHeaders:true,layout:"fit",border:0,store:{xtype:"store",fields:["sid","name","dutytype","status","type","active"]},tbar:[{iconCls:"icon-toolbar-add",text:IRm$.r1("L_ADD_DUTY"),tooltip:"Add duty",handler:function(){this._t$("cmd_new_duty")},scope:this},{iconCls:"icon-toolbar-remove",tooltip:"Remove",name:"btn_r_duty",hidden:true,handler:function(){this._t$("cmd_remove_duty")},scope:this},{xtype:"button",text:IRm$.r1("B_SHOW_ALL"),menu:{xtype:"menu",items:[{text:IRm$.r1("B_SHOW_ALL"),handler:function(){var a=this.down("[name=gridduty]");a.store.clearFilter()},scope:this},{text:"Pre defined",handler:function(){var a=this.down("[name=gridduty]");a.store.filter("dutytype","A")},scope:this},{text:"Custom duty",handler:function(){var a=this.down("[name=gridduty]");a.store.filter("dutytype","C")},scope:this},{text:"Group duty",handler:function(){var a=this.down("[name=gridduty]");a.store.filter("dutytype","G")},scope:this},{text:"User duty",handler:function(){var a=this.down("[name=gridduty]");a.store.filter("dutytype","U")},scope:this}]}}],columns:[{xtype:"gridcolumn",text:"Duty name",dataIndex:"name",flex:1},{xtype:"gridcolumn",text:IRm$.r1("B_STATUS"),dataIndex:"active",width:50}],listeners:{cellclick:function(a,b,l,d,k,m,f,g){if(d.get("sid")){var c=d.get("dutytype"),j=d.get("type"),h=this.down("[name=btn_r_duty]");h.setVisible(false);if(j!="PreDefined"){h.setVisible(true)}this.l1G(d.get("sid"))}},scope:this}},{xtype:"gridpanel",border:0,title:IRm$.r1("T_M_TENANT"),name:"mtsgrd",hidden:true,hideHeaders:true,store:{xtype:"store",fields:["name","pstatus","uid","pstatname","a1","a2"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",flex:1},{text:IRm$.r1("B_STATUS"),width:60,dataIndex:"pstatname"}],dockedItems:[{xtype:"toolbar",dock:"top",items:[{iconCls:"icon-toolbar-add",text:IRm$.r1("L_ADD_TENANT"),tooltip:"Add",handler:function(){this._t$("cmd_add_mts")},scope:this},{iconCls:"icon-toolbar-edit",tooltip:IRm$.r1("L_EDIT"),handler:function(){this._t$("cmd_edit_mts")},scope:this}]}]}]},{xtype:"panel",region:"center",layout:"fit",bodyPadding:2,items:[{xtype:"panel",flex:1,border:false,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",title:"Users",name:"usergrid",border:0,flex:1,store:{xtype:"store",fields:["name","active","gid","groupname","id","sid","updatedate","status","email"]},columns:[{text:"ID",flex:1,sortable:true,hideable:false,dataIndex:"id"},{text:IRm$.r1("B_NAME"),flex:1,sortable:true,hideable:false,dataIndex:"name"},{text:IRm$.r1("L_GROUP_NAME"),flex:1,sortable:true,hideable:false,dataIndex:"groupname"},{text:"Email",flex:1,sortable:true,hideable:false,dataIndex:"email"},{text:IRm$.r1("B_STATUS"),flex:1,sortable:true,hideable:false,dataIndex:"status"}],listeners:{itemclick:function(c,b,g,d,h,f){var a=b.get("sid");this.ld4(a,b)},scope:this},tbar:[{text:IRm$.r1("L_ADD_USER"),iconCls:"icon-toolbar-add",handler:function(){this._t$("cmd_add_user")},scope:this},{xtype:"button",name:"t_1",text:IRm$.r1("B_SHOW_ALL"),menu:{xtype:"menu",items:[{text:IRm$.r1("B_SHOW_ALL"),handler:function(){var b=this,a=b.down("[name=usergrid]");a.store.clearFilter();b.down("[name=t_1]").setText(IRm$.r1("B_SHOW_ALL"))},scope:this},{text:IRm$.r1("L_A_USR"),handler:function(){var b=this,a=b.down("[name=usergrid]");a.store.filter("active","1");b.down("[name=t_1]").setText(IRm$.r1("L_A_USR"))},scope:this},{text:IRm$.r1("L_B_USR"),handler:function(){var b=this,a=b.down("[name=usergrid]");a.store.filterBy(function(c,d){if(c.get("active")!="1"){return true}return false},this);b.down("[name=t_1]").setText(IRm$.r1("L_B_USR"))},scope:this}]}},"->",{xtype:"button",text:"SyncUser",handler:function(){this._t$("cmd_sync_user")},scope:this}]}]}]}],listeners:{afterrender:function(){this._IFd()},scope:this}});IG$._I76.superclass.initComponent.call(this)}});IG$._I76n=$s.extend(IG$._I57,{layout:"fit",iconCls:"icon-group",closable:true,_t$:function(d){var c=this,a=null,b;switch(d){case"cmd_save":IG$._I55(ig$.appname,IRm$.r1("W_SYNC_SAVE"),function(e){if(e=="yes"){c._3.call(c)}},c,c);break;case"cmd_s_group":IG$._I55(ig$.appname,IRm$.r1("W_SYNC_GRP"),function(e){if(e=="yes"){c._3.call(c,"group")}},c,c);break;case"cmd_s_user":IG$._I55(ig$.appname,IRm$.r1("W_SYNC_USER"),function(e){if(e=="yes"){c._3.call(c,"user")}},c,c);break}},_a:function(){var b=this,a=new IG$._I3e();a.init(b,{ack:"25",payload:IG$._I2d({address:"/"}),mbody:IG$._I2e({option:"standard"})},b,function(c){var f=this,k=[],d,e=IG$._I18(c,"/smsg/item"),j,h,g=false;k.push({name:"Select Database Instance",poolname:""});if(e){j=IG$._I26(e);g=IG$._I83.jS2;for(d=0;d<j.length;d++){h=IG$._I1c(j[d]);if(g==true||(g==false&&h.name.toUpperCase()!="IGCBASE")){k.push({name:h.disp,poolname:h.name,uid:h.uid||"",isuserdb:(h.isuserdb=="T"?true:false),savepwd:(h.isuserdb=="T"&&h.savepwd=="F"?false:true)})}}}f.down("[name=dsource]").store.loadData(k);f._1()},false);a._l()},_1:function(){var c=this,a,d=this.down("[name=m_navi]"),b=new IG$._I3e();b.init(c,{ack:"5",payload:IG$._I2d({uid:"/SYS_Config/syncuser"}),mbody:IG$._I2e({option:""})},c,function(e){c._2(e)},function(e){c._2(null)});b.showerror=false;b._l()},_2:function(a){var c=this,d=a?IG$._I18(a,"/smsg/item"):null,b;c.mobj={grp:{},usr:{}};if(d){c.mobj=IG$._I1c(d);c.mobj.grp={};c.mobj.usr={};b=IG$._I18(d,"grp");if(b){c.mobj.dsource=IG$._I1b(b,"dsource");c.mobj.grp.eclear=IG$._I1b(b,"eclear")=="T";c.mobj.grp.ename=IG$._I1a(b,"ename");c.mobj.grp.esql=IG$._I1a(b,"esql")}b=IG$._I18(d,"usr");if(b){c.mobj.usr.eclear=IG$._I1b(b,"eclear")=="T";c.mobj.usr.ename=IG$._I1a(b,"ename");c.mobj.usr.esql=IG$._I1a(b,"esql")}c.down("[name=dsource]").setValue(c.mobj.dsource);c.down("[name=eclear_grp]").setValue(c.mobj.grp.eclear);c.down("[name=ename_grp]").setValue(c.mobj.grp.ename);c.down("[name=esql_grp]").setValue(c.mobj.grp.esql);c.down("[name=eclear_usr]").setValue(c.mobj.usr.eclear);c.down("[name=ename_usr]").setValue(c.mobj.usr.ename);c.down("[name=esql_usr]").setValue(c.mobj.usr.esql)}},_3:function(a){var d=this,b,c;if(d.mobj){d.mobj.dsource=d.down("[name=dsource]").getValue();d.mobj.grp.eclear=d.down("[name=eclear_grp]").getValue();d.mobj.grp.ename=d.down("[name=ename_grp]").getValue();d.mobj.grp.esql=d.down("[name=esql_grp]").getValue();d.mobj.usr.eclear=d.down("[name=eclear_usr]").getValue();d.mobj.usr.ename=d.down("[name=ename_usr]").getValue();d.mobj.usr.esql=d.down("[name=esql_usr]").getValue();b="<smsg><item uid='/SYS_Config/syncuser'><grp dsource='"+(d.mobj.dsource||"")+"' eclear='"+(d.mobj.grp.eclear?"T":"F")+"'><ename><![CDATA["+(d.mobj.grp.ename||"")+"]]></ename><esql><![CDATA["+(d.mobj.grp.esql||"")+"]]></esql></grp><usr eclear='"+(d.mobj.usr.eclear?"T":"F")+"'><ename><![CDATA["+(d.mobj.usr.ename||"")+"]]></ename><esql><![CDATA["+(d.mobj.usr.esql||"")+"]]></esql></usr></item></smsg>";c=new IG$._I3e();c.init(d,{ack:"31",payload:IG$._I2d({uid:"/SYS_Config/syncuser"}),mbody:b},d,function(e){if(!a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}else{var f=new IG$._I3e();f.init(d,{ack:"74",payload:IG$._I2d({uid:"/SYS_Config/syncuser",option:a},"uid;option"),mbody:IG$._I2e({})},d,function(g){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},false);f._l()}},false);c._l()}},initComponent:function(){var a=this;$s.apply(a,{title:IRm$.r1("T_SYNC_USER"),bodyPadding:0,items:[{xtype:"panel",border:0,bodyPadding:10,layout:{type:"vbox",align:"stretch"},tbar:[{iconCls:"icon-toolbar-save",name:"t_save",tooltip:IRm$.r1("L_SAVE"),handler:function(){this._t$("cmd_save")},scope:this}],items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:"Data Source",name:"dsource",fieldLabel:"Database Instances",valueField:"poolname",displayField:"name",queryMode:"local",editable:false,store:{fields:["name","poolname","uid","isuserdb","savepwd"]}}]},{xtype:"container",flex:2,layout:{type:"hbox",align:"stretch"},items:[{xtype:"fieldset",flex:1,title:"Group Syncronization",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"hbox",align:"stretch"},items:[{xtype:"container",flex:1},{xtype:"button",text:"Execute",handler:function(){this._t$("cmd_s_group")},scope:this}]},{xtype:"checkbox",name:"eclear_grp",boxLabel:"Clear Groups"},{xtype:"textarea",height:40,name:"ename_grp",fieldLabel:"Exclude names"}]},{xtype:"container",layout:"fit",height:30,items:[{xtype:"displayfield",fieldLabel:"Format",value:"SELECT dept_id, dept_name, parent_dept_id, description FROM DEPT"}]},{xtype:"textarea",flex:1,fieldLabel:"Group SQL",name:"esql_grp"}]},{xtype:"container",width:10},{xtype:"fieldset",flex:1,title:"User Syncronization",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",layout:"hbox",items:[{xtype:"container",flex:1},{xtype:"button",text:"Execute",handler:function(){this._t$("cmd_s_user")},scope:this}]},{xtype:"checkbox",name:"eclear_usr",boxLabel:"Clear Groups"},{xtype:"textarea",height:40,name:"ename_usr",fieldLabel:"Exclude names"}]},{xtype:"container",layout:"fit",height:30,items:[{xtype:"displayfield",fieldLabel:"Format",value:"SELECT userid, passwd, fullname, email, dept_id FROM USER"}]},{xtype:"textarea",flex:2,name:"esql_usr",fieldLabel:"Group SQL"}]}]},{xtype:"fieldset",flex:1,title:"Execution Logs",layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",flex:1,store:{fields:["d_seq"]},columns:[{dataIndex:"d_seq"}]}]}]}]});IG$._I76n.superclass.initComponent.call(this)},listeners:{afterrender:function(a){this._a()}}});IG$._I6f=$s.extend(IG$._I57,{scroll:false,closable:true,iconCls:"icon-helpmgr",layout:{type:"hbox",align:"stretch"},_t$:function(d){var c=this;switch(d){case"cmd_save":this.sk1();break;case"cmd_saveas":break;case"cmd_refresh":var b=c.down("[name=d_t]");b._II5.call(b);break;case"cmd_locale_enUS":this.u7l();this.u6m="en_US";this.u6l();break;case"cmd_locale_koKR":this.u7l();this.u6m="ko_KR";this.u6l();break;case"cmd_preview":if(this.u5m){var e=this.down("[name=helpdoc]"),a=new IG$._Id1({uid:this.u5m.i.uid,u6m:this.u6m,t:"",c:e.getValue()});IG$._I_5(this,a)}break}},sk1:function(){if(this.u5m){this.u7l();var e,f,d;f="<smsg><item uid='"+this.u5m.i.uid+"'>";for(e in this.u5m.c){d=this.u5m.c[e];f+='<HelpContent language="'+d.lang+'"><Title><![CDATA['+(d.t||"")+"]]></Title><Content><![CDATA["+(d.c||"")+"]]></Content></HelpContent>"}f+="</item></smsg>";var a=this,b=new IG$._I3e();b.init(a,{ack:"31",payload:IG$._I2d({uid:this.u5m.i.uid}),mbody:f},a,a.rs_fV6,null);b._l()}},rs_fV6:function(){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},u5m:null,u6m:"en_US",_IHc:function(f){var c=f.type.toLowerCase(),e=f.nodepath,b=f.uid,d,a=this;if(c=="help"){d=new IG$._I3e();d.init(a,{ack:"16",payload:IG$._I2d({uid:b}),mbody:IG$._I2e({option:"get"})},a,a.rs_u4x,null);d._l()}return true},rs_u4x:function(g){var h=this.down("[name=helpdoc]"),c,a,f,d,b,j,e=this.down("[name=helpitem]");this.u5m={i:{},c:{}};c=IG$._I18(g,"/smsg/item");IG$._I1f(this.u5m.i,c,"uid;name;nodepath;memo","s");e.setText(this.u5m.i.name+" ("+(this.u5m.i.memo||"")+")");a=IG$._I26(c);for(f=0;f<a.length;f++){b=IG$._I18(a[f],"Title");j=IG$._I18(a[f],"Content");d={lang:IG$._I1b(a[f],"language"),t:IG$._I24(b),c:IG$._I24(j)};this.u5m.c[d.lang]=d}if(!this.u5m.c.en_US){this.u5m.c.en_US={lang:"en_US",t:"",c:""}}if(!this.u5m.c.ko_KR){this.u5m.c.ko_KR={lang:"ko_KR",t:"",c:""}}this.u6l()},u6l:function(){if(this.u5m&&this.u6m){var a,b=this.u5m.c[this.u6m],c=this.down("[name=helpdoc]");c.setValue((b&&b.c?Base64.decode(b.c):""))}},u7l:function(){var b=this.down("[name=helpdoc]"),a=(this.u5m)?this.u5m.c[this.u6m]:null;if(a){a.c=Base64.encode(b.getValue())}},initComponent:function(){var a=new IG$._Ic5({width:180,rootuid:"/SYS_Documents",name:"d_t",documentviewer:true,root:{text:"Document",name:"Document",itemtype:"Workspace",type:"Workspace",nodepath:"/SYS_Documents",uid:"/SYS_Documents"},_IHb:this,_IHc:this._IHc});this.tbar=[{iconCls:"icon-toolbar-save",tooltip:IRm$.r1("L_SAVE_CONTENT"),handler:function(){this._t$("cmd_save")},scope:this},"-",{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this._t$("cmd_refresh")},scope:this},"-",{xtype:"splitbutton",text:IRm$.r1("L_SELECT_LOCALE"),menu:[{text:IRm$.r1("L_ENGLISH"),handler:function(){this._t$("cmd_locale_enUS")},scope:this},{text:IRm$.r1("L_KOREAN"),handler:function(){this._t$("cmd_locale_koKR")},scope:this}]},{text:IRm$.r1("L_PREVIEW"),tooltip:IRm$.r1("L_PREVIEW"),handler:function(){this._t$("cmd_preview")},scope:this},"->",{text:"",name:"helpitem"}];this.items=[a,{xtype:"panel",layout:"fit",flex:2,items:[{xtype:"htmleditor",name:"helpdoc"}]}];IG$._I6f.superclass.initComponent.call(this)}});IG$.mA$_s=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:320,autoHeight:true,parentnodepath:null,callback:null,fV9:function(){var b=this,d,c=b.m_theme,e=b.down("[name=fitemname]"),a=e.getValue(),g=b.down("[name=basetypeselect]"),f=g.getValue();e.clearInvalid();g.clearInvalid();if(!a){e.setInvalid("Required Field");return}if(!c&&!f){return}if(c&&b.themes[a]){e.setInvalid("Duplicated");return}else{if(!c){for(d=0;d<b.styleinfo.length;d++){if(b.styleinfo[d].name==a){g.setInvalid("Duplicated");return false}}}}b.callback.execute([a,f]);b._IG0()},_IG0:function(){this.close()},_IFd:function(){var c=this,b,e=[],a=c.m_theme,d=c.down("[name=basetypeselect]");if(!a){for(b=0;b<c.styleinfo.length;b++){if(c.styleinfo[b].custom==false){e.push({name:c.styleinfo[b].name})}}d.store.loadData(e)}},initComponent:function(){this.title=IRm$.r1("L_MAKESTYLE");var a=this;$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{html:IRm$.r1("L_MAKESTYLE"),flex:1,border:0},{xtype:"panel",region:"center",flex:3,border:true,region:"center",height:120,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:IRm$.r1("L_STYLENAME"),labelWidth:130,name:"fitemname",value:"",allowBlank:false,blankText:"Style name is required!",enableKeyEvents:true,listeners:{keyup:function(b,c){if(c.keyCode==13){this.fV9.call(this)}},scope:this}},{xtype:"combobox",name:"basetypeselect",hidden:a.m_theme?true:false,fieldLabel:"Inherit Style from",labelWidth:130,store:{fields:[{name:"name"}]},displayField:"name",valueField:"name",editable:false,queryMode:"local",selectOnTab:false}],listeners:{afterrender:function(){this._IFd()},scope:this}}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.fV9()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$.mA$_s.superclass.initComponent.apply(this,arguments)}});IG$._I78=$s.extend(IG$._I57,{layout:"border",closable:true,iconCls:"icon-style",_ILa:null,callback:null,Mb_1:function(){var b=this,a=b.down("[name=p_h]").getLayout(),c=new IG$._I3e();a.setActiveItem(0);c.init(b,{ack:"1",payload:IG$._I2d({address:"ReportStyle"}),mbody:IG$._I2e()},b,b.rs_Mb_1,null);c._l()},rs_Mb_1:function(v){var A=this,n=IG$._I18(v,"/smsg/item/themes"),q,e,k,l,h=A.down("[name=c_themes]"),u=A.down("[name=stylelist]"),z,d,m,w,g,r,o,y,B,c=[],x,b=[],f={},s={},a={},C=[];A.themes={};if(n){w={name:"Default",leaf:false,expanded:true,children:[]};f[w.name]=w;b.push(w);w={name:"Custom",leaf:false,expanded:true,children:[]};f[w.name]=w;b.push(w);q=IG$._I26(n);for(k=0;k<q.length;k++){e=q[k];l=IG$._I1b(e,"name");B=IG$._I1b(e,"c_cset");x={name:l,c_cset:B,gs_enable:IG$._I1b(e,"gs_enable")=="T",gs_col:Number(IG$._I1b(e,"gs_col"))||0,gs_opa:IG$._I1b(e,"gs_opa")||0.6,styleinfo:[]};c.push({name:x.name,value:x.name});A.themes[x.name]=x;$.each([{name:"Default",custom:false},{name:"Custom",custom:true}],function(D,E){var I=IG$._I18(e,E.name),G,j,t,H,F,K,J;if(I){j=f[E.name];t=IG$._I26(I);for(G=0;G<t.length;G++){H=new IG$._IF7(t[G],E.name.toLowerCase(),E.custom);F={name:H.name,leaf:true,custom:E.custom};x.styleinfo.push(H);K=E.name.toLowerCase()+"_"+H.name;if(!s[K]){j.children.push(F);s[K]=F;if(E.custom&&!a[H.name]){a[H.name]=t[G];C.push({name:H.name,kname:E.name,custom:E.custom,node:t[G]})}}}}})}$.each(A.themes,function(t,I){var F,E,H,D,G=0,J;for(F=0;F<C.length;F++){H=C[F];G=0;for(E=0;E<I.styleinfo.length;E++){D=I.styleinfo[E];if(D.custom&&D.name==H.name){G=1;break}}if(G==0){J=new IG$._IF7(H.node,H.kname.toLowerCase(),H.custom);I.styleinfo.push(J)}}for(F=0;F<I.styleinfo.length;F++){H=I.styleinfo[F];if(H.custom==true&&H.basestylename){for(E=0;E<I.styleinfo.length;E++){if(I.styleinfo[E].name==H.basestylename){D=I.styleinfo[E];H._IFb.call(H,D);break}}}}})}u.store.setRootNode({expanded:true,text:"Style",name:"Style",children:b});h.store.loadData(c);h.setValue(c.length?c[0].value:null)},_m1:function(){var h=this,g=h.down("[name=c_themes]"),d=g.getValue(),j=h.themes,f=j[d],b,c=h.down("[name=c_cset]"),m=h.down("[name=gs_enable]"),a=h.down("[name=gs_col]"),l=h.down("[name=gs_opa]"),k=h.down("[name=p_h]"),e=h.down("[name=b_r]");if(h.__cth){h.__cth.c_cset=c.getValue();h.__cth.gs_enable=m.getValue();h.__cth.gs_col=IG$.$gc(a.getValue());h.__cth.gs_opa=l.getValue();h.Mb_4()}if(f){h.__cth=f;c.setValue(f.c_cset||"");m.setValue(f.gs_enable);a.setValue(IG$.$gv(f.gs_col));l.setValue(f.gs_opa);k.getLayout().setActiveItem(0);e.setVisible(false)}},Mb_3:function(e){var d=this,b=d.__cth,a,c=d.down("[name=form_header]"),f=d.down("[name=form_data]");if(b){d.Mb_4();for(a=0;a<b.styleinfo.length;a++){if(b.styleinfo[a].name==e){c.Mb_6.call(c,b.styleinfo[a].hs);f.Mb_6.call(f,b.styleinfo[a].ds);break}}}},Mb_4:function(){var c=this,a=c.__cth,b=c.down("[name=form_header]"),d=c.down("[name=form_data]");d.Mb_7.call(d);b.Mb_7.call(b)},_IG0:function(){this.callback&&this.callback.execute()},_IFf:function(){var b=this,e=b.down("[name=c_cset]"),a=b.down("[name=gs_enable]"),d=b.down("[name=gs_col]"),c=b.down("[name=gs_opa]");if(b.__cth){b.__cth.c_cset=e.getValue();b.__cth.gs_enable=a.getValue();b.__cth.gs_col=IG$.$gc(d.getValue());b.__cth.gs_opa=c.getValue()}b.Mb_4();b.Mb_5()},Mb_5:function(){var b=this,e=new IG$._I3e(),d=[],a=b.themes,c;d.push("<smsg><item nodepath='ReportStyle' name='ReportStyle' type='AppOption' uid='ReportStyle'><themes>");$.each(a,function(f,l){var h,j={},g;for(h=0;h<l.styleinfo.length;h++){j[l.styleinfo[h].name]=l.styleinfo[h]}d.push("<Styles name='"+l.name+"' c_cset='"+(l.c_cset||"")+"'");d.push(" gs_enable='"+(l.gs_enable?"T":"F")+"' gs_opa='"+(l.gs_opa||0.6)+"' gs_col='"+(l.gs_col||"")+"'>");d.push("<Default name='Default'>");for(h=0;h<l.styleinfo.length;h++){if(l.styleinfo[h].custom==false){d.push(l.styleinfo[h].tx.call(l.styleinfo[h]))}}d.push("</Default>");d.push("<Custom name='Custom'>");for(h=0;h<l.styleinfo.length;h++){if(l.styleinfo[h].custom==true){g=j[l.styleinfo[h].basestylename];d.push(l.styleinfo[h].tx.call(l.styleinfo[h],g))}}d.push("</Custom>");d.push("</Styles>")});d.push("</themes></item></smsg>");e.init(b,{ack:"1",payload:IG$._I2d({address:"ReportStyle",option:"updatecontent"},"address;option"),mbody:d.join("")},b,b.rs_Mb_5,null);e._l()},rs_Mb_5:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},c1:function(d,e){var b,c,a;for(b=0;b<d.styleinfo.length;b++){c=d.styleinfo[b];a=new IG$._IF7(null,c.itemtype,c.custom);a.name=c.name;a.nodename=c.nodename;a.basestylename=c.basestylename;a.hs=new IG$._IF8(null,"Header");a.ds=new IG$._IF8(null,"Data");a._IFb.call(a,c);e.styleinfo.push(a)}},_t$:function(f){var e=this,d,a=e.down("[name=stylelist]"),b=e.styleinfo,h;switch(f){case"cmd_refresh":e.Mb_1();break;case"cmd_add_custom":var g=new IG$.mA$_s({styleinfo:e.__cth.styleinfo,callback:new IG$._I3d(e,e.rs__sK3a)});IG$._I_5(e,g);break;case"cmd_add_theme":var g=new IG$.mA$_s({m_theme:1,themes:e.themes,callback:new IG$._I3d(e,function(o){var l=this,m=o[0],k=o[1],n,j=l.down("[name=c_themes]");if(m){n={name:m,c_cset:null,gs_enable:false,gs_col:0,gs_opa:0.6,styleinfo:[]};l.c1(l.__cth,n);l.themes[n.name]=n;j.store.add({name:m,value:m})}})});IG$._I_5(e,g);break;case"cmd_remove_theme":IG$._I55(null,null,function(l){if(l=="yes"){var k,j=e.down("[name=c_themes]"),n,m;if(e.__cth&&j.store.data.items.length>1){for(k=0;k<j.store.data.items.length;k++){n=j.store.data.items[k];if(n.get("name")==e.__cth.name){j.store.remove(n);break}}delete e.themes[e.__cth.name];e.__cth=null;j.setValue(j.store.data.items[0].get("value"))}}},e,e);break;case"cmd_remove":var c=e.down("[name=b_r]").setVisible(false);h=a.getSelectionModel().getSelection();h=h&&h.length>0?h[0]:null;if(h&&h.get("custom")==true){stylename=h.get("name");$.each(e.themes,function(m,l){var k,j=l.styleinfo;for(k=0;k<j.length;k++){if(j[k].custom&&j[k].name==stylename){j.splice(k,1);break}}});h.remove()}break}},rs__sK3a:function(a){var f=this,j=a[0],d=a[1],b;if(d&&j){$.each(f.themes,function(m,r){var n,q,l=r.styleinfo,o;for(n=0;n<l.length;n++){if(l[n].name==d){q=l[n];break}}if(q){o=new IG$._IF7(null,"item",true);o.name=j;o.nodename="ItemStyle";o.basestylename=d;o.hs=new IG$._IF8(null,"Header");o.ds=new IG$._IF8(null,"Data");l.push(o);o._IFb.call(o,q)}});var c=f.down("[name=stylelist]"),e,h,g=c.store.getRootNode();for(b=0;b<g.childNodes.length;b++){if(g.childNodes[b].data.name=="Custom"){h=g.childNodes[b];break}}e={name:j,leaf:true,custom:true};h.appendChild(e)}},initComponent:function(){var a=this,d=new IG$._Id0({title:IRm$.r1("L_STYLE_TITLE"),name:"form_header",htype:"hd",flex:1}),e=new IG$._Id0({title:IRm$.r1("L_STYLE_DATA"),name:"form_data",htype:"dt",flex:1}),f=[{name:"Select",value:""}],c=IG$.__c_.chartcolors,b;for(b in c){f.push({name:b,value:b})}a.title=IRm$.r1("T_STYLE_WIZARD");$s.apply(this,{defaults:{bodyStyle:"padding:3px"},dockedItems:[{xtype:"toolbar",dock:"top",plain:true,items:[{iconCls:"icon-toolbar-save",tooltip:IRm$.r1("L_SAVE_CONTENT"),handler:function(){this._IFf()},scope:this},"-",{xtype:"combobox",fieldLabel:"Themes",name:"c_themes",displayField:"name",labelWidth:60,labelAlign:"right",valueField:"value",editable:false,queryMode:"local",store:{fields:["name","value"]},listeners:{change:function(g,h,k,j){this._m1()},scope:this}},{iconCls:"icon-toolbar-add",tooltip:"Add Theme",text:"Add Theme",handler:function(){this._t$("cmd_add_theme")},scope:this},{iconCls:"icon-toolbar-remove",tooltip:"Remove Theme",handler:function(){this._t$("cmd_remove_theme")},scope:this}]}],items:[{xtype:"panel",width:270,border:1,region:"west",layout:"anchor",tbar:[{xtype:"displayfield",value:"Basic Options"}],items:[{xtype:"combobox",fieldLabel:"Chart Style",name:"c_cset",displayField:"name",labelAlign:"right",labelWidth:60,valueField:"value",editable:false,queryMode:"local",store:{fields:["name","value"],data:f}},{xtype:"fieldset",title:"Grid stripe",anchor:"100%",layout:"anchor",items:[{xtype:"checkbox",fieldLabel:IRm$.r1("L_GS_ENABLED"),name:"gs_enable",boxLabel:IRm$.r1("B_ENABLED")},{xtype:"fieldcontainer",anchor:"100%",fieldLabel:IRm$.r1("L_ALT_COLOR"),layout:"hbox",items:[{xtype:"textfield",name:"gs_col",width:60},{xtype:"splitter"},{xtype:"splitbutton",width:30,menu:{showSeparator:false,items:[{xtype:"colorpicker",listeners:{select:function(j,g){var h=this.down("[name=gs_col]");h.setValue("#"+g)},scope:a}},"-"]}}]},{xtype:"numberfield",fieldLabel:"Opacity",name:"gs_opa",width:200,minValue:0,maxValue:1,step:0.1,value:0.4}]},{xtype:"container",flex:1}]},{xtype:"treepanel",title:"Style",name:"stylelist",preventHeader:true,region:"west",width:220,split:true,border:1,rootVisible:false,hideHeaders:true,autoScroll:true,store:{xtype:"treestore",fields:["name","text","custom"],root:{expanded:true,name:"Style",children:[]},folderSort:false},columns:[{xtype:"treecolumn",text:"text",flex:1,sortable:false,dataIndex:"name"}],listeners:{itemclick:function(r,m,v,n,o){var q=this,t=m.get("name"),h=a.down("[name=b_r]"),s=a.down("[name=p_h]"),u=a.down("[name=p_d]"),k,g=a.__cth?a.__cth.styleinfo:null,j=false,l=false;if(g){for(k=0;k<g.length;k++){if(g[k].name==t){j=true;break}}if(j){if(m.get("custom")==true){l=true}u.setTitle("Edit : "+t);a.Mb_3.call(a,t)}s.getLayout().setActiveItem(j?1:0);h.setVisible(l)}}},tbar:[{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this._t$("cmd_refresh")},scope:this},"-",{iconCls:"icon-toolbar-add",tooltip:"Add Custom Style",text:"Add Style",handler:function(){this._t$("cmd_add_custom")},scope:this},{iconCls:"icon-toolbar-remove",tooltip:"Remove Style",name:"b_r",hidden:true,handler:function(){this._t$("cmd_remove")},scope:this}]},{xtype:"panel",region:"center",layout:"card",name:"p_h",items:[{html:"Click stylename to edit"},{xtype:"tabpanel",title:"Edit :",name:"p_d",layout:{type:"fit",align:"stretch"},items:[e,d]}]}],listeners:{afterrender:function(){if(this.styletype=="g"){this.Mb_1()}}}});IG$._I78.superclass.initComponent.apply(this,arguments)}});IG$._I9c=$s.extend($s.window,{modal:true,layout:"border",closable:false,resizable:true,width:650,height:500,_ILa:null,callback:null,globalstyle:null,globalstylemap:null,styleinfo:null,Mb_1:function(){var a=this,b=new IG$._I3e();b.init(a,{ack:"1",payload:IG$._I2d({address:"ReportStyle"}),mbody:IG$._I2e()},a,a.rs_Mb_1,null);b._l()},rs_Mb_1:function(h){var g=IG$._I18(h,"/smsg/item/themes"),n,o,k,q,m=[{name:"Select Item",value:""}],c,f=ig$.theme_id,a,b,e,d,r,l=["Global","Default","Custom","Item"];this.globalstyle=[];this.globalstylemap={};if(g){n=IG$._I26(g);if(!f){c=n[0]}else{for(e=0;e<n.length;e++){if(IG$._I1b(n[e],"name")==n){c=n[e];break}}if(!c){c=n[0]}}}if(c){for(e=0;e<l.length;e++){q=l[e];o=IG$._I18(c,q);if(o){b=IG$._I26(o);for(d=0;d<b.length;d++){k=new IG$._IF7(b[d],"global",false);this.globalstyle.push(k);m.push({name:k.name,value:k.name});this.globalstylemap[k.name]=k}}}for(q in this.globalstylemap){k=this.globalstylemap[q];if(k.custom==true&&k.basestylename&&this.globalstylemap[k.basestylename]){r=this.globalstylemap[k.basestylename];k._IFb.call(k,r)}}}this.down("[name=base_style]").store.loadData(m);this.Mb_2()},Mb_2:function(){var g=this,c,h,e,j,d=g.down("[name=stylelist]"),f=[],b,a;g.down("[name=c_cset]").setValue(g.c_cset||"");if(g.styleinfo){a={name:"LocalStyle",leaf:false,children:[]};f.push(a);for(c=0;c<g.styleinfo.length;c++){e=g.styleinfo[c];b={name:e.name,leaf:true,custom:false};if(e.basestylename&&g.globalstylemap[e.basestylename]){j=g.globalstylemap[e.basestylename];e._IFb.call(e,j)}a.children.push(b)}d.store.setRootNode({expanded:true,text:"Style",name:"Style",title:"Style",children:f})}},Mb_3:function(d){var a,c=this,b=c.down("[name=form_header]"),e=c.down("[name=form_data]");c.Mb_4();for(a=0;a<c.styleinfo.length;a++){if(c.styleinfo[a].name==d){c.__e1=c.styleinfo[a];c.__e2=1;c.down("[name=base_style]").setValue(c.styleinfo[a].basestylename||"");b.Mb_6.call(b,c.styleinfo[a].hs);e.Mb_6.call(e,c.styleinfo[a].ds);c.__e2=0;break}}},Mb_4:function(){var b=this,a=b.down("[name=form_header]"),d=b.down("[name=form_data]"),c=b.down("[name=base_style]").getValue();if(b.__e1&&c){b.__e1.basestylename=c;d.Mb_7.call(d);a.Mb_7.call(a)}},_IG0:function(){var a=this;a.callback&&a.callback.execute(a);a.close()},_IFf:function(){var c=this,a,d,b;c.Mb_4();for(a=0;a<c.styleinfo.length;a++){b=c.styleinfo[a];if(b.basestylename&&c.globalstylemap[b.basestylename]){d=c.globalstylemap[b.basestylename];b.Mb_16(d)}}c.c_cset=c.down("[name=c_cset]").getValue();c._IG0()},_t$:function(e){var d=this;switch(e){case"cmd_add_custom":var g=new IG$.mA$_s({styleinfo:this.globalstyle,callback:new IG$._I3d(this,this.rs__sK3a)});IG$._I_5(this,g);break;case"cmd_delete":var b,a=this.down("[name=stylelist]"),f=a.getSelectionModel().selected,c=f&&f.length>0?f.items[0]:null;if(c){for(b=0;b<d.styleinfo.length;b++){if(c.get("name")==d.styleinfo[b].name){d.styleinfo.splice(b,1);c.remove();break}}}break}},rs__sK3a:function(b){var n=b[0],h=b[1];if(h&&n){var c,e;e=this.globalstylemap[h];if(e){var d=this.down("[name=stylelist]"),j=d.store.getProxy(),f=j.getReader(),g,k,m,l=d.store.getRootNode();m=l.childNodes[l.childNodes.length-1];k={name:n,leaf:true,custom:true};g=new IG$._IF7(null,"item",true);g.name=n;g.nodename="ItemStyle";g.basestylename=h;g.hs=new IG$._IF8(null,"Header");g.ds=new IG$._IF8(null,"Data");this.styleinfo.push(g);g._IFb.call(g,e);var a=f.extractData.call(f,[k],true);d.store.fillNode.call(d.store,m,a)}}},initComponent:function(){var a=this,d=new IG$._Id0({title:IRm$.r1("L_STYLE_TITLE"),name:"form_header",htype:"hd"}),e=new IG$._Id0({title:IRm$.r1("L_STYLE_DATA"),name:"form_data",htype:"dt"}),f=[{name:"Default",value:""}],c=IG$.__c_.chartcolors,b;for(b in c){f.push({name:b,value:b})}a.title=IRm$.r1("T_STYLE_WIZARD");$s.apply(this,{defaults:{bodyStyle:"padding:3px"},items:[{xtype:"treepanel",title:"Style",name:"stylelist",preventHeader:true,region:"west",width:160,split:true,border:false,rootVisible:false,hideHeaders:true,autoScroll:true,store:{xtype:"treestore",fields:["name","text","type","pname","region","custom"],root:{expanded:true,name:"Style",children:[]},folderSort:false},useArrows:true,dockedItems:[{xtype:"toolbar",dock:"top",plain:true,items:[{iconCls:"icon-toolbar-add",tooltip:"Add Custom Style",text:"Add New",handler:function(){this._t$("cmd_add_custom")},scope:this},{iconCls:"icon-grid-delete",tooltip:"Delete",handler:function(){this._t$("cmd_delete")},scope:this}]}],columns:[{xtype:"treecolumn",text:"text",flex:2,sortable:false,dataIndex:"name"},{xtype:"actioncolumn",width:26,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(h,k,g){var j=h.store.getAt(k)},getClass:function(h,k,l,m,j,g){if(m==0||l.isLeaf()==false||(l.data&&l.data.custom==false)){return"idv-hd-val"}return""}}]}],listeners:{afterrender:function(){var g=this},itemclick:function(h,g,k,j,m){var l=g.get("name");if(g.isRoot()==false&&l){a.Mb_3.call(a,l)}}}},{xtype:"form",region:"center",layout:{type:"vbox",align:"stretch"},items:[{xtype:"combobox",fieldLabel:"Inherit",name:"base_style",displayField:"name",valueField:"value",editable:false,queryMode:"local",store:{fields:["name","value"]},listeners:{change:function(g,j,n){var m=this,h=m.down("[name=base_style]").getValue(),k,l=m.down("[name=form_header]"),o=m.down("[name=form_data]");if(m.__e2){return}if(h){k=m.globalstylemap[h];if(k){l.Mb_6.call(l,k.hs);o.Mb_6.call(o,k.ds)}}},scope:this}},{xtype:"tabpanel",plain:true,flex:1,items:[e,d],bbar:[{xtype:"toolbar",items:[{xtype:"combobox",fieldLabel:"Chart Style",name:"c_cset",displayField:"name",valueField:"value",editable:false,queryMode:"local",store:{fields:["name","value"],data:f}}]}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this._IFf()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(){this.Mb_1()}}});IG$._I9c.superclass.initComponent.apply(this,arguments)}});IG$._IC0=$s.extend($s.panel,{autoScroll:false,collapseFirst:false,layout:"fit",closable:true,autoScroll:true,initComponent:function(){$s.apply(this,{tbar:[{text:"Save Content",handler:function(){this.l1()},scope:this}]});IG$._IC0.superclass.initComponent.call(this)},items:[{xtype:"textarea",name:"metaview"}],listeners:{render:function(b){var a=b;if(a.uid&&a.uid.length>0){this.Mmk(a.uid,a.itemtype)}},resize:function(c,e,b,a,d){c.Mm11.call(c,e,b)}},l1:function(){var a=this;a.setLoading(true);var e=a.down("[name=metaview]"),c=new IG$._I3e(),d="31",b=e.getValue();c.init(a,{ack:d,payload:IG$._I2d({uid:a.uid}),mbody:b},a,a.rs_l1(),null);c._l()},rs_l1:function(a){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")},Mmk:function(e,b){var a=this;a.uid=e;a.setLoading(true);var f=new IG$._I3e(),d=(b=="cube")?true:false,g=(d)?"6":"5",c=(d)?'<smsg><info option="CubeContent"/></smsg>':"<smsg></smsg>";if(b=="datacube"){g="5";c="<smsg><info option='content'/></smsg>"}f.init(a,{ack:g,payload:IG$._I2d({uid:e}),mbody:c},a,a.rs_Mmk,null);f._l()},rs_Mmk:function(a){var b=this;doc=IG$._I25(a),content=IG$._I16(doc),metaview=this.down("[name=metaview]");metaview.setValue(content)},Mm11:function(a,c,b){}});IG$.ApM$m=function(){IG$.ApM$m.superclass.constructor.call(this,{id:"doc-body",region:"center",margins:"0 5 5 0",resizeTabs:true,minTabWidth:135,tabWidth:135,enableTabScroll:true,activeTab:0,layout:"fit",items:[{id:"welcome-panel",title:"MetaEditor",autoLoad:{url:"./html/metaeditor.html",callback:null,scope:this},iconCls:"icon-docs",autoScroll:true}]})};IG$.ApM$m=$s.extend($s.tabpanel,{initEvents:function(){IG$.ApM$m.superclass.initEvents.call(this);this.body.on("click",this.onClick,this)},m1$7:function(b,a,g,d){var c=this.getComponent(d);if(c){this.setActiveTab(c)}else{var e=IG$._I61(b,"metaeditor",g,d,null);if(e!=null){e.uid=b;e.address=d;e.itemtype=a;e.title=g;var f=this.add(e);this.setActiveTab(f)}}}});IG$._I7a=$s.extend(IG$._I57,{title:"System Logs",region:"center",layout:"fit",closable:true,resizable:false,autoHeight:true,callback:null,bodyPadding:10,iconCls:"icon-ing-docdef",in$t:function(){var b=this,a=b.down("[name=status]");a.setValue("");b.down("[name=e_stat]").setValue("F")},l1:function(f,c){var b=this,d=new IG$._I3e(),a=b.down("[name=status]"),g=b.down("[name=ellapsetime]"),e=b.down("[name=bufsize]");d.init(b,{ack:"11",payload:IG$._I2d({vopt:(c||"1")},"vopt"),mbody:IG$._I2e({option:"sysmon",ellapsetime:g.getValue(),bufsize:e.getValue(),status:a.getValue()})},b,b.rs_l1,false,[f,c]);d._l()},rs_l1:function(q,b){var s=this,c=b[0],e=b[1],a=IG$._I18(q,"/smsg"),r,d,l,g,n=[],k,f,h=s.down("[name=grdjoblist]"),m=s.down("[name=grd_sql]"),o=s.down("[name=grd_esql]");if(e=="2"){a=IG$._I18(q,"/smsg/sql");if(a){r=IG$._I26(a);for(l=0;l<r.length;l++){d=IG$._I26(r[l]);k={};for(g=0;g<d.length;g++){f=IG$._I29(d[g]);k[f]=IG$._I24(d[g])}n.push(k)}}m.store.loadData(n);n=[];a=IG$._I18(q,"/smsg/sqlexec");if(a){r=IG$._I26(a);for(l=0;l<r.length;l++){d=IG$._I26(r[l]);k={};for(g=0;g<d.length;g++){f=IG$._I29(d[g]);k[f]=IG$._I24(d[g])}n.push(k)}}o.store.loadData(n)}else{if(a){r=IG$._I26(a);for(l=0;l<r.length;l++){k=IG$._I1c(r[l]);n.push(k)}}h.store.loadData(n)}if(c&&c>0){s.rtimer=setTimeout(function(){s.l1.call(s,c,e)},c)}},l2:function(c){var a=this,b=new IG$._I3e();b.init(a,{ack:"11",payload:IG$._I2d({jobid:c},"jobid"),mbody:IG$._I2e({option:"jobdetail"})},a,a.rs_l2,false);b._l()},rs_l2:function(f){var h=this,j=IG$._I18(f,"/smsg/Job"),b=IG$._I18(f,"/smsg/Job/process"),g,d,e=[],c,a=this.down("[name=grdjobdetail]");h.jobdetail=(j)?IG$._I1c(j):null;if(b){g=IG$._I26(b);for(d=0;d<g.length;d++){c=IG$._I1c(g[d]);e.push(c)}}a.store.loadData(e)},_IG0:function(){this.close()},dQ:function(){var a=this,b=new IG$._I3e();if(a.jobdetail&&a.jobdetail.uid){b.init(a,{ack:"18",payload:"<smsg><item jobid='"+a.jobdetail.uid+"' option='cancel'/></smsg>",mbody:"<smsg></smsg>"},a,a.r_IP5,null);b.showerror=false;b._l()}},r_IP5:function(){var a=this;if(a.jobdetail&&a.jobdetail.uid){a.l2(a.jobdetail.uid)}},sc:function(b,a){var d=this,f=d.down("[name=btn_start]"),g=d.down("[name=btn_stop]"),e=d.down("[name=btn_refresh]"),c=d.down("[name=rsec]"),h=c.getValue()*1000;g.setDisabled(b?false:true);f.setDisabled(b);e.setDisabled(b);c.setDisabled(b);clearTimeout(d.rtimer);d.rtimer=-1;if(b==true){d.rtimer=setTimeout(function(){d.l1.call(d,h,a)},h)}},eM2:{A:"Waiting",F:"Failed",S:"Success",P:"Processing"},eM1:function(){var c=this,a=c.down("[name=grd_email]"),b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({stat:c.down("[name=e_stat]").getValue()},"stat"),mbody:IG$._I2e({option:"mail_stat"})},c,function(e){var j=IG$._I18(e,"/smsg"),h=IG$._I26(j),f,d=[],k=c.eM2,g;for(f=0;f<h.length;f++){g=IG$._I1c(h[f]);g.subject=IG$._I1a(h[f],"subject");g.stat=k[g.mstat]||"Unknown";d.push(g)}a.store.loadData(d)},false);b._l()},s1:function(a){var c=this,b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({sid:a},"sid"),mbody:IG$._I2e({option:"mail_content"})},c,function(j){var l=this,d=IG$._I18(j,"/smsg/mail"),h=[],m=l.eM2,g={},f=l.down("[name=m_d1]"),e=l.down("[name=m_d2]"),k=$("#ig_mail",e.body.dom);if(d){g=IG$._I1c(d);g.subject=IG$._I1a(d,"subject");g.content=IG$._I1a(d,"content");g.stat=m[g.mstat]||"Unknown"}k.contents().find("html").html(g?g.content:"");f.show()},false);b._l()},initComponent:function(){var a=this;$s.apply(this,{items:[{xtype:"tabpanel",items:[{xtype:"container",title:"Report Logs",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",title:"System Monitoring and Control",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch",defaultMargins:{top:0,left:0,right:10,bottom:0}},items:[{xtype:"numberfield",labelAlign:"right",name:"rsec",fieldLabel:"Auto Refresh (sec)",value:60},{xtype:"button",name:"btn_start",text:"Start",handler:function(){var c=this,b=c.down("[name=rsec]");if(b.getValue()>0){this.sc(true)}},scope:this},{xtype:"button",name:"btn_stop",text:"Stop",disabled:true,handler:function(){this.sc(false)},scope:this},{xtype:"container",flex:1},{xtype:"button",text:"Refresh",name:"btn_refresh",handler:function(){this.l1()},scope:this}]},{xtype:"fieldcontainer",layout:{type:"hbox",defaultMargins:{top:0,left:0,right:10,bottom:0}},items:[{xtype:"combobox",queryMode:"local",fieldLabel:"Conditions",name:"status",labelAlign:"right",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"All",value:""},{name:"STAT_START",value:"STAT_START"},{name:"STAT_FAILED_ERROR",value:"STAT_FAILED_ERROR"},{name:"STAT_PREPARE_STATEMENT",value:"STAT_PREPARE_STATEMENT"},{name:"STAT_BEFORE_EXECUTE_QRY",value:"STAT_BEFORE_EXECUTE_QRY"},{name:"STAT_END_QUERY_EXECUTION",value:"STAT_END_QUERY_EXECUTION"},{name:"STAT_CANCELED",value:"STAT_CANCELED"},{name:"STAT_FINISHED_WITH_ERROR",value:"STAT_FINISHED_WITH_ERROR"},{name:"STAT_FINISHED",value:"STAT_FINISHED"}]}},{xtype:"numberfield",name:"ellapsetime",labelAlign:"right",fieldLabel:"Ellapsed more then (second)",labelWidth:180,value:60},{xtype:"numberfield",name:"bufsize",labelAlign:"right",fieldLabel:"Buffer Size",minValue:10,maxValue:1000,value:100}]}]},{xtype:"gridpanel",name:"grdjoblist",flex:1,store:{xtype:"store",fields:["uid","userid","status","statuscode","totalellapsed","haserror","errormsg","starttime","endtime","objectname","objectpath","objectuid"]},columns:[{xtype:"gridcolumn",text:"UserID",dataIndex:"userid",flex:1},{xtype:"gridcolumn",text:"Status",dataIndex:"status",width:120},{xtype:"gridcolumn",text:"Name",dataIndex:"objectname",width:120},{xtype:"gridcolumn",text:"Path",dataIndex:"objectpath",width:200},{xtype:"gridcolumn",text:"JobID",hidden:true,dataIndex:"uid",width:80},{xtype:"gridcolumn",text:"Ellapsed",width:60,dataIndex:"totalellapsed"},{xtype:"gridcolumn",text:"Start",width:80,dataIndex:"starttime"},{xtype:"gridcolumn",text:"End",width:80,dataIndex:"endtime"},{xtype:"gridcolumn",text:"Error",width:40,dataIndex:"haserror"}],listeners:{itemclick:function(c,b,g,d,h,f){var j=b.get("uid");this.l2(j)},scope:this}},{xtype:"fieldset",collapsible:false,flex:1,layout:"fit",title:"Action Detail",items:[{xtype:"gridpanel",name:"grdjobdetail",store:{xtype:"store",fields:["status","statuscode","ellapsed"]},buttons:[{xtype:"button",text:"Cancel Job",handler:function(){this.dQ()},scope:this},{xtype:"button",text:"Open in folder",handler:function(){if(IG$._I7d&&window.api&&this.jobdetail&&this.jobdetail.objectpath){api._IHd.call(api,{name:this.jobdetail.objectname,nodepath:this.jobdetail.objectpath,uid:this.jobdetail.objectuid})}},scope:this}],columns:[{xtype:"gridcolumn",flex:1,text:"Action type",dataIndex:"status"},{xtype:"gridcolumn",text:"Ellapsed time",dataIndex:"ellapsed"}]}]}]},{xtype:"container",title:"JDBC Monitoring",layout:"border",items:[{xtype:"panel",region:"north",layout:"vbox",items:[{xtype:"button",text:"Refresh",handler:function(){this.l1(null,"2")},scope:this}]},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},region:"center",items:[{xtype:"gridpanel",flex:1,title:"SQL Details",name:"grd_sql",store:{xtype:"store",fields:["c0","c1","c2","c4","c5"]},columns:[{text:"No.",dataIndex:"c0",width:40},{text:"Date",dataIndex:"c1"},{text:"ExecTime",dataIndex:"c2",width:50},{text:"SQL",dataIndex:"c4",flex:1},{text:"Error",dataIndex:"c5",flex:1}]},{xtype:"gridpanel",flex:1,title:"Exec SQL",name:"grd_esql",store:{xtype:"store",fields:["c0","c1","c2","c4"]},columns:[{text:"No.",dataIndex:"c0",width:40},{text:"Date",dataIndex:"c1"},{text:"ExecTime",dataIndex:"c2",width:50},{text:"SQL",dataIndex:"c4",flex:1}]}]},{xtype:"container",region:"east",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",flex:1,title:"Request Count"},{xtype:"panel",flex:1,title:"Running"}]}]},{xtype:"container",title:"Email Sender Logs",layout:{type:"vbox",align:"stretch"},items:[{xtype:"fieldset",layout:"hbox",items:[{xtype:"fieldcontainer",flex:1,layout:"hbox",items:[{xtype:"combobox",queryMode:"local",fieldLabel:"Status",name:"e_stat",labelAlign:"right",displayField:"name",valueField:"value",editable:false,autoSelect:true,store:{xtype:"store",fields:["name","value"],data:[{name:"Failed",value:"F"},{name:"Sending",value:"P"},{name:"Waiting",value:"A"},{name:"Success",value:"S"},{name:"All",value:""}]}}]},{xtype:"button",text:"Run",handler:function(){this.eM1()},scope:this}]},{xtype:"gridpanel",flex:1,title:"Email Logs",name:"grd_email",store:{xtype:"store",fields:["sid","iuid","snder","email","cdate","mdate","mstat","stat","msgtype","subject"]},columns:[{text:"Sender",dataIndex:"snder",width:120},{text:"Email",dataIndex:"email",width:120},{text:"Modified Date",dataIndex:"mdate",width:50},{text:"Created Date",dataIndex:"cdate",width:50},{text:"Subject",dataIndex:"subject",tdCls:"igc-td-link",flex:1},{text:"Status",dataIndex:"stat",width:80}],listeners:{cellclick:function(b,c,k,d,j,l,f,g){var h=this;if(k==4){h.s1(d.get("sid"))}},scope:this}},{xtype:"panel",layout:"fit",hidden:true,flex:1,name:"m_d1",items:[{name:"m_d2",html:"<div class='igc-mail-detail'><iframe id='ig_mail' class='igc-mail-detail-if'></iframe></div>"}]}]}]}],listeners:{afterrender:function(b){this.in$t()}}});IG$._I7a.superclass.initComponent.apply(this,arguments)}});IG$._I7b=$s.extend(IG$._I57,{region:"center",layout:"fit",closable:true,resizable:false,autoHeight:true,callback:null,bodyPadding:10,iconCls:"icon-ing-docdef",in$t:function(){this.l1()},l1b:function(){var b=this,a=new IG$._I3e();a.init(b,{ack:"12",payload:IG$._I2d({address:"/resources"}),mbody:IG$._I2e({option:"getrs"})},b,b.rs_l1,false);a._l()},l1:function(){var b=this,a=new IG$._I3e();a.init(b,{ack:"12",payload:IG$._I2d({address:"/serverinfo"}),mbody:IG$._I2e({option:"getrs"})},b,b.rs_l1a,false);a._l()},rs_l1a:function(a){var c=this,e,d,b;e=IG$._I18(a,"/smsg/item/info");c.licinfo=IG$._I1c(e);e=IG$._I18(a,"/smsg/item/info/access_ip");if(e){c.licinfo.access_ip=[];d=IG$._I26(e);for(b=0;b<d.length;b++){c.licinfo.access_ip.push(IG$._I24(d[b]))}}c.l1b()},rs_l1:function(a){var b=this,c;c=IG$._I18(a,"/smsg/results/meminfo");b.s1(c);c=IG$._I18(a,"/smsg/results/diskinfo");b.s2(c);c=IG$._I18(a,"/smsg/results/osinfo");b.s3(c)},m1:function(b){var c="b",e=1,a=b;if(a>1000){c="M";a=a/1000;if(a>1000){c="G";a=a/1000}}return a.format("#,###")+" "+c},s1:function(e){var n=this,l,a,b=n.down("[name=g_mem]"),g=[],h;if(!n.m_charts){var c=n.down("[name=p_mem]"),d=$(".idv-rcs-mem",c.el.dom),f=[{name:"free",title:"Free Memory"},{name:"allocated",title:"Allocated"},{name:"appfree",title:"Application Free"},{name:"max",title:"Max Memory",chart:false},{name:"totalfree",title:"Free Total",chart:false}];d.empty();n.clen=0;$.each(f,function(o,k){if(k.chart!=false){var q=$("<div class='idv-rcs-pnl'><div class='idv-rcs-title'>"+k.title+"</div><div class='idv-rcs-chart'></div></div>").appendTo(d);k.el=q;k.dc=$(".idv-rcs-chart",k.el);k.clabel=$("<div class='idv-rcs-label'></div>").appendTo(k.dc);k.chart=k.dc.easyPieChart({size:IG$.x_10._w(k.dc)});n.clen++}});n.m_charts=f;n.s1s()}l=n.m_charts;if(e){a=IG$._I1c(e);var m=Number(a.totalfree),j=Number(a.max);$.each(l,function(q,o){var k=Number(a[o.name]),r;g.push({name:o.title,value:k});switch(o.name){case"free":case"appfree":o.value=100*k/m;r=n.m1(k)+"<br>"+n.m1(m);break;case"allocated":o.value=100*k/j;r=n.m1(k)+"<br>"+n.m1(j);break}if(o.chart){o.chart.data("easyPieChart").update(o.value);o.clabel.html(r)}})}b.store.loadData(g)},s1s:function(){var j=this,c=j.down("[name=p_mem]"),g=$(c.body.dom),a=$(".idv-rcs-mem",g),m=IG$.x_10._w(g),e=IG$.x_10._h(g),f=j.m_charts,d,b,l=0,k;IG$.x_10._w(a,m);IG$.x_10._h(a,e);if(f){b=m/j.clen;for(d=0;d<f.length;d++){k=f[d];if(k.chart){IG$.x_10._w(k.el,b);IG$.x_10._h(k.el,e);k.el.css("left",l);k.dc.css({left:(b-90)/2,top:(e-90)/2+20});l+=b}}}},s2:function(a){var h=this,e=h.down("[name=g_disk]"),g=a?IG$._I26(a):null,c=[],f=h.down("[name=p_dsk]"),b=$(".idv-rcs-dsk",f.el.dom),l,j,d,k;h.dlen=0;h.m_dsks=[];h.h_dsks=h.h_dsks||{};if(g){for(d=0;d<g.length;d++){p=IG$._I1c(g[d]);if(h.h_dsks[p.name]){j=h.h_dsks[p.name]}else{l=$("<div class='idv-rcs-pnl-dsk'><div class='idv-rcs-title'>"+p.name+"</div><div class='idv-rcs-chart'></div></div>").appendTo(b);j={el:l,dc:$(".idv-rcs-chart",l)};j.clabel=$("<div class='idv-rcs-label'></div>").appendTo(j.dc);j.chart=j.dc.easyPieChart({size:IG$.x_10._w(j.dc)});h.h_dsks[p.name]=j}k=Number(p.total)-Number(p.usable);k=(Number(p.total)>0?k*100/Number(p.total):0);j.chart.data("easyPieChart").update(k);j.clabel.text(p.name+" : "+k.format("###")+"%");h.dlen++;c.push(p);h.m_dsks.push(j)}h.s2s()}e.store.loadData(c)},s2s:function(){var g=this,e=g.down("[name=p_dsk]"),f=$(e.body.dom),b=$(".idv-rcs-dsk",f),l=IG$.x_10._w(f),d=IG$.x_10._h(f),m=g.m_dsks,c,a,j=0,k;IG$.x_10._w(b,l);IG$.x_10._h(b,d);if(m){for(c=0;c<m.length;c++){k=m[c];if(k.chart){IG$.x_10._w(k.el,l);a=IG$.x_10._h(k.el);k.dc.css({left:(l-90)/2,top:(a-90)/2+20})}}}},s3:function(b){var h=this,k=h.down("[name=p_os]"),c=$(".idv-os-pnl",k.el.dom),g=b?IG$._I26(b):null,j,l,d,a,e,f=h.licinfo;c.empty();if(g){ul=$("<ul class='idv-os-ul'></ul>").appendTo(c);for(e=0;e<g.length;e++){a=IG$._I1b(g[e],"name");l=$("<li><span class='idv-os-type'>"+a+"</span> : <span class='idv-os-val'>"+IG$._I24(g[e])+"</span></li>");ul.append(l)}ul=$("<div class='idv-lic-dv'><span>License Information</span></div>").appendTo(c);ul=$("<ul class='idv-lic-ul'></ul>").appendTo(ul);if(f){for(a in f){if(a!="access_ip"){l=$("<li><span class='idv-os-type'>"+a+"</span> : <span class='idv-os-val'>"+f[a]+"</span></li>");ul.append(l)}}if(f.access_ip){ul=$("<div class='idv-lic-dv'><span>Accessed IP</span></div>").appendTo(c);for(e=0;e<f.access_ip.length;e++){l=$("<li><span class='idv-os-val'>"+f.access_ip[e]+"</span></li>");ul.append(l)}}}}},initComponent:function(){var a=this;a.title=IRm$.r1("T_SYS_RES");$s.apply(this,{tbar:[{xtype:"button",iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this.l1()},scope:this}],items:[{xtype:"panel",layout:"border",border:0,items:[{xtype:"panel",region:"north",height:200,border:0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"panel",name:"p_mem",title:"Memory Resources",layout:"fit",flex:1,html:"<div class='idv-rcs-mem'></div>",listeners:{resize:function(){this.s1s()},scope:this}}]},{xtype:"panel",region:"center",border:0,layout:{type:"hbox",align:"stretch"},flex:1,items:[{xtype:"panel",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"gridpanel",title:"Memory",name:"g_mem",flex:1,store:{xtype:"store",fields:["name","value"]},columns:[{xtype:"gridcolumn",text:"Name",flex:1,dataIndex:"name"},{xtype:"gridcolumn",text:"Value",dataIndex:"value",flex:1}]},{xtype:"gridpanel",title:"Disk",name:"g_disk",flex:1,store:{xtype:"store",fields:["name","total","free","usable"]},columns:[{xtype:"gridcolumn",text:"Name",flex:1,dataIndex:"name"},{xtype:"gridcolumn",text:"Total",dataIndex:"total",flex:1},{xtype:"gridcolumn",text:"Free",dataIndex:"free",flex:1},{xtype:"gridcolumn",text:"usable",dataIndex:"usable",flex:1}]}]},{xtype:"panel",name:"p_dsk",flex:1,layout:"fit",html:"<div class='idv-rcs-dsk'></div>",listeners:{resize:function(){this.s2s()},scope:this}},{xtype:"panel",title:"System Info",name:"p_os",layout:"fit",flex:1,html:"<div class='idv-os-pnl'></div>"}]}]}],listeners:{afterrender:function(b){this.in$t()}}});IG$._I7b.superclass.initComponent.apply(this,arguments)}});IG$.CI7_=function(a){var b=this;b.sid=0;b._a={map:{},root:{name:"Menu",sid:99,level:-1,option:{},description:"Top Menu",expanded:true,children:[]}};b._a.map[99]=b._a.root;a&&b._1(a)};IG$.CI7_.prototype={_1:function(h){var l=this,c=IG$._I18(h,"/smsg/item"),d,k,e,b,g,f,a,m;if(c){l.item=IG$._I1c(c);d=IG$._I18(c,"menustructure");d&&l._4(l._a.root,d);d=IG$._I18(c,"menuitems");if(d){k=IG$._I26(d);for(g=0;g<k.length;g++){a=IG$._I1b(k[g],"sid");m=l._a.map[a];if(m){e=IG$._I26(k[g]);m.items=[];for(f=0;f<e.length;f++){b=IG$._I1c(e[f]);m.items.push(b)}}}}}},_2:function(){var c=this,b=[],a=[];b.push("<menustructure>");b.push(c._3(c._a.root,a));b.push("</menustructure>");b.push("<menuitems>");b.push(a.join(""));b.push("</menuitems>");return b.join("")},_3:function(g,a){var e=this,c,b,f,d="";d+="<option>";for(b in g.option){d+=(g.option[b])?"<opt name='"+b+"'><![CDATA["+g.option[b]+"]]></opt>":""}d+="</option>";if(g.children){for(c=0;c<g.children.length;c++){f=g.children[c];d+="<menu"+IG$._I20(f,"sid;name;description")+">";d+=e._3(f,a);d+="</menu>";if(f.items){a.push("<menuitem sid='"+f.sid+"'>");for(b=0;b<f.items.length;b++){a.push("<menu"+IG$._I20(f.items[b],"uid;name;type;nodepath")+"/>")}a.push("</menuitem>")}}}return d},_4:function(c,b){var h=this,g=IG$._I26(b),d,f,e,a,k;for(f=0;f<g.length;f++){k=IG$._I29(g[f]);if(k=="menu"){a=IG$._I1c(g[f]);a.children=[];a.option={};a.level=c.level+1;h._a.map[a.sid]=a;h.sid=Math.max(h.sid,parseInt(a.sid)+1);c.children.push(a);h._4(a,g[f])}else{if(k=="option"){d=IG$._I26(g[f]);for(e=0;e<d.length;e++){c.option[IG$._I1b(d[e],"name")]=IG$._I24(d[e])}}}}}};if(window.Ext){IG$._I7a_=$s.extend($s.window,{modal:true,title:"Page Config",layout:"fit",width:400,autoHeight:true,_1:function(){var b=this,a;if(b.item){a=b.item.option;b.down("[name=ltype]").setValue(a.ltype||"");b.down("[name=_h]").setValue(a.html);b.down("[name=_t]").setValue(a.tmpl);b.down("[name=_ra]").setValue(a.rptl);b.rptl_uid=a.rptl_uid;b.down("[name=_s]").setValue(a.scrp)}},_2:function(){var b=this,a=b.down("[name=ltype]").getValue();$.each(["_h","_r","_t"],function(d,c){b.down("[name="+c+"]").setVisible(a&&"_"+a.charAt(0)==c?true:false)})},_3:function(){var b=this,a;if(b.item){a=b.item.option;a.ltype=b.down("[name=ltype]").getValue();a.html=b.down("[name=_h]").getValue();a.tmpl=b.down("[name=_t]").getValue();a.rptl=b.down("[name=_ra]").getValue();a.rptl_uid=b.rptl_uid;a.scrp=b.down("[name=_s]").getValue()}this.close()},initComponent:function(){var a=this;$s.apply(this,{items:[{xtype:"panel",layout:"anchor",bodyPadding:10,defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:"Load Type",name:"ltype",queryMode:"local",editable:false,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"],data:[{name:"No Action",value:""},{name:"Template",value:"template"},{name:"Load HTML",value:"html"},{name:"Open Report",value:"report"}]},listeners:{change:function(){this._2()},scope:this}},{xtype:"textfield",name:"_h",fieldLabel:"Default HTMLPage"},{xtype:"fieldcontainer",name:"_r",layout:"hbox",fieldLabel:"Report",items:[{xtype:"textfield",name:"_ra",readOnly:true,flex:1},{xtype:"button",text:"..",handler:function(){var b=this,c=new IG$._I96({visibleItems:"workspace;folder;report;dashboard",u5x:{cubebrowse:false},callback:new IG$._I3d(b,function(e){var d=b.down("[name=_ra]");d.setValue(e.name);b.rptl_uid=e.uid})});IG$._I_5(this,c)},scope:this}]},{xtype:"combobox",name:"_t",queryMode:"local",fieldLabel:"Template Name",editable:false,valueField:"value",displayField:"name",store:{xtype:"store",fields:["name","value"]}},{xtype:"textfield",fieldLabel:"After Javascript",name:"_s"}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){var b=this;b._3()},scope:this},{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._I7a_.superclass.initComponent.call(this)},listeners:{afterrender:function(a){this._1()}}})}IG$._I7_=$s.extend(IG$._I57,{scroll:false,initialized:false,hideMode:"offsets",layout:"fit",bodyPadding:5,border:0,l1:function(){var c=this,b,a="/SYS_Config/dashboardmenu";b=new IG$._I3e();b.showerror=false;b.init(c,{ack:"5",payload:IG$._I2d({uid:a}),mbody:IG$._I2e({option:""})},c,c._l1,function(d){var g=true,f,e=IG$._I27(d);if(e=="0x1400"){f=new IG$._I3e();f.init(c,{ack:"31",payload:IG$._I2d({address:a,name:"dashboardmenu",type:"PrivateContent"}),mbody:"<smsg></smsg>"},c,c.l1);f._l();g=false}return g});b._l()},_l1:function(a){var c=this,b=c.down("[name=menust]");c.c1=new IG$.CI7_(a);b.store.setRootNode(c.c1._a.root)},_l2:function(h){var j=this,d=j.down("[name=menust]"),a=d.getSelectionModel().selected,e=j.c1,b=e._a,f,g,c;switch(h){case 0:if(a&&a.length>0){f={name:"New Menu",sid:""+(j.c1.sid++)};b.map[f.sid]=f;a.items[0].appendChild(f,false,true);a.items[0].expand()}break;case 1:if(a&&a.length>0){c=a.items[0];if(!c.isRoot()){g=c.get("sid");delete b.map[g];c.remove()}}break;case 2:j._m3(d,-1,false);break;case 3:j._m3(d,1,false);break;case 4:j._m3(d,1,true);break}},_l3:function(){var f=this,b=f.down("[name=menust]"),c=b.store.getRootNode(),a={children:[]},g=f.c1,e,d=g._a;f._l8();f._l5(d,c,a);d.root.children=a.children},_l5:function(d,b,a){var c,c,f,e=[],g;for(c=0;c<b.childNodes.length;c++){f=b.childNodes[c];g={name:f.get("name"),sid:f.get("sid"),description:f.get("description"),items:[],children:[],level:a.level+1,option:{}};if(d.map[g.sid]){g.items=d.map[g.sid].items;g.option=d.map[g.sid].option}a.children.push(g);if(f.hasChildNodes()){this._l5(d,f,g)}}},l4:function(b){var a=this;switch(b){case 0:a._l3();a._l6();break}},_l6:function(){var c=this,b=new IG$._I3e(),d=c.c1,a;a="<smsg><item>";a+=d._2.call(d);a+="</item></smsg>";b.init(c,{ack:"31",payload:IG$._I2d({uid:d.item.uid}),mbody:a},c,function(e){IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")});b._l()},_m2:function(d,e){var b=d.getSelectionModel().getSelection(),a=b&&b.length?b[0]:null;if(!a){return}var c=d.getStore().indexOf(a);if(e<0){c--;if(c<0){return}}else{c++;if(c>=d.getStore().getCount()){return}}d.getStore().remove(a);d.getStore().insert(c,a);d.getSelectionModel().select(a,true)},_m3:function(e,h,d){var b=e.getSelectionModel().getSelection(),a=b&&b.length?b[0]:null;if(!a){return}var g=a.parentNode,c=g.indexOf(a),f;if(d){f=g.parentNode;if(!f){return}g.remove(a);f.insert(f.childNodes.length,a);e.getSelectionModel().select(a,true)}else{if(h<0){c--;if(c<0){return}}else{c++;if(c>=g.childNodes.length){return}}g.remove(a);g.insert(c,a);e.getSelectionModel().select(a,true)}},_l7:function(k){var l=this,h=l.down("[name=mgrid]"),a,c,f=l.c1,b=f._a,g,d,e;switch(k){case 0:break;case 1:a=h.getSelectionModel().selected;for(g=0;g<a.length;g++){c=a.items[g];h.store.remove(c);e=b.map[c.get("sid")];if(e){for(d=0;d<e.items.length;d++){if(e.items[d].uid==c.get("uid")){e.items.splice(d,1);break}}}}break;case 2:l._m2(h,-1);break;case 3:l._m2(h,1);break}},_IQ9:function(a,f){var e=this,d=e.down("[name=mg]"),c,g=[],b;for(c=0;c<a.length;c++){b=a[c].type.toLowerCase();if((/report|folder/).test(b)){g.push(a[c])}}d.store.loadData(g)},_l8:function(){var k=this,f=k.down("[name=menust]"),c=f.getSelectionModel().selected,j=k.down("[name=mgrid]"),g=k.c1,d=g._a,b,h,e,a;if(c&&c.length>0){a=c.items[0].get("sid");b=d.map[a];b.items=[];for(h=0;h<j.store.data.items.length;h++){e=j.store.data.items[h];b.items.push({uid:e.get("uid"),name:e.get("name"),type:e.get("type"),sid:a,nodepath:e.get("nodepath")})}}},_1:function(f){var b=this,d=b.c1,c=d._a.map,a=f.get("sid");var e=new IG$._I7a_({item:(a=="")?d._a.root:c[a]});IG$._I_5(this,e)},initComponent:function(){var a=this;$s.apply(this,{items:[{xtype:"panel",layout:{type:"vbox",align:"stretch"},border:0,defaults:{anchor:"100%"},items:[{xtype:"panel",border:0,flex:1,layout:{type:"border"},tbar:[{text:IRm$.r1("B_SAVE"),handler:function(){this.l4(0)},scope:this},{text:IRm$.r1("L_REFRESH"),handler:function(){this.l1()},scope:this}],items:[{xtype:"panel",region:"center",flex:2,border:0,layout:"border",items:[{xtype:"treepanel",region:"center",flex:1,title:"Menu Structures",name:"menust",rootVisible:true,plugins:[{ptype:"cellediting"}],store:{xtype:"treestore",proxy:{type:"memory"},fields:["name","description","sid"]},columns:[{xtype:"treecolumn",text:IRm$.r1("B_TITLE"),dataIndex:"name",editor:"textfield",minWidth:200},{text:IRm$.r1("B_DESC"),dataIndex:"description",editor:"textfield",flex:1,minWidth:200},{xtype:"actioncolumn",width:50,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("B_CONFIG_ITEM"),handler:function(d,h,c,f,g,b){this._1(b)},scope:this}]}],listeners:{beforeselect:function(c,b,d,e){this._l8()},cellclick:function(c,f,s,k,r,t,n,o){var q=this,b=k.get("sid"),l=q.down("[name=mgrid]"),j=q.c1,d=j._a,g=[],h;if(d.map[b]){g=d.map[b].items||[]}for(h=0;h<g.length;h++){g[h].sid=b}l.store.loadData(g)},scope:this},tbar:[{text:IRm$.r1("L_ADD_NEW"),handler:function(){a._l2.call(a,0)}},{text:IRm$.r1("L_REMOVE_SELECTED"),handler:function(){a._l2.call(a,1)}},{text:IRm$.r1("B_MOVE_UP"),handler:function(){a._l2.call(a,2)}},{text:IRm$.r1("B_MOVE_DOWN"),handler:function(){a._l2.call(a,3)}},{text:"Move Left",hidden:true,handler:function(){a._l2.call(a,4)}}]},{xtype:"gridpanel",region:"south",name:"mgrid",selModel:{selection:"checkboxmodel",checkSelector:".x-grid-cell"},viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:true,enableDrag:false}]},split:true,flex:1,title:IRm$.r1("L_C_ITEMS"),tbar:[{text:IRm$.r1("L_ADD_NEW"),hidden:true,handler:function(){this._l7(0)},scope:this},{text:IRm$.r1("L_REMOVE_SELECTED"),handler:function(){this._l7(1)},scope:this},{text:IRm$.r1("B_MOVE_UP"),handler:function(){this._l7(2)},scope:this},{text:IRm$.r1("B_MOVE_DOWN"),handler:function(){this._l7(3)},scope:this}],store:{xtype:"store",fields:["uid","name","nodepath","type","sid"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_TYPE"),dataIndex:"type"},{text:IRm$.r1("B_DESC"),dataIndex:"description"},{text:IRm$.r1("B_LOC"),dataIndex:"nodepath",flex:1}]}]},{xtype:"panel",region:"east",split:true,collapsible:true,collapsed:false,flex:1,title:IRm$.r1("L_NAVIGATOR"),layout:{type:"vbox",align:"stretch"},items:[new IG$._Idd({name:"mtree",flex:1,gridupdate:{handler:a._IQ9,scope:a}}),{xtype:"gridpanel",name:"mg",viewConfig:{plugins:[{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_",enableDrop:false,enableDrag:true}]},flex:1,store:{xtype:"store",fields:["uid","name","type","nodepath"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name"},{text:IRm$.r1("B_TYPE"),dataIndex:"type"},{text:IRm$.r1("B_LOC"),dataIndex:"nodepath"}]}]}]}]}]});IG$._I7_.superclass.initComponent.call(this)},listeners:{afterrender:function(a){this.l1()}}});IG$._dRp=$s.extend($s.window,{title:IRm$.r1("L_PRV_DATA"),modal:true,width:400,height:350,layout:"fit",_1:function(){var b=this,a=new IG$._I3e();a.init(b,{ack:"5",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:""})},b,function(c){var d=IG$._I18(c,"/smsg/item")},false);a._l()},initComponent:function(){var a=this;$s.apply(this,{items:[{xtype:"panel",bodyPadding:10,layout:{type:"vbox",align:"stretch"},items:[{html:"<div style='height: 200px;overflow: auto;'><img src='"+ig$.servlet+"?sreq=resource&_rcs_="+a.uid+"&_mts_="+IG$._g$a+"'></img></div>",name:"img_prev"}]}],buttons:[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}]});IG$._dRp.superclass.initComponent.call(this)},listeners:{afterrender:function(a){if(a.uid){a._1.call(a)}}}});IG$._dR=$s.extend(IG$._I57,{layout:"fit",_9:null,m1$9:function(){if(this.m1$12()==true){this.callback&&this.callback.execute();this._IG0()}},_IFe1:function(){},commitCode:function(){var e=this,d=true,b=e._9,a=b?b.rcs:null,c,h=e.down("[name=dgrid]"),f,g;if(b){if(a.length){a.splice(0,a.length)}for(c=0;c<h.store.data.items.length;c++){g=h.store.data.items[c];f={uid:g.get("uid"),name:g.get("name")};a.push(f)}}return d},refreshCode:function(){},_IFe:function(){var a=this;a._m3(9)},_t$:function(b){var a=this;switch(b){case"cmd_import":a.down("[name=d_file]").show();break;case"cmd_reload":a._m3();break;case"cmd_mgr_rcs":break;case"cmd_c_files":a._m2();break}},_m1:function(){var e=this,d=e.down("[name=d_file]"),g=d.el.dom,c=$(".m_fileupload",g),b=e.down("[name=d_upfiles]"),f,a,h;c.empty();f=$("<input type='file' name='files[]' data-url='upload' multiple></input>").appendTo(c);a=$("<div class='filedropzone fade well'>Drop files here</div>").appendTo(c);h=$("<div class='file-progress'><div class='bar' style='width: 0%;'></div></div>").appendTo(c);f.fileupload({url:ig$.servlet,dataType:"text",done:function(r,n){var t=n.result||'<smsg errorcode="0xffff" errormsg="Server incorrect responding"/>',q=IG$._I13(t),j=IG$._I27(q),l,s,o,m=[],k;if(j){IG$._I51(q,e,null)}else{l=IG$._I18(q,"/smsg");if(l){s=IG$._I26(l);for(o=0;o<s.length;o++){k=IG$._I1c(s[o]);m.push(k)}}}if(m&&m.length){b.show();for(o=0;o<m.length;o++){b.store.add(m[o])}}},progressall:function(m,l){var j=parseInt(l.loaded/l.total*100,10),k=$(".bar",h);k.css("width",j+"%");k.text("Loaded "+l.loaded+" / "+l.total)},dropZone:a}).bind("fileuploadsubmit",function(k,j){});f.fileupload("option","url",ig$.servlet);e._m3()},_m2:function(){var g=this,e,a=g.down("[name=d_upfiles]"),c=g.down("[name=dgrid]"),j=a.store,d,f=[],h=new IG$._I3e(),b=c.store,k={};for(e=0;e<b.data.items.length;e++){d=b.data.items[e];k[d.get("name")]=d.get("uid")}for(e=0;e<j.data.items.length;e++){d=j.data.items[e];f.push("<item uid='"+d.get("uid")+"' name='"+d.get("filename")+"'"+(k[d.get("filename")]?" ouid='"+k[d.get("filename")]+"'":"")+"/>")}if(f.length){f="<smsg>"+f.join("")+"</smsg>";h.init(g,{ack:"11",payload:f,mbody:IG$._I2e({option:"reg_rcs",buid:g.uid})},g,function(l){g._m3(1)},false);h._l()}},_m3:function(a){var c=this,e=c.down("[name=dgrid]"),b=new IG$._I3e(),d="DashboardResources";if(a==1){d_upfiles=c.down("[name=d_upfiles]");d_upfiles.store.removeAll();d_upfiles.hide();c.down("[name=d_file]").hide()}if(!c.gobj){b.init(c,{ack:"11",payload:IG$._I2d({uid:"/"+d,name:d,type:"Workspace",post:"create",duty:"everyone",mode:"s"},"uid;type;name;post;duty;mode"),mbody:IG$._I2e({option:"translate"})},c,function(f){var g=IG$._I18(f,"/smsg/item");if(g){c.gobj=IG$._I1c(g);c._m3a(c.gobj.uid,a,"global",new IG$._I3d(c,function(){var h=this;if(h.uid&&h.cmode=="page"){h._m3a(h.gobj.uid,a,"page")}}))}},false);b._l()}else{c._m3a(c.gobj.uid,a,"global",new IG$._I3d(c,function(){var f=this;if(f.uid&&f.cmode=="page"){f._m3a(f.gobj.uid,a,"page")}}))}},_m3a:function(e,a,b,g){var d=this,c=new IG$._I3e(),f=d.down("[name=dgrid]");c.init(d,{ack:"5",payload:IG$._I2d({uid:e}),mbody:IG$._I2e({option:"folder"})},d,function(h){var n=IG$._I18(h,"/smsg/item"),m=n?IG$._I26(n):null,j,o=[],k,l;if(m){for(j=0;j<m.length;j++){k=IG$._I1c(m[j]);k.btype=b;if(k.name.indexOf(".")>-1){k.fileext=k.name.substring(k.name.lastIndexOf(".")+1)}o.push(k)}}for(j=f.store.data.items.length-1;j>=0;j--){l=f.store.data.items[j];if(l.get("btype")==b){f.store.remove(l)}}for(j=0;j<o.length;j++){f.store.add(o[j])}if(a==9){d.commitCode()}g&&g.execute()},false);c._l()},_l2:function(d){var c=this,b=new IG$._I3e(),a="<smsg><item uid='"+d.get("uid")+"'/></smsg>",e=c.down("[name=dgrid]");b.init(c,{ack:"30",payload:a,mbody:IG$._I2e({option:"delete"})},c,function(f){e.store.remove(d)},null);b._l()},initComponent:function(){var a=this;$s.apply(this,{tbar:[{iconCls:"icon-toolbar-import",tooltip:IRm$.r1("L_IMPORT_FILE"),text:IRm$.r1("L_IMPORT_FILE"),handler:function(){this._t$("cmd_import")},scope:this},{iconCls:"icon-refresh",tooltip:"Reload",handler:function(){this._t$("cmd_reload")},scope:this},"-",{iconCls:"icon-toolbar-runreport",tooltip:"Open Dashboard Resources",handler:function(){this._t$("cmd_mgr_rcs")},scope:this}],items:[{xtype:"container",layout:{type:"vbox",align:"stretch"},items:[{html:"<div class='m_fileupload'></div>",name:"d_file",height:120,hidden:true,bodyPadding:10},{name:"d_upfiles",xtype:"gridpanel",height:120,hidden:true,selType:"checkboxmodel",selModel:{mode:"MULTI"},store:{fields:["uid","filename","fileext"]},columns:[{text:IRm$.r1("L_FILENAME"),dataIndex:"filename",flex:1},{text:IRm$.r1("L_FILEEXT"),dataIndex:"fileext",flex:1},{xtype:"actioncolumn",width:20,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(c,e,b){var d=c.store.getAt(e);c.store.remove(d)}}]}],fbar:["->",{xtype:"button",text:"Commit All Files",handler:function(){this._t$("cmd_c_files")},scope:this},{xtype:"button",text:"Cancel All Files",handler:function(){var c=this,b=c.down("[name=d_upfiles]");b.store.removeAll();b.hide();c.down("[name=d_file]").hide()},scope:this}]},{xtype:"gridpanel",name:"dgrid",flex:1,selType:"checkboxmodel",selModel:{mode:"MULTI"},store:{fields:["uid","name","type","filename","btype","memo","imgwidth","imgheight","fileext"]},columns:[{text:IRm$.r1("B_TYPE"),width:100,dataIndex:"btype"},{text:IRm$.r1("B_NAME"),flex:1,dataIndex:"name"},{text:IRm$.r1("L_FILENAME"),flex:1,dataIndex:"memo"},{text:IRm$.r1("L_FILEEXT"),width:120,dataIndex:"fileext"},{text:IRm$.r1("B_WIDTH"),dataIndex:"imgwidth",width:80},{text:IRm$.r1("B_HEIGHT"),dataIndex:"imgheight",width:80},{xtype:"actioncolumn",width:40,items:[{iconCls:"icon-grid-delete",tooltip:"Delete item",handler:function(c,f,b){var d=this,e=c.store.getAt(f);IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",e.get("name")),function(g){if(g=="yes"){e&&d._l2(e)}})},scope:this}]}],listeners:{cellclick:function(b,c,m,d,l,n,g,h){var k=this,f=d.get("fileext"),o=(/png|gif|jpg|jpeg/).test(f);if(m==2&&o){var j=new IG$._dRp({uid:d.get("uid")});IG$._I_5(this,j)}},scope:this}}]}]});IG$._dR.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(a){a._m1()}}});IG$._xA=$s.extend(IG$._I57,{scroll:false,initialized:false,closable:true,layout:"fit",bodyPadding:5,iconCls:"icon-ing-docdef",curnode:null,cursop:null,_1:function(){var a=this;if(a._cmode==2){a._IFd("BusinessLogic",0)}else{a._IFd("BusinessProcess",0);a._IFd("DashboardResources",1)}},_IFd:function(f,d){var c=this,a,e=this.down("[name=m_navi]"),b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({uid:"/"+f,name:f,type:"Workspace",post:"create",duty:"everyone",mode:"s"},"uid;type;name;post;duty;mode"),mbody:IG$._I2e({option:"translate"})},c,function(g){var j=this,l=IG$._I18(g,"/smsg/item"),k=l?IG$._I1b(l,"uid"):null,h;if(k){if(d==0){a=new IG$._Idd({name:"mtree",rootuid:k,_s1:function(s){var w=this,n=this.customMenu,t=s.get("type").toLowerCase(),v=s.get("name"),o=s.get("nodepath"),y=s.get("uid"),q=s.get("type"),x=(s.get("writable")=="T"||s.get("manage")=="T")?true:false,u=(s.get("manage")=="T")?true:false,m=false;n.removeAll();if(x||u){m=true;n.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",y,o,s)},scope:this});if(t=="folder"){n.add({text:IRm$.r1("L_REMOVE"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._IHf.call(this,y,s)},scope:this})}}return m},_i4:new IG$._I3d(j,j.rs__i3),_i3:new IG$._I3d(j,j.rs__i3)});e.add(a)}else{if(d==1){h=j.down("[name=m_1]");h.uid=k;h._IFe.call(h)}}}});b._l()},rs__i3:function(b){var a=this,c=a.down("[name=t_btn]");c.setDisabled(true);a._s1=b;if(b.get("writable")=="T"||b.get("manageable")=="T"){c.setDisabled(false)}a.l1(b)},l1:function(c){var a=this,b=new IG$._I3e();b.init(a,{ack:"5",payload:IG$._I2d({uid:c.get("uid")}),mbody:IG$._I2e({option:""})},a,function(d){var j=IG$._I18(d,"/smsg/item"),h=(j)?IG$._I26(j):null,k=[],e=this.down("[name=g1]"),f,g;if(h){for(f=0;f<h.length;f++){g=IG$._I1c(h[f]);if((a._cmode==2&&g.type=="JavaClass")||(a._cmode!=2&&g.type=="ClassModule")){k.push(g)}}}e.store.loadData(k)},false);b._l()},_d:function(a){var c=this,b=c.down("[name=mtree]");if(c._s1){b._I90.call(b,a,c._s1.get("uid"),c._s1.get("nodepath"),c._s1)}},initComponent:function(){var a=this;a.title=IRm$.r1("I_MGR_DBD");a.items=[{xtype:"panel",layout:"card",border:0,defaults:{deferredRender:false},name:"n_c",dockedItems:[{xtype:"toolbar",dock:"top",hidden:a._cmode==2,items:[{xtype:"displayfield",value:IRm$.r1("L_SEL_MODE")},"-",{xtype:"button",text:IRm$.r1("L_CLASS_MOD"),name:"b_0",pressed:1,handler:function(){var c=this,b=c.down("[name=n_c]").getLayout();c.down("[name=b_0]").toggle(true);c.down("[name=b_1]").toggle(false);c.down("[name=b_2]").toggle(false);b.setActiveItem(0)},scope:this},{xtype:"button",name:"b_1",text:IRm$.r1("L_RESOURCE"),handler:function(){var c=this,b=c.down("[name=n_c]").getLayout();c.down("[name=b_0]").toggle(false);c.down("[name=b_1]").toggle(true);c.down("[name=b_2]").toggle(false);b.setActiveItem(1)},scope:this},{xtype:"button",name:"b_2",text:IRm$.r1("L_MENU"),handler:function(){var c=this,b=c.down("[name=n_c]").getLayout();c.down("[name=b_0]").toggle(false);c.down("[name=b_1]").toggle(false);c.down("[name=b_2]").toggle(true);b.setActiveItem(2)},scope:this}]}],items:[{xtype:"panel",layout:"border",name:"m_0",border:false,title:IRm$.r1("L_CLASS_MOD"),items:[{xtype:"panel",layout:"fit",region:"west",collapsed:false,width:200,title:IRm$.r1("L_NAVIGATOR"),name:"m_navi",tbar:[{xtype:"button",name:"t_btn",text:IRm$.r1("L_CREATE_ITEM"),disabled:true,menu:{xtype:"menu",items:a._cmode==2?[{text:IRm$.r1("D_JAVAPACKAGE"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._d("JavaPackage")},scope:this},"-",{text:IRm$.r1("D_JAVACLASS"),hidden:ig$.fm.ig_n_jcm,handler:function(){this._d("JavaClass")},scope:this}]:[{text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._d("Folder")},scope:this},"-",{text:IRm$.r1("D_CLASSMODULE"),hidden:ig$.fm.ig_n_jcm,handler:function(){this._d("ClassModule")},scope:this}]}},{xtype:"button",iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){var c=this,b=c.down("[name=mtree]"),d=b.getRootNode();b._I92.call(b,d)},scope:this}],items:[]},{xtype:"panel",region:"center",flex:1,layout:"fit",tbar:[{text:"Compile",handler:function(){var c=this,d=c.down("[name=g1]"),b="<smsg>",g=d.getSelectionModel().selected,h,e=0,f=new IG$._I3e();IG$._I55(ig$.appname,"Confirm to compile selected content?",function(j){if(j=="yes"){if(g.length>0){for(i=0;i<g.length;i++){h=g.items[i];b+="<item uid='"+h.get("uid")+"' option='compile'/>";e++}b+="</smsg>";if(e>0){c.setLoading(true);f.init(c,{ack:"73",payload:b,mbody:IG$._I2e({option:"compile"})},c,function(q){var o,n,k=c.down("[name=g1]"),l=IG$._I18(q,"/smsg"),s=IG$._I26(l),m,r,t;for(o=0;o<s.length;o++){r=IG$._I1b(s[o],"uid");t=IG$._I1b(s[o],"status");m=null;for(n=0;n<k.store.data.items.length;n++){if(k.store.data.items[n].get("uid")==r){m=k.store.data.items[n];break}}if(m){m.set("msg",t=="S"?"Success":"Error")}}},null);f._l()}}}})},scope:this},{text:IRm$.r1("B_REMOVE"),handler:function(){var c=this,d=c.down("[name=g1]"),b="<smsg>",g=d.getSelectionModel().selected,h,e=0,f=new IG$._I3e();IG$._I55(ig$.appname,"Confirm to delete content?",function(j){if(j=="yes"){if(g.length>0){for(i=0;i<g.length;i++){h=g.items[i];b+="<item uid='"+h.get("uid")+"'/>";e++}b+="</smsg>";if(e>0){c.setLoading(true);f.init(c,{ack:"30",payload:b,mbody:IG$._I2e({option:"delete"})},c,function(k){var l;for(l=g.length-1;l>=0;l--){d.store.remove(g.items[l])}},null);f._l()}}}})},scope:this}],items:[{xtype:"gridpanel",name:"g1",selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"MULTI"},store:{xtype:"store",fields:["uid","name","description","nodepath","type","writable","msg"]},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",width:250},{text:IRm$.r1("B_DESC"),dataIndex:"description",flex:1},{text:"Message",dataIndex:"msg",width:80},{xtype:"actioncolumn",width:30,menuDisabled:true,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,h,d){var b=e,c=b.store,g=c.getAt(h),f=IG$._I7d;if(f){f.m1$7.call(f,g.get("uid"),g.get("type").toLowerCase(),g.get("name"),g.get("nodepath"),true,g.get("writable")=="T")}},scope:this}]}],listeners:{cellclick:function(b,f,m,j,l,n,k,d){if(m==3){var h=b,o=h.store,g=o.getAt(n),c=IG$._I7d;if(c){c.m1$7.call(c,g.get("uid"),g.get("type").toLowerCase(),g.get("name"),g.get("nodepath"),true,g.get("writable")=="T")}}},scope:this}}]}]},new IG$._dR({cmode:"global",title:IRm$.r1("L_RESOURCE"),name:"m_1"}),new IG$._I7_({title:IRm$.r1("L_MENU"),name:"m_2"})]}];this.listeners={afterrender:function(b){b._1.call(b)}};IG$._xA.superclass.initComponent.call(this)}});IG$._I7k=$s.extend(IG$._I57,{scroll:false,initialized:false,closable:true,layout:"fit",bodyPadding:5,iconCls:"icon-ing-docdef",curnode:null,cursop:null,_IFd:function(){var c=this,a,d=this.down("[name=m_navi]"),b=new IG$._I3e();b.init(c,{ack:"11",payload:IG$._I2d({uid:"/SYS_Lookup",name:"SYS_Lookup",type:"Workspace",post:"create",duty:"everyone",mode:"s"},"uid;type;name;post;duty;mode"),mbody:IG$._I2e({option:"translate"})},c,function(e){var g=IG$._I18(e,"/smsg/item"),f=g?IG$._I1b(g,"uid"):null;if(f){c.tuid=f;a=new IG$._Idd({name:"mtree",rootuid:f,rootname:"Code Mapping",_s1:function(m){var s=this,j=this.customMenu,n=m.get("type").toLowerCase(),q=m.get("name"),k=m.get("nodepath"),u=m.get("uid"),l=m.get("type"),t=(m.get("writable")=="T"||m.get("manage")=="T")?true:false,o=(m.get("manage")=="T")?true:false,h=false;j.removeAll();if(t||o){h=true;j.add({text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._I90.call(this,"Folder",u,k,m)},scope:this});j.add({text:IRm$.r1("L_RENAME_ITEM",q),hidden:ig$.fm.ig_n_ren,handler:function(){this._I91.call(this,q,u,k,record)},scope:this})}return h},_i4:new IG$._I3d(c,c.rs__i3),_i3:new IG$._I3d(c,c.rs__i3)});d.add(a)}});b._l()},rs__i3:function(b){var a=this,c=a.down("[name=t_btn]");c.setDisabled(true);a._s1=b;if(b.get("writable")=="T"||b.get("manageable")=="T"){c.setDisabled(false)}a.l1(b)},l1:function(c){var a=this,b=new IG$._I3e();b.init(a,{ack:"5",payload:IG$._I2d({uid:c.get("uid")}),mbody:IG$._I2e({option:""})},a,function(d){var j=IG$._I18(d,"/smsg/item"),h=(j)?IG$._I26(j):null,k=[],e=this.down("[name=g1]"),f,g;if(h){for(f=0;f<h.length;f++){g=IG$._I1c(h[f]);if(g.type=="CodeMap"){k.push(g)}}}e.store.loadData(k)},false);b._l()},_d:function(a){var c=this,b=c.down("[name=mtree]");if(c._s1){b._I90.call(b,a,c._s1.get("uid"),c._s1.get("nodepath"),c._s1)}},_t$:function(c){var h=this,a,b,f,g=0,d=false;switch(c){case"cmd_rename":a=h.down("[name=g1]");b=a.getSelectionModel().selected;if(b&&b.length>0){f=b.items[0];var e=new IG$._Icd({itemname:f.get("name"),uid:f.get("uid"),nodepath:f.get("nodepath"),itemtype:f.get("type"),memo:f.get("memo")||"",callback:new IG$._I3d(h,function(k){})});IG$._I_5(this,e)}break;case"cmd_move":a=h.down("[name=g1]");b=a.getSelectionModel().selected;if(b&&b.length>0){var h=this,j=new IG$._I96({visibleItems:"workspace;folder",targetobj:"folder",u5x:{cubebrowse:false,rootuid:h.tuid},callback:new IG$._I3d(h,function(k){if(k){IG$._I55(IRm$.r1("B_CONFIRM"),IRm$.r1("B_CD_MHS",k.name),function(l){if(l=="yes"){address="<smsg>";g=0;for(i=0;i<b.length;i++){f=b.items[i];if(f.get("writable")=="T"||f.get("manage")=="T"){address+="<item uid='"+f.get("uid")+"'/>";g++}}address+="</smsg>";if(g>0){h.setLoading(true);req=new IG$._I3e();req.init(h,{ack:"11",payload:address,mbody:IG$._I2e({option:(d==true?"copy":"move"),target:k.uid})},h,function(m){var o=this,n=o.down("[name=mtree]"),q=n.getRootNode();n._I92.call(n,q)},null,null);req._l()}}})}})});IG$._I_5(this,j)}break;case"cmd_delete":a=h.down("[name=g1]");b=a.getSelectionModel().selected;if(b&&b.length>0){f=b.items[0];IG$._I55(ig$.appname,"Confirm to delete content?",function(l){if(l=="yes"){var k=new IG$._I3e();k.init(h,{ack:"7",payload:"<smsg><item uid='"+f.get("uid")+"'/></smsg>",mbody:IG$._I2e()},h,function(m){a.store.remove(f)},null);k._l()}})}break;case"cmd_export_meta":IG$._I55(IRm$.r1("T_EXP_MC"),IRm$.r1("T_EXP_MC_Q"),function(r){var k=h,o,m=new IG$._I3e(),l,q,n;o={uid:k.tuid,name:"SYS_Lookup",type:"Workspace",nodepath:"/SYS_Lookup"};if(o&&o.uid&&r=="yes"){n="<smsg>";n+="<item"+IG$._I20(o,"uid;nodepath;name;type","s")+"/>";n+="</smsg>";m.init(k,{ack:"5",payload:n,mbody:IG$._I2e({output:"file"})},k,function(s){var v=IG$._I18(s,"/smsg/item"),u,t;if(v){u=IG$._I1b(v,"luid");t=IG$._I1b(v,"filename");if(u&&t){$.download(ig$.servlet,[{name:"ack",value:"35"},{name:"payload",value:u},{name:"mbody",value:t},{name:"_mts_",value:(IG$._g$a||"")}],"POST")}}},null);m._l()}},h,h);break}},initComponent:function(){var a=this;a.items=[{xtype:"panel",layout:"border",border:false,items:[{xtype:"panel",layout:"fit",region:"west",collapsed:false,width:200,title:"Navigator",name:"m_navi",tbar:[{xtype:"button",name:"t_btn",text:IRm$.r1("B_CR"),disabled:true,menu:{xtype:"menu",items:[{text:IRm$.r1("B_FOLDER"),hidden:ig$.fm.ig_n_f_f,handler:function(){this._d("Folder")},scope:this},"-",{text:IRm$.r1("L_CODEMAPPING"),hidden:ig$.fm.ig_n_lk,handler:function(){this._d("CodeMap")},scope:this}]}},{xtype:"button",iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){var c=this,b=c.down("[name=mtree]"),d=b.getRootNode();b._I92.call(b,d)},scope:this}],items:[]},{xtype:"panel",region:"center",flex:1,layout:"fit",tbar:[{xtype:"button",text:IRm$.r1("L_RENAME"),handler:function(){this._t$("cmd_rename")},scope:this},{xtype:"button",text:IRm$.r1("L_MOVE"),handler:function(){this._t$("cmd_move")},scope:this},{xtype:"button",text:IRm$.r1("L_REMOVE"),handler:function(){this._t$("cmd_delete")},scope:this},"->",{text:IRm$.r1("L_EXPORT_META"),handler:function(){this._t$("cmd_export_meta")},scope:this}],items:[{xtype:"gridpanel",name:"g1",store:{xtype:"store",fields:["uid","name","description","nodepath","type","writable"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell",mode:"SINGLE"},columns:[{text:IRm$.r1("B_NAME"),dataIndex:"name",tdCls:"igc-td-link"},{text:IRm$.r1("B_DESC"),dataIndex:"description",flex:1},{xtype:"actioncolumn",width:30,menuDisabled:true,items:[{iconCls:"icon-grid-config",tooltip:IRm$.r1("L_EDIT"),handler:function(e,h,d){var b=e,c=b.store,g=c.getAt(h),f=IG$._I7d;if(f){f.m1$7.call(f,g.get("uid"),g.get("type").toLowerCase(),g.get("name"),g.get("nodepath"),false,g.get("writable")=="T")}},scope:this}]}],listeners:{cellclick:function(b,f,m,j,l,n,k,d){if(m==1){var h=b,o=h.store,g=o.getAt(n),c=IG$._I7d;if(c){c.m1$7.call(c,g.get("uid"),g.get("type").toLowerCase(),g.get("name"),g.get("nodepath"),false,g.get("writable")=="T")}}},scope:this}}]}]}];this.listeners={afterrender:function(b){b._IFd.call(b)}};IG$._I7k.superclass.initComponent.call(this)}});IG$._I70=$s.extend($s.panel,{closable:true,iconCls:"icon-ing-docdef",layout:"fit",bodyPadding:10,_IFd:function(){var b=this,a=new IG$._I3e();a.showerror=false;a.init(b,{ack:"5",payload:IG$._I2d({uid:b.pp}),mbody:IG$._I2e({option:""})},b,b.rs_l1,b.rs_l1);a._l()},rs_l1:function(f){var h=this,c=f?IG$._I18(f,"/smsg/item"):null,g=c?IG$._I26(c):null,b=h.down("[name=c_loc]"),e=h.down("[name=c_loc2]"),d,j,a=[{name:"Select locale",value:""}];if(g&&g.length){for(d=0;d<g.length;d++){j=IG$._I1c(g[d]);a.push({name:j.name,value:j.uid})}}b.store.loadData(a);b.setValue("");e.store.loadData(a);e.setValue("")},c1:function(e){var d=this,h=d.down("[name=c_loc"+(e?"2":"")+"]"),f=d.down("[name=grdrcs]"),b=d.down("[name=vcol1]"),a=d.down("[name=vcol2]"),c,g=h.getValue();if(g){d.F1(g,e)}else{if(e){a.setText("-");for(c=0;c<f.store.data.items.length;c++){f.store.data.items[c].set("value2","")}for(c=0;c<f.__dp.length;c++){f.__dp[c].value2=""}}else{b.setText("-");a.setText("-");d._gl([])}}},_gl:function(b){var f=this,j=f.down("[name=grdrcs]"),d=f.down("[name=_pb_d]"),e=f.down("[name=_pb_c]"),g=100,h=Math.ceil(b.length/g),a=[],c;j.__dp=b;j.__p=0;for(c=0;c<h;c++){a.push({name:""+(c+1),value:c})}e.store.loadData(a);e.setValue(0);e.setDisabled(h>1?false:true);d.setValue("Count : "+b.length);f._g2()},_g2:function(d){var j=this,m=j.down("[name=grdrcs]"),h=j.down("[name=_pb_c]"),l=j.down("[name=_pb_p]"),g=j.down("[name=_pb_d]"),n=j.down("[name=_pb_n]"),e=m.__dp,a=m.__p,c=[],f,k=100,b=Math.ceil(e.length/k);if(d==2){m.__p=a=a+1}else{if(d==1&&a>0){m.__p=a=a-1}}if(d==3){g.setValue("Count : "+e.length)}if(a*k>e.length){m.__p=a=b}h.setValue(m.__p);for(f=a*k;f<Math.min(e.length,(a+1)*k);f++){c.push(e[f])}l.setDisabled(a>0?false:true);n.setDisabled(b>0&&b>a?false:true);m.store.loadData(c)},F1:function(a,d){var c=this,b;b=new IG$._I3e();b.init(c,{ack:"5",payload:IG$._I2d({uid:a}),mbody:IG$._I2e({option:""})},c,c._IM9,null,d);b._l()},_IM9:function(j,h){var m=this,q=m.down("[name=grdrcs]"),a=IG$._I18(j,"/smsg/item"),l,k,o,f=m.down("[name=vcol1]"),c=m.down("[name=vcol2]"),n={},e,g,d=[],b;if(a){k=IG$._I1b(a,"uid");o=IG$._I1b(a,"name");l=IG$._I26(a);for(g=0;g<l.length;g++){b={locale:o,name:IG$._I1b(l[g],"name"),group:IG$._I1b(l[g],"group"),value:IG$._I24(l[g])};d.push(b)}}if(h){for(g=0;g<q.__dp.length;g++){e=q.__dp[g];n[e.name]=e}for(g=0;g<q.store.data.length;g++){e=q.__dp[g];n[e.name]=e}for(g=0;g<d.length;g++){e=n[d[g].name];if(e){e.value2=d[g].value}}m._g2();c.setText(o)}else{f.setText(o);c.setText("-");m._gl(d)}},_t$:function(e){var j=this;switch(e){case"cmd_save":j.s1();break;case"cmd_refresh":j._IFd();break;case"cmd_delete":var l=j.down("[name=grdrcs]"),c=l.getSelectionModel().selected,g,d=l.__dp,b=l.__p*100,h,a;for(h=0;h<c.length;h++){g=c.items[h];a=l.store.indexOf(g);l.store.remove(g);d.splice(a,1)}j._g2(3);break;case"cmd_add_lcs":var l=j.down("[name=grdrcs]"),d=l.__dp;d.splice(0,0,{name:"",value:""});l.__p=0;j._g2(3);break;case"cmd_add_lang":var f=new IG$._I6e({parentnodepath:j.pp,itemtype:"PrivateContent",parentuid:j.pp});f.callback=new IG$._I3d(this,this.r_I90);IG$._I_5(this,f);break;case"cmd_import":var k=j.down("[name=pimp]");k.setVisible(true);break;case"cmd_export":var k=j.down("[name=pimp]");k.setVisible(true);j.x1();break}},r_I90:function(a){this._IFd()},s1:function(){var a=this,b=a.down("[name=c_loc]").getValue();this.ss1(b,true)},ss1:function(d,a){var f=this,j=f.down("[name=grdrcs]"),c,b,h,e,g;if(d){cnt="<smsg><item>";for(c=0;c<j.__dp.length;c++){b=j.__dp[c];e=b.name;h=(a?b.value:b.value2);if(e&&h){cnt+="<li name='"+e+"' group='"+(b.group||"")+"'><![CDATA["+h+"]]></li>"}}cnt+="</item></smsg>";g=new IG$._I3e();g.init(f,{ack:"31",payload:IG$._I2d({uid:d,is_locale:"T"},"uid;is_locale"),mbody:cnt},f,f.rs_s1,null,a);g._l()}else{a&&IG$._I54(null,IRm$.r1("E_LM_SEL"),null,null,1,"error")}},rs_s1:function(a,b){var d=this;if(b){var c=d.down("[name=c_loc2]").getValue();if(c){d.ss1(c,false);return}}IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,d,0,"success")},ca:function(){var f=this,g=f.down("[name=timp]").getValue(),l=f.down("[name=grdrcs]"),m,h,k,j,b,e,a,d={},c=[];a="group";m=g.split("\n");for(e=0;e<m.length;e++){h=m[e];if(h){if(h.charAt(0)==";"){a=h.replace(/;/g,"");a=IG$.trim12(a)}else{k=h.split("\t");if(k.length>1){j=IG$.trim12(k[1]);b=IG$.trim12(k[0]);if(!d[b]){if(j.charAt(0)=='"'&&j.charAt(j.length-1)=='"'){j=j.substring(1,j.length-1)}c.push({group:a,name:b,value:j});d[b]=1}}}}}f._gl(c)},x1:function(){var f=this,g=f.down("[name=timp]"),l=f.down("[name=grdrcs]"),m,d,j,h,b,e,a,c=[],k=[];for(e=0;e<l.__dp.length;e++){d=l.__dp[e];c.push({group:d.group,value:d.name+"\t"+d.value})}c.sort(function(o,n){var q=0;if(o.group!=n.group){q=o.group>n.group?-1:1}return q});a=null;for(e=0;e<c.length;e++){if(c[e].group!=a){k.push(";;; "+c[e].group);a=c[e].group}k.push(c[e].value)}g.setValue(k.join("\n"))},a1:function(e){var d=this,c,h,f=d.down("[name=grdrcs]"),a=f.store,b=[],g=[];for(c=0;c<e.records.length;c++){h=e.records[c];g.push({uid:h.get("uid"),name:h.get("name"),type:h.get("type")})}for(c=0;c<a.data.items.length;c++){h=a.data.items[c];b[h.get("name")]=1}d.a3(g,b)},a3:function(g,a){var e=this,d=[];$.each(g,function(h,l){var j=e.a2(l),k;if(!a[l.name]){d.push({name:l.name,value:""});a[l.name]=1}if(j){k=new IG$._I3e();k.init(e,{ack:"5",payload:"<smsg><item"+IG$._I20({uid:l.uid,name:l.name,type:l.type},"uid;nodepath;name;type","s")+"/></smsg>",mbody:IG$._I2e({option:"metrics"})},e,function(m){var s=[],r=IG$._I18(m,"/smsg/item"),q=IG$._I26(r),o,n;for(n=0;n<q.length;n++){o=IG$._I1c(q[n]);s.push(o)}if(s.length){e.a3(s,a)}},null);k._l()}});if(d.length){var f=e.down("[name=grdrcs]"),c=f.__dp,b;for(b=0;b<d.length;b++){c.splice(0,0,d[b])}f.__p=0;e._g2(3)}},a2:function(a){var c=a.type.toLowerCase(),b=0;if((/workspace|folder|cube|sqlcube|datacube/).test(c)){b=1}return b},initComponent:function(){var a=this;a.pp="/SYS_Config/"+(a.dicmode?"dictionary":"locale"),$s.apply(this,{items:[{xtype:"form",layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"fieldset",name:"pimp",title:"Copy-paste your locale document here",hidden:true,flex:2,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textarea",name:"timp",flex:1},{xtype:"fieldcontainer",layout:{type:"hbox",align:"stretch"},items:[{xtype:"button",text:"Import",handler:function(){this.ca()},scope:this},{xtype:"button",text:"Close",handler:function(){var b=this,c=b.down("[name=pimp]");c.setVisible(false)},scope:this},{xtype:"container",flex:1}]}]},{xtype:"gridpanel",name:"grdrcs",store:{xtype:"store",fields:["name","value","value2","locale","group"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},flex:3,plugins:[{ptype:"cellediting",clicksToEdit:false,listeners:{edit:function(h,j,f){var k=this,g=j.record,m=j.field,o=j.value,q=k.down("[name=grdrcs]"),b=q.store.indexOf(g),d=q.__dp,l=q.__p,c=100,g;g=d[c*l+b];g[m]=o},scope:this}}],viewConfig:a.dicmode?{plugins:{ptype:"gridviewdragdrop",ddGroup:"_I$RD_G_1"},__ing:1,listeners:{beforedrop:function(e,f,h,k,j){var c=false,g,b,d=a.down("[name=c_loc]");f.copy=true;if(d.getValue()){a.a1.call(a,f)}return c},drop:function(d,e,g,b){var f=false,c=this;return f}}}:null,bbar:{xtype:"toolbar",name:"_pb_",items:[{xtype:"button",name:"_pb_p",disabled:true,iconCls:"x-tbar-page-prev",handler:function(){this._g2(1)},scope:this},"-",{xtype:"combobox",name:"_pb_c",fieldLabel:"Page",labelWidth:50,width:120,queryMode:"local",displayField:"name",labelField:"name",valueField:"value",editable:false,autoSelect:true,disabled:true,store:{fields:["name","value"]},listeners:{select:function(b,g,c,d){var e=this,f=e.down("[name=grdrcs]");f.__p=Number(b.getValue());e._g2()},scope:this}},"-",{xtype:"button",name:"_pb_n",disabled:true,iconCls:"x-tbar-page-next",handler:function(){this._g2(2)},scope:this},"->",{xtype:"displayfield",name:"_pb_d",value:"No data to display"}]},columns:[{xtype:"gridcolumn",text:"Group",dataIndex:"group",width:200,editor:{allowBlank:true}},{xtype:"gridcolumn",text:"Name",dataIndex:"name",width:200,editor:{allowBlank:false}},{xtype:"gridcolumn",text:"Value",name:"vcol1",flex:1,dataIndex:"value",editor:{allowBlank:true}},{xtype:"gridcolumn",text:"Value",name:"vcol2",flex:1,dataIndex:"value2",editor:{allowBlank:true}}]}]}],tbar:[{iconCls:"icon-toolbar-save",tooltip:IRm$.r1("L_SAVE_CONTENT"),handler:function(){this._t$("cmd_save")},scope:this},"-",{iconCls:"icon-toolbar-add",tooltip:IRm$.r1("L_LM_ADD"),handler:function(){this._t$("cmd_add_lang")},scope:this},{xtype:"combobox",name:"c_loc",fieldLabel:"Base Language",labelWidth:100,queryMode:"local",displayField:"name",labelField:"name",valueField:"value",editable:false,autoSelect:true,store:{fields:["name","value"]},listeners:{change:function(b,e,c,d){this.c1()},scope:this}},{iconCls:"icon-refresh",tooltip:IRm$.r1("L_REFRESH"),handler:function(){this._t$("cmd_refresh")},scope:this},{iconCls:"icon-toolbar-remove",tooltip:IRm$.r1("B_DELETE_ITEM"),handler:function(){this._t$("cmd_delete")},scope:this},"-",{iconCls:"icon-toolbar-add",tooltip:IRm$.r1("L_LM_LCS"),handler:function(){this._t$("cmd_add_lcs")},scope:this},"-",{iconCls:"icon-ing-dwn",tooltip:IRm$.r1("L_LM_IMP"),handler:function(){this._t$("cmd_import")},scope:this},{iconCls:"icon-ing-upl",tooltip:IRm$.r1("L_LM_EXP"),handler:function(){this._t$("cmd_export")},scope:this},"-",{xtype:"combobox",name:"c_loc2",fieldLabel:"Second Language",labelWidth:100,queryMode:"local",displayField:"name",labelField:"name",valueField:"value",editable:false,autoSelect:true,store:{fields:["name","value"]},listeners:{change:function(b,e,c,d){this.c1(true)},scope:this}},]});IG$._I70.superclass.initComponent.call(this)},listeners:{afterrender:function(a){var b=this;b._IFd()}}});IG$._Ia5=$s.extend(IG$._I57,{padding:0,closable:true,layout:"fit",_IFd:function(){var c=this,b,a=c.down("[name=t_save]"),d=c.down("[name=t_save_as]");if(this.writable==true||this.uid==""){a.setVisible(true)}d.setVisible(true);b=new IG$._I3e();b.init(c,{ack:"5",payload:IG$._I2d({uid:c.uid}),mbody:IG$._I2e({option:"standard"})},c,c._IM9,false);b._l()},_IM9:function(a){},_t$:function(d){var c=this;switch(d){case"cmd_save":var a=this.uid;if(!a){this._IJ5(false)}else{var b=null;this.fV6(a,b,target)}break;case"cmd_saveas":this.$f1(false);break}},fV6:function(b,e,c){var a=this;var d=new IG$._I3e();d.init(a,{ack:"31",payload:IG$._I2d({uid:b}),mbody:e},a,a.rs_fV6,null,[c]);d._l()},r_IJ6:function(a,b){var c=(b?b[0]:false);if(c==true){this._IM8()}else{this._ILb_=false;IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}},$f1:function(a){var b=new IG$._I96({mode:"newitem",initpath:this.nodepath});b.callback=new IG$._I3d(this,this.$f2,a);IG$._I_5(this,b)},$f2:function(d,b){var a=this,e=this._ILa._IJ1.call(this._ILa),c=new IG$._I3e();c.init(a,{ack:"31",payload:"<smsg><item address='"+d.nodepath+"/"+d.name+"' name='"+d.name+"' type='"+(this.itemtype?this.itemtype:"Report")+"' pid='"+d.uid+"' description=''/></smsg>",mbody:e},a,a._IO5,a._IO6,[d.name,b,d.nodepath,d.uid,e]);c.showerror=false;c._l()},_IO6:function(f,c){var b=this,g=c[0],j=c[1],d=c[2],h=c[3],e=c[4],a=IG$._I27(f);if(a=="0x12e0"){IG$._I55(ig$.appname,g+" already exist on the server. Would you overwrite existing item with this copy?",function(l){if(l=="yes"){var k=new IG$._I3e();k.init(b,{ack:"31",payload:"<smsg><item address='"+d+"/"+g+"' name='"+g+"' type='"+(this.itemtype?this.itemtype:"UIPage")+"' pid='"+h+"' description='' overwrite='T'/></smsg>",mbody:e},b,b._IO5,null,[g,j,d]);k._l()}},b,b)}else{IG$._I51(f,b)}},_IO5:function(a,d){var c,g=d[0],e=d[1],f=IG$._I18(a,"/smsg/item"),b=IG$._I1b(f,"name");if(e==true){this._IM8();return}this._ILb_=false;this.uid=IG$._I1b(f,"uid");this.uid=this.uid;this.setTitle(b)},_IM8:function(c){var b=this;if(c=="no"){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){this._IM8()},false);a._l()}else{if(c=="yes"){var a=new IG$._I3e();a.init(b,{ack:"11",payload:IG$._I2d({uid:b.uid}),mbody:IG$._I2e({option:"lock",detail:"close"})},b,function(d){this._t$("cmd_save",true)},false);a._l()}}},initComponent:function(){var b=this,a=[];b.items=[{xtype:"panel",padding:10,layout:{type:"vbox",align:"stretch"},border:0,items:[{xtype:"fieldset",title:"Global Filter",layout:{type:"vbox",align:"none"},items:[{xtype:"fieldcontainer",fieldLabel:"Filter Item",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",name:"gfilter"},{xtype:"button",text:".."}]},{xtype:"combobox",fieldLabel:"Selection type",labelField:"disp",valueField:"type",store:{xtype:"store",fields:["disp","type"],data:a}}]},{xtype:"fieldset",title:"Dashboard Items",layout:"fit",flex:1,items:[{xtype:"gridpanel",store:{xtype:"store",fields:["title","type","dispoption","nodepath","uid","name"]},selType:"checkboxmodel",selModel:{checkSelector:".x-grid-cell"},columns:[{xtype:"gridcolumn",text:"Title"},{xtype:"gridcolumn",text:"Display type"},{xtype:"gridcolumn",text:"Display Option"},{xtype:"gridcolumn",text:"Bind report",flex:1}],tbar:[{xtype:"button",text:"Add View",handler:function(){var c=new IG$._Ia8({});IG$._I_5(this,c)},scope:this},{xtype:"button",text:"Add Filter",handler:function(){var c=new IG$._Ia7({});IG$._I_5(this,c)},scope:this},{xtype:"button",text:"Edit",handler:function(){var c=new IG$._Ia8({});IG$._I_5(this,c)},scope:this}]}]},{xtype:"textarea",name:"layouthtml",fieldLabel:"Layout HTML",height:200}]}];b.tbar=[{iconCls:"icon-toolbar-save",name:"t_save",tooltip:IRm$.r1("L_SAVE_CONTENT"),hidden:true,handler:function(){this._t$("cmd_save")},scope:this},{iconCls:"icon-toolbar-saveas",name:"t_save_as",tooltip:IRm$.r1("L_SAVE_REPORT_AS"),hidden:true,handler:function(){this._t$("cmd_saveas")},scope:this}];IG$._Ia5.superclass.initComponent.call(this)},listeners:{afterrender:function(a){a._IFd()}}});IG$._Ia8=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:360,height:400,autoHeight:false,parentnodepath:null,itemtype:null,parentuid:null,callback:null,fV9:function(){},initComponent:function(){var a=this;a.title=IRm$.r1("L_MAKEITEM");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:"Basic Option",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:"View type",labelField:"label",displayField:"label",valueField:"value",editable:false,store:{xtype:"store",fields:["label","value"],data:[{label:"Chart",value:"chart"},{label:"Report",value:"report"},{label:"As saved",value:"saved"},{label:"R statistics",value:"R"},{label:"Filter",value:"filter"}]}},{xtype:"fieldcontainer",fieldLabel:"Report Item",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield"},{xtype:"button",text:".."}]}]},{xtype:"fieldset",title:"Size option",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"numberfield",fieldLabel:"Height",minValue:50}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.fV9()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}]});IG$._Ia8.superclass.initComponent.apply(this,arguments)}});IG$._Ia6=function(a){this.container=a;this.table=$("<table></table>").appendTo(a)};IG$._Ia6.prototype={};IG$._Ia7=$s.extend($s.window,{modal:true,region:"center",layout:"fit",closable:false,resizable:false,width:400,autoHeight:true,callback:null,fV9:function(){},r1:function(){var c=this,d,a,b=c.R1;if(!b){d=c.down("[name=filterarea]");a=$("[name=filterdiv]",d.el.dom);b=c.R1=new IG$._Ia6(a)}b.table.empty()},initComponent:function(){var a=this;a.title=IRm$.r1("L_MAKEITEM");$s.apply(this,{defaults:{bodyStyle:"padding:10px"},items:[{xtype:"form",layout:"anchor",autoScroll:true,defaults:{anchor:"100%"},items:[{xtype:"fieldset",title:"Basic Option",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"combobox",fieldLabel:"View type",labelField:"label",displayField:"label",valueField:"value",editable:false,store:{xtype:"store",fields:["label","value"],data:[{label:"Chart",value:"chart"},{label:"Report",value:"report"},{label:"As saved",value:"saved"},{label:"R statistics",value:"R"},{label:"Filter",value:"filter"}]}},{html:"<div name='filterdiv'></div>",name:"filterarea",height:300},{xtype:"fieldcontainer",fieldLabel:"Report Item",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield"},{xtype:"button",text:".."}]}]},{xtype:"fieldset",title:"Size option",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"numberfield",fieldLabel:"Height",minValue:50}]}]}],buttons:[{text:IRm$.r1("B_CONFIRM"),handler:function(){this.fV9()},scope:this},{text:IRm$.r1("B_CANCEL"),handler:function(){this.close()},scope:this}],listeners:{afterrender:function(c){var b=this;b.r1()}}});IG$._Ia7.superclass.initComponent.apply(this,arguments)}});IG$._I71=$s.extend($s.panel,{bodyStyle:"padding:5px",closable:true,iconCls:"icon-ing-docdef",layout:{type:"vbox",align:"stretch"},defaults:{anchor:"100%"},ul1:function(){var a=this.down("[name=mform]");if(a.getForm().isValid()){a.getForm().submit({url:ig$.servlet,waitMsg:"Uploading your data file",success:function(b,e){var d=IG$._I18(b.errorReader.xmlData,"/smsg/result");var c=IG$._I1b(d,"uid");a.customowner.sKK1.call(a.customowner,c)},failure:function(b,c){}})}},sKK1:function(c){var a=this,b=this.down("[name=uploadset]"),d=new IG$._I3e();b.setVisible(false);a.uid=c;a.setLoading(true,true);d.init(a,{ack:"27",payload:IG$._I2d({uid:c},"uid"),mbody:IG$._I2e({option:"meta_imp"})},a,a.rs_sK3b,null);d._l()},rs_sK3b:function(n){var b=this,f=IG$._I18(n,"/smsg"),c=IG$._I26(f),k,q=b.down("[name=metadata]"),m=q.store,a=m.getRootNode(),r=[],o,g={},e,l,j,h;for(k=0;k<c.length;k++){o=IG$._I1c(c[k]);h=o.type.toLowerCase();o.iconCls=IG$._I11(h,null);o.checked=false;if(/(cube|mcube|metrics|folder|datacube|rfolder|datemetric|nosql|mdbcube|sqlcube|javapackage)/.test(h)==true&&h!="cubemodel"){o.leaf=false}else{if(/(folder|workspace|datemetric|table|schema|pool)/.test(h)==false){o.leaf=true}}g[o.nodepath]=o;if(k==0){r.push(o)}else{if(h=="localdata"){e=g._data_contents_;if(!e){e={uid:"",type:"data_contents_",name:"_data_contents_",leaf:false,checked:false};g[e.name]=e;r.push(e)}}else{j=o.nodepath.split("/");j.splice(j.length-1,1);l=j.join("/");e=g[l]}if(e){if(e.children){e.children.push(o)}else{e.children=[o]}}else{if(j.length==1){r.push(o)}}}}while(a.firstChild){a.removeChild(a.firstChild)}for(k=0;k<r.length;k++){a.appendChild(r[k])}},_t$:function(c){var a=this,b=a;switch(c){case"cmd_imp":if(a.uid){IG$._I55("ImportMeta","Would you include meta to server?",b.do_mEp,b,b)}break}},append_node:function(c,b){var a=this;if(c.childNodes){$.each(c.childNodes,function(d,e){b.push(e);a.append_node(e,b)})}},do_mEp:function(h){if(h=="yes"){var a=this,c,g=[],k=a.down("[name=metadata]"),m=k.store,l=m.getRootNode(),b=[],o={},n,f,j=new IG$._I3e(),e=[];a.append_node(l.childNodes[0],b);if(b&&b.length>0){a.setLoading(true,true);e.push("<smsg>");e.push("<info"+IG$._I20({option:"imp_load"},"option","s")+">");for(c=0;c<b.length;c++){f=b[c];o[f.get("uid")]=f;n={name:f.get("name"),uid:f.get("uid"),nodepath:f.get("nodepath"),type:f.get("type")};e.push("<item"+IG$._I20(n,"name;uid;type","s")+"/>");g.push(n)}e.push("</info>");e.push("</smsg>");j.init(a,{ack:"27",payload:IG$._I2d({uid:a.uid},"uid"),mbody:e.join("")},a,a.rs_mEp,null,o);j._l()}}},rs_mEp:function(f,k){var b=IG$._I18(f,"/smsg"),h=IG$._I26(b),d,j,e,c,g=0,a;for(d=0;d<h.length;d++){j=IG$._I1c(h[d]);e=k[j.uid];if(e){a=parseInt(j.status);switch(a){case 0:c="Not processed";break;case 1:c="Success";break;case 5:c="STAT_CONTENT_MISSING";break;case 6:c="STAT_FAILE_PARENT";break;case 7:c="STAT_UPPER_NODE_MISSING";break;case 8:c="STAT_NO_PARENT";break;default:c="Unknown "+j.status;break}if(a!=1){g++}e.set("logresult",c)}}if(g>0){IG$._I54(ig$.appname,""+g+" item failed to import!",null,null,1,"error")}else{IG$._I54(ig$.appname,IRm$.r1("M_SAVED"),null,null,0,"success")}},uX:function(c,b){var a,d;for(a=0;a<c.childNodes.length;a++){d=c.childNodes[a];d.set("checked",b);this.uX(d,b)}},initComponent:function(){var a=this;this.items=[{xtype:"fieldset",title:"Load File",region:"north",name:"uploadset",layout:"anchor",collapsible:true,items:[{xtype:"form",name:"mform",border:0,customowner:this,layout:{type:"hbox",align:"stretch"},items:[{xtype:"hiddenfield",name:"_mts_",value:IG$._g$a},{xtype:"fileuploadfield",name:"photo",flex:1,fieldLabel:"Data",msgTarget:"side",allowBlank:false,anchor:"100%",buttonText:IRm$.r1("L_SELECT_FILE"),buttonConfig:{margin:"0 2 0"}},{xtype:"button",text:"Upload file",handler:function(){a.ul1.call(a)}}]}]},{xtype:"form",layout:{type:"vbox",align:"stretch"},flex:1,border:0,defaults:{anchor:"100%"},items:[{xtype:"fieldcontainer",border:0,layout:{type:"hbox",align:"stretch"},items:[{xtype:"displayfield",value:"Items on file",flex:1},{xtype:"button",plain:true,text:"Import Selected",handler:function(){this._t$("cmd_imp")},scope:this}]},{xtype:"treepanel",flex:1,name:"metadata",resizable:false,collapsible:false,rootVisible:false,useArrows:true,store:{type:"treestore",root:{expanded:true},fields:["name","uid","type","nodepath","exist","existname","checked","logresult","iconCls"]},tbar:[{xtype:"button",text:"Select All",handler:function(){var c=this.down("[name=metadata]"),d=c.getRootNode(),b;for(b=0;b<d.childNodes.length;b++){d.childNodes[b].set("checked",true)}},scope:this}],columns:[{xtype:"treecolumn",flex:1,width:120,text:"Data name",dataIndex:"name",editor:{allowBlank:false}},{xtype:"gridcolumn",width:40,text:"Exist",dataIndex:"exist",editor:{allowBlank:false}},{xtype:"gridcolumn",flex:1,text:"Type",dataIndex:"type",width:80,editor:{allowBlank:false}},{xtype:"gridcolumn",flex:1,text:"Path",dataIndex:"nodepath",editor:{allowBlank:false}},{xtype:"gridcolumn",flex:1,text:"Log Result",dataIndex:"logresult"}],listeners:{checkchange:function(d,c,b){d.expand();this.uX(d,c)},scope:this}}]}];IG$._I71.superclass.initComponent.apply(this,arguments)},listeners:{afterrender:function(){var b=this,a=b.down("[name=mform]");a.getForm().errorReader=new IG$.m2ER();a.customowner=b}}});IG$.cMb3p=$s.extend($s.window,{width:400,autoHeight:true,layout:"fit",initComponent:function(){this.title=IRm$.r1("T_META_IMP");this.items=[new IG$._I71()];this.buttons=[{text:IRm$.r1("B_CLOSE"),handler:function(){this.close()},scope:this}];IG$.cMb3p.superclass.initComponent.apply(this,arguments)}});